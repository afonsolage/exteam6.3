; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\DarkSpirit.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_g_sttBLOODCASTLE_LEVEL DD 0fH
	DD	050H
	DD	0aH
	DD	03cH
	DD	051H
	DD	082H
	DD	03dH
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	0190H
	DD	0137H
	DD	0190H
	DD	0fH
	DD	0257H
	DD	0aH
	DD	0257H
_g_sttCHAOSCASTLE_LEVEL DD 0fH
	DD	031H
	DD	0fH
	DD	01dH
	DD	032H
	DD	077H
	DD	01eH
	DD	063H
	DD	078H
	DD	0b3H
	DD	064H
	DD	09fH
	DD	0b4H
	DD	0efH
	DD	0a0H
	DD	0dbH
	DD	0f0H
	DD	012bH
	DD	0dcH
	DD	0117H
	DD	012cH
	DD	0190H
	DD	0118H
	DD	0190H
	DD	0190H
	DD	0257H
	DD	0190H
	DD	0257H
_g_iChaosCastle_BlowOutDistance DD 03H
	DD	04H
	DD	03H
	DD	04H
	DD	02H
	DD	03H
	DD	00H
	DD	01H
_g_iChaosCastle_BlowOutDamage DD 0fH
	DD	0fH
	DD	0aH
	DD	05H
_g_iChaosCastle_EnterCost DD 061a8H
	DD	013880H
	DD	0249f0H
	DD	03d090H
	DD	061a80H
	DD	09eb10H
	DD	0f4240H
_g_iChaosCastle_GuardSetValue DD 09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
_g_iChaosCastle_MonsterItems DD 01c0dH
	DD	01H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	04H
_g_iChaosCastle_MonsterItemsNewServer DD 00H
	DD	00H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	01H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	01H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	03H
_g_iChaosCastle_GroundAxis DD 017H
	DD	04bH
	DD	02cH
	DD	06cH
_g_iChaosCastle_DamageAxis DD 017H
	DD	04bH
	DD	02cH
	DD	06cH
	DD	019H
	DD	04dH
	DD	02aH
	DD	06aH
	DD	01bH
	DD	04fH
	DD	028H
	DD	068H
	DD	01dH
	DD	051H
	DD	026H
	DD	066H
_g_iChaosCastle_MapHollowZone DD 017H
	DD	04bH
	DD	02cH
	DD	04cH
	DD	02bH
	DD	04dH
	DD	02cH
	DD	06cH
	DD	017H
	DD	06bH
	DD	02aH
	DD	06cH
	DD	017H
	DD	04dH
	DD	018H
	DD	06aH
	DD	017H
	DD	04bH
	DD	02cH
	DD	04cH
	DD	02bH
	DD	04dH
	DD	02cH
	DD	06cH
	DD	017H
	DD	06bH
	DD	02aH
	DD	06cH
	DD	017H
	DD	04dH
	DD	018H
	DD	06aH
	DD	019H
	DD	04dH
	DD	02aH
	DD	04eH
	DD	029H
	DD	04fH
	DD	02aH
	DD	06aH
	DD	019H
	DD	069H
	DD	028H
	DD	06aH
	DD	019H
	DD	04fH
	DD	01aH
	DD	068H
	DD	01bH
	DD	04fH
	DD	028H
	DD	050H
	DD	027H
	DD	051H
	DD	028H
	DD	068H
	DD	01bH
	DD	067H
	DD	026H
	DD	068H
	DD	01bH
	DD	051H
	DD	01cH
	DD	066H
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?Init@CDarkSpirit@@QAEXXZ			; CDarkSpirit::Init
PUBLIC	??_7CDarkSpirit@@6B@				; CDarkSpirit::`vftable'
PUBLIC	??0CDarkSpirit@@QAE@XZ				; CDarkSpirit::CDarkSpirit
PUBLIC	??_R4CDarkSpirit@@6B@				; CDarkSpirit::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCDarkSpirit@@@8				; CDarkSpirit `RTTI Type Descriptor'
PUBLIC	??_R3CDarkSpirit@@8				; CDarkSpirit::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CDarkSpirit@@8				; CDarkSpirit::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CDarkSpirit@@8			; CDarkSpirit::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R1A@?0A@EA@CObjBaseAttack@@8			; CObjBaseAttack::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R0?AVCObjBaseAttack@@@8			; CObjBaseAttack `RTTI Type Descriptor'
PUBLIC	??_R3CObjBaseAttack@@8				; CObjBaseAttack::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CObjBaseAttack@@8				; CObjBaseAttack::`RTTI Base Class Array'
EXTRN	??1CObjBaseAttack@@UAE@XZ:PROC			; CObjBaseAttack::~CObjBaseAttack
EXTRN	??0CObjBaseAttack@@QAE@XZ:PROC			; CObjBaseAttack::CObjBaseAttack
EXTRN	___security_cookie:DWORD
EXTRN	___CxxFrameHandler3:PROC
EXTRN	@__security_check_cookie@4:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECDarkSpirit@@UAEPAXI@Z:PROC			; CDarkSpirit::`vector deleting destructor'
EXTRN	?MissCheck@CObjBaseAttack@@UAEHPAUOBJECTSTRUCT@@0HHHAAHE@Z:PROC ; CObjBaseAttack::MissCheck
;	COMDAT ??_R2CObjBaseAttack@@8
; File d:\projects\exteam6.3\source\gameserver\gameserver\darkspirit.cpp
rdata$r	SEGMENT
??_R2CObjBaseAttack@@8 DD FLAT:??_R1A@?0A@EA@CObjBaseAttack@@8 ; CObjBaseAttack::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CObjBaseAttack@@8
rdata$r	SEGMENT
??_R3CObjBaseAttack@@8 DD 00H				; CObjBaseAttack::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CObjBaseAttack@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCObjBaseAttack@@@8
_DATA	SEGMENT
??_R0?AVCObjBaseAttack@@@8 DD FLAT:??_7type_info@@6B@	; CObjBaseAttack `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCObjBaseAttack@@', 00H
_DATA	ENDS
;	COMDAT ??_R1A@?0A@EA@CObjBaseAttack@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CObjBaseAttack@@8 DD FLAT:??_R0?AVCObjBaseAttack@@@8 ; CObjBaseAttack::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CObjBaseAttack@@8
rdata$r	ENDS
;	COMDAT ??_R1A@?0A@EA@CDarkSpirit@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CDarkSpirit@@8 DD FLAT:??_R0?AVCDarkSpirit@@@8 ; CDarkSpirit::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	01H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CDarkSpirit@@8
rdata$r	ENDS
;	COMDAT ??_R2CDarkSpirit@@8
rdata$r	SEGMENT
??_R2CDarkSpirit@@8 DD FLAT:??_R1A@?0A@EA@CDarkSpirit@@8 ; CDarkSpirit::`RTTI Base Class Array'
	DD	FLAT:??_R1A@?0A@EA@CObjBaseAttack@@8
rdata$r	ENDS
;	COMDAT ??_R3CDarkSpirit@@8
rdata$r	SEGMENT
??_R3CDarkSpirit@@8 DD 00H				; CDarkSpirit::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	02H
	DD	FLAT:??_R2CDarkSpirit@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCDarkSpirit@@@8
_DATA	SEGMENT
??_R0?AVCDarkSpirit@@@8 DD FLAT:??_7type_info@@6B@	; CDarkSpirit `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCDarkSpirit@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CDarkSpirit@@6B@
rdata$r	SEGMENT
??_R4CDarkSpirit@@6B@ DD 00H				; CDarkSpirit::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCDarkSpirit@@@8
	DD	FLAT:??_R3CDarkSpirit@@8
rdata$r	ENDS
;	COMDAT ??_7CDarkSpirit@@6B@
CONST	SEGMENT
??_7CDarkSpirit@@6B@ DD FLAT:??_R4CDarkSpirit@@6B@	; CDarkSpirit::`vftable'
	DD	FLAT:??_ECDarkSpirit@@UAEPAXI@Z
	DD	FLAT:?MissCheck@CObjBaseAttack@@UAEHPAUOBJECTSTRUCT@@0HHHAAHE@Z
CONST	ENDS
xdata$x	SEGMENT
__unwindtable$??0CDarkSpirit@@QAE@XZ DD 0ffffffffH
	DD	FLAT:__unwindfunclet$??0CDarkSpirit@@QAE@XZ$0
__ehfuncinfo$??0CDarkSpirit@@QAE@XZ DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$??0CDarkSpirit@@QAE@XZ
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
; Function compile flags: /Odtp /ZI
xdata$x	ENDS
_TEXT	SEGMENT
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
??0CDarkSpirit@@QAE@XZ PROC				; CDarkSpirit::CDarkSpirit
; _this$ = ecx

; 29   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??0CDarkSpirit@@QAE@XZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	83 ec 44	 sub	 esp, 68			; 00000044H
  00014	53		 push	 ebx
  00015	56		 push	 esi
  00016	57		 push	 edi
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	50		 push	 eax
  0001f	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00022	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00028	89 4d f0	 mov	 DWORD PTR _this$[ebp], ecx
  0002b	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0002e	e8 00 00 00 00	 call	 ??0CObjBaseAttack@@QAE@XZ ; CObjBaseAttack::CObjBaseAttack
  00033	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  0003a	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0003d	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CDarkSpirit@@6B@
  00043	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00046	c7 40 20 00 00
	00 00		 mov	 DWORD PTR [eax+32], 0

; 30   : 	this->Init();

  0004d	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00050	e8 00 00 00 00	 call	 ?Init@CDarkSpirit@@QAEXXZ ; CDarkSpirit::Init

; 31   : }

  00055	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  0005c	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0005f	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00062	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00069	59		 pop	 ecx
  0006a	5f		 pop	 edi
  0006b	5e		 pop	 esi
  0006c	5b		 pop	 ebx
  0006d	8b e5		 mov	 esp, ebp
  0006f	5d		 pop	 ebp
  00070	c3		 ret	 0
_TEXT	ENDS
text$x	SEGMENT
__unwindfunclet$??0CDarkSpirit@@QAE@XZ$0:
  00000	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00003	e9 00 00 00 00	 jmp	 ??1CObjBaseAttack@@UAE@XZ ; CObjBaseAttack::~CObjBaseAttack
__ehhandler$??0CDarkSpirit@@QAE@XZ:
  00008	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  0000c	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0000f	8b 4a ac	 mov	 ecx, DWORD PTR [edx-84]
  00012	33 c8		 xor	 ecx, eax
  00014	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00019	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??0CDarkSpirit@@QAE@XZ
  0001e	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??0CDarkSpirit@@QAE@XZ ENDP				; CDarkSpirit::CDarkSpirit
PUBLIC	??1CDarkSpirit@@UAE@XZ				; CDarkSpirit::~CDarkSpirit
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCDarkSpirit@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCDarkSpirit@@UAEPAXI@Z PROC				; CDarkSpirit::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CDarkSpirit@@UAE@XZ	; CDarkSpirit::~CDarkSpirit
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0c		 je	 SHORT $LN1@scalar
  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	50		 push	 eax
  00020	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00025	83 c4 04	 add	 esp, 4
$LN1@scalar:
  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	5f		 pop	 edi
  0002c	5e		 pop	 esi
  0002d	5b		 pop	 ebx
  0002e	8b e5		 mov	 esp, ebp
  00030	5d		 pop	 ebp
  00031	c2 04 00	 ret	 4
??_GCDarkSpirit@@UAEPAXI@Z ENDP				; CDarkSpirit::`scalar deleting destructor'
; Function compile flags: /Odtp /ZI
_TEXT	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CDarkSpirit@@UAE@XZ PROC				; CDarkSpirit::~CDarkSpirit
; _this$ = ecx

; 34   : {

  00080	55		 push	 ebp
  00081	8b ec		 mov	 ebp, esp
  00083	83 ec 44	 sub	 esp, 68			; 00000044H
  00086	53		 push	 ebx
  00087	56		 push	 esi
  00088	57		 push	 edi
  00089	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0008c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0008f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CDarkSpirit@@6B@

; 35   : 	return;
; 36   : }

  00095	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00098	e8 00 00 00 00	 call	 ??1CObjBaseAttack@@UAE@XZ ; CObjBaseAttack::~CObjBaseAttack
  0009d	5f		 pop	 edi
  0009e	5e		 pop	 esi
  0009f	5b		 pop	 ebx
  000a0	8b e5		 mov	 esp, ebp
  000a2	5d		 pop	 ebp
  000a3	c3		 ret	 0
??1CDarkSpirit@@UAE@XZ ENDP				; CDarkSpirit::~CDarkSpirit
; Function compile flags: /Odtp /ZI
_this$ = -4						; size = 4
?Init@CDarkSpirit@@QAEXXZ PROC				; CDarkSpirit::Init
; _this$ = ecx

; 39   : {

  000b0	55		 push	 ebp
  000b1	8b ec		 mov	 ebp, esp
  000b3	83 ec 44	 sub	 esp, 68			; 00000044H
  000b6	53		 push	 ebx
  000b7	56		 push	 esi
  000b8	57		 push	 edi
  000b9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 40   : 	this->m_AttackDamageMin = 0;

  000bc	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000bf	c7 40 04 00 00
	00 00		 mov	 DWORD PTR [eax+4], 0

; 41   : 	this->m_AttackDamageMax = 0;

  000c6	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000c9	c7 40 08 00 00
	00 00		 mov	 DWORD PTR [eax+8], 0

; 42   : 	this->m_AttackSpeed = 0;

  000d0	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000d3	c7 40 0c 00 00
	00 00		 mov	 DWORD PTR [eax+12], 0

; 43   : 	this->m_SuccessAttackRate = 0;

  000da	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000dd	c7 40 10 00 00
	00 00		 mov	 DWORD PTR [eax+16], 0

; 44   : 	this->m_dwLastAttackTime = 0;

  000e4	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000e7	c7 40 1c 00 00
	00 00		 mov	 DWORD PTR [eax+28], 0

; 45   : 	this->m_iMasterIndex = -1;

  000ee	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000f1	c7 40 14 ff ff
	ff ff		 mov	 DWORD PTR [eax+20], -1

; 46   : 	this->m_iTargetIndex = -1;

  000f8	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000fb	c7 40 18 ff ff
	ff ff		 mov	 DWORD PTR [eax+24], -1

; 47   : 	this->m_pPetItem = NULL;

  00102	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00105	c7 40 24 00 00
	00 00		 mov	 DWORD PTR [eax+36], 0

; 48   : }

  0010c	5f		 pop	 edi
  0010d	5e		 pop	 esi
  0010e	5b		 pop	 ebx
  0010f	8b e5		 mov	 esp, ebp
  00111	5d		 pop	 ebp
  00112	c3		 ret	 0
?Init@CDarkSpirit@@QAEXXZ ENDP				; CDarkSpirit::Init
_TEXT	ENDS
PUBLIC	?ModeAttakTarget@CDarkSpirit@@QAEXXZ		; CDarkSpirit::ModeAttakTarget
PUBLIC	?ModeAttackWithMaster@CDarkSpirit@@QAEXXZ	; CDarkSpirit::ModeAttackWithMaster
PUBLIC	?ModeAttackRandom@CDarkSpirit@@QAEXXZ		; CDarkSpirit::ModeAttackRandom
PUBLIC	?ModeNormal@CDarkSpirit@@QAEXXZ			; CDarkSpirit::ModeNormal
PUBLIC	__real@0000000000000000
PUBLIC	?Run@CDarkSpirit@@QAEXXZ			; CDarkSpirit::Run
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?GetAttr@MapClass@@QAEEHH@Z:PROC		; MapClass::GetAttr
EXTRN	?MapC@@3PAVMapClass@@A:BYTE			; MapC
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	__fltused:DWORD
;	COMDAT __real@0000000000000000
CONST	SEGMENT
__real@0000000000000000 DQ 00000000000000000r	; 0
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv148 = -80						; size = 4
_attr$ = -9						; size = 1
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
?Run@CDarkSpirit@@QAEXXZ PROC				; CDarkSpirit::Run
; _this$ = ecx

; 51   : {

  00120	55		 push	 ebp
  00121	8b ec		 mov	 ebp, esp
  00123	83 ec 50	 sub	 esp, 80			; 00000050H
  00126	53		 push	 ebx
  00127	56		 push	 esi
  00128	57		 push	 edi
  00129	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 52   : 	if ( this->m_iMasterIndex == -1 )

  0012c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0012f	83 78 14 ff	 cmp	 DWORD PTR [eax+20], -1
  00133	75 05		 jne	 SHORT $LN13@Run

; 53   : 	{
; 54   : 		return;

  00135	e9 33 01 00 00	 jmp	 $LN14@Run
$LN13@Run:

; 55   : 	}
; 56   : 
; 57   : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  0013a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0013d	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00140	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00146	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0014c	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 58   : 
; 59   : 	if ( lpObj->Class != CLASS_DARKLORD )

  0014f	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00152	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  00159	83 f9 04	 cmp	 ecx, 4
  0015c	74 05		 je	 SHORT $LN12@Run

; 60   : 	{
; 61   : 		return;

  0015e	e9 0a 01 00 00	 jmp	 $LN14@Run
$LN12@Run:

; 62   : 	}
; 63   : 
; 64   : 	if ( this->m_pPetItem == NULL )

  00163	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00166	83 78 24 00	 cmp	 DWORD PTR [eax+36], 0
  0016a	75 05		 jne	 SHORT $LN11@Run

; 65   : 	{
; 66   : 		return;

  0016c	e9 fc 00 00 00	 jmp	 $LN14@Run
$LN11@Run:

; 67   : 	}
; 68   : 
; 69   : 	if ( this->m_pPetItem->m_Durability <= 0.0f )

  00171	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00174	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00177	d9 41 24	 fld	 DWORD PTR [ecx+36]
  0017a	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  00180	df e0		 fnstsw	 ax
  00182	f6 c4 41	 test	 ah, 65			; 00000041H
  00185	7a 05		 jp	 SHORT $LN10@Run

; 70   : 	{
; 71   : 		return;

  00187	e9 e1 00 00 00	 jmp	 $LN14@Run
$LN10@Run:

; 72   : 	}
; 73   : 
; 74   : 	BYTE attr = MapC[lpObj->MapNumber].GetAttr(lpObj->X, lpObj->Y);

  0018c	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0018f	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  00196	51		 push	 ecx
  00197	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0019a	0f bf 82 44 01
	00 00		 movsx	 eax, WORD PTR [edx+324]
  001a1	50		 push	 eax
  001a2	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  001a5	0f b6 89 49 01
	00 00		 movzx	 ecx, BYTE PTR [ecx+329]
  001ac	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  001b2	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  001b8	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  001bd	88 45 f7	 mov	 BYTE PTR _attr$[ebp], al

; 75   : 
; 76   : 	if ( (attr&1) != 0 )

  001c0	0f b6 45 f7	 movzx	 eax, BYTE PTR _attr$[ebp]
  001c4	83 e0 01	 and	 eax, 1
  001c7	74 05		 je	 SHORT $LN9@Run

; 77   : 	{
; 78   : 		return;

  001c9	e9 9f 00 00 00	 jmp	 $LN14@Run
$LN9@Run:

; 79   : 	}
; 80   : 
; 81   : 	if(this->m_pPetItem->m_RequireLeaderShip != 0 && //season4 add-on
; 82   : 		(lpObj->Leadership + lpObj->AddLeadership < this->m_pPetItem->m_RequireLeaderShip))

  001ce	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  001d1	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  001d4	0f b7 51 54	 movzx	 edx, WORD PTR [ecx+84]
  001d8	85 d2		 test	 edx, edx
  001da	74 26		 je	 SHORT $LN8@Run
  001dc	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  001df	0f b7 88 18 01
	00 00		 movzx	 ecx, WORD PTR [eax+280]
  001e6	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  001e9	0f b7 82 1a 01
	00 00		 movzx	 eax, WORD PTR [edx+282]
  001f0	03 c8		 add	 ecx, eax
  001f2	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  001f5	8b 42 24	 mov	 eax, DWORD PTR [edx+36]
  001f8	0f b7 50 54	 movzx	 edx, WORD PTR [eax+84]
  001fc	3b ca		 cmp	 ecx, edx
  001fe	7d 02		 jge	 SHORT $LN8@Run

; 83   : 	{
; 84   : 		return;

  00200	eb 6b		 jmp	 SHORT $LN14@Run
$LN8@Run:

; 85   : 	}
; 86   : 
; 87   : 	if ( this->m_dwLastAttackTime > GetTickCount() )

  00202	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00208	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0020b	39 41 1c	 cmp	 DWORD PTR [ecx+28], eax
  0020e	76 02		 jbe	 SHORT $LN7@Run

; 88   : 	{
; 89   : 		return;

  00210	eb 5b		 jmp	 SHORT $LN14@Run
$LN7@Run:

; 90   : 	}
; 91   : 
; 92   : 	this->m_dwLastAttackTime = ( GetTickCount() + 1500 ) - ( this->m_AttackSpeed * 10 );

  00212	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00218	05 dc 05 00 00	 add	 eax, 1500		; 000005dcH
  0021d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00220	8b 51 0c	 mov	 edx, DWORD PTR [ecx+12]
  00223	6b d2 0a	 imul	 edx, 10			; 0000000aH
  00226	2b c2		 sub	 eax, edx
  00228	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0022b	89 41 1c	 mov	 DWORD PTR [ecx+28], eax

; 93   : 
; 94   : 	switch ( this->m_ActionMode )

  0022e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00231	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  00234	89 4d b0	 mov	 DWORD PTR tv148[ebp], ecx
  00237	83 7d b0 03	 cmp	 DWORD PTR tv148[ebp], 3
  0023b	77 30		 ja	 SHORT $LN5@Run
  0023d	8b 55 b0	 mov	 edx, DWORD PTR tv148[ebp]
  00240	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN16@Run[edx*4]
$LN4@Run:

; 95   : 	{
; 96   : 		case PetItem_Mode_Normal:
; 97   : 			this->ModeNormal();

  00247	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0024a	e8 00 00 00 00	 call	 ?ModeNormal@CDarkSpirit@@QAEXXZ ; CDarkSpirit::ModeNormal

; 98   : 			break;

  0024f	eb 1c		 jmp	 SHORT $LN5@Run
$LN3@Run:

; 99   : 
; 100  : 		case PetItem_Mode_Attack_Random:
; 101  : 			this->ModeAttackRandom();

  00251	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00254	e8 00 00 00 00	 call	 ?ModeAttackRandom@CDarkSpirit@@QAEXXZ ; CDarkSpirit::ModeAttackRandom

; 102  : 			break;

  00259	eb 12		 jmp	 SHORT $LN5@Run
$LN2@Run:

; 103  : 
; 104  : 		case PetItem_Mode_Attack_WithMaster:
; 105  : 			this->ModeAttackWithMaster();

  0025b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0025e	e8 00 00 00 00	 call	 ?ModeAttackWithMaster@CDarkSpirit@@QAEXXZ ; CDarkSpirit::ModeAttackWithMaster

; 106  : 			break;

  00263	eb 08		 jmp	 SHORT $LN5@Run
$LN1@Run:

; 107  : 
; 108  : 		case PetItem_Mode_Attack_Target:
; 109  : 			this->ModeAttakTarget();

  00265	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00268	e8 00 00 00 00	 call	 ?ModeAttakTarget@CDarkSpirit@@QAEXXZ ; CDarkSpirit::ModeAttakTarget
$LN5@Run:
$LN14@Run:

; 110  : 			break;
; 111  : 	}
; 112  : }

  0026d	5f		 pop	 edi
  0026e	5e		 pop	 esi
  0026f	5b		 pop	 ebx
  00270	8b e5		 mov	 esp, ebp
  00272	5d		 pop	 ebp
  00273	c3		 ret	 0
$LN16@Run:
  00274	00 00 00 00	 DD	 $LN4@Run
  00278	00 00 00 00	 DD	 $LN3@Run
  0027c	00 00 00 00	 DD	 $LN2@Run
  00280	00 00 00 00	 DD	 $LN1@Run
?Run@CDarkSpirit@@QAEXXZ ENDP				; CDarkSpirit::Run
; Function compile flags: /Odtp /ZI
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
?ModeNormal@CDarkSpirit@@QAEXXZ PROC			; CDarkSpirit::ModeNormal
; _this$ = ecx

; 115  : {

  00290	55		 push	 ebp
  00291	8b ec		 mov	 ebp, esp
  00293	83 ec 48	 sub	 esp, 72			; 00000048H
  00296	53		 push	 ebx
  00297	56		 push	 esi
  00298	57		 push	 edi
  00299	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 116  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  0029c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0029f	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  002a2	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  002a8	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002ae	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 117  : }

  002b1	5f		 pop	 edi
  002b2	5e		 pop	 esi
  002b3	5b		 pop	 ebx
  002b4	8b e5		 mov	 esp, ebp
  002b6	5d		 pop	 ebp
  002b7	c3		 ret	 0
?ModeNormal@CDarkSpirit@@QAEXXZ ENDP			; CDarkSpirit::ModeNormal
_TEXT	ENDS
PUBLIC	?RangeAttack@CDarkSpirit@@QAEXHH@Z		; CDarkSpirit::RangeAttack
PUBLIC	?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z		; CDarkSpirit::SendAttackMsg
PUBLIC	__real@403e000000000000
PUBLIC	__$ArrayPad$
EXTRN	?gObjCalDistance@@YAHPAUOBJECTSTRUCT@@0@Z:PROC	; gObjCalDistance
EXTRN	?gObjTargetGuildWarCheck@@YAHPAUOBJECTSTRUCT@@0@Z:PROC ; gObjTargetGuildWarCheck
EXTRN	_rand:PROC
;	COMDAT __real@403e000000000000
CONST	SEGMENT
__real@403e000000000000 DQ 0403e000000000000r	; 30
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv246 = -428						; size = 4
tv233 = -428						; size = 4
tv319 = -424						; size = 8
tv317 = -424						; size = 8
_target$233630 = -352					; size = 4
_target$233628 = -348					; size = 4
_lc85$233618 = -344					; size = 4
_criticaldamage$ = -340					; size = 4
_EnableAttack$ = -336					; size = 4
_DuelIndex$ = -332					; size = 4
_dis$ = -328						; size = 4
_FindObjCount$ = -324					; size = 4
_FindObj$ = -320					; size = 300
_count$ = -20						; size = 4
_tObjNum$ = -16						; size = 4
_lpObj$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ModeAttackRandom@CDarkSpirit@@QAEXXZ PROC		; CDarkSpirit::ModeAttackRandom
; _this$ = ecx

; 120  : {

  002c0	55		 push	 ebp
  002c1	8b ec		 mov	 ebp, esp
  002c3	81 ec ac 01 00
	00		 sub	 esp, 428		; 000001acH
  002c9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  002ce	33 c5		 xor	 eax, ebp
  002d0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  002d3	53		 push	 ebx
  002d4	56		 push	 esi
  002d5	57		 push	 edi
  002d6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 121  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  002d9	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  002dc	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  002df	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  002e5	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002eb	89 4d f4	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 122  : 	int tObjNum;
; 123  : 	int count = 0;

  002ee	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0

; 124  : 	int FindObj[MAX_VIEWPORT];
; 125  : 	int FindObjCount = 0;

  002f5	c7 85 bc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _FindObjCount$[ebp], 0

; 126  : 	int dis;
; 127  : 	int DuelIndex = lpObj->m_iDuelUser;

  002ff	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00302	8b 88 b8 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3768]
  00308	89 8d b4 fe ff
	ff		 mov	 DWORD PTR _DuelIndex$[ebp], ecx

; 128  : 	BOOL EnableAttack;
; 129  : 	int criticaldamage = 0;

  0030e	c7 85 ac fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _criticaldamage$[ebp], 0

; 130  : 
; 131  : 	if( 30 + lpObj->m_MPSkillOpt.MpsDarkSpiritStr2 > rand() % 100 )

  00318	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0031b	d9 80 08 27 00
	00		 fld	 DWORD PTR [eax+9992]
  00321	dc 05 00 00 00
	00		 fadd	 QWORD PTR __real@403e000000000000
  00327	dd 9d 58 fe ff
	ff		 fstp	 QWORD PTR tv317[ebp]
  0032d	e8 00 00 00 00	 call	 _rand
  00332	99		 cdq
  00333	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00338	f7 f9		 idiv	 ecx
  0033a	89 95 54 fe ff
	ff		 mov	 DWORD PTR tv233[ebp], edx
  00340	db 85 54 fe ff
	ff		 fild	 DWORD PTR tv233[ebp]
  00346	dc 9d 58 fe ff
	ff		 fcomp	 QWORD PTR tv317[ebp]
  0034c	df e0		 fnstsw	 ax
  0034e	f6 c4 05	 test	 ah, 5
  00351	7a 0a		 jp	 SHORT $LN23@ModeAttack

; 132  : 	{
; 133  : 		criticaldamage	= 1;

  00353	c7 85 ac fe ff
	ff 01 00 00 00	 mov	 DWORD PTR _criticaldamage$[ebp], 1
$LN23@ModeAttack:

; 134  : 		//iActionType		= 1;	
; 135  : 	}
; 136  : 	// ----
; 137  : 	if( 30 + lpObj->m_MPSkillOpt.MpsDarkSpiritStr3 > rand() % 100 )

  0035d	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00360	d9 80 0c 27 00
	00		 fld	 DWORD PTR [eax+9996]
  00366	dc 05 00 00 00
	00		 fadd	 QWORD PTR __real@403e000000000000
  0036c	dd 9d 58 fe ff
	ff		 fstp	 QWORD PTR tv319[ebp]
  00372	e8 00 00 00 00	 call	 _rand
  00377	99		 cdq
  00378	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0037d	f7 f9		 idiv	 ecx
  0037f	89 95 54 fe ff
	ff		 mov	 DWORD PTR tv246[ebp], edx
  00385	db 85 54 fe ff
	ff		 fild	 DWORD PTR tv246[ebp]
  0038b	dc 9d 58 fe ff
	ff		 fcomp	 QWORD PTR tv319[ebp]
  00391	df e0		 fnstsw	 ax
  00393	f6 c4 05	 test	 ah, 5
  00396	7a 0a		 jp	 SHORT $LN22@ModeAttack

; 138  : 	{
; 139  : 		criticaldamage	= 2;

  00398	c7 85 ac fe ff
	ff 02 00 00 00	 mov	 DWORD PTR _criticaldamage$[ebp], 2
$LN22@ModeAttack:

; 140  : 		//iActionType		= 1;
; 141  : 	}
; 142  : 
; 143  : 	while ( true )

  003a2	b8 01 00 00 00	 mov	 eax, 1
  003a7	85 c0		 test	 eax, eax
  003a9	0f 84 45 02 00
	00		 je	 $LN20@ModeAttack

; 144  : 	{
; 145  : 		if ( lpObj->VpPlayer2[count].state != 0 )

  003af	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  003b2	6b c0 0c	 imul	 eax, 12			; 0000000cH
  003b5	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003b8	0f be 94 01 ac
	08 00 00	 movsx	 edx, BYTE PTR [ecx+eax+2220]
  003c0	85 d2		 test	 edx, edx
  003c2	0f 84 16 02 00
	00		 je	 $LN5@ModeAttack

; 146  : 		{
; 147  : 			if ( lpObj->VpPlayer2[count].type == OBJ_MONSTER )

  003c8	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  003cb	6b c0 0c	 imul	 eax, 12			; 0000000cH
  003ce	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003d1	0f b6 94 01 b0
	08 00 00	 movzx	 edx, BYTE PTR [ecx+eax+2224]
  003d9	83 fa 02	 cmp	 edx, 2
  003dc	0f 85 fc 01 00
	00		 jne	 $LN5@ModeAttack

; 148  : 			{
; 149  : 				tObjNum = lpObj->VpPlayer2[count].number;

  003e2	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  003e5	6b c0 0c	 imul	 eax, 12			; 0000000cH
  003e8	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  003eb	0f bf 94 01 ae
	08 00 00	 movsx	 edx, WORD PTR [ecx+eax+2222]
  003f3	89 55 f0	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 150  : 
; 151  : 				if ( tObjNum >= 0 )

  003f6	83 7d f0 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  003fa	0f 8c de 01 00
	00		 jl	 $LN5@ModeAttack

; 152  : 				{
; 153  : 					EnableAttack = FALSE;

  00400	c7 85 b0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _EnableAttack$[ebp], 0

; 154  : 
; 155  : 					if ( gObj[tObjNum].Life > 0.0f && (gObj[tObjNum].Class < 100 || gObj[tObjNum].Class  > 110 ) )

  0040a	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  0040d	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00413	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00419	d9 84 01 fc 00
	00 00		 fld	 DWORD PTR [ecx+eax+252]
  00420	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  00426	df e0		 fnstsw	 ax
  00428	f6 c4 41	 test	 ah, 65			; 00000041H
  0042b	0f 85 ad 01 00
	00		 jne	 $LN5@ModeAttack
  00431	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00434	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0043a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00440	0f b7 94 01 b8
	00 00 00	 movzx	 edx, WORD PTR [ecx+eax+184]
  00448	83 fa 64	 cmp	 edx, 100		; 00000064H
  0044b	7c 20		 jl	 SHORT $LN15@ModeAttack
  0044d	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00450	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00456	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0045c	0f b7 94 01 b8
	00 00 00	 movzx	 edx, WORD PTR [ecx+eax+184]
  00464	83 fa 6e	 cmp	 edx, 110		; 0000006eH
  00467	0f 8e 71 01 00
	00		 jle	 $LN5@ModeAttack
$LN15@ModeAttack:

; 156  : 					{
; 157  : 						if ( lpObj->VpPlayer2[count].type == OBJ_MONSTER && gObj[tObjNum].m_RecallMon < 0)

  0046d	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  00470	6b c0 0c	 imul	 eax, 12			; 0000000cH
  00473	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00476	0f b6 94 01 b0
	08 00 00	 movzx	 edx, BYTE PTR [ecx+eax+2224]
  0047e	83 fa 02	 cmp	 edx, 2
  00481	75 28		 jne	 SHORT $LN14@ModeAttack
  00483	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00486	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0048c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00492	83 bc 01 50 04
	00 00 00	 cmp	 DWORD PTR [ecx+eax+1104], 0
  0049a	7d 0f		 jge	 SHORT $LN14@ModeAttack

; 158  : 						{
; 159  : 							EnableAttack = TRUE;

  0049c	c7 85 b0 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR _EnableAttack$[ebp], 1
  004a6	e9 bc 00 00 00	 jmp	 $LN8@ModeAttack
$LN14@ModeAttack:

; 160  : 						}
; 161  : 						else if ( DuelIndex == tObjNum )

  004ab	8b 85 b4 fe ff
	ff		 mov	 eax, DWORD PTR _DuelIndex$[ebp]
  004b1	3b 45 f0	 cmp	 eax, DWORD PTR _tObjNum$[ebp]
  004b4	75 0f		 jne	 SHORT $LN12@ModeAttack

; 162  : 						{
; 163  : 							EnableAttack = TRUE;

  004b6	c7 85 b0 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR _EnableAttack$[ebp], 1

; 164  : 						}
; 165  : 						else

  004c0	e9 a2 00 00 00	 jmp	 $LN8@ModeAttack
$LN12@ModeAttack:

; 166  : 						{
; 167  : 							int lc85 = gObj[tObjNum].m_Index;

  004c5	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  004c8	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004ce	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004d4	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  004d7	89 95 a8 fe ff
	ff		 mov	 DWORD PTR _lc85$233618[ebp], edx

; 168  : 
; 169  : 							if ( gObj[tObjNum].Type == OBJ_MONSTER )

  004dd	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  004e0	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004e6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004ec	0f b7 54 01 68	 movzx	 edx, WORD PTR [ecx+eax+104]
  004f1	83 fa 02	 cmp	 edx, 2
  004f4	75 43		 jne	 SHORT $LN9@ModeAttack

; 170  : 							{
; 171  : 								if ( gObj[tObjNum].m_RecallMon >= 0 )

  004f6	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  004f9	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004ff	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00505	83 bc 01 50 04
	00 00 00	 cmp	 DWORD PTR [ecx+eax+1104], 0
  0050d	7c 2a		 jl	 SHORT $LN9@ModeAttack

; 172  : 								{
; 173  : 									lc85 = gObj[gObj[tObjNum].m_RecallMon].m_Index; 

  0050f	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00512	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00518	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0051e	8b 94 01 50 04
	00 00		 mov	 edx, DWORD PTR [ecx+eax+1104]
  00525	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  0052b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00530	8b 0c 10	 mov	 ecx, DWORD PTR [eax+edx]
  00533	89 8d a8 fe ff
	ff		 mov	 DWORD PTR _lc85$233618[ebp], ecx
$LN9@ModeAttack:

; 174  : 								}
; 175  : 							}
; 176  : 
; 177  : 							if ( gObjTargetGuildWarCheck(lpObj, &gObj[lc85]) == TRUE )

  00539	8b 85 a8 fe ff
	ff		 mov	 eax, DWORD PTR _lc85$233618[ebp]
  0053f	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00545	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0054b	50		 push	 eax
  0054c	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0054f	51		 push	 ecx
  00550	e8 00 00 00 00	 call	 ?gObjTargetGuildWarCheck@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjTargetGuildWarCheck
  00555	83 c4 08	 add	 esp, 8
  00558	83 f8 01	 cmp	 eax, 1
  0055b	75 0a		 jne	 SHORT $LN8@ModeAttack

; 178  : 							{
; 179  : 								EnableAttack = TRUE;

  0055d	c7 85 b0 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR _EnableAttack$[ebp], 1
$LN8@ModeAttack:

; 180  : 							}
; 181  : 						}
; 182  : 						// ----
; 183  : #ifdef IMPERIAL_CONFLICT_NEW
; 184  : 						if( g_ImperialGuardian.IsEventMap(gObj[tObjNum].MapNumber) )
; 185  : 						{
; 186  : 							if( gObj[tObjNum].Live && g_ImperialGuardian.IsAttackAbleMonster(gObj[tObjNum].m_Index) )
; 187  : 							{
; 188  : 								EnableAttack = true;
; 189  : 							}
; 190  : 						}
; 191  : #endif
; 192  : 						// ----
; 193  : 
; 194  : 						if ( EnableAttack != FALSE )

  00567	83 bd b0 fe ff
	ff 00		 cmp	 DWORD PTR _EnableAttack$[ebp], 0
  0056e	74 6e		 je	 SHORT $LN5@ModeAttack

; 195  : 						{
; 196  : 							if ( lpObj->MapNumber == gObj[tObjNum].MapNumber )

  00570	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00573	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0057a	8b 55 f0	 mov	 edx, DWORD PTR _tObjNum$[ebp]
  0057d	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  00583	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00588	0f b6 94 10 49
	01 00 00	 movzx	 edx, BYTE PTR [eax+edx+329]
  00590	3b ca		 cmp	 ecx, edx
  00592	75 4a		 jne	 SHORT $LN5@ModeAttack

; 197  : 							{
; 198  : 								dis = gObjCalDistance(lpObj, &gObj[tObjNum]);

  00594	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00597	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0059d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005a3	50		 push	 eax
  005a4	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  005a7	51		 push	 ecx
  005a8	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjCalDistance
  005ad	83 c4 08	 add	 esp, 8
  005b0	89 85 b8 fe ff
	ff		 mov	 DWORD PTR _dis$[ebp], eax

; 199  : 
; 200  : 								if ( dis < RAVEN_ATTACK_DISTANCE-2 )

  005b6	83 bd b8 fe ff
	ff 05		 cmp	 DWORD PTR _dis$[ebp], 5
  005bd	7d 1f		 jge	 SHORT $LN5@ModeAttack

; 201  : 								{
; 202  : 									FindObj[FindObjCount] = tObjNum;

  005bf	8b 85 bc fe ff
	ff		 mov	 eax, DWORD PTR _FindObjCount$[ebp]
  005c5	8b 4d f0	 mov	 ecx, DWORD PTR _tObjNum$[ebp]
  005c8	89 8c 85 c0 fe
	ff ff		 mov	 DWORD PTR _FindObj$[ebp+eax*4], ecx

; 203  : 									FindObjCount++;

  005cf	8b 85 bc fe ff
	ff		 mov	 eax, DWORD PTR _FindObjCount$[ebp]
  005d5	83 c0 01	 add	 eax, 1
  005d8	89 85 bc fe ff
	ff		 mov	 DWORD PTR _FindObjCount$[ebp], eax
$LN5@ModeAttack:

; 204  : 								}
; 205  : 							}
; 206  : 						}
; 207  : 					}
; 208  : 				}
; 209  : 			}
; 210  : 		}
; 211  : 
; 212  : 		count++;

  005de	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  005e1	83 c0 01	 add	 eax, 1
  005e4	89 45 ec	 mov	 DWORD PTR _count$[ebp], eax

; 213  : 
; 214  : 		if ( count > MAX_VIEWPORT-1 )

  005e7	83 7d ec 4a	 cmp	 DWORD PTR _count$[ebp], 74 ; 0000004aH
  005eb	7e 02		 jle	 SHORT $LN4@ModeAttack

; 215  : 		{
; 216  : 			break;

  005ed	eb 05		 jmp	 SHORT $LN20@ModeAttack
$LN4@ModeAttack:

; 217  : 		}
; 218  : 	}

  005ef	e9 ae fd ff ff	 jmp	 $LN22@ModeAttack
$LN20@ModeAttack:

; 219  : 
; 220  : 	if ( FindObjCount != 0 )

  005f4	83 bd bc fe ff
	ff 00		 cmp	 DWORD PTR _FindObjCount$[ebp], 0
  005fb	74 70		 je	 SHORT $LN1@ModeAttack

; 221  : 	{
; 222  : 		if ( criticaldamage != 0 )

  005fd	83 bd ac fe ff
	ff 00		 cmp	 DWORD PTR _criticaldamage$[ebp], 0
  00604	74 39		 je	 SHORT $LN2@ModeAttack

; 223  : 		{
; 224  : 			int target = FindObj[rand()%FindObjCount];

  00606	e8 00 00 00 00	 call	 _rand
  0060b	99		 cdq
  0060c	f7 bd bc fe ff
	ff		 idiv	 DWORD PTR _FindObjCount$[ebp]
  00612	8b 84 95 c0 fe
	ff ff		 mov	 eax, DWORD PTR _FindObj$[ebp+edx*4]
  00619	89 85 a4 fe ff
	ff		 mov	 DWORD PTR _target$233628[ebp], eax

; 225  : 			this->SendAttackMsg( lpObj->m_Index, target, criticaldamage, 0);

  0061f	6a 00		 push	 0
  00621	8b 85 ac fe ff
	ff		 mov	 eax, DWORD PTR _criticaldamage$[ebp]
  00627	50		 push	 eax
  00628	8b 8d a4 fe ff
	ff		 mov	 ecx, DWORD PTR _target$233628[ebp]
  0062e	51		 push	 ecx
  0062f	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00632	8b 02		 mov	 eax, DWORD PTR [edx]
  00634	50		 push	 eax
  00635	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00638	e8 00 00 00 00	 call	 ?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z ; CDarkSpirit::SendAttackMsg

; 226  : 		}
; 227  : 		else

  0063d	eb 2e		 jmp	 SHORT $LN1@ModeAttack
$LN2@ModeAttack:

; 228  : 		{
; 229  : 			int target = FindObj[rand()%FindObjCount];

  0063f	e8 00 00 00 00	 call	 _rand
  00644	99		 cdq
  00645	f7 bd bc fe ff
	ff		 idiv	 DWORD PTR _FindObjCount$[ebp]
  0064b	8b 84 95 c0 fe
	ff ff		 mov	 eax, DWORD PTR _FindObj$[ebp+edx*4]
  00652	89 85 a0 fe ff
	ff		 mov	 DWORD PTR _target$233630[ebp], eax

; 230  : 			this->RangeAttack( lpObj->m_Index, target);

  00658	8b 85 a0 fe ff
	ff		 mov	 eax, DWORD PTR _target$233630[ebp]
  0065e	50		 push	 eax
  0065f	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00662	8b 11		 mov	 edx, DWORD PTR [ecx]
  00664	52		 push	 edx
  00665	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00668	e8 00 00 00 00	 call	 ?RangeAttack@CDarkSpirit@@QAEXHH@Z ; CDarkSpirit::RangeAttack
$LN1@ModeAttack:

; 231  : 		}
; 232  : 	}
; 233  : }

  0066d	5f		 pop	 edi
  0066e	5e		 pop	 esi
  0066f	5b		 pop	 ebx
  00670	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00673	33 cd		 xor	 ecx, ebp
  00675	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0067a	8b e5		 mov	 esp, ebp
  0067c	5d		 pop	 ebp
  0067d	c3		 ret	 0
?ModeAttackRandom@CDarkSpirit@@QAEXXZ ENDP		; CDarkSpirit::ModeAttackRandom
_TEXT	ENDS
PUBLIC	?ReSetTarget@CDarkSpirit@@QAEXH@Z		; CDarkSpirit::ReSetTarget
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_criticaldamage$233641 = -20				; size = 4
_dis$ = -16						; size = 4
_count$ = -12						; size = 4
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
?ModeAttackWithMaster@CDarkSpirit@@QAEXXZ PROC		; CDarkSpirit::ModeAttackWithMaster
; _this$ = ecx

; 236  : {

  00680	55		 push	 ebp
  00681	8b ec		 mov	 ebp, esp
  00683	83 ec 54	 sub	 esp, 84			; 00000054H
  00686	53		 push	 ebx
  00687	56		 push	 esi
  00688	57		 push	 edi
  00689	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 237  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  0068c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0068f	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00692	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00698	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0069e	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 238  : 	int count = 0;

  006a1	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0

; 239  : 	int dis;
; 240  : 
; 241  : 	if ( this->m_iTargetIndex == -1 )

  006a8	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  006ab	83 78 18 ff	 cmp	 DWORD PTR [eax+24], -1
  006af	75 05		 jne	 SHORT $LN8@ModeAttack@2

; 242  : 	{
; 243  : 		return;

  006b1	e9 e7 00 00 00	 jmp	 $LN9@ModeAttack@2
$LN8@ModeAttack@2:

; 244  : 	}
; 245  : 
; 246  : 	if ( lpObj->MapNumber == gObj[this->m_iTargetIndex].MapNumber )

  006b6	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  006b9	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  006c0	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  006c3	8b 42 18	 mov	 eax, DWORD PTR [edx+24]
  006c6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  006cc	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006d2	0f b6 84 02 49
	01 00 00	 movzx	 eax, BYTE PTR [edx+eax+329]
  006da	3b c8		 cmp	 ecx, eax
  006dc	0f 85 bb 00 00
	00		 jne	 $LN1@ModeAttack@2

; 247  : 	{
; 248  : 		if ( gObj[this->m_iTargetIndex].Life > 0.0f )

  006e2	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  006e5	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  006e8	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  006ee	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006f4	d9 84 0a fc 00
	00 00		 fld	 DWORD PTR [edx+ecx+252]
  006fb	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  00701	df e0		 fnstsw	 ax
  00703	f6 c4 41	 test	 ah, 65			; 00000041H
  00706	0f 85 82 00 00
	00		 jne	 $LN6@ModeAttack@2

; 249  : 		{
; 250  : 			dis = gObjCalDistance(lpObj, &gObj[this->m_iTargetIndex]);

  0070c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0070f	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00712	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00718	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0071e	51		 push	 ecx
  0071f	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00722	52		 push	 edx
  00723	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjCalDistance
  00728	83 c4 08	 add	 esp, 8
  0072b	89 45 f0	 mov	 DWORD PTR _dis$[ebp], eax

; 251  : 
; 252  : 			if ( dis < RAVEN_ATTACK_DISTANCE )

  0072e	83 7d f0 07	 cmp	 DWORD PTR _dis$[ebp], 7
  00732	7d 58		 jge	 SHORT $LN2@ModeAttack@2

; 253  : 			{
; 254  : 				int criticaldamage = 0;

  00734	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _criticaldamage$233641[ebp], 0

; 255  : 
; 256  : 				if ( (rand()%10) < 3 )

  0073b	e8 00 00 00 00	 call	 _rand
  00740	99		 cdq
  00741	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  00746	f7 f9		 idiv	 ecx
  00748	83 fa 03	 cmp	 edx, 3
  0074b	7d 07		 jge	 SHORT $LN4@ModeAttack@2

; 257  : 				{
; 258  : 					criticaldamage = FALSE;

  0074d	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _criticaldamage$233641[ebp], 0
$LN4@ModeAttack@2:

; 259  : 				}
; 260  : 
; 261  : 				if ( criticaldamage != FALSE )

  00754	83 7d ec 00	 cmp	 DWORD PTR _criticaldamage$233641[ebp], 0
  00758	74 1d		 je	 SHORT $LN3@ModeAttack@2

; 262  : 				{
; 263  : 					this->SendAttackMsg(lpObj->m_Index, this->m_iTargetIndex, criticaldamage, 0);

  0075a	6a 00		 push	 0
  0075c	8b 45 ec	 mov	 eax, DWORD PTR _criticaldamage$233641[ebp]
  0075f	50		 push	 eax
  00760	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00763	8b 51 18	 mov	 edx, DWORD PTR [ecx+24]
  00766	52		 push	 edx
  00767	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0076a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0076c	51		 push	 ecx
  0076d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00770	e8 00 00 00 00	 call	 ?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z ; CDarkSpirit::SendAttackMsg

; 264  : 				}
; 265  : 				else

  00775	eb 15		 jmp	 SHORT $LN2@ModeAttack@2
$LN3@ModeAttack@2:

; 266  : 				{
; 267  : 					this->RangeAttack(lpObj->m_Index, this->m_iTargetIndex);

  00777	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0077a	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  0077d	51		 push	 ecx
  0077e	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00781	8b 02		 mov	 eax, DWORD PTR [edx]
  00783	50		 push	 eax
  00784	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00787	e8 00 00 00 00	 call	 ?RangeAttack@CDarkSpirit@@QAEXHH@Z ; CDarkSpirit::RangeAttack
$LN2@ModeAttack@2:

; 268  : 				}
; 269  : 			}
; 270  : 		}
; 271  : 		else

  0078c	eb 0f		 jmp	 SHORT $LN1@ModeAttack@2
$LN6@ModeAttack@2:

; 272  : 		{
; 273  : 			this->ReSetTarget(this->m_iTargetIndex);

  0078e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00791	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00794	51		 push	 ecx
  00795	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00798	e8 00 00 00 00	 call	 ?ReSetTarget@CDarkSpirit@@QAEXH@Z ; CDarkSpirit::ReSetTarget
$LN1@ModeAttack@2:
$LN9@ModeAttack@2:

; 274  : 		}
; 275  : 	}
; 276  : }

  0079d	5f		 pop	 edi
  0079e	5e		 pop	 esi
  0079f	5b		 pop	 ebx
  007a0	8b e5		 mov	 esp, ebp
  007a2	5d		 pop	 ebp
  007a3	c3		 ret	 0
?ModeAttackWithMaster@CDarkSpirit@@QAEXXZ ENDP		; CDarkSpirit::ModeAttackWithMaster
; Function compile flags: /Odtp /ZI
_msg$233657 = -24					; size = 4
_criticaldamage$233656 = -20				; size = 4
_dis$ = -16						; size = 4
_count$ = -12						; size = 4
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
?ModeAttakTarget@CDarkSpirit@@QAEXXZ PROC		; CDarkSpirit::ModeAttakTarget
; _this$ = ecx

; 279  : {

  007b0	55		 push	 ebp
  007b1	8b ec		 mov	 ebp, esp
  007b3	83 ec 58	 sub	 esp, 88			; 00000058H
  007b6	53		 push	 ebx
  007b7	56		 push	 esi
  007b8	57		 push	 edi
  007b9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 280  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  007bc	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  007bf	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  007c2	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  007c8	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  007ce	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 281  : 	int count = 0;

  007d1	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0

; 282  : 	int dis;
; 283  : 
; 284  : 	if ( this->m_iTargetIndex == -1 )

  007d8	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  007db	83 78 18 ff	 cmp	 DWORD PTR [eax+24], -1
  007df	75 05		 jne	 SHORT $LN7@ModeAttakT

; 285  : 	{
; 286  : 		return;

  007e1	e9 d3 00 00 00	 jmp	 $LN8@ModeAttakT
$LN7@ModeAttakT:

; 287  : 	}
; 288  : 
; 289  : 	if ( lpObj->MapNumber == gObj[this->m_iTargetIndex].MapNumber )

  007e6	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  007e9	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  007f0	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  007f3	8b 42 18	 mov	 eax, DWORD PTR [edx+24]
  007f6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  007fc	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00802	0f b6 84 02 49
	01 00 00	 movzx	 eax, BYTE PTR [edx+eax+329]
  0080a	3b c8		 cmp	 ecx, eax
  0080c	0f 85 a7 00 00
	00		 jne	 $LN1@ModeAttakT

; 290  : 	{
; 291  : 		if ( gObj[this->m_iTargetIndex].Life > 0.0f )

  00812	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00815	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00818	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0081e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00824	d9 84 0a fc 00
	00 00		 fld	 DWORD PTR [edx+ecx+252]
  0082b	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  00831	df e0		 fnstsw	 ax
  00833	f6 c4 41	 test	 ah, 65			; 00000041H
  00836	75 72		 jne	 SHORT $LN5@ModeAttakT

; 292  : 		{
; 293  : 			dis = gObjCalDistance(lpObj, &gObj[this->m_iTargetIndex]);

  00838	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0083b	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  0083e	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00844	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0084a	51		 push	 ecx
  0084b	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0084e	52		 push	 edx
  0084f	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjCalDistance
  00854	83 c4 08	 add	 esp, 8
  00857	89 45 f0	 mov	 DWORD PTR _dis$[ebp], eax

; 294  : 
; 295  : 			if ( dis < RAVEN_ATTACK_DISTANCE )

  0085a	83 7d f0 07	 cmp	 DWORD PTR _dis$[ebp], 7
  0085e	7d 48		 jge	 SHORT $LN2@ModeAttakT

; 296  : 			{
; 297  : 				int criticaldamage = TRUE;

  00860	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _criticaldamage$233656[ebp], 1

; 298  : 				int msg = 1;

  00867	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _msg$233657[ebp], 1

; 299  : 
; 300  : 				if ( criticaldamage != FALSE )

  0086e	83 7d ec 00	 cmp	 DWORD PTR _criticaldamage$233656[ebp], 0
  00872	74 1f		 je	 SHORT $LN3@ModeAttakT

; 301  : 				{
; 302  : 					this->SendAttackMsg(lpObj->m_Index, this->m_iTargetIndex, criticaldamage, msg);

  00874	8b 45 e8	 mov	 eax, DWORD PTR _msg$233657[ebp]
  00877	50		 push	 eax
  00878	8b 4d ec	 mov	 ecx, DWORD PTR _criticaldamage$233656[ebp]
  0087b	51		 push	 ecx
  0087c	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  0087f	8b 42 18	 mov	 eax, DWORD PTR [edx+24]
  00882	50		 push	 eax
  00883	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00886	8b 11		 mov	 edx, DWORD PTR [ecx]
  00888	52		 push	 edx
  00889	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0088c	e8 00 00 00 00	 call	 ?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z ; CDarkSpirit::SendAttackMsg

; 303  : 				}
; 304  : 				else

  00891	eb 15		 jmp	 SHORT $LN2@ModeAttakT
$LN3@ModeAttakT:

; 305  : 				{
; 306  : 					this->RangeAttack(lpObj->m_Index, this->m_iTargetIndex);

  00893	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00896	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00899	51		 push	 ecx
  0089a	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0089d	8b 02		 mov	 eax, DWORD PTR [edx]
  0089f	50		 push	 eax
  008a0	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008a3	e8 00 00 00 00	 call	 ?RangeAttack@CDarkSpirit@@QAEXHH@Z ; CDarkSpirit::RangeAttack
$LN2@ModeAttakT:

; 307  : 				}
; 308  : 			}
; 309  : 		}
; 310  : 		else

  008a8	eb 0f		 jmp	 SHORT $LN1@ModeAttakT
$LN5@ModeAttakT:

; 311  : 		{
; 312  : 			this->ReSetTarget(this->m_iTargetIndex);

  008aa	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  008ad	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  008b0	51		 push	 ecx
  008b1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008b4	e8 00 00 00 00	 call	 ?ReSetTarget@CDarkSpirit@@QAEXH@Z ; CDarkSpirit::ReSetTarget
$LN1@ModeAttakT:
$LN8@ModeAttakT:

; 313  : 		}
; 314  : 	}
; 315  : }

  008b9	5f		 pop	 edi
  008ba	5e		 pop	 esi
  008bb	5b		 pop	 ebx
  008bc	8b e5		 mov	 esp, ebp
  008be	5d		 pop	 ebp
  008bf	c3		 ret	 0
?ModeAttakTarget@CDarkSpirit@@QAEXXZ ENDP		; CDarkSpirit::ModeAttakTarget
; Function compile flags: /Odtp /ZI
_lc10$233683 = -40					; size = 4
_HitCount$ = -36					; size = 4
_EnableAttack$ = -32					; size = 4
_attackcheck$ = -28					; size = 4
_loopcount$ = -24					; size = 4
_count$ = -20						; size = 4
_tObjNum$ = -16						; size = 4
_StartDis$ = -12					; size = 4
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
_aTargetIndex$ = 12					; size = 4
?RangeAttack@CDarkSpirit@@QAEXHH@Z PROC			; CDarkSpirit::RangeAttack
; _this$ = ecx

; 318  : {

  008c0	55		 push	 ebp
  008c1	8b ec		 mov	 ebp, esp
  008c3	83 ec 68	 sub	 esp, 104		; 00000068H
  008c6	53		 push	 ebx
  008c7	56		 push	 esi
  008c8	57		 push	 edi
  008c9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 319  : 	LPOBJ lpObj = &gObj[aIndex];

  008cc	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  008cf	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  008d5	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  008db	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 320  : 	int StartDis = 1;

  008de	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _StartDis$[ebp], 1

; 321  : 	int tObjNum;
; 322  : 	int count = 0;

  008e5	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0

; 323  : 	int loopcount = 0;

  008ec	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _loopcount$[ebp], 0

; 324  : 	int attackcheck;
; 325  : 	int EnableAttack;
; 326  : 	int HitCount = 0;

  008f3	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _HitCount$[ebp], 0

; 327  : 
; 328  : 	this->SendAttackMsg(lpObj->m_Index, aTargetIndex, 0, 0);

  008fa	6a 00		 push	 0
  008fc	6a 00		 push	 0
  008fe	8b 45 0c	 mov	 eax, DWORD PTR _aTargetIndex$[ebp]
  00901	50		 push	 eax
  00902	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00905	8b 11		 mov	 edx, DWORD PTR [ecx]
  00907	52		 push	 edx
  00908	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0090b	e8 00 00 00 00	 call	 ?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z ; CDarkSpirit::SendAttackMsg
$LN19@RangeAttac:

; 329  : 
; 330  : 	while ( true )

  00910	b8 01 00 00 00	 mov	 eax, 1
  00915	85 c0		 test	 eax, eax
  00917	0f 84 d7 01 00
	00		 je	 $LN20@RangeAttac

; 331  : 	{
; 332  : 		if ( lpObj->VpPlayer2[count].state != 0 )

  0091d	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  00920	6b c0 0c	 imul	 eax, 12			; 0000000cH
  00923	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00926	0f be 94 01 ac
	08 00 00	 movsx	 edx, BYTE PTR [ecx+eax+2220]
  0092e	85 d2		 test	 edx, edx
  00930	0f 84 a8 01 00
	00		 je	 $LN17@RangeAttac

; 333  : 		{
; 334  : 			tObjNum = lpObj->VpPlayer2[count].number;

  00936	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  00939	6b c0 0c	 imul	 eax, 12			; 0000000cH
  0093c	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0093f	0f bf 94 01 ae
	08 00 00	 movsx	 edx, WORD PTR [ecx+eax+2222]
  00947	89 55 f0	 mov	 DWORD PTR _tObjNum$[ebp], edx

; 335  : 
; 336  : 			if ( tObjNum >= 0 && aTargetIndex != tObjNum )

  0094a	83 7d f0 00	 cmp	 DWORD PTR _tObjNum$[ebp], 0
  0094e	0f 8c 8a 01 00
	00		 jl	 $LN17@RangeAttac
  00954	8b 45 0c	 mov	 eax, DWORD PTR _aTargetIndex$[ebp]
  00957	3b 45 f0	 cmp	 eax, DWORD PTR _tObjNum$[ebp]
  0095a	0f 84 7e 01 00
	00		 je	 $LN17@RangeAttac

; 337  : 			{
; 338  : 				EnableAttack = FALSE;

  00960	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _EnableAttack$[ebp], 0

; 339  : 				
; 340  : 				if ( lpObj->VpPlayer2[count].type == OBJ_MONSTER && gObj[tObjNum].m_RecallMon < 0)

  00967	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  0096a	6b c0 0c	 imul	 eax, 12			; 0000000cH
  0096d	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00970	0f b6 94 01 b0
	08 00 00	 movzx	 edx, BYTE PTR [ecx+eax+2224]
  00978	83 fa 02	 cmp	 edx, 2
  0097b	75 25		 jne	 SHORT $LN15@RangeAttac
  0097d	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00980	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00986	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0098c	83 bc 01 50 04
	00 00 00	 cmp	 DWORD PTR [ecx+eax+1104], 0
  00994	7d 0c		 jge	 SHORT $LN15@RangeAttac

; 341  : 				{
; 342  : 					EnableAttack = TRUE;

  00996	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _EnableAttack$[ebp], 1
  0099d	e9 aa 00 00 00	 jmp	 $LN14@RangeAttac
$LN15@RangeAttac:

; 343  : 				}
; 344  : 				else if ( tObjNum == aTargetIndex )

  009a2	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  009a5	3b 45 0c	 cmp	 eax, DWORD PTR _aTargetIndex$[ebp]
  009a8	75 0c		 jne	 SHORT $LN13@RangeAttac

; 345  : 				{
; 346  : 					EnableAttack = TRUE;

  009aa	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _EnableAttack$[ebp], 1

; 347  : 				}
; 348  : 				else

  009b1	e9 96 00 00 00	 jmp	 $LN14@RangeAttac
$LN13@RangeAttac:

; 349  : 				{
; 350  : 					int lc10 = gObj[tObjNum].m_Index;

  009b6	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  009b9	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  009bf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  009c5	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  009c8	89 55 d8	 mov	 DWORD PTR _lc10$233683[ebp], edx

; 351  : 
; 352  : 					if ( gObj[tObjNum].Type == OBJ_MONSTER )

  009cb	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  009ce	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  009d4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  009da	0f b7 54 01 68	 movzx	 edx, WORD PTR [ecx+eax+104]
  009df	83 fa 02	 cmp	 edx, 2
  009e2	75 40		 jne	 SHORT $LN11@RangeAttac

; 353  : 					{
; 354  : 						if ( gObj[tObjNum].m_RecallMon >= 0 )

  009e4	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  009e7	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  009ed	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  009f3	83 bc 01 50 04
	00 00 00	 cmp	 DWORD PTR [ecx+eax+1104], 0
  009fb	7c 27		 jl	 SHORT $LN11@RangeAttac

; 355  : 						{
; 356  : 							lc10 = gObj[gObj[tObjNum].m_RecallMon].m_Index;

  009fd	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00a00	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00a06	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00a0c	8b 94 01 50 04
	00 00		 mov	 edx, DWORD PTR [ecx+eax+1104]
  00a13	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  00a19	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00a1e	8b 0c 10	 mov	 ecx, DWORD PTR [eax+edx]
  00a21	89 4d d8	 mov	 DWORD PTR _lc10$233683[ebp], ecx
$LN11@RangeAttac:

; 357  : 						}
; 358  : 					}
; 359  : 
; 360  : 					if ( gObjTargetGuildWarCheck(lpObj, &gObj[lc10]) == TRUE )

  00a24	8b 45 d8	 mov	 eax, DWORD PTR _lc10$233683[ebp]
  00a27	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00a2d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00a33	50		 push	 eax
  00a34	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00a37	51		 push	 ecx
  00a38	e8 00 00 00 00	 call	 ?gObjTargetGuildWarCheck@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjTargetGuildWarCheck
  00a3d	83 c4 08	 add	 esp, 8
  00a40	83 f8 01	 cmp	 eax, 1
  00a43	75 07		 jne	 SHORT $LN14@RangeAttac

; 361  : 					{
; 362  : 						EnableAttack = TRUE;

  00a45	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _EnableAttack$[ebp], 1
$LN14@RangeAttac:

; 363  : 					}
; 364  : 				}
; 365  : 
; 366  : 				if ( EnableAttack != FALSE )

  00a4c	83 7d e0 00	 cmp	 DWORD PTR _EnableAttack$[ebp], 0
  00a50	0f 84 88 00 00
	00		 je	 $LN17@RangeAttac

; 367  : 				{
; 368  : 					attackcheck = FALSE;

  00a56	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _attackcheck$[ebp], 0

; 369  : 
; 370  : 					if ( loopcount == 0 )

  00a5d	83 7d e8 00	 cmp	 DWORD PTR _loopcount$[ebp], 0
  00a61	75 09		 jne	 SHORT $LN7@RangeAttac

; 371  : 					{
; 372  : 						attackcheck = TRUE;

  00a63	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _attackcheck$[ebp], 1
  00a6a	eb 18		 jmp	 SHORT $LN6@RangeAttac
$LN7@RangeAttac:

; 373  : 					}
; 374  : 					else if ( (rand()%3) == 0 )

  00a6c	e8 00 00 00 00	 call	 _rand
  00a71	99		 cdq
  00a72	b9 03 00 00 00	 mov	 ecx, 3
  00a77	f7 f9		 idiv	 ecx
  00a79	85 d2		 test	 edx, edx
  00a7b	75 07		 jne	 SHORT $LN6@RangeAttac

; 375  : 					{
; 376  : 						attackcheck = TRUE;

  00a7d	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _attackcheck$[ebp], 1
$LN6@RangeAttac:

; 377  : 					}
; 378  : 
; 379  : 					if ( attackcheck != FALSE )

  00a84	83 7d e4 00	 cmp	 DWORD PTR _attackcheck$[ebp], 0
  00a88	74 54		 je	 SHORT $LN17@RangeAttac

; 380  : 					{
; 381  : 						if ( gObjCalDistance(&gObj[aTargetIndex], &gObj[tObjNum]) < RAVEN_ATTACK_DISTANCE-3 )

  00a8a	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00a8d	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00a93	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00a99	50		 push	 eax
  00a9a	8b 4d 0c	 mov	 ecx, DWORD PTR _aTargetIndex$[ebp]
  00a9d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00aa3	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00aa9	51		 push	 ecx
  00aaa	e8 00 00 00 00	 call	 ?gObjCalDistance@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjCalDistance
  00aaf	83 c4 08	 add	 esp, 8
  00ab2	83 f8 04	 cmp	 eax, 4
  00ab5	7d 27		 jge	 SHORT $LN17@RangeAttac

; 382  : 						{
; 383  : 							this->SendAttackMsg(lpObj->m_Index, tObjNum, 2, 0);

  00ab7	6a 00		 push	 0
  00ab9	6a 02		 push	 2
  00abb	8b 45 f0	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00abe	50		 push	 eax
  00abf	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00ac2	8b 11		 mov	 edx, DWORD PTR [ecx]
  00ac4	52		 push	 edx
  00ac5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00ac8	e8 00 00 00 00	 call	 ?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z ; CDarkSpirit::SendAttackMsg

; 384  : 							HitCount++;

  00acd	8b 45 dc	 mov	 eax, DWORD PTR _HitCount$[ebp]
  00ad0	83 c0 01	 add	 eax, 1
  00ad3	89 45 dc	 mov	 DWORD PTR _HitCount$[ebp], eax

; 385  : 
; 386  : 							if ( HitCount > 3 )

  00ad6	83 7d dc 03	 cmp	 DWORD PTR _HitCount$[ebp], 3
  00ada	7e 02		 jle	 SHORT $LN17@RangeAttac

; 387  : 							{
; 388  : 								break;

  00adc	eb 16		 jmp	 SHORT $LN20@RangeAttac
$LN17@RangeAttac:

; 389  : 							}
; 390  : 						}
; 391  : 					}
; 392  : 				}
; 393  : 			}				
; 394  : 		}
; 395  : 
; 396  : 		count++;

  00ade	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  00ae1	83 c0 01	 add	 eax, 1
  00ae4	89 45 ec	 mov	 DWORD PTR _count$[ebp], eax

; 397  : 
; 398  : 		if ( count > MAX_VIEWPORT-1 )

  00ae7	83 7d ec 4a	 cmp	 DWORD PTR _count$[ebp], 74 ; 0000004aH
  00aeb	7e 02		 jle	 SHORT $LN1@RangeAttac

; 399  : 		{
; 400  : 			break;

  00aed	eb 05		 jmp	 SHORT $LN20@RangeAttac
$LN1@RangeAttac:

; 401  : 		}
; 402  : 	}

  00aef	e9 1c fe ff ff	 jmp	 $LN19@RangeAttac
$LN20@RangeAttac:

; 403  : }

  00af4	5f		 pop	 edi
  00af5	5e		 pop	 esi
  00af6	5b		 pop	 ebx
  00af7	8b e5		 mov	 esp, ebp
  00af9	5d		 pop	 ebp
  00afa	c2 08 00	 ret	 8
?RangeAttack@CDarkSpirit@@QAEXHH@Z ENDP			; CDarkSpirit::RangeAttack
_TEXT	ENDS
PUBLIC	?set@PBMSG_HEAD@@QAEXPAEEE@Z			; PBMSG_HEAD::set
PUBLIC	__$ArrayPad$
EXTRN	?gObjAddAttackProcMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHHH@Z:PROC ; gObjAddAttackProcMsgSendDelay
EXTRN	?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z:PROC	; MsgSendV2
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv185 = -100						; size = 4
tv172 = -100						; size = 4
tv197 = -96						; size = 8
tv195 = -96						; size = 8
_lpObj$233732 = -24					; size = 4
_pMsg$ = -20						; size = 9
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_aTargetIndex$ = 12					; size = 4
_criticaldamage$ = 16					; size = 4
_iActionType$ = 20					; size = 4
?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z PROC		; CDarkSpirit::SendAttackMsg
; _this$ = ecx

; 417  : {

  00b00	55		 push	 ebp
  00b01	8b ec		 mov	 ebp, esp
  00b03	83 ec 64	 sub	 esp, 100		; 00000064H
  00b06	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00b0b	33 c5		 xor	 eax, ebp
  00b0d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00b10	53		 push	 ebx
  00b11	56		 push	 esi
  00b12	57		 push	 edi
  00b13	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 418  : 	PMSG_PET_ITEM_ATTACK_COMMAND pMsg;
; 419  : 
; 420  : 	if ( criticaldamage != 2 )

  00b16	83 7d 10 02	 cmp	 DWORD PTR _criticaldamage$[ebp], 2
  00b1a	0f 84 15 01 00
	00		 je	 $LN5@SendAttack

; 421  : 	{
; 422  : 		pMsg.PetType = 0;

  00b20	c6 45 ef 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 423  : 		pMsg.SkillType = (criticaldamage)? 0 : 1;

  00b24	33 c0		 xor	 eax, eax
  00b26	83 7d 10 00	 cmp	 DWORD PTR _criticaldamage$[ebp], 0
  00b2a	0f 94 c0	 sete	 al
  00b2d	88 45 f0	 mov	 BYTE PTR _pMsg$[ebp+4], al

; 424  : 		pMsg.NumberH = SET_NUMBERH(aIndex);

  00b30	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00b33	c1 e8 08	 shr	 eax, 8
  00b36	88 45 f1	 mov	 BYTE PTR _pMsg$[ebp+5], al

; 425  : 		pMsg.NumberL = SET_NUMBERL(aIndex);

  00b39	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00b3c	25 ff 00 00 00	 and	 eax, 255		; 000000ffH
  00b41	88 45 f2	 mov	 BYTE PTR _pMsg$[ebp+6], al

; 426  : 		pMsg.TargetNumberH = SET_NUMBERH(aTargetIndex);

  00b44	8b 45 0c	 mov	 eax, DWORD PTR _aTargetIndex$[ebp]
  00b47	c1 e8 08	 shr	 eax, 8
  00b4a	88 45 f3	 mov	 BYTE PTR _pMsg$[ebp+7], al

; 427  : 		pMsg.TargetNumberL = SET_NUMBERL(aTargetIndex);

  00b4d	8b 45 0c	 mov	 eax, DWORD PTR _aTargetIndex$[ebp]
  00b50	25 ff 00 00 00	 and	 eax, 255		; 000000ffH
  00b55	88 45 f4	 mov	 BYTE PTR _pMsg$[ebp+8], al

; 428  : 		pMsg.h.set((LPBYTE)&pMsg, 0xA8, sizeof(pMsg));

  00b58	6a 09		 push	 9
  00b5a	68 a8 00 00 00	 push	 168			; 000000a8H
  00b5f	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00b62	50		 push	 eax
  00b63	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00b66	e8 00 00 00 00	 call	 ?set@PBMSG_HEAD@@QAEXPAEEE@Z ; PBMSG_HEAD::set

; 429  : 		
; 430  : 		DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00b6b	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00b6f	50		 push	 eax
  00b70	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00b73	51		 push	 ecx
  00b74	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00b77	52		 push	 edx
  00b78	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00b7d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 431  : 		MsgSendV2(&gObj[aIndex], (LPBYTE)&pMsg, pMsg.h.size);

  00b80	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00b84	50		 push	 eax
  00b85	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00b88	51		 push	 ecx
  00b89	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00b8c	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  00b92	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00b98	52		 push	 edx
  00b99	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  00b9e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 432  : 
; 433  : 		if ( iActionType == 1 )

  00ba1	83 7d 14 01	 cmp	 DWORD PTR _iActionType$[ebp], 1
  00ba5	0f 85 88 00 00
	00		 jne	 $LN2@SendAttack

; 434  : 		{
; 435  : 			criticaldamage = 0;

  00bab	c7 45 10 00 00
	00 00		 mov	 DWORD PTR _criticaldamage$[ebp], 0

; 436  : 
; 437  : 			LPOBJ lpObj	= &gObj[this->m_iMasterIndex];

  00bb2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00bb5	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00bb8	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00bbe	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00bc4	89 4d e8	 mov	 DWORD PTR _lpObj$233732[ebp], ecx

; 438  : 			// ----
; 439  : 			if( 30 + lpObj->m_MPSkillOpt.MpsDarkSpiritStr2 > rand() % 100 )

  00bc7	8b 45 e8	 mov	 eax, DWORD PTR _lpObj$233732[ebp]
  00bca	d9 80 08 27 00
	00		 fld	 DWORD PTR [eax+9992]
  00bd0	dc 05 00 00 00
	00		 fadd	 QWORD PTR __real@403e000000000000
  00bd6	dd 5d a0	 fstp	 QWORD PTR tv195[ebp]
  00bd9	e8 00 00 00 00	 call	 _rand
  00bde	99		 cdq
  00bdf	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00be4	f7 f9		 idiv	 ecx
  00be6	89 55 9c	 mov	 DWORD PTR tv172[ebp], edx
  00be9	db 45 9c	 fild	 DWORD PTR tv172[ebp]
  00bec	dc 5d a0	 fcomp	 QWORD PTR tv195[ebp]
  00bef	df e0		 fnstsw	 ax
  00bf1	f6 c4 05	 test	 ah, 5
  00bf4	7a 07		 jp	 SHORT $LN3@SendAttack

; 440  : 			{
; 441  : 				criticaldamage	= 1;	

  00bf6	c7 45 10 01 00
	00 00		 mov	 DWORD PTR _criticaldamage$[ebp], 1
$LN3@SendAttack:

; 442  : 			}
; 443  : 			// ----
; 444  : 			if( 30 + lpObj->m_MPSkillOpt.MpsDarkSpiritStr3 > rand() % 100 )

  00bfd	8b 45 e8	 mov	 eax, DWORD PTR _lpObj$233732[ebp]
  00c00	d9 80 0c 27 00
	00		 fld	 DWORD PTR [eax+9996]
  00c06	dc 05 00 00 00
	00		 fadd	 QWORD PTR __real@403e000000000000
  00c0c	dd 5d a0	 fstp	 QWORD PTR tv197[ebp]
  00c0f	e8 00 00 00 00	 call	 _rand
  00c14	99		 cdq
  00c15	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00c1a	f7 f9		 idiv	 ecx
  00c1c	89 55 9c	 mov	 DWORD PTR tv185[ebp], edx
  00c1f	db 45 9c	 fild	 DWORD PTR tv185[ebp]
  00c22	dc 5d a0	 fcomp	 QWORD PTR tv197[ebp]
  00c25	df e0		 fnstsw	 ax
  00c27	f6 c4 05	 test	 ah, 5
  00c2a	7a 07		 jp	 SHORT $LN2@SendAttack

; 445  : 			{
; 446  : 				criticaldamage	= 2;

  00c2c	c7 45 10 02 00
	00 00		 mov	 DWORD PTR _criticaldamage$[ebp], 2
$LN2@SendAttack:

; 447  : 			}
; 448  : 
; 449  : 		}
; 450  : 	}
; 451  : 	else

  00c33	eb 07		 jmp	 SHORT $LN1@SendAttack
$LN5@SendAttack:

; 452  : 	{
; 453  : 		criticaldamage = 0;

  00c35	c7 45 10 00 00
	00 00		 mov	 DWORD PTR _criticaldamage$[ebp], 0
$LN1@SendAttack:

; 454  : 	}
; 455  : 
; 456  : 	gObjAddAttackProcMsgSendDelay(&gObj[aIndex], 51, aTargetIndex, 600, criticaldamage, iActionType);

  00c3c	8b 45 14	 mov	 eax, DWORD PTR _iActionType$[ebp]
  00c3f	50		 push	 eax
  00c40	8b 4d 10	 mov	 ecx, DWORD PTR _criticaldamage$[ebp]
  00c43	51		 push	 ecx
  00c44	68 58 02 00 00	 push	 600			; 00000258H
  00c49	8b 55 0c	 mov	 edx, DWORD PTR _aTargetIndex$[ebp]
  00c4c	52		 push	 edx
  00c4d	6a 33		 push	 51			; 00000033H
  00c4f	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00c52	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00c58	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c5e	50		 push	 eax
  00c5f	e8 00 00 00 00	 call	 ?gObjAddAttackProcMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHHH@Z ; gObjAddAttackProcMsgSendDelay
  00c64	83 c4 18	 add	 esp, 24			; 00000018H

; 457  : }

  00c67	5f		 pop	 edi
  00c68	5e		 pop	 esi
  00c69	5b		 pop	 ebx
  00c6a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00c6d	33 cd		 xor	 ecx, ebp
  00c6f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00c74	8b e5		 mov	 esp, ebp
  00c76	5d		 pop	 ebp
  00c77	c2 10 00	 ret	 16			; 00000010H
?SendAttackMsg@CDarkSpirit@@QAEXHHHH@Z ENDP		; CDarkSpirit::SendAttackMsg
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\include\prodef.h
_TEXT	ENDS
;	COMDAT ?set@PBMSG_HEAD@@QAEXPAEEE@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_size$ = 16						; size = 1
?set@PBMSG_HEAD@@QAEXPAEEE@Z PROC			; PBMSG_HEAD::set, COMDAT
; _this$ = ecx

; 80   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 81   : 		lpBuf[0] = 0xC1;

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  0000f	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H

; 82   : 		lpBuf[1] = size;

  00012	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  00015	8a 4d 10	 mov	 cl, BYTE PTR _size$[ebp]
  00018	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 83   : 		lpBuf[2] = head;

  0001b	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  0001e	8a 4d 0c	 mov	 cl, BYTE PTR _head$[ebp]
  00021	88 48 02	 mov	 BYTE PTR [eax+2], cl

; 84   : 	};	// line : 22

  00024	5f		 pop	 edi
  00025	5e		 pop	 esi
  00026	5b		 pop	 ebx
  00027	8b e5		 mov	 esp, ebp
  00029	5d		 pop	 ebp
  0002a	c2 0c 00	 ret	 12			; 0000000cH
?set@PBMSG_HEAD@@QAEXPAEEE@Z ENDP			; PBMSG_HEAD::set
_TEXT	ENDS
PUBLIC	?SetTarget@CDarkSpirit@@QAEXH@Z			; CDarkSpirit::SetTarget
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\darkspirit.cpp
_TEXT	SEGMENT
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aTargetIndex$ = 8					; size = 4
?SetTarget@CDarkSpirit@@QAEXH@Z PROC			; CDarkSpirit::SetTarget
; _this$ = ecx

; 460  : {

  00c80	55		 push	 ebp
  00c81	8b ec		 mov	 ebp, esp
  00c83	83 ec 48	 sub	 esp, 72			; 00000048H
  00c86	53		 push	 ebx
  00c87	56		 push	 esi
  00c88	57		 push	 edi
  00c89	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 461  : 	if ( this->m_iMasterIndex == -1 )

  00c8c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00c8f	83 78 14 ff	 cmp	 DWORD PTR [eax+20], -1
  00c93	75 02		 jne	 SHORT $LN2@SetTarget

; 462  : 	{
; 463  : 		return;

  00c95	eb 2f		 jmp	 SHORT $LN3@SetTarget
$LN2@SetTarget:

; 464  : 	}
; 465  : 
; 466  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  00c97	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00c9a	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00c9d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00ca3	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00ca9	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 467  : 
; 468  : 	if ( lpObj->Class != CLASS_DARKLORD )

  00cac	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00caf	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  00cb6	83 f9 04	 cmp	 ecx, 4
  00cb9	74 02		 je	 SHORT $LN1@SetTarget

; 469  : 	{
; 470  : 		return;

  00cbb	eb 09		 jmp	 SHORT $LN3@SetTarget
$LN1@SetTarget:

; 471  : 	}
; 472  : 
; 473  : 	this->m_iTargetIndex = aTargetIndex;

  00cbd	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00cc0	8b 4d 08	 mov	 ecx, DWORD PTR _aTargetIndex$[ebp]
  00cc3	89 48 18	 mov	 DWORD PTR [eax+24], ecx
$LN3@SetTarget:

; 474  : }

  00cc6	5f		 pop	 edi
  00cc7	5e		 pop	 esi
  00cc8	5b		 pop	 ebx
  00cc9	8b e5		 mov	 esp, ebp
  00ccb	5d		 pop	 ebp
  00ccc	c2 04 00	 ret	 4
?SetTarget@CDarkSpirit@@QAEXH@Z ENDP			; CDarkSpirit::SetTarget
_TEXT	ENDS
PUBLIC	?SetMode@CDarkSpirit@@QAEXW4ePetItem_Mode@1@H@Z	; CDarkSpirit::SetMode
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aTargetIndex$ = 8					; size = 4
?ReSetTarget@CDarkSpirit@@QAEXH@Z PROC			; CDarkSpirit::ReSetTarget
; _this$ = ecx

; 477  : {

  00cd0	55		 push	 ebp
  00cd1	8b ec		 mov	 ebp, esp
  00cd3	83 ec 48	 sub	 esp, 72			; 00000048H
  00cd6	53		 push	 ebx
  00cd7	56		 push	 esi
  00cd8	57		 push	 edi
  00cd9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 478  : 	if ( this->m_iMasterIndex == -1 )

  00cdc	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00cdf	83 78 14 ff	 cmp	 DWORD PTR [eax+20], -1
  00ce3	75 02		 jne	 SHORT $LN4@ReSetTarge

; 479  : 	{
; 480  : 		return;

  00ce5	eb 50		 jmp	 SHORT $LN5@ReSetTarge
$LN4@ReSetTarge:

; 481  : 	}
; 482  : 
; 483  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  00ce7	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00cea	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00ced	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00cf3	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00cf9	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 484  : 
; 485  : 	if ( lpObj->Class != CLASS_DARKLORD )

  00cfc	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00cff	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  00d06	83 f9 04	 cmp	 ecx, 4
  00d09	74 02		 je	 SHORT $LN3@ReSetTarge

; 486  : 	{
; 487  : 		return;

  00d0b	eb 2a		 jmp	 SHORT $LN5@ReSetTarge
$LN3@ReSetTarge:

; 488  : 	}
; 489  : 
; 490  : 	if ( aTargetIndex == this->m_iTargetIndex )

  00d0d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00d10	8b 4d 08	 mov	 ecx, DWORD PTR _aTargetIndex$[ebp]
  00d13	3b 48 18	 cmp	 ecx, DWORD PTR [eax+24]
  00d16	75 1f		 jne	 SHORT $LN5@ReSetTarge

; 491  : 	{
; 492  : 		this->m_iTargetIndex = -1;

  00d18	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00d1b	c7 40 18 ff ff
	ff ff		 mov	 DWORD PTR [eax+24], -1

; 493  : 
; 494  : 		if ( this->m_ActionMode == PetItem_Mode_Attack_Target )

  00d22	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00d25	83 78 20 03	 cmp	 DWORD PTR [eax+32], 3
  00d29	75 0c		 jne	 SHORT $LN5@ReSetTarge

; 495  : 		{
; 496  : 			this->SetMode(PetItem_Mode_Normal, -1);

  00d2b	6a ff		 push	 -1
  00d2d	6a 00		 push	 0
  00d2f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00d32	e8 00 00 00 00	 call	 ?SetMode@CDarkSpirit@@QAEXW4ePetItem_Mode@1@H@Z ; CDarkSpirit::SetMode
$LN5@ReSetTarge:

; 497  : 		}
; 498  : 	}
; 499  : }

  00d37	5f		 pop	 edi
  00d38	5e		 pop	 esi
  00d39	5b		 pop	 ebx
  00d3a	8b e5		 mov	 esp, ebp
  00d3c	5d		 pop	 ebp
  00d3d	c2 04 00	 ret	 4
?ReSetTarget@CDarkSpirit@@QAEXH@Z ENDP			; CDarkSpirit::ReSetTarget
_TEXT	ENDS
PUBLIC	??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@ ; `string'
PUBLIC	??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@ ; `string'
PUBLIC	??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@ ; `string'
PUBLIC	??_C@_06NDNCHIBI@?$FL?$MA?O?$LJ?$NN?$FN?$AA@	; `string'
PUBLIC	??A?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QAEAAUDARKREVAN_ATTACK_BLOCK@@I@Z ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::operator[]
PUBLIC	?size@?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QBEIXZ ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::size
PUBLIC	__$ArrayPad$
EXTRN	?g_Manager@@3VCManager@@A:BYTE			; g_Manager
EXTRN	?CheckUser@CExLicense@@QAE_NH@Z:PROC		; CExLicense::CheckUser
EXTRN	?g_ExLicense@@3VCExLicense@@A:BYTE		; g_ExLicense
EXTRN	_memset:PROC
;	COMDAT ??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@
CONST	SEGMENT
??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@ DB '[', 0bbH, 0e7H
	DB	0bfH, 0ebH, 0c0H, 0daH, 0c1H, 0f6H, 0c1H, 0a4H, ']', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@
CONST	SEGMENT
??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@ DB '['
	DB	0c1H, 0d6H, 0c0H, 0ceH, 0b0H, 0faH, 0b0H, 0b0H, 0c0H, 0ccH, 0b0H
	DB	0f8H, 0b0H, 0ddH, ']', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@
CONST	SEGMENT
??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@ DB '[', 0b7H
	DB	0a3H, 0b4H, 0fdH, 0b0H, 0f8H, 0b0H, 0ddH, ']', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_06NDNCHIBI@?$FL?$MA?O?$LJ?$NN?$FN?$AA@
CONST	SEGMENT
??_C@_06NDNCHIBI@?$FL?$MA?O?$LJ?$NN?$FN?$AA@ DB '[', 0c0H, 0cfH, 0b9H, 0ddH
	DB	']', 00H					; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv136 = -1112						; size = 4
_strMode$233808 = -1044					; size = 1020
_pMsg$233800 = -24					; size = 7
_i$233790 = -16						; size = 4
_lpObj$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_mode$ = 8						; size = 4
_iTargetindex$ = 12					; size = 4
?SetMode@CDarkSpirit@@QAEXW4ePetItem_Mode@1@H@Z PROC	; CDarkSpirit::SetMode
; _this$ = ecx

; 511  : {

  00d40	55		 push	 ebp
  00d41	8b ec		 mov	 ebp, esp
  00d43	81 ec 58 04 00
	00		 sub	 esp, 1112		; 00000458H
  00d49	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00d4e	33 c5		 xor	 eax, ebp
  00d50	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00d53	53		 push	 ebx
  00d54	56		 push	 esi
  00d55	57		 push	 edi
  00d56	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 512  : 	if ( this->m_iMasterIndex == -1 )

  00d59	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d5c	83 78 14 ff	 cmp	 DWORD PTR [eax+20], -1
  00d60	75 05		 jne	 SHORT $LN13@SetMode

; 513  : 	{
; 514  : 		return;

  00d62	e9 69 02 00 00	 jmp	 $LN14@SetMode
$LN13@SetMode:

; 515  : 	}
; 516  : 
; 517  : 	LPOBJ lpObj = &gObj[this->m_iMasterIndex];

  00d67	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d6a	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00d6d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00d73	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00d79	89 4d f4	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 518  : 
; 519  : 	if ( lpObj->Class != CLASS_DARKLORD )

  00d7c	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d7f	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  00d86	83 f9 04	 cmp	 ecx, 4
  00d89	74 05		 je	 SHORT $LN12@SetMode

; 520  : 	{
; 521  : 		return;

  00d8b	e9 40 02 00 00	 jmp	 $LN14@SetMode
$LN12@SetMode:

; 522  : 	}
; 523  : 
; 524  : 	#if(CUSTOM_MANAGER)
; 525  : 	if(g_ExLicense.CheckUser(eExUB::Gredy) || g_ExLicense.CheckUser(eExUB::Gredy2) || g_ExLicense.CheckUser(eExUB::GredyLocal))

  00d90	6a 20		 push	 32			; 00000020H
  00d92	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ExLicense@@3VCExLicense@@A ; g_ExLicense
  00d97	e8 00 00 00 00	 call	 ?CheckUser@CExLicense@@QAE_NH@Z ; CExLicense::CheckUser
  00d9c	0f b6 c0	 movzx	 eax, al
  00d9f	85 c0		 test	 eax, eax
  00da1	75 26		 jne	 SHORT $LN10@SetMode
  00da3	6a 22		 push	 34			; 00000022H
  00da5	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ExLicense@@3VCExLicense@@A ; g_ExLicense
  00daa	e8 00 00 00 00	 call	 ?CheckUser@CExLicense@@QAE_NH@Z ; CExLicense::CheckUser
  00daf	0f b6 c0	 movzx	 eax, al
  00db2	85 c0		 test	 eax, eax
  00db4	75 13		 jne	 SHORT $LN10@SetMode
  00db6	6a 21		 push	 33			; 00000021H
  00db8	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ExLicense@@3VCExLicense@@A ; g_ExLicense
  00dbd	e8 00 00 00 00	 call	 ?CheckUser@CExLicense@@QAE_NH@Z ; CExLicense::CheckUser
  00dc2	0f b6 c0	 movzx	 eax, al
  00dc5	85 c0		 test	 eax, eax
  00dc7	74 44		 je	 SHORT $LN11@SetMode
$LN10@SetMode:

; 526  : 	{
; 527  : 		for(int i = 0; i < g_Manager.m_DarkRevenAttackBlock.size(); i++)

  00dc9	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _i$233790[ebp], 0
  00dd0	eb 09		 jmp	 SHORT $LN9@SetMode
$LN8@SetMode:
  00dd2	8b 45 f0	 mov	 eax, DWORD PTR _i$233790[ebp]
  00dd5	83 c0 01	 add	 eax, 1
  00dd8	89 45 f0	 mov	 DWORD PTR _i$233790[ebp], eax
$LN9@SetMode:
  00ddb	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_Manager@@3VCManager@@A ; g_Manager
  00de0	e8 00 00 00 00	 call	 ?size@?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QBEIXZ ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::size
  00de5	39 45 f0	 cmp	 DWORD PTR _i$233790[ebp], eax
  00de8	73 23		 jae	 SHORT $LN11@SetMode

; 528  : 		{
; 529  : 			if(lpObj->MapNumber == g_Manager.m_DarkRevenAttackBlock[i].Map)

  00dea	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00ded	0f b6 b0 49 01
	00 00		 movzx	 esi, BYTE PTR [eax+329]
  00df4	8b 4d f0	 mov	 ecx, DWORD PTR _i$233790[ebp]
  00df7	51		 push	 ecx
  00df8	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_Manager@@3VCManager@@A ; g_Manager
  00dfd	e8 00 00 00 00	 call	 ??A?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QAEAAUDARKREVAN_ATTACK_BLOCK@@I@Z ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::operator[]
  00e02	3b 30		 cmp	 esi, DWORD PTR [eax]
  00e04	75 05		 jne	 SHORT $LN6@SetMode

; 530  : 			{
; 531  : 				return;

  00e06	e9 c5 01 00 00	 jmp	 $LN14@SetMode
$LN6@SetMode:

; 532  : 			}
; 533  : 		}

  00e0b	eb c5		 jmp	 SHORT $LN8@SetMode
$LN11@SetMode:

; 534  : 	}
; 535  : 	#endif
; 536  : 
; 537  : 	if ( mode == PetItem_Mode_Attack_Target || this->m_ActionMode != mode)

  00e0d	83 7d 08 03	 cmp	 DWORD PTR _mode$[ebp], 3
  00e11	74 0f		 je	 SHORT $LN4@SetMode
  00e13	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e16	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  00e19	3b 4d 08	 cmp	 ecx, DWORD PTR _mode$[ebp]
  00e1c	0f 84 ae 01 00
	00		 je	 $LN14@SetMode
$LN4@SetMode:

; 538  : 	{
; 539  : 		if ( mode == PetItem_Mode_Attack_Target )

  00e22	83 7d 08 03	 cmp	 DWORD PTR _mode$[ebp], 3
  00e26	75 3d		 jne	 SHORT $LN3@SetMode

; 540  : 		{
; 541  : 			if ( OBJMAX_RANGE(iTargetindex) != FALSE )

  00e28	83 7d 0c 00	 cmp	 DWORD PTR _iTargetindex$[ebp], 0
  00e2c	7d 0c		 jge	 SHORT $LN16@SetMode
  00e2e	c7 85 a8 fb ff
	ff 00 00 00 00	 mov	 DWORD PTR tv136[ebp], 0
  00e38	eb 12		 jmp	 SHORT $LN17@SetMode
$LN16@SetMode:
  00e3a	33 c0		 xor	 eax, eax
  00e3c	81 7d 0c 97 3a
	00 00		 cmp	 DWORD PTR _iTargetindex$[ebp], 14999 ; 00003a97H
  00e43	0f 9e c0	 setle	 al
  00e46	89 85 a8 fb ff
	ff		 mov	 DWORD PTR tv136[ebp], eax
$LN17@SetMode:
  00e4c	83 bd a8 fb ff
	ff 00		 cmp	 DWORD PTR tv136[ebp], 0
  00e53	74 0b		 je	 SHORT $LN2@SetMode

; 542  : 			{
; 543  : 				this->m_iTargetIndex = iTargetindex;

  00e55	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e58	8b 4d 0c	 mov	 ecx, DWORD PTR _iTargetindex$[ebp]
  00e5b	89 48 18	 mov	 DWORD PTR [eax+24], ecx

; 544  : 			}
; 545  : 			else

  00e5e	eb 05		 jmp	 SHORT $LN3@SetMode
$LN2@SetMode:

; 546  : 			{
; 547  : 				return;

  00e60	e9 6b 01 00 00	 jmp	 $LN14@SetMode
$LN3@SetMode:

; 548  : 			}
; 549  : 		}
; 550  : 
; 551  : 		this->m_ActionMode = mode;

  00e65	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e68	8b 4d 08	 mov	 ecx, DWORD PTR _mode$[ebp]
  00e6b	89 48 20	 mov	 DWORD PTR [eax+32], ecx

; 552  : 		PMSG_SEND_PET_ITEM_COMMAND pMsg;
; 553  : 
; 554  : 		pMsg.h.set((LPBYTE)&pMsg, 0xA7, sizeof(pMsg));

  00e6e	6a 07		 push	 7
  00e70	68 a7 00 00 00	 push	 167			; 000000a7H
  00e75	8d 45 e8	 lea	 eax, DWORD PTR _pMsg$233800[ebp]
  00e78	50		 push	 eax
  00e79	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$233800[ebp]
  00e7c	e8 00 00 00 00	 call	 ?set@PBMSG_HEAD@@QAEXPAEEE@Z ; PBMSG_HEAD::set

; 555  : 		pMsg.PetType = 0;

  00e81	c6 45 eb 00	 mov	 BYTE PTR _pMsg$233800[ebp+3], 0

; 556  : 		pMsg.Command = mode;

  00e85	8a 45 08	 mov	 al, BYTE PTR _mode$[ebp]
  00e88	88 45 ec	 mov	 BYTE PTR _pMsg$233800[ebp+4], al

; 557  : 		pMsg.NumberH = SET_NUMBERH(this->m_iTargetIndex);

  00e8b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e8e	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00e91	c1 e9 08	 shr	 ecx, 8
  00e94	88 4d ed	 mov	 BYTE PTR _pMsg$233800[ebp+5], cl

; 558  : 		pMsg.NumberL = SET_NUMBERL(this->m_iTargetIndex);

  00e97	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e9a	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00e9d	81 e1 ff 00 00
	00		 and	 ecx, 255		; 000000ffH
  00ea3	88 4d ee	 mov	 BYTE PTR _pMsg$233800[ebp+6], cl

; 559  : 
; 560  : 		DataSend(this->m_iMasterIndex, (LPBYTE)&pMsg, sizeof(pMsg));

  00ea6	6a 07		 push	 7
  00ea8	8d 45 e8	 lea	 eax, DWORD PTR _pMsg$233800[ebp]
  00eab	50		 push	 eax
  00eac	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00eaf	8b 51 14	 mov	 edx, DWORD PTR [ecx+20]
  00eb2	52		 push	 edx
  00eb3	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00eb8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 561  : 
; 562  : 		char strMode[4][255] =
; 563  : 		{
; 564  : 			"[]",

  00ebb	a1 00 00 00 00	 mov	 eax, DWORD PTR ??_C@_06NDNCHIBI@?$FL?$MA?O?$LJ?$NN?$FN?$AA@
  00ec0	89 85 ec fb ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp], eax
  00ec6	66 8b 0d 04 00
	00 00		 mov	 cx, WORD PTR ??_C@_06NDNCHIBI@?$FL?$MA?O?$LJ?$NN?$FN?$AA@+4
  00ecd	66 89 8d f0 fb
	ff ff		 mov	 WORD PTR _strMode$233808[ebp+4], cx
  00ed4	8a 15 06 00 00
	00		 mov	 dl, BYTE PTR ??_C@_06NDNCHIBI@?$FL?$MA?O?$LJ?$NN?$FN?$AA@+6
  00eda	88 95 f2 fb ff
	ff		 mov	 BYTE PTR _strMode$233808[ebp+6], dl
  00ee0	68 f8 00 00 00	 push	 248			; 000000f8H
  00ee5	6a 00		 push	 0
  00ee7	8d 85 f3 fb ff
	ff		 lea	 eax, DWORD PTR _strMode$233808[ebp+7]
  00eed	50		 push	 eax
  00eee	e8 00 00 00 00	 call	 _memset
  00ef3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 565  : 			"[]",

  00ef6	a1 00 00 00 00	 mov	 eax, DWORD PTR ??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@
  00efb	89 85 eb fc ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+255], eax
  00f01	8b 0d 04 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@+4
  00f07	89 8d ef fc ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+259], ecx
  00f0d	66 8b 15 08 00
	00 00		 mov	 dx, WORD PTR ??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@+8
  00f14	66 89 95 f3 fc
	ff ff		 mov	 WORD PTR _strMode$233808[ebp+263], dx
  00f1b	a0 0a 00 00 00	 mov	 al, BYTE PTR ??_C@_0L@NMEJHKFH@?$FL?$LH?$KD?$LE?$PN?$LA?x?$LA?$NN?$FN?$AA@+10
  00f20	88 85 f5 fc ff
	ff		 mov	 BYTE PTR _strMode$233808[ebp+265], al
  00f26	68 f4 00 00 00	 push	 244			; 000000f4H
  00f2b	6a 00		 push	 0
  00f2d	8d 85 f6 fc ff
	ff		 lea	 eax, DWORD PTR _strMode$233808[ebp+266]
  00f33	50		 push	 eax
  00f34	e8 00 00 00 00	 call	 _memset
  00f39	83 c4 0c	 add	 esp, 12			; 0000000cH

; 566  : 			"[]",

  00f3c	a1 00 00 00 00	 mov	 eax, DWORD PTR ??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@
  00f41	89 85 ea fd ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+510], eax
  00f47	8b 0d 04 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@+4
  00f4d	89 8d ee fd ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+514], ecx
  00f53	8b 15 08 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@+8
  00f59	89 95 f2 fd ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+518], edx
  00f5f	a1 0c 00 00 00	 mov	 eax, DWORD PTR ??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@+12
  00f64	89 85 f6 fd ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+522], eax
  00f6a	8a 0d 10 00 00
	00		 mov	 cl, BYTE PTR ??_C@_0BB@IPPKFAED@?$FL?A?V?$MA?N?$LA?z?$LA?$LA?$MA?L?$LA?x?$LA?$NN?$FN?$AA@+16
  00f70	88 8d fa fd ff
	ff		 mov	 BYTE PTR _strMode$233808[ebp+526], cl
  00f76	68 ee 00 00 00	 push	 238			; 000000eeH
  00f7b	6a 00		 push	 0
  00f7d	8d 85 fb fd ff
	ff		 lea	 eax, DWORD PTR _strMode$233808[ebp+527]
  00f83	50		 push	 eax
  00f84	e8 00 00 00 00	 call	 _memset
  00f89	83 c4 0c	 add	 esp, 12			; 0000000cH

; 567  : 			"[]"
; 568  : 		};

  00f8c	a1 00 00 00 00	 mov	 eax, DWORD PTR ??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@
  00f91	89 85 e9 fe ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+765], eax
  00f97	8b 0d 04 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@+4
  00f9d	89 8d ed fe ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+769], ecx
  00fa3	8b 15 08 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@+8
  00fa9	89 95 f1 fe ff
	ff		 mov	 DWORD PTR _strMode$233808[ebp+773], edx
  00faf	a0 0c 00 00 00	 mov	 al, BYTE PTR ??_C@_0N@KFGEJJPF@?$FL?$LL?g?$LP?k?$MA?Z?A?v?A?$KE?$FN?$AA@+12
  00fb4	88 85 f5 fe ff
	ff		 mov	 BYTE PTR _strMode$233808[ebp+777], al
  00fba	68 f2 00 00 00	 push	 242			; 000000f2H
  00fbf	6a 00		 push	 0
  00fc1	8d 85 f6 fe ff
	ff		 lea	 eax, DWORD PTR _strMode$233808[ebp+778]
  00fc7	50		 push	 eax
  00fc8	e8 00 00 00 00	 call	 _memset
  00fcd	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN14@SetMode:

; 569  : 	}
; 570  : }

  00fd0	5f		 pop	 edi
  00fd1	5e		 pop	 esi
  00fd2	5b		 pop	 ebx
  00fd3	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00fd6	33 cd		 xor	 ecx, ebp
  00fd8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00fdd	8b e5		 mov	 esp, ebp
  00fdf	5d		 pop	 ebp
  00fe0	c2 08 00	 ret	 8
?SetMode@CDarkSpirit@@QAEXW4ePetItem_Mode@1@H@Z ENDP	; CDarkSpirit::SetMode
_TEXT	ENDS
PUBLIC	?Set@CDarkSpirit@@QAEXHPAVCItem@@@Z		; CDarkSpirit::Set
EXTRN	?ExConfig@@3VcExConfigs@@A:BYTE			; ExConfig
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_leadership$ = -20					; size = 4
_petitemlevel$ = -16					; size = 4
_bChange$ = -12						; size = 4
_lpObj$ = -8						; size = 4
_this$ = -4						; size = 4
_aIndex$ = 8						; size = 4
_pPetItem$ = 12						; size = 4
?Set@CDarkSpirit@@QAEXHPAVCItem@@@Z PROC		; CDarkSpirit::Set
; _this$ = ecx

; 573  : {

  00ff0	55		 push	 ebp
  00ff1	8b ec		 mov	 ebp, esp
  00ff3	83 ec 54	 sub	 esp, 84			; 00000054H
  00ff6	53		 push	 ebx
  00ff7	56		 push	 esi
  00ff8	57		 push	 edi
  00ff9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 574  : 	LPOBJ lpObj = &gObj[aIndex];

  00ffc	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00fff	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01005	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0100b	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 575  : 
; 576  : 	if ( lpObj->Class != CLASS_DARKLORD )

  0100e	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01011	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  01018	83 f9 04	 cmp	 ecx, 4
  0101b	74 05		 je	 SHORT $LN5@Set

; 577  : 	{
; 578  : 		return;

  0101d	e9 16 01 00 00	 jmp	 $LN6@Set
$LN5@Set:

; 579  : 	}
; 580  : 
; 581  : 	BOOL bChange = FALSE;

  01022	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _bChange$[ebp], 0

; 582  : 
; 583  : 	if ( this->m_iMasterIndex == -1 )

  01029	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0102c	83 78 14 ff	 cmp	 DWORD PTR [eax+20], -1
  01030	75 07		 jne	 SHORT $LN4@Set

; 584  : 	{
; 585  : 		bChange = TRUE;

  01032	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _bChange$[ebp], 1
$LN4@Set:

; 586  : 	}
; 587  : 
; 588  : 	this->Init();

  01039	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0103c	e8 00 00 00 00	 call	 ?Init@CDarkSpirit@@QAEXXZ ; CDarkSpirit::Init

; 589  : 
; 590  : 	if ( pPetItem->m_Type != ITEMGET(13,5) )

  01041	8b 45 0c	 mov	 eax, DWORD PTR _pPetItem$[ebp]
  01044	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01048	81 f9 05 1a 00
	00		 cmp	 ecx, 6661		; 00001a05H
  0104e	74 05		 je	 SHORT $LN3@Set

; 591  : 	{
; 592  : 		return;

  01050	e9 e3 00 00 00	 jmp	 $LN6@Set
$LN3@Set:

; 593  : 	}
; 594  : 
; 595  : 	if ( pPetItem->m_Durability <= 0.0f )

  01055	8b 45 0c	 mov	 eax, DWORD PTR _pPetItem$[ebp]
  01058	d9 40 24	 fld	 DWORD PTR [eax+36]
  0105b	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  01061	df e0		 fnstsw	 ax
  01063	f6 c4 41	 test	 ah, 65			; 00000041H
  01066	7a 05		 jp	 SHORT $LN2@Set

; 596  : 	{
; 597  : 		return;

  01068	e9 cb 00 00 00	 jmp	 $LN6@Set
$LN2@Set:

; 598  : 	}
; 599  : 
; 600  : 	int petitemlevel = pPetItem->m_PetItem_Level;

  0106d	8b 45 0c	 mov	 eax, DWORD PTR _pPetItem$[ebp]
  01070	8b 88 bc 00 00
	00		 mov	 ecx, DWORD PTR [eax+188]
  01076	89 4d f0	 mov	 DWORD PTR _petitemlevel$[ebp], ecx

; 601  : 	int leadership = lpObj->Leadership + lpObj->AddLeadership;

  01079	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0107c	0f b7 88 18 01
	00 00		 movzx	 ecx, WORD PTR [eax+280]
  01083	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01086	0f b7 82 1a 01
	00 00		 movzx	 eax, WORD PTR [edx+282]
  0108d	03 c8		 add	 ecx, eax
  0108f	89 4d ec	 mov	 DWORD PTR _leadership$[ebp], ecx

; 602  : 
; 603  : 	//this->m_AttackDamageMin = petitemlevel*15 + leadership/8 + 180;
; 604  : 	//this->m_AttackDamageMax = petitemlevel*15 + leadership/4 + 200;
; 605  : 	//this->m_AttackSpeed = petitemlevel * 4 / 5 + leadership / 50 + 20;
; 606  : 	//this->m_SuccessAttackRate= petitemlevel + petitemlevel / 15 + 1000;
; 607  : 
; 608  : 
; 609  : 	this->m_AttackDamageMin = petitemlevel * ExConfig.Pet.RavenAttackDamageMinLvl + leadership/ExConfig.Pet.RavenAttackDamageMinCmd + 180;

  01092	8b 4d f0	 mov	 ecx, DWORD PTR _petitemlevel$[ebp]
  01095	0f af 0d 48 08
	00 00		 imul	 ecx, DWORD PTR ?ExConfig@@3VcExConfigs@@A+2120
  0109c	8b 45 ec	 mov	 eax, DWORD PTR _leadership$[ebp]
  0109f	99		 cdq
  010a0	f7 3d 50 08 00
	00		 idiv	 DWORD PTR ?ExConfig@@3VcExConfigs@@A+2128
  010a6	8d 94 01 b4 00
	00 00		 lea	 edx, DWORD PTR [ecx+eax+180]
  010ad	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  010b0	89 50 04	 mov	 DWORD PTR [eax+4], edx

; 610  : 	this->m_AttackDamageMax = petitemlevel * ExConfig.Pet.RavenAttackDamageMaxLvl + leadership/ExConfig.Pet.RavenAttackDamageMaxCmd + 200;

  010b3	8b 4d f0	 mov	 ecx, DWORD PTR _petitemlevel$[ebp]
  010b6	0f af 0d 4c 08
	00 00		 imul	 ecx, DWORD PTR ?ExConfig@@3VcExConfigs@@A+2124
  010bd	8b 45 ec	 mov	 eax, DWORD PTR _leadership$[ebp]
  010c0	99		 cdq
  010c1	f7 3d 54 08 00
	00		 idiv	 DWORD PTR ?ExConfig@@3VcExConfigs@@A+2132
  010c7	8d 94 01 c8 00
	00 00		 lea	 edx, DWORD PTR [ecx+eax+200]
  010ce	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  010d1	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 611  : 	this->m_AttackSpeed = petitemlevel * 4 / 5 + leadership / 50 + 20;

  010d4	8b 45 f0	 mov	 eax, DWORD PTR _petitemlevel$[ebp]
  010d7	c1 e0 02	 shl	 eax, 2
  010da	99		 cdq
  010db	b9 05 00 00 00	 mov	 ecx, 5
  010e0	f7 f9		 idiv	 ecx
  010e2	8b c8		 mov	 ecx, eax
  010e4	8b 45 ec	 mov	 eax, DWORD PTR _leadership$[ebp]
  010e7	99		 cdq
  010e8	be 32 00 00 00	 mov	 esi, 50			; 00000032H
  010ed	f7 fe		 idiv	 esi
  010ef	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  010f3	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  010f6	89 50 0c	 mov	 DWORD PTR [eax+12], edx

; 612  : 	this->m_SuccessAttackRate= petitemlevel + petitemlevel / 15 + 1000;

  010f9	8b 45 f0	 mov	 eax, DWORD PTR _petitemlevel$[ebp]
  010fc	99		 cdq
  010fd	b9 0f 00 00 00	 mov	 ecx, 15			; 0000000fH
  01102	f7 f9		 idiv	 ecx
  01104	8b 55 f0	 mov	 edx, DWORD PTR _petitemlevel$[ebp]
  01107	8d 84 02 e8 03
	00 00		 lea	 eax, DWORD PTR [edx+eax+1000]
  0110e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01111	89 41 10	 mov	 DWORD PTR [ecx+16], eax

; 613  : 
; 614  : 	this->m_iMasterIndex = aIndex;

  01114	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01117	8b 4d 08	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  0111a	89 48 14	 mov	 DWORD PTR [eax+20], ecx

; 615  : 	this->m_pPetItem = pPetItem;

  0111d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01120	8b 4d 0c	 mov	 ecx, DWORD PTR _pPetItem$[ebp]
  01123	89 48 24	 mov	 DWORD PTR [eax+36], ecx

; 616  : 
; 617  : 	if ( bChange != FALSE )

  01126	83 7d f4 00	 cmp	 DWORD PTR _bChange$[ebp], 0
  0112a	74 0c		 je	 SHORT $LN1@Set

; 618  : 	{
; 619  : 		this->SetMode(PetItem_Mode_Normal, -1);

  0112c	6a ff		 push	 -1
  0112e	6a 00		 push	 0
  01130	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01133	e8 00 00 00 00	 call	 ?SetMode@CDarkSpirit@@QAEXW4ePetItem_Mode@1@H@Z ; CDarkSpirit::SetMode
$LN1@Set:
$LN6@Set:

; 620  : 	}
; 621  : }

  01138	5f		 pop	 edi
  01139	5e		 pop	 esi
  0113a	5b		 pop	 ebx
  0113b	8b e5		 mov	 esp, ebp
  0113d	5d		 pop	 ebp
  0113e	c2 08 00	 ret	 8
?Set@CDarkSpirit@@QAEXHPAVCItem@@@Z ENDP		; CDarkSpirit::Set
_TEXT	ENDS
PUBLIC	?GetShieldDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0H@Z ; CDarkSpirit::GetShieldDamage
PUBLIC	__real@4059000000000000
PUBLIC	__real@4024000000000000
PUBLIC	??_C@_0EO@IMJLIFKK@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$LE?Y?E?$KJ?$LN?$LK?G?G?$LI?$LE?$MA?G?$LJ?$NP?E?i?5Item?5i@ ; `string'
PUBLIC	?SendLevelmsg@CDarkSpirit@@SAXHHHH@Z		; CDarkSpirit::SendLevelmsg
PUBLIC	??_C@_0DL@HDCMLJGF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLPetItemExpDown?$FN?5?$FL?$CFs?$FN?5Le@ ; `string'
PUBLIC	__real@00000000
PUBLIC	__real@3ff0000000000000
PUBLIC	?GetAttackDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@HHH@Z ; CDarkSpirit::GetAttackDamage
PUBLIC	?MissCheck@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ; CDarkSpirit::MissCheck
PUBLIC	?MissCheckPvP@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ; CDarkSpirit::MissCheckPvP
PUBLIC	?GetCastleState@CCastleSiege@@QAEHXZ		; CCastleSiege::GetCastleState
PUBLIC	?GetCrywolfState@CCrywolf@@QAEHXZ		; CCrywolf::GetCrywolfState
PUBLIC	?Attack@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HH@Z ; CDarkSpirit::Attack
EXTRN	?GCDamageSend@@YAXHHHHHH@Z:PROC			; GCDamageSend
EXTRN	?gObjLifeCheck@@YAXPAUOBJECTSTRUCT@@0HHHHGH@Z:PROC ; gObjLifeCheck
EXTRN	?GCMagicAttackNumberSend@@YAXPAUOBJECTSTRUCT@@GHE@Z:PROC ; GCMagicAttackNumberSend
EXTRN	?GCManaSend@@YAXHHEEH@Z:PROC			; GCManaSend
EXTRN	?gObjUniriaSprite@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; gObjUniriaSprite
EXTRN	?gObjCheckSelfDefense@@YAXPAUOBJECTSTRUCT@@H@Z:PROC ; gObjCheckSelfDefense
EXTRN	?GetPkLevel@PartyClass@@QAEDH@Z:PROC		; PartyClass::GetPkLevel
EXTRN	?gParty@@3VPartyClass@@A:BYTE			; gParty
EXTRN	?GCMagicCancelSend@@YAXPAUOBJECTSTRUCT@@G@Z:PROC ; GCMagicCancelSend
EXTRN	?gObjRemoveBuffEffect@@YAEPAUOBJECTSTRUCT@@H@Z:PROC ; gObjRemoveBuffEffect
EXTRN	?gObjArmorRandomDurDown@@YAXPAUOBJECTSTRUCT@@0@Z:PROC ; gObjArmorRandomDurDown
EXTRN	?gObjGetRelationShip@@YAHPAUOBJECTSTRUCT@@0@Z:PROC ; gObjGetRelationShip
EXTRN	?IncAgro@TMonsterAIAgro@@QAEHHH@Z:PROC		; TMonsterAIAgro::IncAgro
EXTRN	?gObjAddMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHH@Z:PROC ; gObjAddMsgSendDelay
EXTRN	?gObjWeaponDurDownInCastle@@YAXPAUOBJECTSTRUCT@@0H@Z:PROC ; gObjWeaponDurDownInCastle
EXTRN	?gObjUpdateAppliedBuffEffect@@YAEPAUOBJECTSTRUCT@@HPAH1@Z:PROC ; gObjUpdateAppliedBuffEffect
EXTRN	?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z:PROC ; gObjSearchActiveEffect
EXTRN	?SetCharHorseAttack@cWingsDamage@@QAEXHHHAAH@Z:PROC ; cWingsDamage::SetCharHorseAttack
EXTRN	?gWingsDamage@@3VcWingsDamage@@A:BYTE		; gWingsDamage
EXTRN	?gObjDarkHorse@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; gObjDarkHorse
EXTRN	?GCReFillSend@@YAXHHEEH@Z:PROC			; GCReFillSend
EXTRN	?IsDinorantReduceAttackDamaege@CItem@@QAEHXZ:PROC ; CItem::IsDinorantReduceAttackDamaege
EXTRN	?gObjDenorantSprite@@YAHPAUOBJECTSTRUCT@@@Z:PROC ; gObjDenorantSprite
EXTRN	?gObjWingSprite@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; gObjWingSprite
EXTRN	?gObjAngelSprite@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; gObjAngelSprite
EXTRN	?GCItemDurSend@@YAXHEEE@Z:PROC			; GCItemDurSend
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?GetName@CItem@@QAEPADXZ:PROC			; CItem::GetName
EXTRN	?DecPetItemExp@CItem@@QAEHH@Z:PROC		; CItem::DecPetItemExp
EXTRN	?GetTargetDefense@CObjBaseAttack@@QAEHPAUOBJECTSTRUCT@@0AAE@Z:PROC ; CObjBaseAttack::GetTargetDefense
EXTRN	?g_ShieldSystemOn@@3HA:DWORD			; g_ShieldSystemOn
EXTRN	?gObjDuelCheck@@YAHPAUOBJECTSTRUCT@@0@Z:PROC	; gObjDuelCheck
EXTRN	?PkCheck@CObjBaseAttack@@QAEHPAUOBJECTSTRUCT@@0@Z:PROC ; CObjBaseAttack::PkCheck
EXTRN	?CheckAttackArea@CObjBaseAttack@@QAEHPAUOBJECTSTRUCT@@0@Z:PROC ; CObjBaseAttack::CheckAttackArea
EXTRN	?g_CastleSiege@@3VCCastleSiege@@A:BYTE		; g_CastleSiege
EXTRN	?gObjAttackQ@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; gObjAttackQ
EXTRN	?gObjIsConnected@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; gObjIsConnected
EXTRN	?gObjMonsterStateProc@@YAXPAUOBJECTSTRUCT@@HHH@Z:PROC ; gObjMonsterStateProc
EXTRN	?GetBattleSoccerGoalMove@@YAHH@Z:PROC		; GetBattleSoccerGoalMove
EXTRN	?g_Crywolf@@3VCCrywolf@@A:BYTE			; g_Crywolf
EXTRN	__ftol2_sse:PROC
;	COMDAT __real@4059000000000000
CONST	SEGMENT
__real@4059000000000000 DQ 04059000000000000r	; 100
CONST	ENDS
;	COMDAT __real@4024000000000000
CONST	SEGMENT
__real@4024000000000000 DQ 04024000000000000r	; 10
CONST	ENDS
;	COMDAT ??_C@_0EO@IMJLIFKK@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$LE?Y?E?$KJ?$LN?$LK?G?G?$LI?$LE?$MA?G?$LJ?$NP?E?i?5Item?5i@
CONST	SEGMENT
??_C@_0EO@IMJLIFKK@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$LE?Y?E?$KJ?$LN?$LK?G?G?$LI?$LE?$MA?G?$LJ?$NP?E?i?5Item?5i@ DB '['
	DB	'%s][%s] ', 0b4H, 0d9H, 0c5H, 0a9H, 0bdH, 0baH, 0c7H, 0c7H, 0b8H
	DB	0b4H, 0c0H, 0c7H, 0b9H, 0dfH, 0c5H, 0e9H, ' Item is Broken bec'
	DB	'ause durability is exhausted [%d]', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DL@HDCMLJGF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLPetItemExpDown?$FN?5?$FL?$CFs?$FN?5Le@
CONST	SEGMENT
??_C@_0DL@HDCMLJGF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLPetItemExpDown?$FN?5?$FL?$CFs?$FN?5Le@ DB '['
	DB	'%s][%s][PetItemExpDown] [%s] Level:[%d]Exp:[%d]DecExp[%d]', 00H ; `string'
CONST	ENDS
;	COMDAT __real@00000000
CONST	SEGMENT
__real@00000000 DD 000000000r			; 0
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv1643 = -264						; size = 4
tv1629 = -264						; size = 4
tv1368 = -264						; size = 4
tv1641 = -260						; size = 4
tv1627 = -260						; size = 4
tv1366 = -260						; size = 4
tv967 = -260						; size = 4
tv954 = -260						; size = 4
tv781 = -260						; size = 4
tv768 = -260						; size = 4
tv1896 = -256						; size = 4
tv1763 = -256						; size = 4
tv1537 = -256						; size = 4
tv1526 = -256						; size = 4
tv1511 = -256						; size = 4
tv1496 = -256						; size = 4
tv1481 = -256						; size = 4
tv1466 = -256						; size = 4
tv1454 = -256						; size = 4
tv1442 = -256						; size = 4
tv1430 = -256						; size = 4
tv1418 = -256						; size = 4
tv1406 = -256						; size = 4
tv1394 = -256						; size = 4
tv1376 = -256						; size = 4
tv1319 = -256						; size = 4
tv996 = -256						; size = 4
tv987 = -256						; size = 4
tv968 = -256						; size = 4
tv955 = -256						; size = 4
tv782 = -256						; size = 4
tv769 = -256						; size = 4
tv626 = -256						; size = 4
tv607 = -256						; size = 4
tv588 = -256						; size = 4
tv569 = -256						; size = 4
tv1638 = -254						; size = 2
tv1624 = -254						; size = 2
tv1363 = -254						; size = 2
_atd_reflect$234084 = -188				; size = 4
_partynum$234071 = -184					; size = 4
_number$234070 = -180					; size = 4
_selfdefense$ = -176					; size = 4
_decattackdamage$234013 = -172				; size = 4
_replacemana$234007 = -168				; size = 4
_iWizardSkillTime$234006 = -164				; size = 4
_iWizardSkillDefense$234005 = -160			; size = 4
_decdamage$234000 = -156				; size = 4
_Darkhorse$233999 = -152				; size = 4
_dinorantdecdamage$233995 = -148			; size = 4
_Dinorant$233994 = -144					; size = 4
_damage$233990 = -140					; size = 4
_damage$233986 = -136					; size = 4
_damage$233981 = -132					; size = 4
_damage$233976 = -128					; size = 4
_damage$233971 = -124					; size = 4
_damage$233966 = -120					; size = 4
_damage$233961 = -116					; size = 4
_damage$233956 = -112					; size = 4
_damage$233951 = -108					; size = 4
_damage$233946 = -104					; size = 4
_damage$233941 = -100					; size = 4
_damage$233936 = -96					; size = 4
_Wing$233932 = -92					; size = 4
_damage$233929 = -88					; size = 4
_iPetExp$233922 = -84					; size = 4
_tlevel$ = -80						; size = 4
_beforeDamage$233913 = -76				; size = 4
_targetdefense$ = -72					; size = 4
_AttackDamage$ = -68					; size = 4
_bAllMiss$ = -64					; size = 4
_MSBFlag$ = -60						; size = 4
_bIsOnDuel$ = -56					; size = 4
_Energy$ = -52						; size = 4
_Vitality$ = -48					; size = 4
_Dexterity$ = -44					; size = 4
_Strength$ = -40					; size = 4
_skill$ = -36						; size = 4
_iTotalShieldDamage$ = -32				; size = 4
_iTempShieldDamage$ = -28				; size = 4
_ManaChange$ = -24					; size = 4
_MsgDamage$ = -17					; size = 1
_lpCallTargetObj$ = -16					; size = 4
_lpCallObj$ = -12					; size = 4
_skillSuccess$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
_lpMagic$ = 16						; size = 4
_criticaldamage$ = 20					; size = 4
_iActionType$ = 24					; size = 4
?Attack@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HH@Z PROC ; CDarkSpirit::Attack
; _this$ = ecx

; 624  : {

  01150	55		 push	 ebp
  01151	8b ec		 mov	 ebp, esp
  01153	81 ec 08 01 00
	00		 sub	 esp, 264		; 00000108H
  01159	53		 push	 ebx
  0115a	56		 push	 esi
  0115b	57		 push	 edi
  0115c	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 625  : 	int skillSuccess = 0;

  0115f	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _skillSuccess$[ebp], 0

; 626  : 	LPOBJ lpCallObj;
; 627  : 	LPOBJ lpCallTargetObj;
; 628  : 	BYTE MsgDamage = 0;

  01166	c6 45 ef 00	 mov	 BYTE PTR _MsgDamage$[ebp], 0

; 629  : 	int ManaChange = 0;

  0116a	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _ManaChange$[ebp], 0

; 630  : 	int iTempShieldDamage = 0;

  01171	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _iTempShieldDamage$[ebp], 0

; 631  : 	int iTotalShieldDamage = 0;

  01178	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _iTotalShieldDamage$[ebp], 0

; 632  : 
; 633  : 	if ( (lpTargetObj->Authority&2) == 2 )

  0117f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01182	8b 88 0c 02 00
	00		 mov	 ecx, DWORD PTR [eax+524]
  01188	83 e1 02	 and	 ecx, 2
  0118b	74 07		 je	 SHORT $LN163@Attack

; 634  : 	{
; 635  : 		return FALSE;

  0118d	33 c0		 xor	 eax, eax
  0118f	e9 90 18 00 00	 jmp	 $LN164@Attack
$LN163@Attack:

; 636  : 	}
; 637  : 
; 638  : 	if ( lpObj->MapNumber != lpTargetObj->MapNumber )

  01194	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01197	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0119e	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  011a1	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  011a8	3b c8		 cmp	 ecx, eax
  011aa	74 07		 je	 SHORT $LN162@Attack

; 639  : 	{
; 640  : 		return FALSE;

  011ac	33 c0		 xor	 eax, eax
  011ae	e9 71 18 00 00	 jmp	 $LN164@Attack
$LN162@Attack:

; 641  : 	}
; 642  : #ifdef IMPERIAL_CONFLICT_NEW
; 643  : 	if( g_ImperialGuardian.IsEventMap(lpObj->MapNumber) )
; 644  : 	{
; 645  : 		if( !g_ImperialGuardian.IsAttackAbleMonster(lpTargetObj->m_Index) )
; 646  : 		{
; 647  : 			return false;
; 648  : 		}
; 649  : 	}
; 650  : #endif
; 651  : //#if(GS_CASTLE==1)
; 652  : 	if( g_Crywolf.GetCrywolfState() == 3 || g_Crywolf.GetCrywolfState() == 5 )

  011b3	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_Crywolf@@3VCCrywolf@@A ; g_Crywolf
  011b8	e8 00 00 00 00	 call	 ?GetCrywolfState@CCrywolf@@QAEHXZ ; CCrywolf::GetCrywolfState
  011bd	83 f8 03	 cmp	 eax, 3
  011c0	74 0f		 je	 SHORT $LN160@Attack
  011c2	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_Crywolf@@3VCCrywolf@@A ; g_Crywolf
  011c7	e8 00 00 00 00	 call	 ?GetCrywolfState@CCrywolf@@QAEHXZ ; CCrywolf::GetCrywolfState
  011cc	83 f8 05	 cmp	 eax, 5
  011cf	75 29		 jne	 SHORT $LN158@Attack
$LN160@Attack:

; 653  : 	{
; 654  : 		if(CRYWOLF_MAP_RANGE(lpTargetObj->MapNumber))

  011d1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  011d4	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  011db	33 d2		 xor	 edx, edx
  011dd	83 f9 22	 cmp	 ecx, 34			; 00000022H
  011e0	0f 94 c2	 sete	 dl
  011e3	85 d2		 test	 edx, edx
  011e5	74 13		 je	 SHORT $LN158@Attack

; 655  : 		{
; 656  : 			if(lpTargetObj->Type == OBJ_MONSTER)

  011e7	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  011ea	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  011ee	83 f9 02	 cmp	 ecx, 2
  011f1	75 07		 jne	 SHORT $LN158@Attack

; 657  : 			{
; 658  : 				return FALSE;

  011f3	33 c0		 xor	 eax, eax
  011f5	e9 2a 18 00 00	 jmp	 $LN164@Attack
$LN158@Attack:

; 659  : 			}
; 660  : 		}
; 661  : 	}
; 662  : //#endif
; 663  : 
; 664  : 	int skill = 0;

  011fa	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _skill$[ebp], 0

; 665  : 	
; 666  : 	if ( lpMagic )

  01201	83 7d 10 00	 cmp	 DWORD PTR _lpMagic$[ebp], 0
  01205	74 09		 je	 SHORT $LN157@Attack

; 667  : 	{
; 668  : 		skill = lpMagic->m_Skill;

  01207	8b 45 10	 mov	 eax, DWORD PTR _lpMagic$[ebp]
  0120a	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0120d	89 4d dc	 mov	 DWORD PTR _skill$[ebp], ecx
$LN157@Attack:

; 669  : 	}
; 670  : 
; 671  : 	skillSuccess = TRUE;

  01210	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _skillSuccess$[ebp], 1

; 672  : 
; 673  : 	if ( lpObj->GuildNumber > 0 )

  01217	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0121a	83 b8 34 04 00
	00 00		 cmp	 DWORD PTR [eax+1076], 0
  01221	7e 4d		 jle	 SHORT $LN152@Attack

; 674  : 	{
; 675  : 		if ( lpObj->lpGuild )

  01223	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01226	83 b8 38 04 00
	00 00		 cmp	 DWORD PTR [eax+1080], 0
  0122d	74 41		 je	 SHORT $LN152@Attack

; 676  : 		{
; 677  : 			if ( lpObj->lpGuild->WarState )

  0122f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01232	8b 88 38 04 00
	00		 mov	 ecx, DWORD PTR [eax+1080]
  01238	0f b6 91 91 05
	00 00		 movzx	 edx, BYTE PTR [ecx+1425]
  0123f	85 d2		 test	 edx, edx
  01241	74 2d		 je	 SHORT $LN152@Attack

; 678  : 			{
; 679  : 				if ( lpObj->lpGuild->WarType == 1 )

  01243	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01246	8b 88 38 04 00
	00		 mov	 ecx, DWORD PTR [eax+1080]
  0124c	0f b6 91 92 05
	00 00		 movzx	 edx, BYTE PTR [ecx+1426]
  01253	83 fa 01	 cmp	 edx, 1
  01256	75 18		 jne	 SHORT $LN152@Attack

; 680  : 				{
; 681  : 					if ( !GetBattleSoccerGoalMove(0) )

  01258	6a 00		 push	 0
  0125a	e8 00 00 00 00	 call	 ?GetBattleSoccerGoalMove@@YAHH@Z ; GetBattleSoccerGoalMove
  0125f	83 c4 04	 add	 esp, 4
  01262	85 c0		 test	 eax, eax
  01264	75 0a		 jne	 SHORT $LN152@Attack

; 682  : 					{
; 683  : 						return TRUE;

  01266	b8 01 00 00 00	 mov	 eax, 1
  0126b	e9 b4 17 00 00	 jmp	 $LN164@Attack
$LN152@Attack:

; 684  : 					}
; 685  : 				}
; 686  : 			}
; 687  : 		}
; 688  : 	}
; 689  : 
; 690  : 	if ( lpTargetObj->Type == OBJ_MONSTER )

  01270	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01273	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  01277	83 f9 02	 cmp	 ecx, 2
  0127a	75 50		 jne	 SHORT $LN150@Attack

; 691  : 	{
; 692  : 		if ( lpTargetObj->Class == 200 )

  0127c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0127f	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  01286	81 f9 c8 00 00
	00		 cmp	 ecx, 200		; 000000c8H
  0128c	75 3e		 jne	 SHORT $LN150@Attack

; 693  : 		{
; 694  : 			if ( skill )

  0128e	83 7d dc 00	 cmp	 DWORD PTR _skill$[ebp], 0
  01292	74 18		 je	 SHORT $LN149@Attack

; 695  : 			{
; 696  : 				gObjMonsterStateProc(lpTargetObj, 7, lpObj->m_Index, 0);

  01294	6a 00		 push	 0
  01296	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01299	8b 08		 mov	 ecx, DWORD PTR [eax]
  0129b	51		 push	 ecx
  0129c	6a 07		 push	 7
  0129e	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  012a1	52		 push	 edx
  012a2	e8 00 00 00 00	 call	 ?gObjMonsterStateProc@@YAXPAUOBJECTSTRUCT@@HHH@Z ; gObjMonsterStateProc
  012a7	83 c4 10	 add	 esp, 16			; 00000010H

; 697  : 			}
; 698  : 			else

  012aa	eb 16		 jmp	 SHORT $LN148@Attack
$LN149@Attack:

; 699  : 			{
; 700  : 				gObjMonsterStateProc(lpTargetObj, 6, lpObj->m_Index, 0);

  012ac	6a 00		 push	 0
  012ae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  012b1	8b 08		 mov	 ecx, DWORD PTR [eax]
  012b3	51		 push	 ecx
  012b4	6a 06		 push	 6
  012b6	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  012b9	52		 push	 edx
  012ba	e8 00 00 00 00	 call	 ?gObjMonsterStateProc@@YAXPAUOBJECTSTRUCT@@HHH@Z ; gObjMonsterStateProc
  012bf	83 c4 10	 add	 esp, 16			; 00000010H
$LN148@Attack:

; 701  : 			}
; 702  : 
; 703  : 			return TRUE;

  012c2	b8 01 00 00 00	 mov	 eax, 1
  012c7	e9 58 17 00 00	 jmp	 $LN164@Attack
$LN150@Attack:

; 704  : 		}
; 705  : 	}
; 706  : 
; 707  : 	if ( lpObj->Type == OBJ_USER )

  012cc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  012cf	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  012d3	83 f9 01	 cmp	 ecx, 1
  012d6	75 17		 jne	 SHORT $LN146@Attack

; 708  : 	{
; 709  : 		if ( !gObjIsConnected(lpObj))

  012d8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  012db	50		 push	 eax
  012dc	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHPAUOBJECTSTRUCT@@@Z ; gObjIsConnected
  012e1	83 c4 04	 add	 esp, 4
  012e4	85 c0		 test	 eax, eax
  012e6	75 07		 jne	 SHORT $LN146@Attack

; 710  : 		{
; 711  : 			return FALSE;

  012e8	33 c0		 xor	 eax, eax
  012ea	e9 35 17 00 00	 jmp	 $LN164@Attack
$LN146@Attack:

; 712  : 		}
; 713  : 	}
; 714  : 
; 715  : 	if ( lpTargetObj->Type == OBJ_USER )

  012ef	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012f2	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  012f6	83 f9 01	 cmp	 ecx, 1
  012f9	75 17		 jne	 SHORT $LN144@Attack

; 716  : 	{
; 717  : 		if ( !gObjIsConnected(lpTargetObj))

  012fb	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  012fe	50		 push	 eax
  012ff	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHPAUOBJECTSTRUCT@@@Z ; gObjIsConnected
  01304	83 c4 04	 add	 esp, 4
  01307	85 c0		 test	 eax, eax
  01309	75 07		 jne	 SHORT $LN144@Attack

; 718  : 		{
; 719  : 			return FALSE;

  0130b	33 c0		 xor	 eax, eax
  0130d	e9 12 17 00 00	 jmp	 $LN164@Attack
$LN144@Attack:

; 720  : 		}
; 721  : 	}
; 722  : 
; 723  : 	if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_MONSTER )

  01312	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01315	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  01319	83 f9 01	 cmp	 ecx, 1
  0131c	75 2f		 jne	 SHORT $LN141@Attack
  0131e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01321	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  01325	83 f9 02	 cmp	 ecx, 2
  01328	75 23		 jne	 SHORT $LN141@Attack

; 724  : 	{
; 725  : 		if ( lpObj->m_RecallMon >= 0 )

  0132a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0132d	83 b8 50 04 00
	00 00		 cmp	 DWORD PTR [eax+1104], 0
  01334	7c 17		 jl	 SHORT $LN141@Attack

; 726  : 		{
; 727  : 			if ( lpObj->m_RecallMon == lpTargetObj->m_Index )

  01336	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01339	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0133c	8b 90 50 04 00
	00		 mov	 edx, DWORD PTR [eax+1104]
  01342	3b 11		 cmp	 edx, DWORD PTR [ecx]
  01344	75 07		 jne	 SHORT $LN141@Attack

; 728  : 			{
; 729  : 				return FALSE;

  01346	33 c0		 xor	 eax, eax
  01348	e9 d7 16 00 00	 jmp	 $LN164@Attack
$LN141@Attack:

; 730  : 			}
; 731  : 		}
; 732  : 	}
; 733  : 
; 734  : 	if ( !gObjAttackQ(lpTargetObj))

  0134d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01350	50		 push	 eax
  01351	e8 00 00 00 00	 call	 ?gObjAttackQ@@YAHPAUOBJECTSTRUCT@@@Z ; gObjAttackQ
  01356	83 c4 04	 add	 esp, 4
  01359	85 c0		 test	 eax, eax
  0135b	75 07		 jne	 SHORT $LN140@Attack

; 735  : 	{
; 736  : 		return FALSE;

  0135d	33 c0		 xor	 eax, eax
  0135f	e9 c0 16 00 00	 jmp	 $LN164@Attack
$LN140@Attack:

; 737  : 	}
; 738  : 
; 739  : //#if(GS_CASTLE==1)
; 740  : 	if ( g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE)

  01364	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CastleSiege@@3VCCastleSiege@@A ; g_CastleSiege
  01369	e8 00 00 00 00	 call	 ?GetCastleState@CCastleSiege@@QAEHXZ ; CCastleSiege::GetCastleState
  0136e	83 f8 07	 cmp	 eax, 7
  01371	75 2d		 jne	 SHORT $LN137@Attack

; 741  : 	{
; 742  : 		if( lpObj->m_btCsJoinSide > 0 )

  01373	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01376	0f b6 88 02 1c
	00 00		 movzx	 ecx, BYTE PTR [eax+7170]
  0137d	85 c9		 test	 ecx, ecx
  0137f	7e 1f		 jle	 SHORT $LN137@Attack

; 743  : 		{
; 744  : 			if( lpObj->m_btCsJoinSide == lpTargetObj->m_btCsJoinSide )

  01381	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01384	0f b6 88 02 1c
	00 00		 movzx	 ecx, BYTE PTR [eax+7170]
  0138b	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  0138e	0f b6 82 02 1c
	00 00		 movzx	 eax, BYTE PTR [edx+7170]
  01395	3b c8		 cmp	 ecx, eax
  01397	75 07		 jne	 SHORT $LN137@Attack

; 745  : 			{
; 746  : 				return FALSE;

  01399	33 c0		 xor	 eax, eax
  0139b	e9 84 16 00 00	 jmp	 $LN164@Attack
$LN137@Attack:

; 747  : 			}
; 748  : 		}
; 749  : 	}
; 750  : //#endif
; 751  : 
; 752  : 	lpObj->m_TotalAttackCount++;

  013a0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  013a3	8b 88 98 03 00
	00		 mov	 ecx, DWORD PTR [eax+920]
  013a9	83 c1 01	 add	 ecx, 1
  013ac	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  013af	89 8a 98 03 00
	00		 mov	 DWORD PTR [edx+920], ecx

; 753  : 
; 754  : 	if ( this->CheckAttackArea(lpObj, lpTargetObj) == FALSE )

  013b5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013b8	50		 push	 eax
  013b9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  013bc	51		 push	 ecx
  013bd	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  013c0	e8 00 00 00 00	 call	 ?CheckAttackArea@CObjBaseAttack@@QAEHPAUOBJECTSTRUCT@@0@Z ; CObjBaseAttack::CheckAttackArea
  013c5	85 c0		 test	 eax, eax
  013c7	75 07		 jne	 SHORT $LN136@Attack

; 755  : 	{
; 756  : 		return FALSE;

  013c9	33 c0		 xor	 eax, eax
  013cb	e9 54 16 00 00	 jmp	 $LN164@Attack
$LN136@Attack:

; 757  : 	}
; 758  : 
; 759  : 	lpCallObj = lpObj;

  013d0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  013d3	89 45 f4	 mov	 DWORD PTR _lpCallObj$[ebp], eax

; 760  : 	lpCallTargetObj = lpTargetObj;

  013d6	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013d9	89 45 f0	 mov	 DWORD PTR _lpCallTargetObj$[ebp], eax

; 761  : 
; 762  : 	if ( lpTargetObj->Type == OBJ_MONSTER )

  013dc	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013df	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  013e3	83 f9 02	 cmp	 ecx, 2
  013e6	75 24		 jne	 SHORT $LN134@Attack

; 763  : 	{
; 764  : 		if ( lpTargetObj->m_RecallMon >= 0 )

  013e8	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013eb	83 b8 50 04 00
	00 00		 cmp	 DWORD PTR [eax+1104], 0
  013f2	7c 18		 jl	 SHORT $LN134@Attack

; 765  : 		{
; 766  : 			lpCallTargetObj = &gObj[lpTargetObj->m_RecallMon];

  013f4	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  013f7	8b 88 50 04 00
	00		 mov	 ecx, DWORD PTR [eax+1104]
  013fd	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01403	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01409	89 4d f0	 mov	 DWORD PTR _lpCallTargetObj$[ebp], ecx
$LN134@Attack:

; 767  : 		}
; 768  : 	}
; 769  : 
; 770  : 	if ( this->PkCheck(lpCallObj, lpTargetObj) == FALSE )

  0140c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0140f	50		 push	 eax
  01410	8b 4d f4	 mov	 ecx, DWORD PTR _lpCallObj$[ebp]
  01413	51		 push	 ecx
  01414	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01417	e8 00 00 00 00	 call	 ?PkCheck@CObjBaseAttack@@QAEHPAUOBJECTSTRUCT@@0@Z ; CObjBaseAttack::PkCheck
  0141c	85 c0		 test	 eax, eax
  0141e	75 07		 jne	 SHORT $LN133@Attack

; 771  : 	{
; 772  : 		return FALSE;

  01420	33 c0		 xor	 eax, eax
  01422	e9 fd 15 00 00	 jmp	 $LN164@Attack
$LN133@Attack:

; 773  : 	}
; 774  : 
; 775  : 	int Strength = lpObj->Strength + lpObj->AddStrength;

  01427	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0142a	0f b7 88 f4 00
	00 00		 movzx	 ecx, WORD PTR [eax+244]
  01431	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01434	0f bf 82 20 01
	00 00		 movsx	 eax, WORD PTR [edx+288]
  0143b	03 c8		 add	 ecx, eax
  0143d	89 4d d8	 mov	 DWORD PTR _Strength$[ebp], ecx

; 776  : 	int Dexterity = lpObj->Dexterity + lpObj->AddDexterity;

  01440	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01443	0f b7 88 f6 00
	00 00		 movzx	 ecx, WORD PTR [eax+246]
  0144a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0144d	0f bf 82 22 01
	00 00		 movsx	 eax, WORD PTR [edx+290]
  01454	03 c8		 add	 ecx, eax
  01456	89 4d d4	 mov	 DWORD PTR _Dexterity$[ebp], ecx

; 777  : 	int Vitality = lpObj->Vitality + lpObj->AddVitality;

  01459	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0145c	0f b7 88 f8 00
	00 00		 movzx	 ecx, WORD PTR [eax+248]
  01463	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01466	0f bf 82 24 01
	00 00		 movsx	 eax, WORD PTR [edx+292]
  0146d	03 c8		 add	 ecx, eax
  0146f	89 4d d0	 mov	 DWORD PTR _Vitality$[ebp], ecx

; 778  : 	int Energy = lpObj->Energy + lpObj->AddEnergy;

  01472	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01475	0f b7 88 fa 00
	00 00		 movzx	 ecx, WORD PTR [eax+250]
  0147c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0147f	0f bf 82 26 01
	00 00		 movsx	 eax, WORD PTR [edx+294]
  01486	03 c8		 add	 ecx, eax
  01488	89 4d cc	 mov	 DWORD PTR _Energy$[ebp], ecx

; 779  : 	BOOL bIsOnDuel = gObjDuelCheck(lpObj, lpTargetObj);

  0148b	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0148e	50		 push	 eax
  0148f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01492	51		 push	 ecx
  01493	e8 00 00 00 00	 call	 ?gObjDuelCheck@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjDuelCheck
  01498	83 c4 08	 add	 esp, 8
  0149b	89 45 c8	 mov	 DWORD PTR _bIsOnDuel$[ebp], eax

; 780  : 
; 781  : 	if ( bIsOnDuel )

  0149e	83 7d c8 00	 cmp	 DWORD PTR _bIsOnDuel$[ebp], 0
  014a2	74 1e		 je	 SHORT $LN132@Attack

; 782  : 	{
; 783  : 		lpObj->m_iDuelTickCount = GetTickCount();

  014a4	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  014aa	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  014ad	89 81 c0 0e 00
	00		 mov	 DWORD PTR [ecx+3776], eax

; 784  : 		lpTargetObj->m_iDuelTickCount = GetTickCount();

  014b3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  014b9	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  014bc	89 81 c0 0e 00
	00		 mov	 DWORD PTR [ecx+3776], eax
$LN132@Attack:

; 785  : 	}
; 786  : 
; 787  : 	int MSBFlag = 0;

  014c2	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _MSBFlag$[ebp], 0

; 788  : 	
; 789  : 	if ( criticaldamage )

  014c9	83 7d 14 00	 cmp	 DWORD PTR _criticaldamage$[ebp], 0
  014cd	74 06		 je	 SHORT $LN131@Attack

; 790  : 	{
; 791  : 		MsgDamage = 3;

  014cf	c6 45 ef 03	 mov	 BYTE PTR _MsgDamage$[ebp], 3

; 792  : 	}
; 793  : 	else

  014d3	eb 04		 jmp	 SHORT $LN130@Attack
$LN131@Attack:

; 794  : 	{
; 795  : 		MsgDamage = 0;

  014d5	c6 45 ef 00	 mov	 BYTE PTR _MsgDamage$[ebp], 0
$LN130@Attack:

; 796  : 	}
; 797  : 
; 798  : 	BOOL bAllMiss = FALSE;

  014d9	c7 45 c0 00 00
	00 00		 mov	 DWORD PTR _bAllMiss$[ebp], 0

; 799  : 	int AttackDamage = 0;

  014e0	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR _AttackDamage$[ebp], 0

; 800  : 
; 801  : 	if ( g_ShieldSystemOn == TRUE )

  014e7	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?g_ShieldSystemOn@@3HA, 1 ; g_ShieldSystemOn
  014ee	75 6a		 jne	 SHORT $LN129@Attack

; 802  : 	{
; 803  : 		if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_USER )

  014f0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  014f3	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  014f7	83 f9 01	 cmp	 ecx, 1
  014fa	75 35		 jne	 SHORT $LN128@Attack
  014fc	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  014ff	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  01503	83 f9 01	 cmp	 ecx, 1
  01506	75 29		 jne	 SHORT $LN128@Attack

; 804  : 		{
; 805  : 			if ( !this->MissCheckPvP(lpObj, lpTargetObj, skill, skillSuccess, bAllMiss) )

  01508	8d 45 c0	 lea	 eax, DWORD PTR _bAllMiss$[ebp]
  0150b	50		 push	 eax
  0150c	8b 4d f8	 mov	 ecx, DWORD PTR _skillSuccess$[ebp]
  0150f	51		 push	 ecx
  01510	8b 55 dc	 mov	 edx, DWORD PTR _skill$[ebp]
  01513	52		 push	 edx
  01514	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01517	50		 push	 eax
  01518	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0151b	51		 push	 ecx
  0151c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0151f	e8 00 00 00 00	 call	 ?MissCheckPvP@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ; CDarkSpirit::MissCheckPvP
  01524	85 c0		 test	 eax, eax
  01526	75 07		 jne	 SHORT $LN127@Attack

; 806  : 			{
; 807  : 				return FALSE;

  01528	33 c0		 xor	 eax, eax
  0152a	e9 f5 14 00 00	 jmp	 $LN164@Attack
$LN127@Attack:

; 808  : 			}
; 809  : 		}

  0152f	eb 27		 jmp	 SHORT $LN125@Attack
$LN128@Attack:

; 810  : 		else if ( !this->MissCheck(lpObj, lpTargetObj, skill, skillSuccess, bAllMiss) )

  01531	8d 45 c0	 lea	 eax, DWORD PTR _bAllMiss$[ebp]
  01534	50		 push	 eax
  01535	8b 4d f8	 mov	 ecx, DWORD PTR _skillSuccess$[ebp]
  01538	51		 push	 ecx
  01539	8b 55 dc	 mov	 edx, DWORD PTR _skill$[ebp]
  0153c	52		 push	 edx
  0153d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01540	50		 push	 eax
  01541	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01544	51		 push	 ecx
  01545	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01548	e8 00 00 00 00	 call	 ?MissCheck@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ; CDarkSpirit::MissCheck
  0154d	85 c0		 test	 eax, eax
  0154f	75 07		 jne	 SHORT $LN125@Attack

; 811  : 		{
; 812  : 			return FALSE;

  01551	33 c0		 xor	 eax, eax
  01553	e9 cc 14 00 00	 jmp	 $LN164@Attack
$LN125@Attack:

; 813  : 		}
; 814  : 
; 815  : 	}

  01558	eb 27		 jmp	 SHORT $LN123@Attack
$LN129@Attack:

; 816  : 	else if ( !this->MissCheck(lpObj, lpTargetObj, skill, skillSuccess, bAllMiss) )

  0155a	8d 45 c0	 lea	 eax, DWORD PTR _bAllMiss$[ebp]
  0155d	50		 push	 eax
  0155e	8b 4d f8	 mov	 ecx, DWORD PTR _skillSuccess$[ebp]
  01561	51		 push	 ecx
  01562	8b 55 dc	 mov	 edx, DWORD PTR _skill$[ebp]
  01565	52		 push	 edx
  01566	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01569	50		 push	 eax
  0156a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0156d	51		 push	 ecx
  0156e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01571	e8 00 00 00 00	 call	 ?MissCheck@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ; CDarkSpirit::MissCheck
  01576	85 c0		 test	 eax, eax
  01578	75 07		 jne	 SHORT $LN123@Attack

; 817  : 	{
; 818  : 		return FALSE;

  0157a	33 c0		 xor	 eax, eax
  0157c	e9 a3 14 00 00	 jmp	 $LN164@Attack
$LN123@Attack:

; 819  : 	}
; 820  : 
; 821  : 	int targetdefense = this->GetTargetDefense(lpObj, lpTargetObj, MsgDamage);

  01581	8d 45 ef	 lea	 eax, DWORD PTR _MsgDamage$[ebp]
  01584	50		 push	 eax
  01585	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01588	51		 push	 ecx
  01589	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0158c	52		 push	 edx
  0158d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01590	e8 00 00 00 00	 call	 ?GetTargetDefense@CObjBaseAttack@@QAEHPAUOBJECTSTRUCT@@0AAE@Z ; CObjBaseAttack::GetTargetDefense
  01595	89 45 b8	 mov	 DWORD PTR _targetdefense$[ebp], eax

; 822  : 	AttackDamage = this->GetAttackDamage(lpObj, targetdefense, bIsOnDuel, criticaldamage);

  01598	8b 45 14	 mov	 eax, DWORD PTR _criticaldamage$[ebp]
  0159b	50		 push	 eax
  0159c	8b 4d c8	 mov	 ecx, DWORD PTR _bIsOnDuel$[ebp]
  0159f	51		 push	 ecx
  015a0	8b 55 b8	 mov	 edx, DWORD PTR _targetdefense$[ebp]
  015a3	52		 push	 edx
  015a4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  015a7	50		 push	 eax
  015a8	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  015ab	e8 00 00 00 00	 call	 ?GetAttackDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@HHH@Z ; CDarkSpirit::GetAttackDamage
  015b0	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 823  : 
; 824  : 	if ( criticaldamage == 0 && iActionType == 0 )

  015b3	83 7d 14 00	 cmp	 DWORD PTR _criticaldamage$[ebp], 0
  015b7	75 0c		 jne	 SHORT $LN122@Attack
  015b9	83 7d 18 00	 cmp	 DWORD PTR _iActionType$[ebp], 0
  015bd	75 06		 jne	 SHORT $LN122@Attack

; 825  : 	{
; 826  : 		AttackDamage /= (int)1.5;

  015bf	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  015c2	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN122@Attack:

; 827  : 	}
; 828  : 
; 829  : 	if ( bAllMiss )

  015c5	83 7d c0 00	 cmp	 DWORD PTR _bAllMiss$[ebp], 0
  015c9	74 11		 je	 SHORT $LN121@Attack

; 830  : 	{
; 831  : 		AttackDamage = ( AttackDamage * 30 ) / 100;

  015cb	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  015ce	6b c0 1e	 imul	 eax, 30			; 0000001eH
  015d1	99		 cdq
  015d2	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  015d7	f7 f9		 idiv	 ecx
  015d9	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN121@Attack:

; 832  : 	}
; 833  : 
; 834  : 	if ( lpTargetObj->DamageMinus )

  015dc	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  015df	0f b6 88 70 01
	00 00		 movzx	 ecx, BYTE PTR [eax+368]
  015e6	85 c9		 test	 ecx, ecx
  015e8	74 26		 je	 SHORT $LN120@Attack

; 835  : 	{
; 836  : 		int beforeDamage = AttackDamage;

  015ea	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  015ed	89 45 b4	 mov	 DWORD PTR _beforeDamage$233913[ebp], eax

; 837  : 		AttackDamage -= ( ( AttackDamage * (int)lpTargetObj->DamageMinus) / 100 );

  015f0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  015f3	0f b6 88 70 01
	00 00		 movzx	 ecx, BYTE PTR [eax+368]
  015fa	8b c1		 mov	 eax, ecx
  015fc	0f af 45 bc	 imul	 eax, DWORD PTR _AttackDamage$[ebp]
  01600	99		 cdq
  01601	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01606	f7 f9		 idiv	 ecx
  01608	8b 55 bc	 mov	 edx, DWORD PTR _AttackDamage$[ebp]
  0160b	2b d0		 sub	 edx, eax
  0160d	89 55 bc	 mov	 DWORD PTR _AttackDamage$[ebp], edx
$LN120@Attack:

; 838  : 	}
; 839  : 
; 840  : 	int tlevel = lpObj->Level / 10;

  01610	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01613	0f bf 80 be 00
	00 00		 movsx	 eax, WORD PTR [eax+190]
  0161a	99		 cdq
  0161b	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  01620	f7 f9		 idiv	 ecx
  01622	89 45 b0	 mov	 DWORD PTR _tlevel$[ebp], eax

; 841  : 
; 842  : 	if ( AttackDamage < tlevel )

  01625	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01628	3b 45 b0	 cmp	 eax, DWORD PTR _tlevel$[ebp]
  0162b	7d 13		 jge	 SHORT $LN119@Attack

; 843  : 	{
; 844  : 		if ( tlevel < 1 )

  0162d	83 7d b0 01	 cmp	 DWORD PTR _tlevel$[ebp], 1
  01631	7d 07		 jge	 SHORT $LN118@Attack

; 845  : 		{
; 846  : 			tlevel = 1;

  01633	c7 45 b0 01 00
	00 00		 mov	 DWORD PTR _tlevel$[ebp], 1
$LN118@Attack:

; 847  : 		}
; 848  : 
; 849  : 		AttackDamage = tlevel;

  0163a	8b 45 b0	 mov	 eax, DWORD PTR _tlevel$[ebp]
  0163d	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN119@Attack:

; 850  : 	}
; 851  : 
; 852  : 	if ( lpTargetObj->m_SkillNumber == 18 )

  01640	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01643	0f bf 88 d8 03
	00 00		 movsx	 ecx, WORD PTR [eax+984]
  0164a	83 f9 12	 cmp	 ecx, 18			; 00000012H
  0164d	75 0e		 jne	 SHORT $LN116@Attack

; 853  : 	{
; 854  : 		if ( AttackDamage > 1 )

  0164f	83 7d bc 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  01653	7e 08		 jle	 SHORT $LN116@Attack

; 855  : 		{
; 856  : 			AttackDamage >>= 1;

  01655	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01658	d1 f8		 sar	 eax, 1
  0165a	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN116@Attack:

; 857  : 		}
; 858  : 	}
; 859  : 
; 860  : 	lpObj->pInventory[1].m_DurabilitySmall += AttackDamage * 2 / 100;

  0165d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01660	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01666	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01669	d1 e0		 shl	 eax, 1
  0166b	99		 cdq
  0166c	be 64 00 00 00	 mov	 esi, 100		; 00000064H
  01671	f7 fe		 idiv	 esi
  01673	0f b7 91 fc 00
	00 00		 movzx	 edx, WORD PTR [ecx+252]
  0167a	03 d0		 add	 edx, eax
  0167c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0167f	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01685	66 89 91 fc 00
	00 00		 mov	 WORD PTR [ecx+252], dx

; 861  : 
; 862  : 	if ( lpObj->pInventory[1].m_DurabilitySmall >= ExConfig.Pet.RavenDurabilitySmall /*800*/ + lpObj->m_MPSkillOpt.MpsPetDurDownSpeed) //season4 changed

  0168c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0168f	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01695	0f b7 91 fc 00
	00 00		 movzx	 edx, WORD PTR [ecx+252]
  0169c	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1319[ebp], edx
  016a2	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1319[ebp]
  016a8	db 05 58 08 00
	00		 fild	 DWORD PTR ?ExConfig@@3VcExConfigs@@A+2136
  016ae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  016b1	d8 80 6c 27 00
	00		 fadd	 DWORD PTR [eax+10092]
  016b7	de d9		 fcompp
  016b9	df e0		 fnstsw	 ax
  016bb	f6 c4 41	 test	 ah, 65			; 00000041H
  016be	0f 8a af 01 00
	00		 jp	 $LN115@Attack

; 863  : 	{
; 864  : 		lpObj->pInventory[1].m_DurabilitySmall = 0;

  016c4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  016c7	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  016cd	33 d2		 xor	 edx, edx
  016cf	66 89 91 fc 00
	00 00		 mov	 WORD PTR [ecx+252], dx

; 865  : 		lpObj->pInventory[1].m_Durability -= 1.0f;

  016d6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  016d9	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  016df	d9 81 f8 00 00
	00		 fld	 DWORD PTR [ecx+248]
  016e5	dc 25 00 00 00
	00		 fsub	 QWORD PTR __real@3ff0000000000000
  016eb	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  016ee	8b 82 24 0e 00
	00		 mov	 eax, DWORD PTR [edx+3620]
  016f4	d9 98 f8 00 00
	00		 fstp	 DWORD PTR [eax+248]

; 866  : 
; 867  : 		if ( lpObj->pInventory[1].m_Durability < 1.0f )

  016fa	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  016fd	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01703	d9 81 f8 00 00
	00		 fld	 DWORD PTR [ecx+248]
  01709	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@3ff0000000000000
  0170f	df e0		 fnstsw	 ax
  01711	f6 c4 05	 test	 ah, 5
  01714	0f 8a 06 01 00
	00		 jp	 $LN114@Attack

; 868  : 		{
; 869  : 			lpObj->pInventory[1].m_Durability = 0;

  0171a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0171d	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01723	d9 ee		 fldz
  01725	d9 99 f8 00 00
	00		 fstp	 DWORD PTR [ecx+248]

; 870  : 			int iPetExp = lpObj->pInventory[1].m_PetItem_Exp;

  0172b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0172e	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01734	8b 91 94 01 00
	00		 mov	 edx, DWORD PTR [ecx+404]
  0173a	89 55 ac	 mov	 DWORD PTR _iPetExp$233922[ebp], edx

; 871  : 
; 872  : 			if ( lpObj->pInventory[1].DecPetItemExp(10) )

  0173d	6a 0a		 push	 10			; 0000000aH
  0173f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01742	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01748	81 c1 d4 00 00
	00		 add	 ecx, 212		; 000000d4H
  0174e	e8 00 00 00 00	 call	 ?DecPetItemExp@CItem@@QAEHH@Z ; CItem::DecPetItemExp
  01753	85 c0		 test	 eax, eax
  01755	0f 84 99 00 00
	00		 je	 $LN113@Attack

; 873  : 			{
; 874  : 				LogAddTD("[%s][%s][PetItemExpDown] [%s] Level:[%d]Exp:[%d]DecExp[%d]",	lpObj->AccountID, lpObj->Name, lpObj->pInventory[1].GetName(),	lpObj->pInventory[1].m_PetItem_Level, lpObj->pInventory[1].m_PetItem_Exp, iPetExp - lpObj->pInventory[1].m_PetItem_Exp);

  0175b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0175e	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01764	8b 55 ac	 mov	 edx, DWORD PTR _iPetExp$233922[ebp]
  01767	2b 91 94 01 00
	00		 sub	 edx, DWORD PTR [ecx+404]
  0176d	52		 push	 edx
  0176e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01771	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01777	8b 91 94 01 00
	00		 mov	 edx, DWORD PTR [ecx+404]
  0177d	52		 push	 edx
  0177e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01781	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01787	8b 91 90 01 00
	00		 mov	 edx, DWORD PTR [ecx+400]
  0178d	52		 push	 edx
  0178e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01791	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01797	81 c1 d4 00 00
	00		 add	 ecx, 212		; 000000d4H
  0179d	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  017a2	50		 push	 eax
  017a3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  017a6	83 c1 77	 add	 ecx, 119		; 00000077H
  017a9	51		 push	 ecx
  017aa	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  017ad	83 c2 6c	 add	 edx, 108		; 0000006cH
  017b0	52		 push	 edx
  017b1	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@HDCMLJGF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLPetItemExpDown?$FN?5?$FL?$CFs?$FN?5Le@
  017b6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  017bc	83 c4 1c	 add	 esp, 28			; 0000001cH

; 875  : 
; 876  : 				this->Set(lpObj->m_Index, &lpObj->pInventory[1]);

  017bf	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  017c2	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  017c8	81 c1 d4 00 00
	00		 add	 ecx, 212		; 000000d4H
  017ce	51		 push	 ecx
  017cf	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  017d2	8b 02		 mov	 eax, DWORD PTR [edx]
  017d4	50		 push	 eax
  017d5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  017d8	e8 00 00 00 00	 call	 ?Set@CDarkSpirit@@QAEXHPAVCItem@@@Z ; CDarkSpirit::Set

; 877  : 				this->SendLevelmsg(lpObj->m_Index, 1, 0, 0xFF);

  017dd	68 ff 00 00 00	 push	 255			; 000000ffH
  017e2	6a 00		 push	 0
  017e4	6a 01		 push	 1
  017e6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  017e9	8b 08		 mov	 ecx, DWORD PTR [eax]
  017eb	51		 push	 ecx
  017ec	e8 00 00 00 00	 call	 ?SendLevelmsg@CDarkSpirit@@SAXHHHH@Z ; CDarkSpirit::SendLevelmsg
  017f1	83 c4 10	 add	 esp, 16			; 00000010H
$LN113@Attack:

; 878  : 			}
; 879  : 
; 880  : 			LogAddTD("[%s][%s]  Item is Broken because durability is exhausted [%d]", lpObj->AccountID, lpObj->Name, lpObj->pInventory[1].m_Number);

  017f4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  017f7	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  017fd	8b 91 d4 00 00
	00		 mov	 edx, DWORD PTR [ecx+212]
  01803	52		 push	 edx
  01804	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01807	83 c0 77	 add	 eax, 119		; 00000077H
  0180a	50		 push	 eax
  0180b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0180e	83 c1 6c	 add	 ecx, 108		; 0000006cH
  01811	51		 push	 ecx
  01812	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@IMJLIFKK@?$FL?$CFs?$FN?$FL?$CFs?$FN?5?$LE?Y?E?$KJ?$LN?$LK?G?G?$LI?$LE?$MA?G?$LJ?$NP?E?i?5Item?5i@
  01817	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0181d	83 c4 10	 add	 esp, 16			; 00000010H
$LN114@Attack:

; 881  : 		}
; 882  : 
; 883  : 		GCItemDurSend(lpObj->m_Index, 1, (BYTE)lpObj->pInventory[1].m_Durability, 0);

  01820	6a 00		 push	 0
  01822	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01825	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  0182b	d9 81 f8 00 00
	00		 fld	 DWORD PTR [ecx+248]
  01831	d9 bd 02 ff ff
	ff		 fnstcw	 WORD PTR tv1363[ebp]
  01837	0f b7 85 02 ff
	ff ff		 movzx	 eax, WORD PTR tv1363[ebp]
  0183e	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  01843	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv1366[ebp], eax
  01849	d9 ad fc fe ff
	ff		 fldcw	 WORD PTR tv1366[ebp]
  0184f	db 9d f8 fe ff
	ff		 fistp	 DWORD PTR tv1368[ebp]
  01855	d9 ad 02 ff ff
	ff		 fldcw	 WORD PTR tv1363[ebp]
  0185b	0f b6 95 f8 fe
	ff ff		 movzx	 edx, BYTE PTR tv1368[ebp]
  01862	52		 push	 edx
  01863	6a 01		 push	 1
  01865	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01868	8b 08		 mov	 ecx, DWORD PTR [eax]
  0186a	51		 push	 ecx
  0186b	e8 00 00 00 00	 call	 ?GCItemDurSend@@YAXHEEE@Z ; GCItemDurSend
  01870	83 c4 10	 add	 esp, 16			; 00000010H
$LN115@Attack:

; 884  : 	}
; 885  : 
; 886  : 	if ( gObjAngelSprite(lpTargetObj) == TRUE )

  01873	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01876	50		 push	 eax
  01877	e8 00 00 00 00	 call	 ?gObjAngelSprite@@YAHPAUOBJECTSTRUCT@@@Z ; gObjAngelSprite
  0187c	83 c4 04	 add	 esp, 4
  0187f	83 f8 01	 cmp	 eax, 1
  01882	75 2c		 jne	 SHORT $LN111@Attack

; 887  : 	{
; 888  : 		if ( AttackDamage > 1 )

  01884	83 7d bc 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  01888	7e 26		 jle	 SHORT $LN111@Attack

; 889  : 		{
; 890  : 			float  damage = (AttackDamage * 8) / 10.0f;

  0188a	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0188d	c1 e0 03	 shl	 eax, 3
  01890	89 85 00 ff ff
	ff		 mov	 DWORD PTR tv1376[ebp], eax
  01896	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1376[ebp]
  0189c	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4024000000000000
  018a2	d9 5d a8	 fstp	 DWORD PTR _damage$233929[ebp]

; 891  : 			AttackDamage = (int)damage;

  018a5	d9 45 a8	 fld	 DWORD PTR _damage$233929[ebp]
  018a8	e8 00 00 00 00	 call	 __ftol2_sse
  018ad	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN111@Attack:

; 892  : 		}
; 893  : 	}
; 894  : 
; 895  : 	if ( gObjWingSprite(lpTargetObj) == TRUE )

  018b0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  018b3	50		 push	 eax
  018b4	e8 00 00 00 00	 call	 ?gObjWingSprite@@YAHPAUOBJECTSTRUCT@@@Z ; gObjWingSprite
  018b9	83 c4 04	 add	 esp, 4
  018bc	83 f8 01	 cmp	 eax, 1
  018bf	0f 85 54 04 00
	00		 jne	 $LN86@Attack

; 896  : 	{
; 897  : 		CItem * Wing = &lpTargetObj->pInventory[7];

  018c5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  018c8	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  018ce	81 c1 cc 05 00
	00		 add	 ecx, 1484		; 000005ccH
  018d4	89 4d a4	 mov	 DWORD PTR _Wing$233932[ebp], ecx

; 898  : 
; 899  : 		if ( AttackDamage > 1 )

  018d7	83 7d bc 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  018db	0f 8e 38 04 00
	00		 jle	 $LN86@Attack

; 900  : 		{
; 901  : 			if ( Wing->m_Type == ITEMGET(12, 36) || //season 2.5 add-on
; 902  : 				 Wing->m_Type == ITEMGET(12, 37) || 
; 903  : 				 Wing->m_Type == ITEMGET(12, 38) || 
; 904  : 				 Wing->m_Type == ITEMGET(12, 39))

  018e1	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  018e4	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  018e8	81 f9 24 18 00
	00		 cmp	 ecx, 6180		; 00001824H
  018ee	74 2d		 je	 SHORT $LN107@Attack
  018f0	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  018f3	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  018f7	81 f9 25 18 00
	00		 cmp	 ecx, 6181		; 00001825H
  018fd	74 1e		 je	 SHORT $LN107@Attack
  018ff	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01902	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01906	81 f9 26 18 00
	00		 cmp	 ecx, 6182		; 00001826H
  0190c	74 0f		 je	 SHORT $LN107@Attack
  0190e	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01911	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01915	81 f9 27 18 00
	00		 cmp	 ecx, 6183		; 00001827H
  0191b	75 39		 jne	 SHORT $LN108@Attack
$LN107@Attack:

; 905  : 			{
; 906  : 				float damage = (float)(AttackDamage * (61 - (Wing->m_Level*2))) / 100.0f;

  0191d	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01920	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01924	d1 e1		 shl	 ecx, 1
  01926	ba 3d 00 00 00	 mov	 edx, 61			; 0000003dH
  0192b	2b d1		 sub	 edx, ecx
  0192d	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01931	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1394[ebp], edx
  01937	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1394[ebp]
  0193d	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01943	d9 5d a0	 fstp	 DWORD PTR _damage$233936[ebp]

; 907  : 				AttackDamage = (int)(damage);	//  #formula

  01946	d9 45 a0	 fld	 DWORD PTR _damage$233936[ebp]
  01949	e8 00 00 00 00	 call	 __ftol2_sse
  0194e	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01951	e9 c3 03 00 00	 jmp	 $LN86@Attack
$LN108@Attack:

; 908  : 			}
; 909  : 			else if ( Wing->m_Type == ITEMGET(12, 40) )

  01956	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01959	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  0195d	81 f9 28 18 00
	00		 cmp	 ecx, 6184		; 00001828H
  01963	75 39		 jne	 SHORT $LN105@Attack

; 910  : 			{
; 911  : 				float damage = (float)(AttackDamage * (76 - (Wing->m_Level*2))) / 100.0f;

  01965	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01968	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  0196c	d1 e1		 shl	 ecx, 1
  0196e	ba 4c 00 00 00	 mov	 edx, 76			; 0000004cH
  01973	2b d1		 sub	 edx, ecx
  01975	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01979	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1406[ebp], edx
  0197f	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1406[ebp]
  01985	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  0198b	d9 5d 9c	 fstp	 DWORD PTR _damage$233941[ebp]

; 912  : 				AttackDamage = (int)(damage);	//  #formula

  0198e	d9 45 9c	 fld	 DWORD PTR _damage$233941[ebp]
  01991	e8 00 00 00 00	 call	 __ftol2_sse
  01996	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01999	e9 7b 03 00 00	 jmp	 $LN86@Attack
$LN105@Attack:

; 913  : 			}
; 914  : 			else if ( Wing->m_Type == ITEMGET(12, 41) )

  0199e	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  019a1	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  019a5	81 f9 29 18 00
	00		 cmp	 ecx, 6185		; 00001829H
  019ab	75 39		 jne	 SHORT $LN103@Attack

; 915  : 			{
; 916  : 				float damage = (float)(AttackDamage * (88 - (Wing->m_Level*2))) / 100.0f;

  019ad	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  019b0	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  019b4	d1 e1		 shl	 ecx, 1
  019b6	ba 58 00 00 00	 mov	 edx, 88			; 00000058H
  019bb	2b d1		 sub	 edx, ecx
  019bd	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  019c1	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1418[ebp], edx
  019c7	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1418[ebp]
  019cd	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  019d3	d9 5d 98	 fstp	 DWORD PTR _damage$233946[ebp]

; 917  : 				AttackDamage = (int)(damage);	//  #formula

  019d6	d9 45 98	 fld	 DWORD PTR _damage$233946[ebp]
  019d9	e8 00 00 00 00	 call	 __ftol2_sse
  019de	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  019e1	e9 33 03 00 00	 jmp	 $LN86@Attack
$LN103@Attack:

; 918  : 			}
; 919  : 			else if ( Wing->m_Type == ITEMGET(12, 42) )

  019e6	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  019e9	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  019ed	81 f9 2a 18 00
	00		 cmp	 ecx, 6186		; 0000182aH
  019f3	75 39		 jne	 SHORT $LN101@Attack

; 920  : 			{
; 921  : 				float damage = (float)(AttackDamage * (75 - (Wing->m_Level*2))) / 100.0f;

  019f5	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  019f8	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  019fc	d1 e1		 shl	 ecx, 1
  019fe	ba 4b 00 00 00	 mov	 edx, 75			; 0000004bH
  01a03	2b d1		 sub	 edx, ecx
  01a05	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01a09	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1430[ebp], edx
  01a0f	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1430[ebp]
  01a15	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01a1b	d9 5d 94	 fstp	 DWORD PTR _damage$233951[ebp]

; 922  : 				AttackDamage = (int)(damage);	//  #formula

  01a1e	d9 45 94	 fld	 DWORD PTR _damage$233951[ebp]
  01a21	e8 00 00 00 00	 call	 __ftol2_sse
  01a26	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01a29	e9 eb 02 00 00	 jmp	 $LN86@Attack
$LN101@Attack:

; 923  : 			}
; 924  : 			else if ( Wing->m_Type == ITEMGET(12, 43) )

  01a2e	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01a31	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01a35	81 f9 2b 18 00
	00		 cmp	 ecx, 6187		; 0000182bH
  01a3b	75 39		 jne	 SHORT $LN99@Attack

; 925  : 			{
; 926  : 				float damage = (float)(AttackDamage * (61 - (Wing->m_Level*2))) / 100.0f;

  01a3d	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01a40	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01a44	d1 e1		 shl	 ecx, 1
  01a46	ba 3d 00 00 00	 mov	 edx, 61			; 0000003dH
  01a4b	2b d1		 sub	 edx, ecx
  01a4d	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01a51	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1442[ebp], edx
  01a57	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1442[ebp]
  01a5d	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01a63	d9 5d 90	 fstp	 DWORD PTR _damage$233956[ebp]

; 927  : 				AttackDamage = (int)(damage);	//  #formula

  01a66	d9 45 90	 fld	 DWORD PTR _damage$233956[ebp]
  01a69	e8 00 00 00 00	 call	 __ftol2_sse
  01a6e	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01a71	e9 a3 02 00 00	 jmp	 $LN86@Attack
$LN99@Attack:

; 928  : 			}
; 929  : 			else if ( Wing->m_Type > ITEMGET(12, 2) )

  01a76	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01a79	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01a7d	81 f9 02 18 00
	00		 cmp	 ecx, 6146		; 00001802H
  01a83	7e 39		 jle	 SHORT $LN97@Attack

; 930  : 			{
; 931  : 				float damage = (float)(AttackDamage * (75 - (Wing->m_Level*2))) / 100.0f;

  01a85	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01a88	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01a8c	d1 e1		 shl	 ecx, 1
  01a8e	ba 4b 00 00 00	 mov	 edx, 75			; 0000004bH
  01a93	2b d1		 sub	 edx, ecx
  01a95	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01a99	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1454[ebp], edx
  01a9f	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1454[ebp]
  01aa5	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01aab	d9 5d 8c	 fstp	 DWORD PTR _damage$233961[ebp]

; 932  : 				AttackDamage = (int)(damage);	//  #formula

  01aae	d9 45 8c	 fld	 DWORD PTR _damage$233961[ebp]
  01ab1	e8 00 00 00 00	 call	 __ftol2_sse
  01ab6	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01ab9	e9 5b 02 00 00	 jmp	 $LN86@Attack
$LN97@Attack:

; 933  : 			}
; 934  : 			else if (Wing->m_Type == ITEMGET(12,50))

  01abe	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01ac1	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01ac5	81 f9 32 18 00
	00		 cmp	 ecx, 6194		; 00001832H
  01acb	75 39		 jne	 SHORT $LN95@Attack

; 935  : 			{
; 936  : 				float damage = (float)(AttackDamage * (76 - (Wing->m_Level*2))) / 100.0f;

  01acd	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01ad0	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01ad4	d1 e1		 shl	 ecx, 1
  01ad6	ba 4c 00 00 00	 mov	 edx, 76			; 0000004cH
  01adb	2b d1		 sub	 edx, ecx
  01add	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01ae1	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1466[ebp], edx
  01ae7	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1466[ebp]
  01aed	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01af3	d9 5d 88	 fstp	 DWORD PTR _damage$233966[ebp]

; 937  : 				AttackDamage = (int)(damage);

  01af6	d9 45 88	 fld	 DWORD PTR _damage$233966[ebp]
  01af9	e8 00 00 00 00	 call	 __ftol2_sse
  01afe	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01b01	e9 13 02 00 00	 jmp	 $LN86@Attack
$LN95@Attack:

; 938  : 			}
; 939  : #ifdef NEWWINGS_6
; 940  : 
; 941  : 			else if ( IS_NEWWINGS_6(Wing->m_Type) )

  01b06	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01b09	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01b0d	81 f9 c3 18 00
	00		 cmp	 ecx, 6339		; 000018c3H
  01b13	7d 0c		 jge	 SHORT $LN166@Attack
  01b15	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv569[ebp], 0
  01b1f	eb 17		 jmp	 SHORT $LN167@Attack
$LN166@Attack:
  01b21	8b 55 a4	 mov	 edx, DWORD PTR _Wing$233932[ebp]
  01b24	0f bf 42 06	 movsx	 eax, WORD PTR [edx+6]
  01b28	33 c9		 xor	 ecx, ecx
  01b2a	3d dc 18 00 00	 cmp	 eax, 6364		; 000018dcH
  01b2f	0f 9e c1	 setle	 cl
  01b32	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv569[ebp], ecx
$LN167@Attack:
  01b38	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv569[ebp], 0
  01b3f	74 39		 je	 SHORT $LN93@Attack

; 942  : 			{
; 943  : 				///if(g_ExLicense.CheckUser(eExUB::PrideMuLocal || eExUB::PrideMu || eExUB::Local3 || eExUB::Local2)){
; 944  : 			
; 945  : 				float damage = (float)(AttackDamage * (45/*50*/ - (Wing->m_Level*2))) / 100.0f;   // Fix Damage wings 5lvl in Pvp

  01b41	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01b44	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01b48	d1 e1		 shl	 ecx, 1
  01b4a	ba 2d 00 00 00	 mov	 edx, 45			; 0000002dH
  01b4f	2b d1		 sub	 edx, ecx
  01b51	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01b55	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1481[ebp], edx
  01b5b	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1481[ebp]
  01b61	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01b67	d9 5d 84	 fstp	 DWORD PTR _damage$233971[ebp]

; 946  : 				AttackDamage = (int)(damage);	//  #formula

  01b6a	d9 45 84	 fld	 DWORD PTR _damage$233971[ebp]
  01b6d	e8 00 00 00 00	 call	 __ftol2_sse
  01b72	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01b75	e9 9f 01 00 00	 jmp	 $LN86@Attack
$LN93@Attack:

; 947  : 				//}
; 948  : 			}
; 949  : #endif
; 950  : #ifdef NEWWINGS_5
; 951  : 			else if ( IS_NEWWINGS_5(Wing->m_Type) )

  01b7a	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01b7d	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01b81	81 f9 bd 18 00
	00		 cmp	 ecx, 6333		; 000018bdH
  01b87	7d 0c		 jge	 SHORT $LN168@Attack
  01b89	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv588[ebp], 0
  01b93	eb 17		 jmp	 SHORT $LN169@Attack
$LN168@Attack:
  01b95	8b 55 a4	 mov	 edx, DWORD PTR _Wing$233932[ebp]
  01b98	0f bf 42 06	 movsx	 eax, WORD PTR [edx+6]
  01b9c	33 c9		 xor	 ecx, ecx
  01b9e	3d c2 18 00 00	 cmp	 eax, 6338		; 000018c2H
  01ba3	0f 9e c1	 setle	 cl
  01ba6	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv588[ebp], ecx
$LN169@Attack:
  01bac	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv588[ebp], 0
  01bb3	74 39		 je	 SHORT $LN91@Attack

; 952  : 			{
; 953  : 				float damage = (float)(AttackDamage * (50/*50*/ - (Wing->m_Level*2))) / 100.0f;   // Fix Damage wings 5lvl in Pvp

  01bb5	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01bb8	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01bbc	d1 e1		 shl	 ecx, 1
  01bbe	ba 32 00 00 00	 mov	 edx, 50			; 00000032H
  01bc3	2b d1		 sub	 edx, ecx
  01bc5	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01bc9	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1496[ebp], edx
  01bcf	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1496[ebp]
  01bd5	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01bdb	d9 5d 80	 fstp	 DWORD PTR _damage$233976[ebp]

; 954  : 				AttackDamage = (int)(damage);	//  #formula

  01bde	d9 45 80	 fld	 DWORD PTR _damage$233976[ebp]
  01be1	e8 00 00 00 00	 call	 __ftol2_sse
  01be6	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01be9	e9 2b 01 00 00	 jmp	 $LN86@Attack
$LN91@Attack:

; 955  : 			}
; 956  : #endif
; 957  : #ifdef NEWWINGS_4
; 958  : 			else if ( IS_NEWWINGS_4(Wing->m_Type) )	//Custom Wings4

  01bee	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01bf1	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01bf5	81 f9 b4 18 00
	00		 cmp	 ecx, 6324		; 000018b4H
  01bfb	7d 0c		 jge	 SHORT $LN170@Attack
  01bfd	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv607[ebp], 0
  01c07	eb 17		 jmp	 SHORT $LN171@Attack
$LN170@Attack:
  01c09	8b 55 a4	 mov	 edx, DWORD PTR _Wing$233932[ebp]
  01c0c	0f bf 42 06	 movsx	 eax, WORD PTR [edx+6]
  01c10	33 c9		 xor	 ecx, ecx
  01c12	3d b9 18 00 00	 cmp	 eax, 6329		; 000018b9H
  01c17	0f 9e c1	 setle	 cl
  01c1a	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv607[ebp], ecx
$LN171@Attack:
  01c20	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv607[ebp], 0
  01c27	74 3f		 je	 SHORT $LN89@Attack

; 959  : 			{
; 960  : 				float damage = (float)(AttackDamage * (55 - (Wing->m_Level*2))) / 100.0f;

  01c29	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01c2c	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01c30	d1 e1		 shl	 ecx, 1
  01c32	ba 37 00 00 00	 mov	 edx, 55			; 00000037H
  01c37	2b d1		 sub	 edx, ecx
  01c39	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01c3d	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1511[ebp], edx
  01c43	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1511[ebp]
  01c49	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01c4f	d9 9d 7c ff ff
	ff		 fstp	 DWORD PTR _damage$233981[ebp]

; 961  : 				AttackDamage = (int)(damage);	//  #formula

  01c55	d9 85 7c ff ff
	ff		 fld	 DWORD PTR _damage$233981[ebp]
  01c5b	e8 00 00 00 00	 call	 __ftol2_sse
  01c60	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  01c63	e9 b1 00 00 00	 jmp	 $LN86@Attack
$LN89@Attack:

; 962  : 			}
; 963  : #endif
; 964  : #ifdef NEWWINGS_2_5
; 965  : 			else if ( IS_NEWWINGS_2_5(Wing->m_Type) )	//Custom Wings2.5

  01c68	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01c6b	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01c6f	81 f9 ba 18 00
	00		 cmp	 ecx, 6330		; 000018baH
  01c75	7d 0c		 jge	 SHORT $LN172@Attack
  01c77	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv626[ebp], 0
  01c81	eb 17		 jmp	 SHORT $LN173@Attack
$LN172@Attack:
  01c83	8b 55 a4	 mov	 edx, DWORD PTR _Wing$233932[ebp]
  01c86	0f bf 42 06	 movsx	 eax, WORD PTR [edx+6]
  01c8a	33 c9		 xor	 ecx, ecx
  01c8c	3d bc 18 00 00	 cmp	 eax, 6332		; 000018bcH
  01c91	0f 9e c1	 setle	 cl
  01c94	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv626[ebp], ecx
$LN173@Attack:
  01c9a	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv626[ebp], 0
  01ca1	74 3c		 je	 SHORT $LN87@Attack

; 966  : 			{
; 967  : 				float damage = (float)(AttackDamage * (65 - (Wing->m_Level*2))) / 100.0f;

  01ca3	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01ca6	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01caa	d1 e1		 shl	 ecx, 1
  01cac	ba 41 00 00 00	 mov	 edx, 65			; 00000041H
  01cb1	2b d1		 sub	 edx, ecx
  01cb3	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01cb7	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1526[ebp], edx
  01cbd	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1526[ebp]
  01cc3	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01cc9	d9 9d 78 ff ff
	ff		 fstp	 DWORD PTR _damage$233986[ebp]

; 968  : 				AttackDamage = (int)(damage);	//  #formula

  01ccf	d9 85 78 ff ff
	ff		 fld	 DWORD PTR _damage$233986[ebp]
  01cd5	e8 00 00 00 00	 call	 __ftol2_sse
  01cda	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 969  : 			}
; 970  : #endif
; 971  : 			else

  01cdd	eb 3a		 jmp	 SHORT $LN86@Attack
$LN87@Attack:

; 972  : 			{
; 973  : 				float damage = (float)(AttackDamage * (88 - (Wing->m_Level*2))) / 100.0f;

  01cdf	8b 45 a4	 mov	 eax, DWORD PTR _Wing$233932[ebp]
  01ce2	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01ce6	d1 e1		 shl	 ecx, 1
  01ce8	ba 58 00 00 00	 mov	 edx, 88			; 00000058H
  01ced	2b d1		 sub	 edx, ecx
  01cef	0f af 55 bc	 imul	 edx, DWORD PTR _AttackDamage$[ebp]
  01cf3	89 95 00 ff ff
	ff		 mov	 DWORD PTR tv1537[ebp], edx
  01cf9	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1537[ebp]
  01cff	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  01d05	d9 9d 74 ff ff
	ff		 fstp	 DWORD PTR _damage$233990[ebp]

; 974  : 				AttackDamage = (int)(damage);	//  #formula

  01d0b	d9 85 74 ff ff
	ff		 fld	 DWORD PTR _damage$233990[ebp]
  01d11	e8 00 00 00 00	 call	 __ftol2_sse
  01d16	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN86@Attack:

; 975  : 			}
; 976  : 		}
; 977  : 	}
; 978  : 
; 979  : 	if ( gObjDenorantSprite(lpTargetObj ) )

  01d19	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01d1c	50		 push	 eax
  01d1d	e8 00 00 00 00	 call	 ?gObjDenorantSprite@@YAHPAUOBJECTSTRUCT@@@Z ; gObjDenorantSprite
  01d22	83 c4 04	 add	 esp, 4
  01d25	85 c0		 test	 eax, eax
  01d27	0f 84 ab 00 00
	00		 je	 $LN85@Attack

; 980  : 	{
; 981  : 		CItem * Dinorant = &lpTargetObj->pInventory[8];

  01d2d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01d30	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01d36	81 c1 a0 06 00
	00		 add	 ecx, 1696		; 000006a0H
  01d3c	89 8d 70 ff ff
	ff		 mov	 DWORD PTR _Dinorant$233994[ebp], ecx

; 982  : 		int dinorantdecdamage = 90 - Dinorant->IsDinorantReduceAttackDamaege();

  01d42	8b 8d 70 ff ff
	ff		 mov	 ecx, DWORD PTR _Dinorant$233994[ebp]
  01d48	e8 00 00 00 00	 call	 ?IsDinorantReduceAttackDamaege@CItem@@QAEHXZ ; CItem::IsDinorantReduceAttackDamaege
  01d4d	b9 5a 00 00 00	 mov	 ecx, 90			; 0000005aH
  01d52	2b c8		 sub	 ecx, eax
  01d54	89 8d 6c ff ff
	ff		 mov	 DWORD PTR _dinorantdecdamage$233995[ebp], ecx

; 983  : 		lpObj->Life -= 1.0f;

  01d5a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01d5d	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  01d63	dc 25 00 00 00
	00		 fsub	 QWORD PTR __real@3ff0000000000000
  01d69	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01d6c	d9 99 fc 00 00
	00		 fstp	 DWORD PTR [ecx+252]

; 984  : 
; 985  : 		if ( lpObj->Life < 0.0f )

  01d72	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01d75	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  01d7b	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  01d81	df e0		 fnstsw	 ax
  01d83	f6 c4 05	 test	 ah, 5
  01d86	7a 0d		 jp	 SHORT $LN84@Attack

; 986  : 		{
; 987  : 			lpObj->Life = 0.0f;

  01d88	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01d8b	d9 ee		 fldz
  01d8d	d9 98 fc 00 00
	00		 fstp	 DWORD PTR [eax+252]

; 988  : 		}
; 989  : 		else

  01d93	eb 15		 jmp	 SHORT $LN83@Attack
$LN84@Attack:

; 990  : 		{
; 991  : 			AttackDamage = AttackDamage * dinorantdecdamage / 100;

  01d95	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01d98	0f af 85 6c ff
	ff ff		 imul	 eax, DWORD PTR _dinorantdecdamage$233995[ebp]
  01d9f	99		 cdq
  01da0	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01da5	f7 f9		 idiv	 ecx
  01da7	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN83@Attack:

; 992  : 		}
; 993  : 
; 994  : 		GCReFillSend(lpObj->m_Index, lpObj->Life, 0xFF, 0, lpObj->iShield);

  01daa	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01dad	8b 88 54 01 00
	00		 mov	 ecx, DWORD PTR [eax+340]
  01db3	51		 push	 ecx
  01db4	6a 00		 push	 0
  01db6	68 ff 00 00 00	 push	 255			; 000000ffH
  01dbb	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01dbe	d9 82 fc 00 00
	00		 fld	 DWORD PTR [edx+252]
  01dc4	e8 00 00 00 00	 call	 __ftol2_sse
  01dc9	50		 push	 eax
  01dca	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01dcd	8b 08		 mov	 ecx, DWORD PTR [eax]
  01dcf	51		 push	 ecx
  01dd0	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHHEEH@Z ; GCReFillSend
  01dd5	83 c4 14	 add	 esp, 20			; 00000014H
$LN85@Attack:

; 995  : 	}
; 996  : 
; 997  : 	if ( gObjDarkHorse(lpTargetObj ) )

  01dd8	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01ddb	50		 push	 eax
  01ddc	e8 00 00 00 00	 call	 ?gObjDarkHorse@@YAHPAUOBJECTSTRUCT@@@Z ; gObjDarkHorse
  01de1	83 c4 04	 add	 esp, 4
  01de4	85 c0		 test	 eax, eax
  01de6	0f 84 e3 00 00
	00		 je	 $LN82@Attack

; 998  : 	{
; 999  : 		CItem * Darkhorse = &lpTargetObj->pInventory[8];

  01dec	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01def	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  01df5	81 c1 a0 06 00
	00		 add	 ecx, 1696		; 000006a0H
  01dfb	89 8d 68 ff ff
	ff		 mov	 DWORD PTR _Darkhorse$233999[ebp], ecx

; 1000 : 		int decdamage = 100 - ((Darkhorse->m_PetItem_Level + 30) / 2 );

  01e01	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR _Darkhorse$233999[ebp]
  01e07	8b 80 bc 00 00
	00		 mov	 eax, DWORD PTR [eax+188]
  01e0d	83 c0 1e	 add	 eax, 30			; 0000001eH
  01e10	99		 cdq
  01e11	2b c2		 sub	 eax, edx
  01e13	d1 f8		 sar	 eax, 1
  01e15	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01e1a	2b c8		 sub	 ecx, eax
  01e1c	89 8d 64 ff ff
	ff		 mov	 DWORD PTR _decdamage$234000[ebp], ecx

; 1001 : #ifdef _WINGS_DAMAGE_
; 1002 : 		gWingsDamage.SetCharHorseAttack(lpTargetObj->m_Index, Darkhorse->m_Type, Darkhorse->m_PetItem_Level, decdamage);

  01e22	8d 85 64 ff ff
	ff		 lea	 eax, DWORD PTR _decdamage$234000[ebp]
  01e28	50		 push	 eax
  01e29	8b 8d 68 ff ff
	ff		 mov	 ecx, DWORD PTR _Darkhorse$233999[ebp]
  01e2f	8b 91 bc 00 00
	00		 mov	 edx, DWORD PTR [ecx+188]
  01e35	52		 push	 edx
  01e36	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR _Darkhorse$233999[ebp]
  01e3c	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  01e40	51		 push	 ecx
  01e41	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01e44	8b 02		 mov	 eax, DWORD PTR [edx]
  01e46	50		 push	 eax
  01e47	b9 00 00 00 00	 mov	 ecx, OFFSET ?gWingsDamage@@3VcWingsDamage@@A ; gWingsDamage
  01e4c	e8 00 00 00 00	 call	 ?SetCharHorseAttack@cWingsDamage@@QAEXHHHAAH@Z ; cWingsDamage::SetCharHorseAttack

; 1003 : #endif
; 1004 : 		lpTargetObj->Life -= 1.0f;

  01e51	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01e54	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  01e5a	dc 25 00 00 00
	00		 fsub	 QWORD PTR __real@3ff0000000000000
  01e60	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  01e63	d9 99 fc 00 00
	00		 fstp	 DWORD PTR [ecx+252]

; 1005 : 
; 1006 : 		if ( lpTargetObj->Life < 0.0f )

  01e69	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01e6c	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  01e72	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  01e78	df e0		 fnstsw	 ax
  01e7a	f6 c4 05	 test	 ah, 5
  01e7d	7a 0d		 jp	 SHORT $LN81@Attack

; 1007 : 		{
; 1008 : 			lpTargetObj->Life = 0.0f;

  01e7f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01e82	d9 ee		 fldz
  01e84	d9 98 fc 00 00
	00		 fstp	 DWORD PTR [eax+252]

; 1009 : 		}
; 1010 : 		else

  01e8a	eb 15		 jmp	 SHORT $LN80@Attack
$LN81@Attack:

; 1011 : 		{
; 1012 : 			AttackDamage = AttackDamage * decdamage / 100;

  01e8c	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  01e8f	0f af 85 64 ff
	ff ff		 imul	 eax, DWORD PTR _decdamage$234000[ebp]
  01e96	99		 cdq
  01e97	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01e9c	f7 f9		 idiv	 ecx
  01e9e	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN80@Attack:

; 1013 : 		}
; 1014 : 
; 1015 : 		GCReFillSend(lpTargetObj->m_Index, lpTargetObj->Life, 0xFF, 0,lpTargetObj->iShield);

  01ea1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01ea4	8b 88 54 01 00
	00		 mov	 ecx, DWORD PTR [eax+340]
  01eaa	51		 push	 ecx
  01eab	6a 00		 push	 0
  01ead	68 ff 00 00 00	 push	 255			; 000000ffH
  01eb2	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01eb5	d9 82 fc 00 00
	00		 fld	 DWORD PTR [edx+252]
  01ebb	e8 00 00 00 00	 call	 __ftol2_sse
  01ec0	50		 push	 eax
  01ec1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01ec4	8b 08		 mov	 ecx, DWORD PTR [eax]
  01ec6	51		 push	 ecx
  01ec7	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHHEEH@Z ; GCReFillSend
  01ecc	83 c4 14	 add	 esp, 20			; 00000014H
$LN82@Attack:

; 1016 : 	}
; 1017 : 
; 1018 : 	if ( lpTargetObj->Live )

  01ecf	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01ed2	0f b6 48 6a	 movzx	 ecx, BYTE PTR [eax+106]
  01ed6	85 c9		 test	 ecx, ecx
  01ed8	0f 84 4a 05 00
	00		 je	 $LN48@Attack

; 1019 : 	{
; 1020 : 		if(gObjSearchActiveEffect(lpTargetObj, AT_WIZARD_DEFENSE) == 1 && AttackDamage > 0)

  01ede	6a 04		 push	 4
  01ee0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01ee3	50		 push	 eax
  01ee4	e8 00 00 00 00	 call	 ?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjSearchActiveEffect
  01ee9	83 c4 08	 add	 esp, 8
  01eec	0f b6 c8	 movzx	 ecx, al
  01eef	83 f9 01	 cmp	 ecx, 1
  01ef2	0f 85 56 01 00
	00		 jne	 $LN75@Attack
  01ef8	83 7d bc 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  01efc	0f 8e 4c 01 00
	00		 jle	 $LN75@Attack

; 1021 : 		{
; 1022 : 			int iWizardSkillDefense = 0;

  01f02	c7 85 60 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _iWizardSkillDefense$234005[ebp], 0

; 1023 : 			int iWizardSkillTime = 0;

  01f0c	c7 85 5c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _iWizardSkillTime$234006[ebp], 0

; 1024 : 
; 1025 : 			gObjUpdateAppliedBuffEffect(lpTargetObj, AT_WIZARD_DEFENSE, &iWizardSkillDefense, &iWizardSkillTime);

  01f16	8d 85 5c ff ff
	ff		 lea	 eax, DWORD PTR _iWizardSkillTime$234006[ebp]
  01f1c	50		 push	 eax
  01f1d	8d 8d 60 ff ff
	ff		 lea	 ecx, DWORD PTR _iWizardSkillDefense$234005[ebp]
  01f23	51		 push	 ecx
  01f24	6a 04		 push	 4
  01f26	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  01f29	52		 push	 edx
  01f2a	e8 00 00 00 00	 call	 ?gObjUpdateAppliedBuffEffect@@YAEPAUOBJECTSTRUCT@@HPAH1@Z ; gObjUpdateAppliedBuffEffect
  01f2f	83 c4 10	 add	 esp, 16			; 00000010H

; 1026 : 
; 1027 : 			int replacemana = 0;

  01f32	c7 85 58 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _replacemana$234007[ebp], 0

; 1028 : 
; 1029 : 			if(iWizardSkillTime > 0)

  01f3c	83 bd 5c ff ff
	ff 00		 cmp	 DWORD PTR _iWizardSkillTime$234006[ebp], 0
  01f43	7e 51		 jle	 SHORT $LN77@Attack

; 1030 : 			{
; 1031 : 				replacemana = (WORD)lpTargetObj->Mana * iWizardSkillTime / 1000;

  01f45	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01f48	d9 80 10 01 00
	00		 fld	 DWORD PTR [eax+272]
  01f4e	d9 bd 02 ff ff
	ff		 fnstcw	 WORD PTR tv1624[ebp]
  01f54	0f b7 85 02 ff
	ff ff		 movzx	 eax, WORD PTR tv1624[ebp]
  01f5b	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  01f60	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv1627[ebp], eax
  01f66	d9 ad fc fe ff
	ff		 fldcw	 WORD PTR tv1627[ebp]
  01f6c	db 9d f8 fe ff
	ff		 fistp	 DWORD PTR tv1629[ebp]
  01f72	d9 ad 02 ff ff
	ff		 fldcw	 WORD PTR tv1624[ebp]
  01f78	0f b7 85 f8 fe
	ff ff		 movzx	 eax, WORD PTR tv1629[ebp]
  01f7f	0f af 85 5c ff
	ff ff		 imul	 eax, DWORD PTR _iWizardSkillTime$234006[ebp]
  01f86	99		 cdq
  01f87	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
  01f8c	f7 f9		 idiv	 ecx
  01f8e	89 85 58 ff ff
	ff		 mov	 DWORD PTR _replacemana$234007[ebp], eax

; 1032 : 			}
; 1033 : 			else

  01f94	eb 4a		 jmp	 SHORT $LN76@Attack
$LN77@Attack:

; 1034 : 			{
; 1035 : 				replacemana = (WORD)lpTargetObj->Mana * 2 / 100;

  01f96	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01f99	d9 80 10 01 00
	00		 fld	 DWORD PTR [eax+272]
  01f9f	d9 bd 02 ff ff
	ff		 fnstcw	 WORD PTR tv1638[ebp]
  01fa5	0f b7 85 02 ff
	ff ff		 movzx	 eax, WORD PTR tv1638[ebp]
  01fac	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  01fb1	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv1641[ebp], eax
  01fb7	d9 ad fc fe ff
	ff		 fldcw	 WORD PTR tv1641[ebp]
  01fbd	db 9d f8 fe ff
	ff		 fistp	 DWORD PTR tv1643[ebp]
  01fc3	d9 ad 02 ff ff
	ff		 fldcw	 WORD PTR tv1638[ebp]
  01fc9	0f b7 85 f8 fe
	ff ff		 movzx	 eax, WORD PTR tv1643[ebp]
  01fd0	d1 e0		 shl	 eax, 1
  01fd2	99		 cdq
  01fd3	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01fd8	f7 f9		 idiv	 ecx
  01fda	89 85 58 ff ff
	ff		 mov	 DWORD PTR _replacemana$234007[ebp], eax
$LN76@Attack:

; 1036 : 			}
; 1037 : 
; 1038 : 			if ( replacemana < lpTargetObj->Mana )

  01fe0	db 85 58 ff ff
	ff		 fild	 DWORD PTR _replacemana$234007[ebp]
  01fe6	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  01fe9	d9 80 10 01 00
	00		 fld	 DWORD PTR [eax+272]
  01fef	de d9		 fcompp
  01ff1	df e0		 fnstsw	 ax
  01ff3	f6 c4 41	 test	 ah, 65			; 00000041H
  01ff6	75 56		 jne	 SHORT $LN75@Attack

; 1039 : 			{
; 1040 : 				lpTargetObj->Mana -= replacemana;

  01ff8	db 85 58 ff ff
	ff		 fild	 DWORD PTR _replacemana$234007[ebp]
  01ffe	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02001	d8 a8 10 01 00
	00		 fsubr	 DWORD PTR [eax+272]
  02007	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0200a	d9 99 10 01 00
	00		 fstp	 DWORD PTR [ecx+272]

; 1041 : 
; 1042 : 				int decattackdamage = 0; //200

  02010	c7 85 54 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _decattackdamage$234013[ebp], 0

; 1043 : 
; 1044 : 				if(iWizardSkillDefense > 0)

  0201a	83 bd 60 ff ff
	ff 00		 cmp	 DWORD PTR _iWizardSkillDefense$234005[ebp], 0
  02021	7e 18		 jle	 SHORT $LN74@Attack

; 1045 : 				{
; 1046 : 					decattackdamage = AttackDamage * iWizardSkillDefense / 100;

  02023	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02026	0f af 85 60 ff
	ff ff		 imul	 eax, DWORD PTR _iWizardSkillDefense$234005[ebp]
  0202d	99		 cdq
  0202e	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02033	f7 f9		 idiv	 ecx
  02035	89 85 54 ff ff
	ff		 mov	 DWORD PTR _decattackdamage$234013[ebp], eax
$LN74@Attack:

; 1047 : 				}
; 1048 : 
; 1049 : 				AttackDamage -= decattackdamage;

  0203b	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0203e	2b 85 54 ff ff
	ff		 sub	 eax, DWORD PTR _decattackdamage$234013[ebp]
  02044	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1050 : 				ManaChange = TRUE;

  02047	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _ManaChange$[ebp], 1
$LN75@Attack:

; 1051 : 			}
; 1052 : 		}
; 1053 : 
; 1054 : 		if ( g_ShieldSystemOn == FALSE )

  0204e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_ShieldSystemOn@@3HA, 0 ; g_ShieldSystemOn
  02055	0f 85 f7 00 00
	00		 jne	 $LN71@Attack

; 1055 : 		{
; 1056 : 			if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_USER )

  0205b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0205e	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02062	83 f9 01	 cmp	 ecx, 1
  02065	0f 85 e7 00 00
	00		 jne	 $LN71@Attack
  0206b	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0206e	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02072	83 f9 01	 cmp	 ecx, 1
  02075	0f 85 d7 00 00
	00		 jne	 $LN71@Attack

; 1057 : 			{
; 1058 : 				if ( CC_MAP_RANGE(lpObj->MapNumber ) && CC_MAP_RANGE(lpTargetObj->MapNumber) )

  0207b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0207e	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02085	83 f9 35	 cmp	 ecx, 53			; 00000035H
  02088	75 0c		 jne	 SHORT $LN176@Attack
  0208a	c7 85 00 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv769[ebp], 1
  02094	eb 3f		 jmp	 SHORT $LN177@Attack
$LN176@Attack:
  02096	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02099	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  020a0	83 f8 12	 cmp	 eax, 18			; 00000012H
  020a3	7d 0c		 jge	 SHORT $LN174@Attack
  020a5	c7 85 fc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv768[ebp], 0
  020af	eb 18		 jmp	 SHORT $LN175@Attack
$LN174@Attack:
  020b1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  020b4	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  020bb	33 c0		 xor	 eax, eax
  020bd	83 fa 17	 cmp	 edx, 23			; 00000017H
  020c0	0f 9e c0	 setle	 al
  020c3	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv768[ebp], eax
$LN175@Attack:
  020c9	8b 8d fc fe ff
	ff		 mov	 ecx, DWORD PTR tv768[ebp]
  020cf	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv769[ebp], ecx
$LN177@Attack:
  020d5	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv769[ebp], 0
  020dc	74 74		 je	 SHORT $LN71@Attack
  020de	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  020e1	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  020e8	83 f9 35	 cmp	 ecx, 53			; 00000035H
  020eb	75 0c		 jne	 SHORT $LN180@Attack
  020ed	c7 85 00 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv782[ebp], 1
  020f7	eb 3f		 jmp	 SHORT $LN181@Attack
$LN180@Attack:
  020f9	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  020fc	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  02103	83 f8 12	 cmp	 eax, 18			; 00000012H
  02106	7d 0c		 jge	 SHORT $LN178@Attack
  02108	c7 85 fc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv781[ebp], 0
  02112	eb 18		 jmp	 SHORT $LN179@Attack
$LN178@Attack:
  02114	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02117	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  0211e	33 c0		 xor	 eax, eax
  02120	83 fa 17	 cmp	 edx, 23			; 00000017H
  02123	0f 9e c0	 setle	 al
  02126	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv781[ebp], eax
$LN179@Attack:
  0212c	8b 8d fc fe ff
	ff		 mov	 ecx, DWORD PTR tv781[ebp]
  02132	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv782[ebp], ecx
$LN181@Attack:
  02138	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv782[ebp], 0
  0213f	74 11		 je	 SHORT $LN71@Attack

; 1059 : 				{
; 1060 : 					AttackDamage = AttackDamage * 50 / 100;

  02141	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02144	6b c0 32	 imul	 eax, 50			; 00000032H
  02147	99		 cdq
  02148	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0214d	f7 f9		 idiv	 ecx
  0214f	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN71@Attack:

; 1061 : 				}
; 1062 : 			}
; 1063 : 		}
; 1064 : 
; 1065 : //#if(GS_CASTLE==1)
; 1066 : 		if ( g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE)

  02152	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CastleSiege@@3VCCastleSiege@@A ; g_CastleSiege
  02157	e8 00 00 00 00	 call	 ?GetCastleState@CCastleSiege@@QAEHXZ ; CCastleSiege::GetCastleState
  0215c	83 f8 07	 cmp	 eax, 7
  0215f	0f 85 83 00 00
	00		 jne	 $LN65@Attack

; 1067 : 		{
; 1068 : 			if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_USER )

  02165	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02168	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  0216c	83 f9 01	 cmp	 ecx, 1
  0216f	75 77		 jne	 SHORT $LN65@Attack
  02171	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02174	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02178	83 f9 01	 cmp	 ecx, 1
  0217b	75 6b		 jne	 SHORT $LN65@Attack

; 1069 : 			{
; 1070 : 				if ( lpObj->MapNumber == MAP_INDEX_CASTLESIEGE && lpTargetObj->MapNumber == MAP_INDEX_CASTLESIEGE )

  0217d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02180	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02187	83 f9 1e	 cmp	 ecx, 30			; 0000001eH
  0218a	75 5c		 jne	 SHORT $LN65@Attack
  0218c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0218f	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02196	83 f9 1e	 cmp	 ecx, 30			; 0000001eH
  02199	75 4d		 jne	 SHORT $LN65@Attack

; 1071 : 				{
; 1072 : 					if( lpObj->m_btCsJoinSide == lpTargetObj->m_btCsJoinSide)

  0219b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0219e	0f b6 88 02 1c
	00 00		 movzx	 ecx, BYTE PTR [eax+7170]
  021a5	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  021a8	0f b6 82 02 1c
	00 00		 movzx	 eax, BYTE PTR [edx+7170]
  021af	3b c8		 cmp	 ecx, eax
  021b1	75 17		 jne	 SHORT $LN67@Attack

; 1073 : 					{
; 1074 : 						//int PetAttackByNPC = GetPrivateProfileInt("CastleSiegePet","PetAttackByNPC",20,"..\\Data\\ExData\\Skills.ini");
; 1075 : 						AttackDamage = ( AttackDamage * ExConfig.Character.PetCastleAttackByNPC ) / 100;		//AttackDamage = AttackDamage * 20 / 100;

  021b3	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  021b6	0f af 05 48 01
	00 00		 imul	 eax, DWORD PTR ?ExConfig@@3VcExConfigs@@A+328
  021bd	99		 cdq
  021be	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  021c3	f7 f9		 idiv	 ecx
  021c5	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
  021c8	eb 1e		 jmp	 SHORT $LN65@Attack
$LN67@Attack:

; 1076 : 					}
; 1077 : 					else if(g_ShieldSystemOn == FALSE)

  021ca	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_ShieldSystemOn@@3HA, 0 ; g_ShieldSystemOn
  021d1	75 15		 jne	 SHORT $LN65@Attack

; 1078 : 					{
; 1079 : 						//int PetAttackByPlayer = GetPrivateProfileInt("CastleSiegePet","PetAttackByPlayer",40,"..\\Data\\ExData\\Skills.ini");
; 1080 : 						AttackDamage = AttackDamage * ExConfig.Character.PetCastleAttackByPlayer / 100;	//AttackDamage = AttackDamage * 40 / 100;

  021d3	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  021d6	0f af 05 4c 01
	00 00		 imul	 eax, DWORD PTR ?ExConfig@@3VcExConfigs@@A+332
  021dd	99		 cdq
  021de	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  021e3	f7 f9		 idiv	 ecx
  021e5	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN65@Attack:

; 1081 : 					}
; 1082 : 				}
; 1083 : 			}
; 1084 : 		}
; 1085 : //#endif
; 1086 : 
; 1087 : 		if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_MONSTER )

  021e8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  021eb	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  021ef	83 f9 01	 cmp	 ecx, 1
  021f2	0f 85 62 01 00
	00		 jne	 $LN54@Attack
  021f8	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  021fb	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  021ff	83 f9 02	 cmp	 ecx, 2
  02202	0f 85 52 01 00
	00		 jne	 $LN54@Attack

; 1088 : 		{
; 1089 : 			if ( lpTargetObj->Class == 283 )

  02208	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0220b	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02212	81 f9 1b 01 00
	00		 cmp	 ecx, 283		; 0000011bH
  02218	0f 85 93 00 00
	00		 jne	 $LN60@Attack

; 1090 : 			{
; 1091 : 				if(gObjSearchActiveEffect(lpObj, AT_POTION_OF_BLESS) != 0 || gObjSearchActiveEffect(lpObj, AT_POTION_OF_SOUL) != 0)

  0221e	6a 0a		 push	 10			; 0000000aH
  02220	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02223	50		 push	 eax
  02224	e8 00 00 00 00	 call	 ?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjSearchActiveEffect
  02229	83 c4 08	 add	 esp, 8
  0222c	0f b6 c8	 movzx	 ecx, al
  0222f	85 c9		 test	 ecx, ecx
  02231	75 15		 jne	 SHORT $LN61@Attack
  02233	6a 0b		 push	 11			; 0000000bH
  02235	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02238	50		 push	 eax
  02239	e8 00 00 00 00	 call	 ?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjSearchActiveEffect
  0223e	83 c4 08	 add	 esp, 8
  02241	0f b6 c8	 movzx	 ecx, al
  02244	85 c9		 test	 ecx, ecx
  02246	74 16		 je	 SHORT $LN62@Attack
$LN61@Attack:

; 1092 : 				{
; 1093 : 					AttackDamage += (AttackDamage * 20) / 100;

  02248	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0224b	6b c0 14	 imul	 eax, 20			; 00000014H
  0224e	99		 cdq
  0224f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02254	f7 f9		 idiv	 ecx
  02256	03 45 bc	 add	 eax, DWORD PTR _AttackDamage$[ebp]
  02259	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1094 : 				}
; 1095 : 				else

  0225c	eb 53		 jmp	 SHORT $LN60@Attack
$LN62@Attack:

; 1096 : 				{
; 1097 : 					if ( lpObj->m_iAccumulatedDamage > 100 )

  0225e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02261	83 b8 10 1c 00
	00 64		 cmp	 DWORD PTR [eax+7184], 100 ; 00000064H
  02268	7e 21		 jle	 SHORT $LN59@Attack

; 1098 : 					{
; 1099 : 						gObjWeaponDurDownInCastle(lpObj, lpTargetObj, 1);

  0226a	6a 01		 push	 1
  0226c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0226f	50		 push	 eax
  02270	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02273	51		 push	 ecx
  02274	e8 00 00 00 00	 call	 ?gObjWeaponDurDownInCastle@@YAXPAUOBJECTSTRUCT@@0H@Z ; gObjWeaponDurDownInCastle
  02279	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1100 : 						lpObj->m_iAccumulatedDamage = 0;

  0227c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0227f	c7 80 10 1c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+7184], 0

; 1101 : 					}
; 1102 : 					else

  02289	eb 15		 jmp	 SHORT $LN58@Attack
$LN59@Attack:

; 1103 : 					{
; 1104 : 						lpObj->m_iAccumulatedDamage += AttackDamage;

  0228b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0228e	8b 88 10 1c 00
	00		 mov	 ecx, DWORD PTR [eax+7184]
  02294	03 4d bc	 add	 ecx, DWORD PTR _AttackDamage$[ebp]
  02297	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0229a	89 8a 10 1c 00
	00		 mov	 DWORD PTR [edx+7184], ecx
$LN58@Attack:

; 1105 : 					}
; 1106 : 
; 1107 : 					AttackDamage = AttackDamage * 20 / 100;

  022a0	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  022a3	6b c0 14	 imul	 eax, 20			; 00000014H
  022a6	99		 cdq
  022a7	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  022ac	f7 f9		 idiv	 ecx
  022ae	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN60@Attack:

; 1108 : 				}
; 1109 : 			}
; 1110 : 
; 1111 : 			if ( lpTargetObj->Class == 277 )

  022b1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  022b4	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  022bb	81 f9 15 01 00
	00		 cmp	 ecx, 277		; 00000115H
  022c1	0f 85 93 00 00
	00		 jne	 $LN54@Attack

; 1112 : 			{
; 1113 : 				if(gObjSearchActiveEffect(lpObj, AT_POTION_OF_BLESS) != 0 || gObjSearchActiveEffect(lpObj, AT_POTION_OF_SOUL) != 0)

  022c7	6a 0a		 push	 10			; 0000000aH
  022c9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  022cc	50		 push	 eax
  022cd	e8 00 00 00 00	 call	 ?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjSearchActiveEffect
  022d2	83 c4 08	 add	 esp, 8
  022d5	0f b6 c8	 movzx	 ecx, al
  022d8	85 c9		 test	 ecx, ecx
  022da	75 15		 jne	 SHORT $LN55@Attack
  022dc	6a 0b		 push	 11			; 0000000bH
  022de	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  022e1	50		 push	 eax
  022e2	e8 00 00 00 00	 call	 ?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjSearchActiveEffect
  022e7	83 c4 08	 add	 esp, 8
  022ea	0f b6 c8	 movzx	 ecx, al
  022ed	85 c9		 test	 ecx, ecx
  022ef	74 16		 je	 SHORT $LN56@Attack
$LN55@Attack:

; 1114 : 				{
; 1115 : 					AttackDamage += (AttackDamage * 20) / 100;

  022f1	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  022f4	6b c0 14	 imul	 eax, 20			; 00000014H
  022f7	99		 cdq
  022f8	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  022fd	f7 f9		 idiv	 ecx
  022ff	03 45 bc	 add	 eax, DWORD PTR _AttackDamage$[ebp]
  02302	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1116 : 				}
; 1117 : 				else

  02305	eb 53		 jmp	 SHORT $LN54@Attack
$LN56@Attack:

; 1118 : 				{					
; 1119 : 					if ( lpObj->m_iAccumulatedDamage > 100 )

  02307	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0230a	83 b8 10 1c 00
	00 64		 cmp	 DWORD PTR [eax+7184], 100 ; 00000064H
  02311	7e 21		 jle	 SHORT $LN53@Attack

; 1120 : 					{
; 1121 : 						gObjWeaponDurDownInCastle(lpObj, lpTargetObj, 1);

  02313	6a 01		 push	 1
  02315	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02318	50		 push	 eax
  02319	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0231c	51		 push	 ecx
  0231d	e8 00 00 00 00	 call	 ?gObjWeaponDurDownInCastle@@YAXPAUOBJECTSTRUCT@@0H@Z ; gObjWeaponDurDownInCastle
  02322	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1122 : 						lpObj->m_iAccumulatedDamage = 0;

  02325	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02328	c7 80 10 1c 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+7184], 0

; 1123 : 					}
; 1124 : 					else

  02332	eb 15		 jmp	 SHORT $LN52@Attack
$LN53@Attack:

; 1125 : 					{
; 1126 : 						lpObj->m_iAccumulatedDamage += AttackDamage;

  02334	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02337	8b 88 10 1c 00
	00		 mov	 ecx, DWORD PTR [eax+7184]
  0233d	03 4d bc	 add	 ecx, DWORD PTR _AttackDamage$[ebp]
  02340	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02343	89 8a 10 1c 00
	00		 mov	 DWORD PTR [edx+7184], ecx
$LN52@Attack:

; 1127 : 					}
; 1128 : 
; 1129 : 					AttackDamage = AttackDamage * 20 / 100;

  02349	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0234c	6b c0 14	 imul	 eax, 20			; 00000014H
  0234f	99		 cdq
  02350	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02355	f7 f9		 idiv	 ecx
  02357	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN54@Attack:

; 1130 : 				}
; 1131 : 			}
; 1132 : 		}
; 1133 : 
; 1134 : 		if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_USER )

  0235a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0235d	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02361	83 f9 01	 cmp	 ecx, 1
  02364	0f 85 88 00 00
	00		 jne	 $LN51@Attack
  0236a	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0236d	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02371	83 f9 01	 cmp	 ecx, 1
  02374	75 7c		 jne	 SHORT $LN51@Attack

; 1135 : 		{
; 1136 : 			iTempShieldDamage = this->GetShieldDamage(lpObj, lpTargetObj, AttackDamage);

  02376	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02379	50		 push	 eax
  0237a	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0237d	51		 push	 ecx
  0237e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02381	52		 push	 edx
  02382	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  02385	e8 00 00 00 00	 call	 ?GetShieldDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0H@Z ; CDarkSpirit::GetShieldDamage
  0238a	89 45 e4	 mov	 DWORD PTR _iTempShieldDamage$[ebp], eax

; 1137 : 			lpTargetObj->iShield -= iTempShieldDamage;

  0238d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02390	8b 88 54 01 00
	00		 mov	 ecx, DWORD PTR [eax+340]
  02396	2b 4d e4	 sub	 ecx, DWORD PTR _iTempShieldDamage$[ebp]
  02399	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  0239c	89 8a 54 01 00
	00		 mov	 DWORD PTR [edx+340], ecx

; 1138 : 			lpTargetObj->Life -= AttackDamage - iTempShieldDamage;

  023a2	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  023a5	2b 45 e4	 sub	 eax, DWORD PTR _iTempShieldDamage$[ebp]
  023a8	89 85 00 ff ff
	ff		 mov	 DWORD PTR tv1763[ebp], eax
  023ae	db 85 00 ff ff
	ff		 fild	 DWORD PTR tv1763[ebp]
  023b4	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  023b7	d8 a9 fc 00 00
	00		 fsubr	 DWORD PTR [ecx+252]
  023bd	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  023c0	d9 9a fc 00 00
	00		 fstp	 DWORD PTR [edx+252]

; 1139 : 			iTotalShieldDamage += iTempShieldDamage;

  023c6	8b 45 e0	 mov	 eax, DWORD PTR _iTotalShieldDamage$[ebp]
  023c9	03 45 e4	 add	 eax, DWORD PTR _iTempShieldDamage$[ebp]
  023cc	89 45 e0	 mov	 DWORD PTR _iTotalShieldDamage$[ebp], eax

; 1140 : 
; 1141 : 			if ( lpTargetObj->Life < 0.0f )

  023cf	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  023d2	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  023d8	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  023de	df e0		 fnstsw	 ax
  023e0	f6 c4 05	 test	 ah, 5
  023e3	7a 0b		 jp	 SHORT $LN50@Attack

; 1142 : 			{
; 1143 : 				lpTargetObj->Life = 0.0f;

  023e5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  023e8	d9 ee		 fldz
  023ea	d9 98 fc 00 00
	00		 fstp	 DWORD PTR [eax+252]
$LN50@Attack:

; 1144 : 			}
; 1145 : 		}
; 1146 : 		else

  023f0	eb 36		 jmp	 SHORT $LN48@Attack
$LN51@Attack:

; 1147 : 		{
; 1148 : 			lpTargetObj->Life -= AttackDamage;

  023f2	db 45 bc	 fild	 DWORD PTR _AttackDamage$[ebp]
  023f5	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  023f8	d8 a8 fc 00 00
	00		 fsubr	 DWORD PTR [eax+252]
  023fe	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02401	d9 99 fc 00 00
	00		 fstp	 DWORD PTR [ecx+252]

; 1149 : 
; 1150 : 			if ( lpTargetObj->Life < 0.0f )

  02407	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0240a	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  02410	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  02416	df e0		 fnstsw	 ax
  02418	f6 c4 05	 test	 ah, 5
  0241b	7a 0b		 jp	 SHORT $LN48@Attack

; 1151 : 			{
; 1152 : 				lpTargetObj->Life = 0.0f;

  0241d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02420	d9 ee		 fldz
  02422	d9 98 fc 00 00
	00		 fstp	 DWORD PTR [eax+252]
$LN48@Attack:

; 1153 : 			}
; 1154 : 		}
; 1155 : 	}
; 1156 : 
; 1157 : 	if ( lpTargetObj->Type == OBJ_MONSTER )

  02428	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0242b	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  0242f	83 f9 02	 cmp	 ecx, 2
  02432	75 54		 jne	 SHORT $LN46@Attack

; 1158 : 	{
; 1159 : 		gObjAddMsgSendDelay(lpTargetObj, 0, lpObj->m_Index, 100, 0);

  02434	6a 00		 push	 0
  02436	6a 64		 push	 100			; 00000064H
  02438	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0243b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0243d	51		 push	 ecx
  0243e	6a 00		 push	 0
  02440	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02443	52		 push	 edx
  02444	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  02449	83 c4 14	 add	 esp, 20			; 00000014H

; 1160 : 		lpTargetObj->LastAttackerID = lpObj->m_Index;

  0244c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0244f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02452	66 8b 11	 mov	 dx, WORD PTR [ecx]
  02455	66 89 90 5e 04
	00 00		 mov	 WORD PTR [eax+1118], dx

; 1161 : 
; 1162 : 		if ( lpTargetObj->m_iCurrentAI )

  0245c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0245f	83 b8 78 1c 00
	00 00		 cmp	 DWORD PTR [eax+7288], 0
  02466	74 20		 je	 SHORT $LN46@Attack

; 1163 : 		{
; 1164 : 			lpTargetObj->m_Agro.IncAgro(lpObj->m_Index, AttackDamage / 100);

  02468	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0246b	99		 cdq
  0246c	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02471	f7 f9		 idiv	 ecx
  02473	50		 push	 eax
  02474	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02477	8b 02		 mov	 eax, DWORD PTR [edx]
  02479	50		 push	 eax
  0247a	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  0247d	81 c1 94 1c 00
	00		 add	 ecx, 7316		; 00001c94H
  02483	e8 00 00 00 00	 call	 ?IncAgro@TMonsterAIAgro@@QAEHHH@Z ; TMonsterAIAgro::IncAgro
$LN46@Attack:

; 1165 : 		}
; 1166 : 	}
; 1167 : 
; 1168 : 	BOOL selfdefense = 0;

  02488	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0

; 1169 : 	lpCallObj = lpTargetObj;

  02492	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02495	89 45 f4	 mov	 DWORD PTR _lpCallObj$[ebp], eax

; 1170 : 	
; 1171 : 	if ( lpTargetObj->Type == OBJ_MONSTER )

  02498	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0249b	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  0249f	83 f9 02	 cmp	 ecx, 2
  024a2	75 24		 jne	 SHORT $LN44@Attack

; 1172 : 	{
; 1173 : 		if ( lpTargetObj->m_RecallMon >= 0 )

  024a4	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  024a7	83 b8 50 04 00
	00 00		 cmp	 DWORD PTR [eax+1104], 0
  024ae	7c 18		 jl	 SHORT $LN44@Attack

; 1174 : 		{
; 1175 : 			lpCallObj = &gObj[lpTargetObj->m_RecallMon];

  024b0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  024b3	8b 88 50 04 00
	00		 mov	 ecx, DWORD PTR [eax+1104]
  024b9	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  024bf	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  024c5	89 4d f4	 mov	 DWORD PTR _lpCallObj$[ebp], ecx
$LN44@Attack:

; 1176 : 		}
; 1177 : 	}
; 1178 : 
; 1179 : 	if ( AttackDamage >= 1 )

  024c8	83 7d bc 01	 cmp	 DWORD PTR _AttackDamage$[ebp], 1
  024cc	0f 8c 6a 02 00
	00		 jl	 $LN26@Attack

; 1180 : 	{
; 1181 : 		if ( lpObj->Type == OBJ_USER && lpTargetObj->Type == OBJ_USER )

  024d2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  024d5	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  024d9	83 f9 01	 cmp	 ecx, 1
  024dc	0f 85 de 01 00
	00		 jne	 $LN42@Attack
  024e2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  024e5	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  024e9	83 f9 01	 cmp	 ecx, 1
  024ec	0f 85 ce 01 00
	00		 jne	 $LN42@Attack

; 1182 : 		{
; 1183 : 			if ( gObjDuelCheck(lpObj, lpTargetObj) )

  024f2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  024f5	50		 push	 eax
  024f6	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  024f9	51		 push	 ecx
  024fa	e8 00 00 00 00	 call	 ?gObjDuelCheck@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjDuelCheck
  024ff	83 c4 08	 add	 esp, 8
  02502	85 c0		 test	 eax, eax
  02504	74 0f		 je	 SHORT $LN41@Attack

; 1184 : 			{
; 1185 : 				selfdefense = 0;

  02506	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0
  02510	e9 dc 00 00 00	 jmp	 $LN37@Attack
$LN41@Attack:

; 1186 : 			}
; 1187 : 			else if ( CC_MAP_RANGE(lpObj->MapNumber) || CC_MAP_RANGE(lpTargetObj->MapNumber) )

  02515	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02518	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0251f	83 f9 35	 cmp	 ecx, 53			; 00000035H
  02522	75 0c		 jne	 SHORT $LN184@Attack
  02524	c7 85 00 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv955[ebp], 1
  0252e	eb 3f		 jmp	 SHORT $LN185@Attack
$LN184@Attack:
  02530	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02533	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  0253a	83 f8 12	 cmp	 eax, 18			; 00000012H
  0253d	7d 0c		 jge	 SHORT $LN182@Attack
  0253f	c7 85 fc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv954[ebp], 0
  02549	eb 18		 jmp	 SHORT $LN183@Attack
$LN182@Attack:
  0254b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0254e	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  02555	33 c0		 xor	 eax, eax
  02557	83 fa 17	 cmp	 edx, 23			; 00000017H
  0255a	0f 9e c0	 setle	 al
  0255d	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv954[ebp], eax
$LN183@Attack:
  02563	8b 8d fc fe ff
	ff		 mov	 ecx, DWORD PTR tv954[ebp]
  02569	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv955[ebp], ecx
$LN185@Attack:
  0256f	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv955[ebp], 0
  02576	75 63		 jne	 SHORT $LN38@Attack
  02578	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0257b	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02582	83 f9 35	 cmp	 ecx, 53			; 00000035H
  02585	75 0c		 jne	 SHORT $LN188@Attack
  02587	c7 85 00 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv968[ebp], 1
  02591	eb 3f		 jmp	 SHORT $LN189@Attack
$LN188@Attack:
  02593	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02596	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  0259d	83 f8 12	 cmp	 eax, 18			; 00000012H
  025a0	7d 0c		 jge	 SHORT $LN186@Attack
  025a2	c7 85 fc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv967[ebp], 0
  025ac	eb 18		 jmp	 SHORT $LN187@Attack
$LN186@Attack:
  025ae	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  025b1	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  025b8	33 c0		 xor	 eax, eax
  025ba	83 fa 17	 cmp	 edx, 23			; 00000017H
  025bd	0f 9e c0	 setle	 al
  025c0	89 85 fc fe ff
	ff		 mov	 DWORD PTR tv967[ebp], eax
$LN187@Attack:
  025c6	8b 8d fc fe ff
	ff		 mov	 ecx, DWORD PTR tv967[ebp]
  025cc	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv968[ebp], ecx
$LN189@Attack:
  025d2	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv968[ebp], 0
  025d9	74 0c		 je	 SHORT $LN39@Attack
$LN38@Attack:

; 1188 : 			{
; 1189 : 				selfdefense = 0;

  025db	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0

; 1190 : 			}
; 1191 : 			else

  025e5	eb 0a		 jmp	 SHORT $LN37@Attack
$LN39@Attack:

; 1192 : 			{
; 1193 : 				selfdefense = 1;

  025e7	c7 85 50 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 1
$LN37@Attack:

; 1194 : 			}
; 1195 : 			if ( gObjGetRelationShip(lpObj, lpTargetObj) == 2 )

  025f1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  025f4	50		 push	 eax
  025f5	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  025f8	51		 push	 ecx
  025f9	e8 00 00 00 00	 call	 ?gObjGetRelationShip@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjGetRelationShip
  025fe	83 c4 08	 add	 esp, 8
  02601	83 f8 02	 cmp	 eax, 2
  02604	75 0a		 jne	 SHORT $LN36@Attack

; 1196 : 			{
; 1197 : 				selfdefense = FALSE;

  02606	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0
$LN36@Attack:

; 1198 : 			}
; 1199 : //#if(GS_CASTLE==1)
; 1200 : 			if ( g_CastleSiege.GetCastleState() == CASTLESIEGE_STATE_STARTSIEGE)

  02610	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CastleSiege@@3VCCastleSiege@@A ; g_CastleSiege
  02615	e8 00 00 00 00	 call	 ?GetCastleState@CCastleSiege@@QAEHXZ ; CCastleSiege::GetCastleState
  0261a	83 f8 07	 cmp	 eax, 7
  0261d	75 1d		 jne	 SHORT $LN35@Attack

; 1201 : 			{
; 1202 : 				if( lpObj->m_btCsJoinSide > 0 )

  0261f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02622	0f b6 88 02 1c
	00 00		 movzx	 ecx, BYTE PTR [eax+7170]
  02629	85 c9		 test	 ecx, ecx
  0262b	7e 0a		 jle	 SHORT $LN34@Attack

; 1203 : 				{
; 1204 : 					selfdefense = FALSE;

  0262d	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0
$LN34@Attack:

; 1205 : 				}
; 1206 : 			}

  02637	e9 82 00 00 00	 jmp	 $LN32@Attack
$LN35@Attack:

; 1207 : //#endif
; 1208 : 			else if ( IT_MAP_RANGE(lpObj->MapNumber) || IT_MAP_RANGE(lpTargetObj->MapNumber) ) //season 2.5 add-on

  0263c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0263f	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02646	83 f9 2d	 cmp	 ecx, 45			; 0000002dH
  02649	7d 0c		 jge	 SHORT $LN190@Attack
  0264b	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv987[ebp], 0
  02655	eb 18		 jmp	 SHORT $LN191@Attack
$LN190@Attack:
  02657	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0265a	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  02661	33 c9		 xor	 ecx, ecx
  02663	83 f8 32	 cmp	 eax, 50			; 00000032H
  02666	0f 9e c1	 setle	 cl
  02669	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv987[ebp], ecx
$LN191@Attack:
  0266f	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv987[ebp], 0
  02676	75 3c		 jne	 SHORT $LN31@Attack
  02678	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0267b	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02682	83 f9 2d	 cmp	 ecx, 45			; 0000002dH
  02685	7d 0c		 jge	 SHORT $LN192@Attack
  02687	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv996[ebp], 0
  02691	eb 18		 jmp	 SHORT $LN193@Attack
$LN192@Attack:
  02693	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02696	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  0269d	33 c9		 xor	 ecx, ecx
  0269f	83 f8 32	 cmp	 eax, 50			; 00000032H
  026a2	0f 9e c1	 setle	 cl
  026a5	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv996[ebp], ecx
$LN193@Attack:
  026ab	83 bd 00 ff ff
	ff 00		 cmp	 DWORD PTR tv996[ebp], 0
  026b2	74 0a		 je	 SHORT $LN32@Attack
$LN31@Attack:

; 1209 : 			{
; 1210 : 				selfdefense = 0;

  026b4	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0
$LN32@Attack:

; 1211 : 			}
; 1212 : 		}

  026be	eb 2e		 jmp	 SHORT $LN28@Attack
$LN42@Attack:

; 1213 : 		else if ( lpTargetObj->Type == OBJ_MONSTER && lpObj->Type == OBJ_USER )

  026c0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  026c3	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  026c7	83 f9 02	 cmp	 ecx, 2
  026ca	75 22		 jne	 SHORT $LN28@Attack
  026cc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  026cf	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  026d3	83 f9 01	 cmp	 ecx, 1
  026d6	75 16		 jne	 SHORT $LN28@Attack

; 1214 : 		{
; 1215 : 			if ( lpTargetObj->m_RecallMon >= 0 )

  026d8	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  026db	83 b8 50 04 00
	00 00		 cmp	 DWORD PTR [eax+1104], 0
  026e2	7c 0a		 jl	 SHORT $LN28@Attack

; 1216 : 			{
; 1217 : 				selfdefense = TRUE;

  026e4	c7 85 50 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 1
$LN28@Attack:

; 1218 : 			}
; 1219 : 		}
; 1220 : 
; 1221 : 		if ( lpTargetObj->Type == OBJ_USER )

  026ee	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  026f1	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  026f5	83 f9 01	 cmp	 ecx, 1
  026f8	75 10		 jne	 SHORT $LN27@Attack

; 1222 : 		{
; 1223 : 			gObjArmorRandomDurDown(lpTargetObj, lpObj);

  026fa	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  026fd	50		 push	 eax
  026fe	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02701	51		 push	 ecx
  02702	e8 00 00 00 00	 call	 ?gObjArmorRandomDurDown@@YAXPAUOBJECTSTRUCT@@0@Z ; gObjArmorRandomDurDown
  02707	83 c4 08	 add	 esp, 8
$LN27@Attack:

; 1224 : 		}
; 1225 : 
; 1226 : 		if(gObjSearchActiveEffect(lpTargetObj, AT_ICE_ARROW) == 1)

  0270a	6a 39		 push	 57			; 00000039H
  0270c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0270f	50		 push	 eax
  02710	e8 00 00 00 00	 call	 ?gObjSearchActiveEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjSearchActiveEffect
  02715	83 c4 08	 add	 esp, 8
  02718	0f b6 c8	 movzx	 ecx, al
  0271b	83 f9 01	 cmp	 ecx, 1
  0271e	75 1c		 jne	 SHORT $LN26@Attack

; 1227 : 		{
; 1228 : 			gObjRemoveBuffEffect(lpTargetObj, AT_ICE_ARROW);

  02720	6a 39		 push	 57			; 00000039H
  02722	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02725	50		 push	 eax
  02726	e8 00 00 00 00	 call	 ?gObjRemoveBuffEffect@@YAEPAUOBJECTSTRUCT@@H@Z ; gObjRemoveBuffEffect
  0272b	83 c4 08	 add	 esp, 8

; 1229 : 			GCMagicCancelSend(lpTargetObj, 51);

  0272e	6a 33		 push	 51			; 00000033H
  02730	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02733	50		 push	 eax
  02734	e8 00 00 00 00	 call	 ?GCMagicCancelSend@@YAXPAUOBJECTSTRUCT@@G@Z ; GCMagicCancelSend
  02739	83 c4 08	 add	 esp, 8
$LN26@Attack:

; 1230 : 		}
; 1231 : 	}
; 1232 : 
; 1233 : 	if(lpObj->PartyNumber >= 0) //Season 2.5 add-on

  0273c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0273f	83 b8 2c 04 00
	00 00		 cmp	 DWORD PTR [eax+1068], 0
  02746	7c 2a		 jl	 SHORT $LN23@Attack

; 1234 : 	{
; 1235 : 		if(lpCallObj->PartyNumber >= 0)

  02748	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  0274b	83 b8 2c 04 00
	00 00		 cmp	 DWORD PTR [eax+1068], 0
  02752	7c 1e		 jl	 SHORT $LN23@Attack

; 1236 : 		{
; 1237 : 			if(lpObj->PartyNumber == lpCallObj->PartyNumber)

  02754	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02757	8b 4d f4	 mov	 ecx, DWORD PTR _lpCallObj$[ebp]
  0275a	8b 90 2c 04 00
	00		 mov	 edx, DWORD PTR [eax+1068]
  02760	3b 91 2c 04 00
	00		 cmp	 edx, DWORD PTR [ecx+1068]
  02766	75 0a		 jne	 SHORT $LN23@Attack

; 1238 : 			{
; 1239 : 				selfdefense = FALSE;

  02768	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _selfdefense$[ebp], 0
$LN23@Attack:

; 1240 : 			}
; 1241 : 		}
; 1242 : 
; 1243 : 	}
; 1244 : 
; 1245 : 	if ( selfdefense == TRUE )

  02772	83 bd 50 ff ff
	ff 01		 cmp	 DWORD PTR _selfdefense$[ebp], 1
  02779	0f 85 81 00 00
	00		 jne	 $LN18@Attack

; 1246 : 	{
; 1247 : 		if ( !gObjTargetGuildWarCheck(lpObj, lpCallObj) )

  0277f	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  02782	50		 push	 eax
  02783	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02786	51		 push	 ecx
  02787	e8 00 00 00 00	 call	 ?gObjTargetGuildWarCheck@@YAHPAUOBJECTSTRUCT@@0@Z ; gObjTargetGuildWarCheck
  0278c	83 c4 08	 add	 esp, 8
  0278f	85 c0		 test	 eax, eax
  02791	75 6d		 jne	 SHORT $LN18@Attack

; 1248 : 		{
; 1249 : 
; 1250 : 			if(ExConfig.PvP.ExPkPartySystem && lpCallObj->PartyNumber >= 0) //Season 2.5 add-on

  02793	83 3d d4 08 00
	00 00		 cmp	 DWORD PTR ?ExConfig@@3VcExConfigs@@A+2260, 0
  0279a	74 52		 je	 SHORT $LN20@Attack
  0279c	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  0279f	83 b8 2c 04 00
	00 00		 cmp	 DWORD PTR [eax+1068], 0
  027a6	7c 46		 jl	 SHORT $LN20@Attack

; 1251 : 			{
; 1252 : 				//season3 removed party for LOL
; 1253 : 				int number = 0;

  027a8	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _number$234070[ebp], 0

; 1254 : 				int partynum = lpCallObj->PartyNumber;

  027b2	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  027b5	8b 88 2c 04 00
	00		 mov	 ecx, DWORD PTR [eax+1068]
  027bb	89 8d 48 ff ff
	ff		 mov	 DWORD PTR _partynum$234071[ebp], ecx

; 1255 : 				
; 1256 : 				if( (gParty.GetPkLevel(partynum)) < 5)

  027c1	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _partynum$234071[ebp]
  027c7	50		 push	 eax
  027c8	b9 00 00 00 00	 mov	 ecx, OFFSET ?gParty@@3VPartyClass@@A ; gParty
  027cd	e8 00 00 00 00	 call	 ?GetPkLevel@PartyClass@@QAEDH@Z ; PartyClass::GetPkLevel
  027d2	0f be c8	 movsx	 ecx, al
  027d5	83 f9 05	 cmp	 ecx, 5
  027d8	7d 12		 jge	 SHORT $LN19@Attack

; 1257 : 				{
; 1258 : 					gObjCheckSelfDefense(lpObj, lpCallObj->m_Index);

  027da	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  027dd	8b 08		 mov	 ecx, DWORD PTR [eax]
  027df	51		 push	 ecx
  027e0	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  027e3	52		 push	 edx
  027e4	e8 00 00 00 00	 call	 ?gObjCheckSelfDefense@@YAXPAUOBJECTSTRUCT@@H@Z ; gObjCheckSelfDefense
  027e9	83 c4 08	 add	 esp, 8
$LN19@Attack:

; 1259 : 				}	
; 1260 : 			}
; 1261 : 			else

  027ec	eb 12		 jmp	 SHORT $LN18@Attack
$LN20@Attack:

; 1262 : 			{
; 1263 : 				gObjCheckSelfDefense(lpObj, lpCallObj->m_Index);

  027ee	8b 45 f4	 mov	 eax, DWORD PTR _lpCallObj$[ebp]
  027f1	8b 08		 mov	 ecx, DWORD PTR [eax]
  027f3	51		 push	 ecx
  027f4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  027f7	52		 push	 edx
  027f8	e8 00 00 00 00	 call	 ?gObjCheckSelfDefense@@YAXPAUOBJECTSTRUCT@@H@Z ; gObjCheckSelfDefense
  027fd	83 c4 08	 add	 esp, 8
$LN18@Attack:

; 1264 : 			}
; 1265 : 		}
; 1266 : 	}
; 1267 : 
; 1268 : 	if ( AttackDamage >= 5 )

  02800	83 7d bc 05	 cmp	 DWORD PTR _AttackDamage$[ebp], 5
  02804	7c 63		 jl	 SHORT $LN12@Attack

; 1269 : 	{
; 1270 : 		if ( lpTargetObj->Type == OBJ_MONSTER )

  02806	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02809	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  0280d	83 f9 02	 cmp	 ecx, 2
  02810	75 2b		 jne	 SHORT $LN16@Attack

; 1271 : 		{
; 1272 : 			if ( (rand()%26) == 0 )

  02812	e8 00 00 00 00	 call	 _rand
  02817	99		 cdq
  02818	b9 1a 00 00 00	 mov	 ecx, 26			; 0000001aH
  0281d	f7 f9		 idiv	 ecx
  0281f	85 d2		 test	 edx, edx
  02821	75 18		 jne	 SHORT $LN15@Attack

; 1273 : 			{
; 1274 : 				gObjAddMsgSendDelay(lpTargetObj,4, lpObj->m_Index, 100, 0);

  02823	6a 00		 push	 0
  02825	6a 64		 push	 100			; 00000064H
  02827	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0282a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0282c	51		 push	 ecx
  0282d	6a 04		 push	 4
  0282f	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02832	52		 push	 edx
  02833	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  02838	83 c4 14	 add	 esp, 20			; 00000014H
$LN15@Attack:

; 1275 : 			}
; 1276 : 		}

  0283b	eb 2c		 jmp	 SHORT $LN12@Attack
$LN16@Attack:

; 1277 : 		else if ( (rand()%4) == 0 )

  0283d	e8 00 00 00 00	 call	 _rand
  02842	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  02847	79 05		 jns	 SHORT $LN194@Attack
  02849	48		 dec	 eax
  0284a	83 c8 fc	 or	 eax, -4			; fffffffcH
  0284d	40		 inc	 eax
$LN194@Attack:
  0284e	85 c0		 test	 eax, eax
  02850	75 17		 jne	 SHORT $LN12@Attack

; 1278 : 		{
; 1279 : 			if ( !gObjUniriaSprite(lpTargetObj) )

  02852	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02855	50		 push	 eax
  02856	e8 00 00 00 00	 call	 ?gObjUniriaSprite@@YAHPAUOBJECTSTRUCT@@@Z ; gObjUniriaSprite
  0285b	83 c4 04	 add	 esp, 4
  0285e	85 c0		 test	 eax, eax
  02860	75 07		 jne	 SHORT $LN12@Attack

; 1280 : 			{
; 1281 : 				MSBFlag = 1;

  02862	c7 45 c4 01 00
	00 00		 mov	 DWORD PTR _MSBFlag$[ebp], 1
$LN12@Attack:

; 1282 : 			}
; 1283 : 		}
; 1284 : 	}
; 1285 : 
; 1286 : 	if ( ManaChange )

  02869	83 7d e8 00	 cmp	 DWORD PTR _ManaChange$[ebp], 0
  0286d	74 2e		 je	 SHORT $LN11@Attack

; 1287 : 	{
; 1288 : 		GCManaSend(lpTargetObj->m_Index, lpTargetObj->Mana, 0xFF, 0, lpTargetObj->BP);

  0286f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02872	8b 88 28 01 00
	00		 mov	 ecx, DWORD PTR [eax+296]
  02878	51		 push	 ecx
  02879	6a 00		 push	 0
  0287b	68 ff 00 00 00	 push	 255			; 000000ffH
  02880	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02883	d9 82 10 01 00
	00		 fld	 DWORD PTR [edx+272]
  02889	e8 00 00 00 00	 call	 __ftol2_sse
  0288e	50		 push	 eax
  0288f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02892	8b 08		 mov	 ecx, DWORD PTR [eax]
  02894	51		 push	 ecx
  02895	e8 00 00 00 00	 call	 ?GCManaSend@@YAXHHEEH@Z	; GCManaSend
  0289a	83 c4 14	 add	 esp, 20			; 00000014H
$LN11@Attack:

; 1289 : 	}
; 1290 : 
; 1291 : 	if ( lpObj->Type == OBJ_USER )

  0289d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  028a0	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  028a4	83 f9 01	 cmp	 ecx, 1
  028a7	75 22		 jne	 SHORT $LN9@Attack

; 1292 : 	{
; 1293 : 		if ( lpObj->m_Change == 9 )

  028a9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  028ac	83 b8 54 04 00
	00 09		 cmp	 DWORD PTR [eax+1108], 9
  028b3	75 16		 jne	 SHORT $LN9@Attack

; 1294 : 		{
; 1295 : 			GCMagicAttackNumberSend(lpObj, 3, lpTargetObj->m_Index, 1);

  028b5	6a 01		 push	 1
  028b7	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  028ba	8b 08		 mov	 ecx, DWORD PTR [eax]
  028bc	51		 push	 ecx
  028bd	6a 03		 push	 3
  028bf	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  028c2	52		 push	 edx
  028c3	e8 00 00 00 00	 call	 ?GCMagicAttackNumberSend@@YAXPAUOBJECTSTRUCT@@GHE@Z ; GCMagicAttackNumberSend
  028c8	83 c4 10	 add	 esp, 16			; 00000010H
$LN9@Attack:

; 1296 : 		}
; 1297 : 	}
; 1298 : 
; 1299 : 	lpObj->m_Rest = 0;

  028cb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  028ce	c6 80 25 02 00
	00 00		 mov	 BYTE PTR [eax+549], 0

; 1300 : 
; 1301 : 	if ( AttackDamage > 0 )

  028d5	83 7d bc 00	 cmp	 DWORD PTR _AttackDamage$[ebp], 0
  028d9	0f 8e b8 00 00
	00		 jle	 $LN8@Attack

; 1302 : 	{
; 1303 : 		int atd_reflect = (int)((float)AttackDamage * lpTargetObj->DamageReflect / 100.0f);

  028df	db 45 bc	 fild	 DWORD PTR _AttackDamage$[ebp]
  028e2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  028e5	0f b6 88 71 01
	00 00		 movzx	 ecx, BYTE PTR [eax+369]
  028ec	89 8d 00 ff ff
	ff		 mov	 DWORD PTR tv1896[ebp], ecx
  028f2	da 8d 00 ff ff
	ff		 fimul	 DWORD PTR tv1896[ebp]
  028f8	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  028fe	e8 00 00 00 00	 call	 __ftol2_sse
  02903	89 85 44 ff ff
	ff		 mov	 DWORD PTR _atd_reflect$234084[ebp], eax

; 1304 : 
; 1305 : 		if ( atd_reflect )

  02909	83 bd 44 ff ff
	ff 00		 cmp	 DWORD PTR _atd_reflect$234084[ebp], 0
  02910	74 1d		 je	 SHORT $LN7@Attack

; 1306 : 		{
; 1307 : 			gObjAddMsgSendDelay(lpTargetObj, 10, lpObj->m_Index, 10, atd_reflect);

  02912	8b 85 44 ff ff
	ff		 mov	 eax, DWORD PTR _atd_reflect$234084[ebp]
  02918	50		 push	 eax
  02919	6a 0a		 push	 10			; 0000000aH
  0291b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0291e	8b 11		 mov	 edx, DWORD PTR [ecx]
  02920	52		 push	 edx
  02921	6a 0a		 push	 10			; 0000000aH
  02923	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02926	50		 push	 eax
  02927	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  0292c	83 c4 14	 add	 esp, 20			; 00000014H
$LN7@Attack:

; 1308 : 		}
; 1309 : 
; 1310 : 		if ( (rand()%100) < lpObj->SetOpReflectionDamage )

  0292f	e8 00 00 00 00	 call	 _rand
  02934	99		 cdq
  02935	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0293a	f7 f9		 idiv	 ecx
  0293c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0293f	0f b6 88 42 11
	00 00		 movzx	 ecx, BYTE PTR [eax+4418]
  02946	3b d1		 cmp	 edx, ecx
  02948	7d 1a		 jge	 SHORT $LN6@Attack

; 1311 : 		{
; 1312 : 			gObjAddMsgSendDelay(lpTargetObj, 10, lpObj->m_Index, 10, AttackDamage);

  0294a	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  0294d	50		 push	 eax
  0294e	6a 0a		 push	 10			; 0000000aH
  02950	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02953	8b 11		 mov	 edx, DWORD PTR [ecx]
  02955	52		 push	 edx
  02956	6a 0a		 push	 10			; 0000000aH
  02958	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0295b	50		 push	 eax
  0295c	e8 00 00 00 00	 call	 ?gObjAddMsgSendDelay@@YAXPAUOBJECTSTRUCT@@HHHH@Z ; gObjAddMsgSendDelay
  02961	83 c4 14	 add	 esp, 20			; 00000014H
$LN6@Attack:

; 1313 : 		}
; 1314 : 
; 1315 : 		AttackDamage -= iTotalShieldDamage;

  02964	8b 45 bc	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02967	2b 45 e0	 sub	 eax, DWORD PTR _iTotalShieldDamage$[ebp]
  0296a	89 45 bc	 mov	 DWORD PTR _AttackDamage$[ebp], eax

; 1316 : 
; 1317 : 		gObjLifeCheck(lpTargetObj, lpObj, AttackDamage, 0, MSBFlag, MsgDamage, skill, iTotalShieldDamage);

  0296d	8b 45 e0	 mov	 eax, DWORD PTR _iTotalShieldDamage$[ebp]
  02970	50		 push	 eax
  02971	0f b7 4d dc	 movzx	 ecx, WORD PTR _skill$[ebp]
  02975	51		 push	 ecx
  02976	0f b6 55 ef	 movzx	 edx, BYTE PTR _MsgDamage$[ebp]
  0297a	52		 push	 edx
  0297b	8b 45 c4	 mov	 eax, DWORD PTR _MSBFlag$[ebp]
  0297e	50		 push	 eax
  0297f	6a 00		 push	 0
  02981	8b 4d bc	 mov	 ecx, DWORD PTR _AttackDamage$[ebp]
  02984	51		 push	 ecx
  02985	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02988	52		 push	 edx
  02989	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0298c	50		 push	 eax
  0298d	e8 00 00 00 00	 call	 ?gObjLifeCheck@@YAXPAUOBJECTSTRUCT@@0HHHHGH@Z ; gObjLifeCheck
  02992	83 c4 20	 add	 esp, 32			; 00000020H

; 1318 : 	}
; 1319 : 	else

  02995	eb 1f		 jmp	 SHORT $LN5@Attack
$LN8@Attack:

; 1320 : 	{
; 1321 : 		GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, MsgDamage, 0);

  02997	6a 00		 push	 0
  02999	0f b6 45 ef	 movzx	 eax, BYTE PTR _MsgDamage$[ebp]
  0299d	50		 push	 eax
  0299e	6a 00		 push	 0
  029a0	6a 00		 push	 0
  029a2	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  029a5	8b 11		 mov	 edx, DWORD PTR [ecx]
  029a7	52		 push	 edx
  029a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029ab	8b 08		 mov	 ecx, DWORD PTR [eax]
  029ad	51		 push	 ecx
  029ae	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  029b3	83 c4 18	 add	 esp, 24			; 00000018H
$LN5@Attack:

; 1322 : 	}
; 1323 : 
; 1324 : 	if ( lpObj->Life <= 0.0f && lpObj->Type == OBJ_USER )

  029b6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029b9	d9 80 fc 00 00
	00		 fld	 DWORD PTR [eax+252]
  029bf	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  029c5	df e0		 fnstsw	 ax
  029c7	f6 c4 41	 test	 ah, 65			; 00000041H
  029ca	7a 53		 jp	 SHORT $LN3@Attack
  029cc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029cf	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  029d3	83 f9 01	 cmp	 ecx, 1
  029d6	75 47		 jne	 SHORT $LN3@Attack

; 1325 : 	{
; 1326 : 		if ( lpObj->m_CheckLifeTime <= 0 )

  029d8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029db	83 b8 d4 10 00
	00 00		 cmp	 DWORD PTR [eax+4308], 0
  029e2	7f 3b		 jg	 SHORT $LN3@Attack

; 1327 : 		{
; 1328 : 			lpObj->lpAttackObj = lpTargetObj;

  029e4	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029e7	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  029ea	89 88 d4 03 00
	00		 mov	 DWORD PTR [eax+980], ecx

; 1329 : 
; 1330 : 			if ( lpTargetObj->Type == OBJ_USER )

  029f0	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  029f3	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  029f7	83 f9 01	 cmp	 ecx, 1
  029fa	75 0c		 jne	 SHORT $LN2@Attack

; 1331 : 			{
; 1332 : 				lpObj->m_bAttackerKilled = true;

  029fc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029ff	c6 80 e0 03 00
	00 01		 mov	 BYTE PTR [eax+992], 1

; 1333 : 			}
; 1334 : 			else

  02a06	eb 0a		 jmp	 SHORT $LN1@Attack
$LN2@Attack:

; 1335 : 			{
; 1336 : 				lpObj->m_bAttackerKilled = false;

  02a08	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02a0b	c6 80 e0 03 00
	00 00		 mov	 BYTE PTR [eax+992], 0
$LN1@Attack:

; 1337 : 			}
; 1338 : 
; 1339 : 			lpObj->m_CheckLifeTime = 3;

  02a12	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02a15	c7 80 d4 10 00
	00 03 00 00 00	 mov	 DWORD PTR [eax+4308], 3
$LN3@Attack:

; 1340 : 		}
; 1341 : 	}
; 1342 : 
; 1343 : 	return TRUE;

  02a1f	b8 01 00 00 00	 mov	 eax, 1
$LN164@Attack:

; 1344 : }

  02a24	5f		 pop	 edi
  02a25	5e		 pop	 esi
  02a26	5b		 pop	 ebx
  02a27	8b e5		 mov	 esp, ebp
  02a29	5d		 pop	 ebp
  02a2a	c2 14 00	 ret	 20			; 00000014H
?Attack@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HH@Z ENDP ; CDarkSpirit::Attack
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\castlesiege.h
_TEXT	ENDS
;	COMDAT ?GetCastleState@CCastleSiege@@QAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetCastleState@CCastleSiege@@QAEHXZ PROC		; CCastleSiege::GetCastleState, COMDAT
; _this$ = ecx

; 314  : 	int GetCastleState(){return m_iCastleSiegeState;}

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 40 28	 mov	 eax, DWORD PTR [eax+40]
  00012	5f		 pop	 edi
  00013	5e		 pop	 esi
  00014	5b		 pop	 ebx
  00015	8b e5		 mov	 esp, ebp
  00017	5d		 pop	 ebp
  00018	c3		 ret	 0
?GetCastleState@CCastleSiege@@QAEHXZ ENDP		; CCastleSiege::GetCastleState
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\crywolf.h
_TEXT	ENDS
;	COMDAT ?GetCrywolfState@CCrywolf@@QAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetCrywolfState@CCrywolf@@QAEHXZ PROC			; CCrywolf::GetCrywolfState, COMDAT
; _this$ = ecx

; 91   : 	int GetCrywolfState(){return this->m_iCrywolfState;}

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 80 3c b9 0f
	00		 mov	 eax, DWORD PTR [eax+1030460]
  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
?GetCrywolfState@CCrywolf@@QAEHXZ ENDP			; CCrywolf::GetCrywolfState
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\darkspirit.cpp
_TEXT	ENDS
_TEXT	SEGMENT
_damage$234112 = -20					; size = 4
_AttackDamage$ = -16					; size = 4
_sub$ = -12						; size = 4
_ad$ = -8						; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_targetDefense$ = 12					; size = 4
_bIsOnDuel$ = 16					; size = 4
_crititcaldamage$ = 20					; size = 4
?GetAttackDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@HHH@Z PROC ; CDarkSpirit::GetAttackDamage
; _this$ = ecx

; 1347 : {

  02a30	55		 push	 ebp
  02a31	8b ec		 mov	 ebp, esp
  02a33	83 ec 54	 sub	 esp, 84			; 00000054H
  02a36	53		 push	 ebx
  02a37	56		 push	 esi
  02a38	57		 push	 edi
  02a39	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 1348 : 	if ( g_ShieldSystemOn == TRUE )

  02a3c	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?g_ShieldSystemOn@@3HA, 1 ; g_ShieldSystemOn
  02a43	75 0d		 jne	 SHORT $LN11@GetAttackD

; 1349 : 	{
; 1350 : 		if ( bIsOnDuel == TRUE )

  02a45	83 7d 10 01	 cmp	 DWORD PTR _bIsOnDuel$[ebp], 1
  02a49	75 07		 jne	 SHORT $LN11@GetAttackD

; 1351 : 		{
; 1352 : 			bIsOnDuel = FALSE;

  02a4b	c7 45 10 00 00
	00 00		 mov	 DWORD PTR _bIsOnDuel$[ebp], 0
$LN11@GetAttackD:

; 1353 : 		}
; 1354 : 	}
; 1355 : 
; 1356 : 	int ad;
; 1357 : 	int sub = this->m_AttackDamageMax - this->m_AttackDamageMin;

  02a52	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  02a55	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  02a58	8b 50 08	 mov	 edx, DWORD PTR [eax+8]
  02a5b	2b 51 04	 sub	 edx, DWORD PTR [ecx+4]
  02a5e	89 55 f4	 mov	 DWORD PTR _sub$[ebp], edx

; 1358 : 	int AttackDamage;
; 1359 : 
; 1360 : 	if ( crititcaldamage )

  02a61	83 7d 14 00	 cmp	 DWORD PTR _crititcaldamage$[ebp], 0
  02a65	74 0e		 je	 SHORT $LN10@GetAttackD

; 1361 : 	{
; 1362 : 		AttackDamage = this->m_AttackDamageMin + sub;

  02a67	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  02a6a	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  02a6d	03 4d f4	 add	 ecx, DWORD PTR _sub$[ebp]
  02a70	89 4d f0	 mov	 DWORD PTR _AttackDamage$[ebp], ecx

; 1363 : 	}
; 1364 : 	else

  02a73	eb 17		 jmp	 SHORT $LN9@GetAttackD
$LN10@GetAttackD:

; 1365 : 	{
; 1366 : 		AttackDamage = this->m_AttackDamageMin + (rand()%(sub+1));

  02a75	e8 00 00 00 00	 call	 _rand
  02a7a	8b 4d f4	 mov	 ecx, DWORD PTR _sub$[ebp]
  02a7d	83 c1 01	 add	 ecx, 1
  02a80	99		 cdq
  02a81	f7 f9		 idiv	 ecx
  02a83	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  02a86	03 50 04	 add	 edx, DWORD PTR [eax+4]
  02a89	89 55 f0	 mov	 DWORD PTR _AttackDamage$[ebp], edx
$LN9@GetAttackD:

; 1367 : 	}
; 1368 : 
; 1369 : 	if((lpObj->pInventory[0].m_Type >= ITEMGET(2,8) && lpObj->pInventory[0].m_Type <= ITEMGET(2,12) ) ||
; 1370 : 		lpObj->pInventory[0].m_Type == ITEMGET(2,13) || 
; 1371 : 		lpObj->pInventory[0].m_Type == ITEMGET(2,14) || 
; 1372 : 		lpObj->pInventory[0].m_Type == ITEMGET(2,15) ||
; 1373 : 		lpObj->pInventory[0].m_Type >= ITEMGET(2,17)) //season4 add-on

  02a8c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02a8f	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02a95	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  02a99	81 fa 08 04 00
	00		 cmp	 edx, 1032		; 00000408H
  02a9f	7c 15		 jl	 SHORT $LN6@GetAttackD
  02aa1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02aa4	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02aaa	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  02aae	81 fa 0c 04 00
	00		 cmp	 edx, 1036		; 0000040cH
  02ab4	7e 54		 jle	 SHORT $LN7@GetAttackD
$LN6@GetAttackD:
  02ab6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ab9	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02abf	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  02ac3	81 fa 0d 04 00
	00		 cmp	 edx, 1037		; 0000040dH
  02ac9	74 3f		 je	 SHORT $LN7@GetAttackD
  02acb	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ace	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02ad4	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  02ad8	81 fa 0e 04 00
	00		 cmp	 edx, 1038		; 0000040eH
  02ade	74 2a		 je	 SHORT $LN7@GetAttackD
  02ae0	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ae3	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02ae9	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  02aed	81 fa 0f 04 00
	00		 cmp	 edx, 1039		; 0000040fH
  02af3	74 15		 je	 SHORT $LN7@GetAttackD
  02af5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02af8	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02afe	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  02b02	81 fa 11 04 00
	00		 cmp	 edx, 1041		; 00000411H
  02b08	7c 60		 jl	 SHORT $LN5@GetAttackD
$LN7@GetAttackD:

; 1374 : 	{
; 1375 : 		if(lpObj->pInventory[0].m_Magic > 0 )

  02b0a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02b0d	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02b13	0f b7 51 20	 movzx	 edx, WORD PTR [ecx+32]
  02b17	85 d2		 test	 edx, edx
  02b19	7e 4f		 jle	 SHORT $LN5@GetAttackD

; 1376 : 		{
; 1377 : 			int damage = lpObj->pInventory[0].m_Magic / 2;

  02b1b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02b1e	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02b24	0f b7 41 20	 movzx	 eax, WORD PTR [ecx+32]
  02b28	99		 cdq
  02b29	2b c2		 sub	 eax, edx
  02b2b	d1 f8		 sar	 eax, 1
  02b2d	89 45 ec	 mov	 DWORD PTR _damage$234112[ebp], eax

; 1378 : 			damage -= (int)(damage * lpObj->pInventory[0].m_CurrentDurabilityState);

  02b30	db 45 ec	 fild	 DWORD PTR _damage$234112[ebp]
  02b33	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02b36	8b 88 24 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3620]
  02b3c	d8 89 a8 00 00
	00		 fmul	 DWORD PTR [ecx+168]
  02b42	e8 00 00 00 00	 call	 __ftol2_sse
  02b47	8b 55 ec	 mov	 edx, DWORD PTR _damage$234112[ebp]
  02b4a	2b d0		 sub	 edx, eax
  02b4c	89 55 ec	 mov	 DWORD PTR _damage$234112[ebp], edx

; 1379 : 			damage = AttackDamage * damage / 100;

  02b4f	8b 45 f0	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02b52	0f af 45 ec	 imul	 eax, DWORD PTR _damage$234112[ebp]
  02b56	99		 cdq
  02b57	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02b5c	f7 f9		 idiv	 ecx
  02b5e	89 45 ec	 mov	 DWORD PTR _damage$234112[ebp], eax

; 1380 : 			AttackDamage += damage;

  02b61	8b 45 f0	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02b64	03 45 ec	 add	 eax, DWORD PTR _damage$234112[ebp]
  02b67	89 45 f0	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN5@GetAttackD:

; 1381 : 		}
; 1382 : 	}
; 1383 : 
; 1384 : 	if ( bIsOnDuel )

  02b6a	83 7d 10 00	 cmp	 DWORD PTR _bIsOnDuel$[ebp], 0
  02b6e	74 16		 je	 SHORT $LN4@GetAttackD

; 1385 : 	{
; 1386 : 		ad = AttackDamage * 60 / 100 - targetDefense;

  02b70	8b 45 f0	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02b73	6b c0 3c	 imul	 eax, 60			; 0000003cH
  02b76	99		 cdq
  02b77	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02b7c	f7 f9		 idiv	 ecx
  02b7e	2b 45 0c	 sub	 eax, DWORD PTR _targetDefense$[ebp]
  02b81	89 45 f8	 mov	 DWORD PTR _ad$[ebp], eax

; 1387 : 	}
; 1388 : 	else

  02b84	eb 09		 jmp	 SHORT $LN3@GetAttackD
$LN4@GetAttackD:

; 1389 : 	{
; 1390 : 		ad = AttackDamage - targetDefense;

  02b86	8b 45 f0	 mov	 eax, DWORD PTR _AttackDamage$[ebp]
  02b89	2b 45 0c	 sub	 eax, DWORD PTR _targetDefense$[ebp]
  02b8c	89 45 f8	 mov	 DWORD PTR _ad$[ebp], eax
$LN3@GetAttackD:

; 1391 : 	}
; 1392 : 
; 1393 : 
; 1394 : 	if( lpObj->m_MPSkillOpt.MpsDarkSpiritStr1 > 0.0f )

  02b8f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02b92	d9 80 04 27 00
	00		 fld	 DWORD PTR [eax+9988]
  02b98	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  02b9e	df e0		 fnstsw	 ax
  02ba0	f6 c4 41	 test	 ah, 65			; 00000041H
  02ba3	75 14		 jne	 SHORT $LN2@GetAttackD

; 1395 : 	{
; 1396 : 		AttackDamage += int(lpObj->m_MPSkillOpt.MpsDarkSpiritStr1);

  02ba5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ba8	d9 80 04 27 00
	00		 fld	 DWORD PTR [eax+9988]
  02bae	e8 00 00 00 00	 call	 __ftol2_sse
  02bb3	03 45 f0	 add	 eax, DWORD PTR _AttackDamage$[ebp]
  02bb6	89 45 f0	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN2@GetAttackD:

; 1397 : 	}
; 1398 : 	// ----
; 1399 : 	if( lpObj->m_MPSkillOpt.MpsUseScepterPetStr > 0.0f )

  02bb9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02bbc	d9 80 20 27 00
	00		 fld	 DWORD PTR [eax+10016]
  02bc2	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  02bc8	df e0		 fnstsw	 ax
  02bca	f6 c4 41	 test	 ah, 65			; 00000041H
  02bcd	75 14		 jne	 SHORT $LN1@GetAttackD

; 1400 : 	{
; 1401 : 		AttackDamage += int(lpObj->m_MPSkillOpt.MpsUseScepterPetStr);

  02bcf	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02bd2	d9 80 20 27 00
	00		 fld	 DWORD PTR [eax+10016]
  02bd8	e8 00 00 00 00	 call	 __ftol2_sse
  02bdd	03 45 f0	 add	 eax, DWORD PTR _AttackDamage$[ebp]
  02be0	89 45 f0	 mov	 DWORD PTR _AttackDamage$[ebp], eax
$LN1@GetAttackD:

; 1402 : 	}
; 1403 : 
; 1404 : 
; 1405 : 	return ad;

  02be3	8b 45 f8	 mov	 eax, DWORD PTR _ad$[ebp]

; 1406 : }

  02be6	5f		 pop	 edi
  02be7	5e		 pop	 esi
  02be8	5b		 pop	 ebx
  02be9	8b e5		 mov	 esp, ebp
  02beb	5d		 pop	 ebp
  02bec	c2 10 00	 ret	 16			; 00000010H
?GetAttackDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@HHH@Z ENDP ; CDarkSpirit::GetAttackDamage
_TEXT	ENDS
EXTRN	?GetShieldSpellStatus@CIllusionTempleEvent@@QAEHHE@Z:PROC ; CIllusionTempleEvent::GetShieldSpellStatus
EXTRN	?GetState@CIllusionTempleEvent@@QAEEE@Z:PROC	; CIllusionTempleEvent::GetState
EXTRN	?g_IllusionTempleEvent@@3VCIllusionTempleEvent@@A:BYTE ; g_IllusionTempleEvent
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv79 = -84						; size = 4
_MsgDamage$ = -16					; size = 4
_TargetSuccessfulBlocking$ = -12			; size = 4
_SuccessAttackRate$ = -8				; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
_skill$ = 16						; size = 4
_skillSuccess$ = 20					; size = 4
_bAllMiss$ = 24						; size = 4
?MissCheck@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z PROC ; CDarkSpirit::MissCheck
; _this$ = ecx

; 1409 : {

  02bf0	55		 push	 ebp
  02bf1	8b ec		 mov	 ebp, esp
  02bf3	83 ec 54	 sub	 esp, 84			; 00000054H
  02bf6	53		 push	 ebx
  02bf7	56		 push	 esi
  02bf8	57		 push	 edi
  02bf9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 1410 : 	int SuccessAttackRate = 0; //loc2

  02bfc	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _SuccessAttackRate$[ebp], 0

; 1411 : 	int TargetSuccessfulBlocking = lpTargetObj->m_SuccessfulBlocking;

  02c03	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02c06	8b 88 9c 04 00
	00		 mov	 ecx, DWORD PTR [eax+1180]
  02c0c	89 4d f4	 mov	 DWORD PTR _TargetSuccessfulBlocking$[ebp], ecx

; 1412 : 	int MsgDamage = 0; //loc4

  02c0f	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _MsgDamage$[ebp], 0

; 1413 : 
; 1414 : 	SuccessAttackRate				+= lpObj->m_MPSkillOpt.MpsAttackSuccessRate;

  02c16	db 45 f8	 fild	 DWORD PTR _SuccessAttackRate$[ebp]
  02c19	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02c1c	d8 80 34 26 00
	00		 fadd	 DWORD PTR [eax+9780]
  02c22	e8 00 00 00 00	 call	 __ftol2_sse
  02c27	89 45 f8	 mov	 DWORD PTR _SuccessAttackRate$[ebp], eax

; 1415 : 
; 1416 : 	if ( this->m_SuccessAttackRate < TargetSuccessfulBlocking )

  02c2a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  02c2d	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  02c30	3b 4d f4	 cmp	 ecx, DWORD PTR _TargetSuccessfulBlocking$[ebp]
  02c33	7d 09		 jge	 SHORT $LN11@MissCheck

; 1417 : 	{
; 1418 : 		bAllMiss = TRUE;

  02c35	8b 45 18	 mov	 eax, DWORD PTR _bAllMiss$[ebp]
  02c38	c7 00 01 00 00
	00		 mov	 DWORD PTR [eax], 1
$LN11@MissCheck:

; 1419 : 	}
; 1420 : 
; 1421 : 	if(IT_MAP_RANGE(lpTargetObj->MapNumber) != FALSE) //Season2.5 add-on Illusion

  02c3e	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02c41	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02c48	83 f9 2d	 cmp	 ecx, 45			; 0000002dH
  02c4b	7d 09		 jge	 SHORT $LN14@MissCheck
  02c4d	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
  02c54	eb 15		 jmp	 SHORT $LN15@MissCheck
$LN14@MissCheck:
  02c56	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02c59	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  02c60	33 c9		 xor	 ecx, ecx
  02c62	83 f8 32	 cmp	 eax, 50			; 00000032H
  02c65	0f 9e c1	 setle	 cl
  02c68	89 4d ac	 mov	 DWORD PTR tv79[ebp], ecx
$LN15@MissCheck:
  02c6b	83 7d ac 00	 cmp	 DWORD PTR tv79[ebp], 0
  02c6f	0f 84 a7 00 00
	00		 je	 $LN6@MissCheck

; 1422 : 	{
; 1423 : 		if(g_IllusionTempleEvent.GetState(lpTargetObj->MapNumber) == 2)

  02c75	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02c78	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02c7f	51		 push	 ecx
  02c80	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_IllusionTempleEvent@@3VCIllusionTempleEvent@@A ; g_IllusionTempleEvent
  02c85	e8 00 00 00 00	 call	 ?GetState@CIllusionTempleEvent@@QAEEE@Z ; CIllusionTempleEvent::GetState
  02c8a	0f b6 d0	 movzx	 edx, al
  02c8d	83 fa 02	 cmp	 edx, 2
  02c90	0f 85 86 00 00
	00		 jne	 $LN6@MissCheck

; 1424 : 		{
; 1425 : 			if ( lpTargetObj->Type == OBJ_USER )

  02c96	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02c99	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02c9d	83 f9 01	 cmp	 ecx, 1
  02ca0	75 46		 jne	 SHORT $LN7@MissCheck

; 1426 : 			{
; 1427 : 				if(g_IllusionTempleEvent.GetShieldSpellStatus(lpTargetObj->m_iIllusionTempleIndex, lpTargetObj->MapNumber) != FALSE)

  02ca2	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02ca5	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02cac	51		 push	 ecx
  02cad	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02cb0	8b 82 78 20 00
	00		 mov	 eax, DWORD PTR [edx+8312]
  02cb6	50		 push	 eax
  02cb7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_IllusionTempleEvent@@3VCIllusionTempleEvent@@A ; g_IllusionTempleEvent
  02cbc	e8 00 00 00 00	 call	 ?GetShieldSpellStatus@CIllusionTempleEvent@@QAEHHE@Z ; CIllusionTempleEvent::GetShieldSpellStatus
  02cc1	85 c0		 test	 eax, eax
  02cc3	74 23		 je	 SHORT $LN7@MissCheck

; 1428 : 				{
; 1429 : 					GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, 0, 0);

  02cc5	6a 00		 push	 0
  02cc7	6a 00		 push	 0
  02cc9	6a 00		 push	 0
  02ccb	6a 00		 push	 0
  02ccd	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02cd0	8b 08		 mov	 ecx, DWORD PTR [eax]
  02cd2	51		 push	 ecx
  02cd3	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02cd6	8b 02		 mov	 eax, DWORD PTR [edx]
  02cd8	50		 push	 eax
  02cd9	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  02cde	83 c4 18	 add	 esp, 24			; 00000018H

; 1430 : 					return FALSE;

  02ce1	33 c0		 xor	 eax, eax
  02ce3	e9 b3 00 00 00	 jmp	 $LN12@MissCheck
$LN7@MissCheck:

; 1431 : 				}	
; 1432 : 			}
; 1433 : 			if(lpObj->PartyNumber == lpTargetObj->PartyNumber)

  02ce8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ceb	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02cee	8b 90 2c 04 00
	00		 mov	 edx, DWORD PTR [eax+1068]
  02cf4	3b 91 2c 04 00
	00		 cmp	 edx, DWORD PTR [ecx+1068]
  02cfa	75 20		 jne	 SHORT $LN6@MissCheck

; 1434 : 			{
; 1435 : 				GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, 0, 0);

  02cfc	6a 00		 push	 0
  02cfe	6a 00		 push	 0
  02d00	6a 00		 push	 0
  02d02	6a 00		 push	 0
  02d04	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02d07	8b 08		 mov	 ecx, DWORD PTR [eax]
  02d09	51		 push	 ecx
  02d0a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02d0d	8b 02		 mov	 eax, DWORD PTR [edx]
  02d0f	50		 push	 eax
  02d10	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  02d15	83 c4 18	 add	 esp, 24			; 00000018H

; 1436 : 				return FALSE;

  02d18	33 c0		 xor	 eax, eax
  02d1a	eb 7f		 jmp	 SHORT $LN12@MissCheck
$LN6@MissCheck:

; 1437 : 			}
; 1438 : 		}
; 1439 : 	}
; 1440 : 
; 1441 : 	if ( bAllMiss != FALSE )

  02d1c	8b 45 18	 mov	 eax, DWORD PTR _bAllMiss$[ebp]
  02d1f	83 38 00	 cmp	 DWORD PTR [eax], 0
  02d22	74 36		 je	 SHORT $LN5@MissCheck

; 1442 : 	{
; 1443 : 		if ( (rand()%100) >= 5 )

  02d24	e8 00 00 00 00	 call	 _rand
  02d29	99		 cdq
  02d2a	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02d2f	f7 f9		 idiv	 ecx
  02d31	83 fa 05	 cmp	 edx, 5
  02d34	7c 22		 jl	 SHORT $LN4@MissCheck

; 1444 : 		{
; 1445 : 			GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, MsgDamage, 0);

  02d36	6a 00		 push	 0
  02d38	8b 45 f0	 mov	 eax, DWORD PTR _MsgDamage$[ebp]
  02d3b	50		 push	 eax
  02d3c	6a 00		 push	 0
  02d3e	6a 00		 push	 0
  02d40	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02d43	8b 11		 mov	 edx, DWORD PTR [ecx]
  02d45	52		 push	 edx
  02d46	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02d49	8b 08		 mov	 ecx, DWORD PTR [eax]
  02d4b	51		 push	 ecx
  02d4c	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  02d51	83 c4 18	 add	 esp, 24			; 00000018H

; 1446 : 			return FALSE;

  02d54	33 c0		 xor	 eax, eax
  02d56	eb 43		 jmp	 SHORT $LN12@MissCheck
$LN4@MissCheck:

; 1447 : 		}
; 1448 : 	}

  02d58	eb 3c		 jmp	 SHORT $LN1@MissCheck
$LN5@MissCheck:

; 1449 : 	else if ( this->m_SuccessAttackRate )

  02d5a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  02d5d	83 78 10 00	 cmp	 DWORD PTR [eax+16], 0
  02d61	74 33		 je	 SHORT $LN1@MissCheck

; 1450 : 	{
; 1451 : 		if ( (rand()%this->m_SuccessAttackRate) < TargetSuccessfulBlocking)

  02d63	e8 00 00 00 00	 call	 _rand
  02d68	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  02d6b	99		 cdq
  02d6c	f7 79 10	 idiv	 DWORD PTR [ecx+16]
  02d6f	3b 55 f4	 cmp	 edx, DWORD PTR _TargetSuccessfulBlocking$[ebp]
  02d72	7d 22		 jge	 SHORT $LN1@MissCheck

; 1452 : 		{
; 1453 : 			GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, MsgDamage, 0);

  02d74	6a 00		 push	 0
  02d76	8b 45 f0	 mov	 eax, DWORD PTR _MsgDamage$[ebp]
  02d79	50		 push	 eax
  02d7a	6a 00		 push	 0
  02d7c	6a 00		 push	 0
  02d7e	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02d81	8b 11		 mov	 edx, DWORD PTR [ecx]
  02d83	52		 push	 edx
  02d84	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02d87	8b 08		 mov	 ecx, DWORD PTR [eax]
  02d89	51		 push	 ecx
  02d8a	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  02d8f	83 c4 18	 add	 esp, 24			; 00000018H

; 1454 : 			return FALSE;

  02d92	33 c0		 xor	 eax, eax
  02d94	eb 05		 jmp	 SHORT $LN12@MissCheck
$LN1@MissCheck:

; 1455 : 		}
; 1456 : 	}
; 1457 : 
; 1458 : 	return TRUE;

  02d96	b8 01 00 00 00	 mov	 eax, 1
$LN12@MissCheck:

; 1459 : }

  02d9b	5f		 pop	 edi
  02d9c	5e		 pop	 esi
  02d9d	5b		 pop	 ebx
  02d9e	8b e5		 mov	 esp, ebp
  02da0	5d		 pop	 ebp
  02da1	c2 14 00	 ret	 20			; 00000014H
?MissCheck@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ENDP ; CDarkSpirit::MissCheck
_TEXT	ENDS
PUBLIC	__real@40c3880000000000
EXTRN	?g_fSuccessAttackRateOption@@3MA:DWORD		; g_fSuccessAttackRateOption
;	COMDAT __real@40c3880000000000
CONST	SEGMENT
__real@40c3880000000000 DQ 040c3880000000000r	; 10000
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv566 = -104						; size = 4
tv550 = -104						; size = 4
tv546 = -104						; size = 4
tv542 = -104						; size = 4
tv538 = -104						; size = 4
tv527 = -104						; size = 4
tv518 = -104						; size = 4
tv509 = -104						; size = 4
tv499 = -104						; size = 4
tv489 = -104						; size = 4
tv480 = -104						; size = 4
tv471 = -104						; size = 4
tv460 = -104						; size = 4
tv451 = -104						; size = 4
tv442 = -104						; size = 4
tv438 = -104						; size = 4
tv429 = -104						; size = 4
tv420 = -104						; size = 4
tv416 = -104						; size = 4
tv71 = -104						; size = 4
_dwRate$ = -36						; size = 4
_iExpressionB$ = -32					; size = 4
_iExpressionA$ = -28					; size = 4
_iTargetBaseLevel$ = -24				; size = 4
_iBaseLevel$ = -20					; size = 4
_iAttackSuccessRate$ = -16				; size = 4
_iDefenseRate$ = -12					; size = 4
_iAttackRate$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
_skill$ = 16						; size = 4
_skillSuccess$ = 20					; size = 4
_bAllMiss$ = 24						; size = 4
?MissCheckPvP@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z PROC ; CDarkSpirit::MissCheckPvP
; _this$ = ecx

; 1462 : {

  02db0	55		 push	 ebp
  02db1	8b ec		 mov	 ebp, esp
  02db3	83 ec 68	 sub	 esp, 104		; 00000068H
  02db6	53		 push	 ebx
  02db7	56		 push	 esi
  02db8	57		 push	 edi
  02db9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 1463 : 	float iAttackRate = 0;

  02dbc	d9 ee		 fldz
  02dbe	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]

; 1464 : 	float iDefenseRate = 0;

  02dc1	d9 ee		 fldz
  02dc3	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]

; 1465 : 	int iAttackSuccessRate = 0;

  02dc6	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _iAttackSuccessRate$[ebp], 0

; 1466 : 
; 1467 : 	if(IT_MAP_RANGE(lpTargetObj->MapNumber) != FALSE) //Season2.5 add-on Illusion

  02dcd	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02dd0	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02dd7	83 f9 2d	 cmp	 ecx, 45			; 0000002dH
  02dda	7d 09		 jge	 SHORT $LN42@MissCheckP
  02ddc	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv71[ebp], 0
  02de3	eb 15		 jmp	 SHORT $LN43@MissCheckP
$LN42@MissCheckP:
  02de5	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02de8	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  02def	33 c9		 xor	 ecx, ecx
  02df1	83 f8 32	 cmp	 eax, 50			; 00000032H
  02df4	0f 9e c1	 setle	 cl
  02df7	89 4d 98	 mov	 DWORD PTR tv71[ebp], ecx
$LN43@MissCheckP:
  02dfa	83 7d 98 00	 cmp	 DWORD PTR tv71[ebp], 0
  02dfe	0f 84 aa 00 00
	00		 je	 $LN35@MissCheckP

; 1468 : 	{
; 1469 : 		if(g_IllusionTempleEvent.GetState(lpTargetObj->MapNumber) == 2)

  02e04	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02e07	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02e0e	51		 push	 ecx
  02e0f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_IllusionTempleEvent@@3VCIllusionTempleEvent@@A ; g_IllusionTempleEvent
  02e14	e8 00 00 00 00	 call	 ?GetState@CIllusionTempleEvent@@QAEEE@Z ; CIllusionTempleEvent::GetState
  02e19	0f b6 d0	 movzx	 edx, al
  02e1c	83 fa 02	 cmp	 edx, 2
  02e1f	0f 85 89 00 00
	00		 jne	 $LN35@MissCheckP

; 1470 : 		{
; 1471 : 			if ( lpTargetObj->Type == OBJ_USER )

  02e25	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02e28	0f b7 48 68	 movzx	 ecx, WORD PTR [eax+104]
  02e2c	83 f9 01	 cmp	 ecx, 1
  02e2f	75 46		 jne	 SHORT $LN36@MissCheckP

; 1472 : 			{
; 1473 : 				if(g_IllusionTempleEvent.GetShieldSpellStatus(lpTargetObj->m_iIllusionTempleIndex, lpTargetObj->MapNumber) != FALSE)

  02e31	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02e34	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02e3b	51		 push	 ecx
  02e3c	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  02e3f	8b 82 78 20 00
	00		 mov	 eax, DWORD PTR [edx+8312]
  02e45	50		 push	 eax
  02e46	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_IllusionTempleEvent@@3VCIllusionTempleEvent@@A ; g_IllusionTempleEvent
  02e4b	e8 00 00 00 00	 call	 ?GetShieldSpellStatus@CIllusionTempleEvent@@QAEHHE@Z ; CIllusionTempleEvent::GetShieldSpellStatus
  02e50	85 c0		 test	 eax, eax
  02e52	74 23		 je	 SHORT $LN36@MissCheckP

; 1474 : 				{
; 1475 : 					GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, 0, 0);

  02e54	6a 00		 push	 0
  02e56	6a 00		 push	 0
  02e58	6a 00		 push	 0
  02e5a	6a 00		 push	 0
  02e5c	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02e5f	8b 08		 mov	 ecx, DWORD PTR [eax]
  02e61	51		 push	 ecx
  02e62	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02e65	8b 02		 mov	 eax, DWORD PTR [edx]
  02e67	50		 push	 eax
  02e68	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  02e6d	83 c4 18	 add	 esp, 24			; 00000018H

; 1476 : 					return FALSE;

  02e70	33 c0		 xor	 eax, eax
  02e72	e9 da 04 00 00	 jmp	 $LN40@MissCheckP
$LN36@MissCheckP:

; 1477 : 				}	
; 1478 : 			}
; 1479 : 			if(lpObj->PartyNumber == lpTargetObj->PartyNumber)

  02e77	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02e7a	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  02e7d	8b 90 2c 04 00
	00		 mov	 edx, DWORD PTR [eax+1068]
  02e83	3b 91 2c 04 00
	00		 cmp	 edx, DWORD PTR [ecx+1068]
  02e89	75 23		 jne	 SHORT $LN35@MissCheckP

; 1480 : 			{
; 1481 : 				GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, 0, 0);

  02e8b	6a 00		 push	 0
  02e8d	6a 00		 push	 0
  02e8f	6a 00		 push	 0
  02e91	6a 00		 push	 0
  02e93	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02e96	8b 08		 mov	 ecx, DWORD PTR [eax]
  02e98	51		 push	 ecx
  02e99	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02e9c	8b 02		 mov	 eax, DWORD PTR [edx]
  02e9e	50		 push	 eax
  02e9f	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  02ea4	83 c4 18	 add	 esp, 24			; 00000018H

; 1482 : 				return FALSE;

  02ea7	33 c0		 xor	 eax, eax
  02ea9	e9 a3 04 00 00	 jmp	 $LN40@MissCheckP
$LN35@MissCheckP:

; 1483 : 			}
; 1484 : 		}
; 1485 : 	}
; 1486 : 
; 1487 : 	int iBaseLevel = lpObj->Level + lpObj->MLevel;

  02eae	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02eb1	0f bf 88 be 00
	00 00		 movsx	 ecx, WORD PTR [eax+190]
  02eb8	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02ebb	0f bf 82 d0 00
	00 00		 movsx	 eax, WORD PTR [edx+208]
  02ec2	03 c8		 add	 ecx, eax
  02ec4	89 4d ec	 mov	 DWORD PTR _iBaseLevel$[ebp], ecx

; 1488 : 
; 1489 : 	if ( lpObj->Class == CLASS_KNIGHT )

  02ec7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02eca	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02ed1	83 f9 01	 cmp	 ecx, 1
  02ed4	75 2b		 jne	 SHORT $LN34@MissCheckP

; 1490 : 	{
; 1491 : 		iAttackRate = (float)(iBaseLevel * 3 + ( lpObj->Dexterity * 45) / 10);	// #formula

  02ed6	8b 4d ec	 mov	 ecx, DWORD PTR _iBaseLevel$[ebp]
  02ed9	6b c9 03	 imul	 ecx, 3
  02edc	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02edf	0f b7 82 f6 00
	00 00		 movzx	 eax, WORD PTR [edx+246]
  02ee6	6b c0 2d	 imul	 eax, 45			; 0000002dH
  02ee9	99		 cdq
  02eea	be 0a 00 00 00	 mov	 esi, 10			; 0000000aH
  02eef	f7 fe		 idiv	 esi
  02ef1	03 c8		 add	 ecx, eax
  02ef3	89 4d 98	 mov	 DWORD PTR tv416[ebp], ecx
  02ef6	db 45 98	 fild	 DWORD PTR tv416[ebp]
  02ef9	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
  02efc	e9 3c 01 00 00	 jmp	 $LN22@MissCheckP
$LN34@MissCheckP:

; 1492 : 	}
; 1493 : 	else if ( lpObj->Class == CLASS_DARKLORD )

  02f01	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02f04	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02f0b	83 f9 04	 cmp	 ecx, 4
  02f0e	75 21		 jne	 SHORT $LN32@MissCheckP

; 1494 : 	{
; 1495 : 		iAttackRate = (float)(iBaseLevel * 3 + ( lpObj->Dexterity * 4 ));	// #formula

  02f10	8b 45 ec	 mov	 eax, DWORD PTR _iBaseLevel$[ebp]
  02f13	6b c0 03	 imul	 eax, 3
  02f16	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02f19	0f b7 91 f6 00
	00 00		 movzx	 edx, WORD PTR [ecx+246]
  02f20	8d 04 90	 lea	 eax, DWORD PTR [eax+edx*4]
  02f23	89 45 98	 mov	 DWORD PTR tv420[ebp], eax
  02f26	db 45 98	 fild	 DWORD PTR tv420[ebp]
  02f29	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
  02f2c	e9 0c 01 00 00	 jmp	 $LN22@MissCheckP
$LN32@MissCheckP:

; 1496 : 	}
; 1497 : 	else if ( lpObj->Class == CLASS_ELF )

  02f31	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02f34	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02f3b	83 f9 02	 cmp	 ecx, 2
  02f3e	75 2b		 jne	 SHORT $LN30@MissCheckP

; 1498 : 	{
; 1499 : 		iAttackRate = (float)(iBaseLevel * 3 + ( lpObj->Dexterity * 6 ) / 10);	// #formula

  02f40	8b 4d ec	 mov	 ecx, DWORD PTR _iBaseLevel$[ebp]
  02f43	6b c9 03	 imul	 ecx, 3
  02f46	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02f49	0f b7 82 f6 00
	00 00		 movzx	 eax, WORD PTR [edx+246]
  02f50	6b c0 06	 imul	 eax, 6
  02f53	99		 cdq
  02f54	be 0a 00 00 00	 mov	 esi, 10			; 0000000aH
  02f59	f7 fe		 idiv	 esi
  02f5b	03 c8		 add	 ecx, eax
  02f5d	89 4d 98	 mov	 DWORD PTR tv429[ebp], ecx
  02f60	db 45 98	 fild	 DWORD PTR tv429[ebp]
  02f63	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
  02f66	e9 d2 00 00 00	 jmp	 $LN22@MissCheckP
$LN30@MissCheckP:

; 1500 : 	}
; 1501 : 	else if ( lpObj->Class == CLASS_MAGUMSA )

  02f6b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02f6e	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02f75	83 f9 03	 cmp	 ecx, 3
  02f78	75 2b		 jne	 SHORT $LN28@MissCheckP

; 1502 : 	{
; 1503 : 		iAttackRate = (float)(iBaseLevel * 3 + ( lpObj->Dexterity * 35 ) / 10);	// #formula

  02f7a	8b 4d ec	 mov	 ecx, DWORD PTR _iBaseLevel$[ebp]
  02f7d	6b c9 03	 imul	 ecx, 3
  02f80	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02f83	0f b7 82 f6 00
	00 00		 movzx	 eax, WORD PTR [edx+246]
  02f8a	6b c0 23	 imul	 eax, 35			; 00000023H
  02f8d	99		 cdq
  02f8e	be 0a 00 00 00	 mov	 esi, 10			; 0000000aH
  02f93	f7 fe		 idiv	 esi
  02f95	03 c8		 add	 ecx, eax
  02f97	89 4d 98	 mov	 DWORD PTR tv438[ebp], ecx
  02f9a	db 45 98	 fild	 DWORD PTR tv438[ebp]
  02f9d	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
  02fa0	e9 98 00 00 00	 jmp	 $LN22@MissCheckP
$LN28@MissCheckP:

; 1504 : 	}
; 1505 : 	else if ( lpObj->Class == CLASS_WIZARD )

  02fa5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02fa8	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02faf	85 c9		 test	 ecx, ecx
  02fb1	75 1e		 jne	 SHORT $LN26@MissCheckP

; 1506 : 	{
; 1507 : 		iAttackRate = (float)(iBaseLevel * 3 + ( lpObj->Dexterity * 4 ));	// #formula

  02fb3	8b 45 ec	 mov	 eax, DWORD PTR _iBaseLevel$[ebp]
  02fb6	6b c0 03	 imul	 eax, 3
  02fb9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02fbc	0f b7 91 f6 00
	00 00		 movzx	 edx, WORD PTR [ecx+246]
  02fc3	8d 04 90	 lea	 eax, DWORD PTR [eax+edx*4]
  02fc6	89 45 98	 mov	 DWORD PTR tv442[ebp], eax
  02fc9	db 45 98	 fild	 DWORD PTR tv442[ebp]
  02fcc	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
  02fcf	eb 6c		 jmp	 SHORT $LN22@MissCheckP
$LN26@MissCheckP:

; 1508 : 	}
; 1509 : 	else if ( lpTargetObj->Class == CLASS_SUMMONER ) //webzen bug?? wtf??

  02fd1	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  02fd4	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  02fdb	83 f9 05	 cmp	 ecx, 5
  02fde	75 28		 jne	 SHORT $LN24@MissCheckP

; 1510 : 	{
; 1511 : 		iAttackRate = (float)(iBaseLevel * 3 + ( lpObj->Dexterity * 35 ) / 10);	// #formula

  02fe0	8b 4d ec	 mov	 ecx, DWORD PTR _iBaseLevel$[ebp]
  02fe3	6b c9 03	 imul	 ecx, 3
  02fe6	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02fe9	0f b7 82 f6 00
	00 00		 movzx	 eax, WORD PTR [edx+246]
  02ff0	6b c0 23	 imul	 eax, 35			; 00000023H
  02ff3	99		 cdq
  02ff4	be 0a 00 00 00	 mov	 esi, 10			; 0000000aH
  02ff9	f7 fe		 idiv	 esi
  02ffb	03 c8		 add	 ecx, eax
  02ffd	89 4d 98	 mov	 DWORD PTR tv451[ebp], ecx
  03000	db 45 98	 fild	 DWORD PTR tv451[ebp]
  03003	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
  03006	eb 35		 jmp	 SHORT $LN22@MissCheckP
$LN24@MissCheckP:

; 1512 : 	}
; 1513 : #ifdef MONK
; 1514 : 	else if( lpTargetObj->Class == CLASS_MONK )

  03008	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0300b	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  03012	83 f9 06	 cmp	 ecx, 6
  03015	75 26		 jne	 SHORT $LN22@MissCheckP

; 1515 : 	{
; 1516 : 		iAttackRate = iBaseLevel * 3 + ( lpObj->Dexterity * 48 ) / 10;

  03017	8b 4d ec	 mov	 ecx, DWORD PTR _iBaseLevel$[ebp]
  0301a	6b c9 03	 imul	 ecx, 3
  0301d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  03020	0f b7 82 f6 00
	00 00		 movzx	 eax, WORD PTR [edx+246]
  03027	6b c0 30	 imul	 eax, 48			; 00000030H
  0302a	99		 cdq
  0302b	be 0a 00 00 00	 mov	 esi, 10			; 0000000aH
  03030	f7 fe		 idiv	 esi
  03032	03 c8		 add	 ecx, eax
  03034	89 4d 98	 mov	 DWORD PTR tv460[ebp], ecx
  03037	db 45 98	 fild	 DWORD PTR tv460[ebp]
  0303a	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]
$LN22@MissCheckP:

; 1517 : 	}
; 1518 : #endif
; 1519 : 
; 1520 : 	int iTargetBaseLevel = lpTargetObj->Level + lpTargetObj->MLevel;

  0303d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03040	0f bf 88 be 00
	00 00		 movsx	 ecx, WORD PTR [eax+190]
  03047	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  0304a	0f bf 82 d0 00
	00 00		 movsx	 eax, WORD PTR [edx+208]
  03051	03 c8		 add	 ecx, eax
  03053	89 4d e8	 mov	 DWORD PTR _iTargetBaseLevel$[ebp], ecx

; 1521 : 
; 1522 : 	if ( lpTargetObj->Class == CLASS_KNIGHT )

  03056	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03059	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  03060	83 f9 01	 cmp	 ecx, 1
  03063	75 23		 jne	 SHORT $LN21@MissCheckP

; 1523 : 	{
; 1524 : 		iDefenseRate = (float)(iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 2);	// #formula

  03065	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03068	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  0306f	99		 cdq
  03070	2b c2		 sub	 eax, edx
  03072	d1 f8		 sar	 eax, 1
  03074	8b 4d e8	 mov	 ecx, DWORD PTR _iTargetBaseLevel$[ebp]
  03077	8d 14 48	 lea	 edx, DWORD PTR [eax+ecx*2]
  0307a	89 55 98	 mov	 DWORD PTR tv471[ebp], edx
  0307d	db 45 98	 fild	 DWORD PTR tv471[ebp]
  03080	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
  03083	e9 2e 01 00 00	 jmp	 $LN9@MissCheckP
$LN21@MissCheckP:

; 1525 : 	}
; 1526 : 	else if ( lpTargetObj->Class == CLASS_DARKLORD )

  03088	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0308b	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  03092	83 f9 04	 cmp	 ecx, 4
  03095	75 23		 jne	 SHORT $LN19@MissCheckP

; 1527 : 	{
; 1528 : 		iDefenseRate = (float)(iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 2);	// #formula

  03097	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0309a	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  030a1	99		 cdq
  030a2	2b c2		 sub	 eax, edx
  030a4	d1 f8		 sar	 eax, 1
  030a6	8b 4d e8	 mov	 ecx, DWORD PTR _iTargetBaseLevel$[ebp]
  030a9	8d 14 48	 lea	 edx, DWORD PTR [eax+ecx*2]
  030ac	89 55 98	 mov	 DWORD PTR tv480[ebp], edx
  030af	db 45 98	 fild	 DWORD PTR tv480[ebp]
  030b2	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
  030b5	e9 fc 00 00 00	 jmp	 $LN9@MissCheckP
$LN19@MissCheckP:

; 1529 : 	}
; 1530 : 	else if ( lpTargetObj->Class == CLASS_ELF )

  030ba	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  030bd	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  030c4	83 f9 02	 cmp	 ecx, 2
  030c7	75 26		 jne	 SHORT $LN17@MissCheckP

; 1531 : 	{
; 1532 : 		iDefenseRate = (float)(iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 10);	// #formula

  030c9	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  030cc	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  030d3	99		 cdq
  030d4	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  030d9	f7 f9		 idiv	 ecx
  030db	8b 55 e8	 mov	 edx, DWORD PTR _iTargetBaseLevel$[ebp]
  030de	8d 04 50	 lea	 eax, DWORD PTR [eax+edx*2]
  030e1	89 45 98	 mov	 DWORD PTR tv489[ebp], eax
  030e4	db 45 98	 fild	 DWORD PTR tv489[ebp]
  030e7	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
  030ea	e9 c7 00 00 00	 jmp	 $LN9@MissCheckP
$LN17@MissCheckP:

; 1533 : 	}
; 1534 : 	else if ( lpTargetObj->Class == CLASS_MAGUMSA )

  030ef	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  030f2	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  030f9	83 f9 03	 cmp	 ecx, 3
  030fc	75 27		 jne	 SHORT $LN15@MissCheckP

; 1535 : 	{
; 1536 : 		iDefenseRate = (float)(iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 4);	// #formula

  030fe	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03101	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  03108	99		 cdq
  03109	83 e2 03	 and	 edx, 3
  0310c	03 c2		 add	 eax, edx
  0310e	c1 f8 02	 sar	 eax, 2
  03111	8b 4d e8	 mov	 ecx, DWORD PTR _iTargetBaseLevel$[ebp]
  03114	8d 14 48	 lea	 edx, DWORD PTR [eax+ecx*2]
  03117	89 55 98	 mov	 DWORD PTR tv499[ebp], edx
  0311a	db 45 98	 fild	 DWORD PTR tv499[ebp]
  0311d	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
  03120	e9 91 00 00 00	 jmp	 $LN9@MissCheckP
$LN15@MissCheckP:

; 1537 : 	}
; 1538 : 	else if ( lpTargetObj->Class == CLASS_WIZARD )

  03125	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03128	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  0312f	85 c9		 test	 ecx, ecx
  03131	75 24		 jne	 SHORT $LN13@MissCheckP

; 1539 : 	{
; 1540 : 		iDefenseRate = (float)(iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 4);	// #formula

  03133	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03136	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  0313d	99		 cdq
  0313e	83 e2 03	 and	 edx, 3
  03141	03 c2		 add	 eax, edx
  03143	c1 f8 02	 sar	 eax, 2
  03146	8b 4d e8	 mov	 ecx, DWORD PTR _iTargetBaseLevel$[ebp]
  03149	8d 14 48	 lea	 edx, DWORD PTR [eax+ecx*2]
  0314c	89 55 98	 mov	 DWORD PTR tv509[ebp], edx
  0314f	db 45 98	 fild	 DWORD PTR tv509[ebp]
  03152	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
  03155	eb 5f		 jmp	 SHORT $LN9@MissCheckP
$LN13@MissCheckP:

; 1541 : 	}
; 1542 : 	else if ( lpTargetObj->Class == CLASS_SUMMONER )

  03157	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0315a	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  03161	83 f9 05	 cmp	 ecx, 5
  03164	75 20		 jne	 SHORT $LN11@MissCheckP

; 1543 : 	{
; 1544 : 		iDefenseRate = (float)(iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 2);	// #formula

  03166	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03169	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  03170	99		 cdq
  03171	2b c2		 sub	 eax, edx
  03173	d1 f8		 sar	 eax, 1
  03175	8b 4d e8	 mov	 ecx, DWORD PTR _iTargetBaseLevel$[ebp]
  03178	8d 14 48	 lea	 edx, DWORD PTR [eax+ecx*2]
  0317b	89 55 98	 mov	 DWORD PTR tv518[ebp], edx
  0317e	db 45 98	 fild	 DWORD PTR tv518[ebp]
  03181	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
  03184	eb 30		 jmp	 SHORT $LN9@MissCheckP
$LN11@MissCheckP:

; 1545 : 	}
; 1546 : #ifdef MONK
; 1547 : 	else if( lpTargetObj->Class == CLASS_MONK )

  03186	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03189	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  03190	83 f9 06	 cmp	 ecx, 6
  03193	75 21		 jne	 SHORT $LN9@MissCheckP

; 1548 : 	{
; 1549 : 		iDefenseRate = iTargetBaseLevel * 2 + lpTargetObj->Dexterity / 5;

  03195	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03198	0f b7 80 f6 00
	00 00		 movzx	 eax, WORD PTR [eax+246]
  0319f	99		 cdq
  031a0	b9 05 00 00 00	 mov	 ecx, 5
  031a5	f7 f9		 idiv	 ecx
  031a7	8b 55 e8	 mov	 edx, DWORD PTR _iTargetBaseLevel$[ebp]
  031aa	8d 04 50	 lea	 eax, DWORD PTR [eax+edx*2]
  031ad	89 45 98	 mov	 DWORD PTR tv527[ebp], eax
  031b0	db 45 98	 fild	 DWORD PTR tv527[ebp]
  031b3	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]
$LN9@MissCheckP:

; 1550 : 	}
; 1551 : #endif
; 1552 : 
; 1553 : 	if ( iAttackRate <= 0.0f || iDefenseRate <= 0.0f || lpObj->Level <= 0 || lpTargetObj->Level <= 0 )

  031b6	d9 45 f8	 fld	 DWORD PTR _iAttackRate$[ebp]
  031b9	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  031bf	df e0		 fnstsw	 ax
  031c1	f6 c4 41	 test	 ah, 65			; 00000041H
  031c4	7b 2c		 jnp	 SHORT $LN7@MissCheckP
  031c6	d9 45 f4	 fld	 DWORD PTR _iDefenseRate$[ebp]
  031c9	dc 1d 00 00 00
	00		 fcomp	 QWORD PTR __real@0000000000000000
  031cf	df e0		 fnstsw	 ax
  031d1	f6 c4 41	 test	 ah, 65			; 00000041H
  031d4	7b 1c		 jnp	 SHORT $LN7@MissCheckP
  031d6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  031d9	0f bf 88 be 00
	00 00		 movsx	 ecx, WORD PTR [eax+190]
  031e0	85 c9		 test	 ecx, ecx
  031e2	7e 0e		 jle	 SHORT $LN7@MissCheckP
  031e4	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  031e7	0f bf 88 be 00
	00 00		 movsx	 ecx, WORD PTR [eax+190]
  031ee	85 c9		 test	 ecx, ecx
  031f0	7f 07		 jg	 SHORT $LN8@MissCheckP
$LN7@MissCheckP:

; 1554 : 	{
; 1555 : 		return FALSE;

  031f2	33 c0		 xor	 eax, eax
  031f4	e9 58 01 00 00	 jmp	 $LN40@MissCheckP
$LN8@MissCheckP:

; 1556 : 	}
; 1557 : 
; 1558 : 	iAttackRate += lpObj->m_ItemOptionExFor380.OpAddAttackSuccessRatePVP;

  031f9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  031fc	0f bf 88 fe 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8190]
  03203	89 4d 98	 mov	 DWORD PTR tv538[ebp], ecx
  03206	db 45 98	 fild	 DWORD PTR tv538[ebp]
  03209	d8 45 f8	 fadd	 DWORD PTR _iAttackRate$[ebp]
  0320c	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]

; 1559 : 	iDefenseRate += lpTargetObj->m_ItemOptionExFor380.OpAddDefenseSuccessRatePvP;

  0320f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03212	0f bf 88 02 20
	00 00		 movsx	 ecx, WORD PTR [eax+8194]
  03219	89 4d 98	 mov	 DWORD PTR tv542[ebp], ecx
  0321c	db 45 98	 fild	 DWORD PTR tv542[ebp]
  0321f	d8 45 f4	 fadd	 DWORD PTR _iDefenseRate$[ebp]
  03222	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]

; 1560 : 
; 1561 : 	iAttackRate += lpObj->m_JewelOfHarmonyEffect.HJOpAddAttackSuccessRatePVP;

  03225	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03228	0f bf 88 e6 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8166]
  0322f	89 4d 98	 mov	 DWORD PTR tv546[ebp], ecx
  03232	db 45 98	 fild	 DWORD PTR tv546[ebp]
  03235	d8 45 f8	 fadd	 DWORD PTR _iAttackRate$[ebp]
  03238	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]

; 1562 : 	iDefenseRate += lpTargetObj->m_JewelOfHarmonyEffect.HJOpAddDefenseSuccessRatePvP;

  0323b	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0323e	0f bf 88 f8 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8184]
  03245	89 4d 98	 mov	 DWORD PTR tv550[ebp], ecx
  03248	db 45 98	 fild	 DWORD PTR tv550[ebp]
  0324b	d8 45 f4	 fadd	 DWORD PTR _iDefenseRate$[ebp]
  0324e	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]

; 1563 : 
; 1564 : 
; 1565 : 	iAttackRate		+= lpObj->m_MPSkillOpt.MpsPVPAttackDmgRate;

  03251	d9 45 f8	 fld	 DWORD PTR _iAttackRate$[ebp]
  03254	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03257	d8 80 3c 26 00
	00		 fadd	 DWORD PTR [eax+9788]
  0325d	d9 5d f8	 fstp	 DWORD PTR _iAttackRate$[ebp]

; 1566 : 	iDefenseRate	+= lpTargetObj->m_MPSkillOpt.MpsPVPBlockingRate;

  03260	d9 45 f4	 fld	 DWORD PTR _iDefenseRate$[ebp]
  03263	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03266	d8 80 40 26 00
	00		 fadd	 DWORD PTR [eax+9792]
  0326c	d9 5d f4	 fstp	 DWORD PTR _iDefenseRate$[ebp]

; 1567 : 
; 1568 : 
; 1569 : 	float iExpressionA = ( iAttackRate * 10000.0f ) / ( iAttackRate + iDefenseRate );

  0326f	d9 45 f8	 fld	 DWORD PTR _iAttackRate$[ebp]
  03272	dc 0d 00 00 00
	00		 fmul	 QWORD PTR __real@40c3880000000000
  03278	d9 45 f8	 fld	 DWORD PTR _iAttackRate$[ebp]
  0327b	d8 45 f4	 fadd	 DWORD PTR _iDefenseRate$[ebp]
  0327e	de f9		 fdivp	 ST(1), ST(0)
  03280	d9 5d e4	 fstp	 DWORD PTR _iExpressionA$[ebp]

; 1570 : 	float iExpressionB = (float)(( iBaseLevel * 10000 ) / ( iBaseLevel + iTargetBaseLevel ));

  03283	8b 45 ec	 mov	 eax, DWORD PTR _iBaseLevel$[ebp]
  03286	69 c0 10 27 00
	00		 imul	 eax, 10000		; 00002710H
  0328c	8b 4d ec	 mov	 ecx, DWORD PTR _iBaseLevel$[ebp]
  0328f	03 4d e8	 add	 ecx, DWORD PTR _iTargetBaseLevel$[ebp]
  03292	99		 cdq
  03293	f7 f9		 idiv	 ecx
  03295	89 45 98	 mov	 DWORD PTR tv566[ebp], eax
  03298	db 45 98	 fild	 DWORD PTR tv566[ebp]
  0329b	d9 5d e0	 fstp	 DWORD PTR _iExpressionB$[ebp]

; 1571 : 
; 1572 : 	iExpressionA /= 10000.0f;

  0329e	d9 45 e4	 fld	 DWORD PTR _iExpressionA$[ebp]
  032a1	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@40c3880000000000
  032a7	d9 5d e4	 fstp	 DWORD PTR _iExpressionA$[ebp]

; 1573 : 	iExpressionB /= 10000.0f;

  032aa	d9 45 e0	 fld	 DWORD PTR _iExpressionB$[ebp]
  032ad	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@40c3880000000000
  032b3	d9 5d e0	 fstp	 DWORD PTR _iExpressionB$[ebp]

; 1574 : 
; 1575 : 	iAttackSuccessRate = (int)(100.0f * iExpressionA * g_fSuccessAttackRateOption * iExpressionB);

  032b6	d9 45 e4	 fld	 DWORD PTR _iExpressionA$[ebp]
  032b9	dc 0d 00 00 00
	00		 fmul	 QWORD PTR __real@4059000000000000
  032bf	d8 0d 00 00 00
	00		 fmul	 DWORD PTR ?g_fSuccessAttackRateOption@@3MA ; g_fSuccessAttackRateOption
  032c5	d8 4d e0	 fmul	 DWORD PTR _iExpressionB$[ebp]
  032c8	e8 00 00 00 00	 call	 __ftol2_sse
  032cd	89 45 f0	 mov	 DWORD PTR _iAttackSuccessRate$[ebp], eax

; 1576 : 
; 1577 : 	if ( (iTargetBaseLevel - iBaseLevel) >= 100 )

  032d0	8b 45 e8	 mov	 eax, DWORD PTR _iTargetBaseLevel$[ebp]
  032d3	2b 45 ec	 sub	 eax, DWORD PTR _iBaseLevel$[ebp]
  032d6	83 f8 64	 cmp	 eax, 100		; 00000064H
  032d9	7c 0b		 jl	 SHORT $LN6@MissCheckP

; 1578 : 	{
; 1579 : 		iAttackSuccessRate -= 5;

  032db	8b 45 f0	 mov	 eax, DWORD PTR _iAttackSuccessRate$[ebp]
  032de	83 e8 05	 sub	 eax, 5
  032e1	89 45 f0	 mov	 DWORD PTR _iAttackSuccessRate$[ebp], eax
  032e4	eb 2e		 jmp	 SHORT $LN2@MissCheckP
$LN6@MissCheckP:

; 1580 : 	}
; 1581 : 	else if ( (iTargetBaseLevel - iBaseLevel) >= 200 )

  032e6	8b 45 e8	 mov	 eax, DWORD PTR _iTargetBaseLevel$[ebp]
  032e9	2b 45 ec	 sub	 eax, DWORD PTR _iBaseLevel$[ebp]
  032ec	3d c8 00 00 00	 cmp	 eax, 200		; 000000c8H
  032f1	7c 0b		 jl	 SHORT $LN4@MissCheckP

; 1582 : 	{
; 1583 : 		iAttackSuccessRate -= 10;

  032f3	8b 45 f0	 mov	 eax, DWORD PTR _iAttackSuccessRate$[ebp]
  032f6	83 e8 0a	 sub	 eax, 10			; 0000000aH
  032f9	89 45 f0	 mov	 DWORD PTR _iAttackSuccessRate$[ebp], eax
  032fc	eb 16		 jmp	 SHORT $LN2@MissCheckP
$LN4@MissCheckP:

; 1584 : 	}
; 1585 : 	else if ( (iTargetBaseLevel - iBaseLevel) >= 300 )

  032fe	8b 45 e8	 mov	 eax, DWORD PTR _iTargetBaseLevel$[ebp]
  03301	2b 45 ec	 sub	 eax, DWORD PTR _iBaseLevel$[ebp]
  03304	3d 2c 01 00 00	 cmp	 eax, 300		; 0000012cH
  03309	7c 09		 jl	 SHORT $LN2@MissCheckP

; 1586 : 	{
; 1587 : 		iAttackSuccessRate -= 15;

  0330b	8b 45 f0	 mov	 eax, DWORD PTR _iAttackSuccessRate$[ebp]
  0330e	83 e8 0f	 sub	 eax, 15			; 0000000fH
  03311	89 45 f0	 mov	 DWORD PTR _iAttackSuccessRate$[ebp], eax
$LN2@MissCheckP:

; 1588 : 	}
; 1589 : 
; 1590 : 	DWORD dwRate = rand() % 100;

  03314	e8 00 00 00 00	 call	 _rand
  03319	99		 cdq
  0331a	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0331f	f7 f9		 idiv	 ecx
  03321	89 55 dc	 mov	 DWORD PTR _dwRate$[ebp], edx

; 1591 : 
; 1592 : 	if ( dwRate > iAttackSuccessRate )

  03324	8b 45 dc	 mov	 eax, DWORD PTR _dwRate$[ebp]
  03327	3b 45 f0	 cmp	 eax, DWORD PTR _iAttackSuccessRate$[ebp]
  0332a	76 20		 jbe	 SHORT $LN1@MissCheckP

; 1593 : 	{
; 1594 : 		GCDamageSend(lpObj->m_Index, lpTargetObj->m_Index, 0, 0, 0, 0);

  0332c	6a 00		 push	 0
  0332e	6a 00		 push	 0
  03330	6a 00		 push	 0
  03332	6a 00		 push	 0
  03334	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03337	8b 08		 mov	 ecx, DWORD PTR [eax]
  03339	51		 push	 ecx
  0333a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0333d	8b 02		 mov	 eax, DWORD PTR [edx]
  0333f	50		 push	 eax
  03340	e8 00 00 00 00	 call	 ?GCDamageSend@@YAXHHHHHH@Z ; GCDamageSend
  03345	83 c4 18	 add	 esp, 24			; 00000018H

; 1595 : 		return FALSE;

  03348	33 c0		 xor	 eax, eax
  0334a	eb 05		 jmp	 SHORT $LN40@MissCheckP
$LN1@MissCheckP:

; 1596 : 	}
; 1597 : 
; 1598 : 	return TRUE;

  0334c	b8 01 00 00 00	 mov	 eax, 1
$LN40@MissCheckP:

; 1599 : }

  03351	5f		 pop	 edi
  03352	5e		 pop	 esi
  03353	5b		 pop	 ebx
  03354	8b e5		 mov	 esp, ebp
  03356	5d		 pop	 ebp
  03357	c2 14 00	 ret	 20			; 00000014H
?MissCheckPvP@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0HHAAH@Z ENDP ; CDarkSpirit::MissCheckPvP
_TEXT	ENDS
PUBLIC	?ChangeCommand@CDarkSpirit@@QAEXHH@Z		; CDarkSpirit::ChangeCommand
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_setmode$ = -8						; size = 4
_this$ = -4						; size = 4
_command$ = 8						; size = 4
_targetindex$ = 12					; size = 4
?ChangeCommand@CDarkSpirit@@QAEXHH@Z PROC		; CDarkSpirit::ChangeCommand
; _this$ = ecx

; 1602 : {

  03360	55		 push	 ebp
  03361	8b ec		 mov	 ebp, esp
  03363	83 ec 48	 sub	 esp, 72			; 00000048H
  03366	53		 push	 ebx
  03367	56		 push	 esi
  03368	57		 push	 edi
  03369	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 1603 : 	CDarkSpirit::ePetItem_Mode setmode = PetItem_Mode_Normal;

  0336c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _setmode$[ebp], 0

; 1604 : 
; 1605 : 	if ( command == PetItem_Mode_Normal )

  03373	83 7d 08 00	 cmp	 DWORD PTR _command$[ebp], 0
  03377	75 09		 jne	 SHORT $LN7@ChangeComm

; 1606 : 	{
; 1607 : 		setmode = PetItem_Mode_Normal;

  03379	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _setmode$[ebp], 0
  03380	eb 2b		 jmp	 SHORT $LN6@ChangeComm
$LN7@ChangeComm:

; 1608 : 	}
; 1609 : 	else if ( command == PetItem_Mode_Attack_Random )

  03382	83 7d 08 01	 cmp	 DWORD PTR _command$[ebp], 1
  03386	75 09		 jne	 SHORT $LN5@ChangeComm

; 1610 : 	{
; 1611 : 		setmode = PetItem_Mode_Attack_Random;

  03388	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _setmode$[ebp], 1
  0338f	eb 1c		 jmp	 SHORT $LN6@ChangeComm
$LN5@ChangeComm:

; 1612 : 	}
; 1613 : 	else if ( command == PetItem_Mode_Attack_WithMaster )

  03391	83 7d 08 02	 cmp	 DWORD PTR _command$[ebp], 2
  03395	75 09		 jne	 SHORT $LN3@ChangeComm

; 1614 : 	{
; 1615 : 		setmode = PetItem_Mode_Attack_WithMaster;

  03397	c7 45 f8 02 00
	00 00		 mov	 DWORD PTR _setmode$[ebp], 2
  0339e	eb 0d		 jmp	 SHORT $LN6@ChangeComm
$LN3@ChangeComm:

; 1616 : 	}
; 1617 : 	else if ( command == PetItem_Mode_Attack_Target )

  033a0	83 7d 08 03	 cmp	 DWORD PTR _command$[ebp], 3
  033a4	75 07		 jne	 SHORT $LN6@ChangeComm

; 1618 : 	{
; 1619 : 		setmode = PetItem_Mode_Attack_Target;

  033a6	c7 45 f8 03 00
	00 00		 mov	 DWORD PTR _setmode$[ebp], 3
$LN6@ChangeComm:

; 1620 : 	}
; 1621 : 
; 1622 : 	this->SetMode(setmode, targetindex);

  033ad	8b 45 0c	 mov	 eax, DWORD PTR _targetindex$[ebp]
  033b0	50		 push	 eax
  033b1	8b 4d f8	 mov	 ecx, DWORD PTR _setmode$[ebp]
  033b4	51		 push	 ecx
  033b5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  033b8	e8 00 00 00 00	 call	 ?SetMode@CDarkSpirit@@QAEXW4ePetItem_Mode@1@H@Z ; CDarkSpirit::SetMode

; 1623 : }

  033bd	5f		 pop	 edi
  033be	5e		 pop	 esi
  033bf	5b		 pop	 ebx
  033c0	8b e5		 mov	 esp, ebp
  033c2	5d		 pop	 ebp
  033c3	c2 08 00	 ret	 8
?ChangeCommand@CDarkSpirit@@QAEXHH@Z ENDP		; CDarkSpirit::ChangeCommand
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv146 = -96						; size = 4
tv144 = -92						; size = 4
tv141 = -86						; size = 2
_pMsg$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_nPos$ = 12						; size = 4
_PetType$ = 16						; size = 4
_InvenType$ = 20					; size = 4
?SendLevelmsg@CDarkSpirit@@SAXHHHH@Z PROC		; CDarkSpirit::SendLevelmsg

; 1626 : {

  033d0	55		 push	 ebp
  033d1	8b ec		 mov	 ebp, esp
  033d3	83 ec 60	 sub	 esp, 96			; 00000060H
  033d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  033db	33 c5		 xor	 eax, ebp
  033dd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  033e0	53		 push	 ebx
  033e1	56		 push	 esi
  033e2	57		 push	 edi

; 1627 : 	PMSG_SEND_PET_ITEMINFO pMsg;
; 1628 : 
; 1629 : 	pMsg.h.set((LPBYTE)&pMsg, 0xA9, sizeof(pMsg));

  033e3	6a 10		 push	 16			; 00000010H
  033e5	68 a9 00 00 00	 push	 169			; 000000a9H
  033ea	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  033ed	50		 push	 eax
  033ee	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  033f1	e8 00 00 00 00	 call	 ?set@PBMSG_HEAD@@QAEXPAEEE@Z ; PBMSG_HEAD::set

; 1630 : 	pMsg.PetType = PetType;

  033f6	8a 45 10	 mov	 al, BYTE PTR _PetType$[ebp]
  033f9	88 45 ef	 mov	 BYTE PTR _pMsg$[ebp+3], al

; 1631 : 	pMsg.InvenType = 0xFE;

  033fc	c6 45 f0 fe	 mov	 BYTE PTR _pMsg$[ebp+4], 254 ; 000000feH

; 1632 : 	pMsg.nPos = nPos;

  03400	8a 45 0c	 mov	 al, BYTE PTR _nPos$[ebp]
  03403	88 45 f1	 mov	 BYTE PTR _pMsg$[ebp+5], al

; 1633 : 	pMsg.Level = gObj[aIndex].pInventory[nPos].m_PetItem_Level;

  03406	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  03409	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0340f	8b 4d 0c	 mov	 ecx, DWORD PTR _nPos$[ebp]
  03412	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  03418	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0341e	8b 84 02 24 0e
	00 00		 mov	 eax, DWORD PTR [edx+eax+3620]
  03425	8a 8c 08 bc 00
	00 00		 mov	 cl, BYTE PTR [eax+ecx+188]
  0342c	88 4d f2	 mov	 BYTE PTR _pMsg$[ebp+6], cl

; 1634 : 	pMsg.Exp = gObj[aIndex].pInventory[nPos].m_PetItem_Exp;

  0342f	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  03432	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  03438	8b 4d 0c	 mov	 ecx, DWORD PTR _nPos$[ebp]
  0343b	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  03441	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  03447	8b 84 02 24 0e
	00 00		 mov	 eax, DWORD PTR [edx+eax+3620]
  0344e	8b 8c 08 c0 00
	00 00		 mov	 ecx, DWORD PTR [eax+ecx+192]
  03455	89 4d f4	 mov	 DWORD PTR _pMsg$[ebp+8], ecx

; 1635 : 	pMsg.Life = (BYTE)gObj[aIndex].pInventory[nPos].m_Durability; //season4 add-on (possible fix)

  03458	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0345b	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  03461	8b 4d 0c	 mov	 ecx, DWORD PTR _nPos$[ebp]
  03464	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  0346a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  03470	8b 84 02 24 0e
	00 00		 mov	 eax, DWORD PTR [edx+eax+3620]
  03477	d9 44 08 24	 fld	 DWORD PTR [eax+ecx+36]
  0347b	d9 7d aa	 fnstcw	 WORD PTR tv141[ebp]
  0347e	0f b7 45 aa	 movzx	 eax, WORD PTR tv141[ebp]
  03482	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  03487	89 45 a4	 mov	 DWORD PTR tv144[ebp], eax
  0348a	d9 6d a4	 fldcw	 WORD PTR tv144[ebp]
  0348d	db 5d a0	 fistp	 DWORD PTR tv146[ebp]
  03490	d9 6d aa	 fldcw	 WORD PTR tv141[ebp]
  03493	8a 4d a0	 mov	 cl, BYTE PTR tv146[ebp]
  03496	88 4d f8	 mov	 BYTE PTR _pMsg$[ebp+12], cl

; 1636 : 
; 1637 : 	DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  03499	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0349d	50		 push	 eax
  0349e	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  034a1	51		 push	 ecx
  034a2	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  034a5	52		 push	 edx
  034a6	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  034ab	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1638 : }

  034ae	5f		 pop	 edi
  034af	5e		 pop	 esi
  034b0	5b		 pop	 ebx
  034b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  034b4	33 cd		 xor	 ecx, ebp
  034b6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  034bb	8b e5		 mov	 esp, ebp
  034bd	5d		 pop	 ebp
  034be	c3		 ret	 0
?SendLevelmsg@CDarkSpirit@@SAXHHHH@Z ENDP		; CDarkSpirit::SendLevelmsg
_TEXT	ENDS
PUBLIC	__real@4034000000000000
PUBLIC	??_C@_0IE@HMIJIHBA@?$FLJewelOfHarmony?$FN?$FLPvP?5System?$FN?5Att@ ; `string'
EXTRN	?GCSendEffectInfo@@YAXHE@Z:PROC			; GCSendEffectInfo
EXTRN	?g_iDamageDevideToSDRate@@3HA:DWORD		; g_iDamageDevideToSDRate
;	COMDAT __real@4034000000000000
CONST	SEGMENT
__real@4034000000000000 DQ 04034000000000000r	; 20
CONST	ENDS
;	COMDAT ??_C@_0IE@HMIJIHBA@?$FLJewelOfHarmony?$FN?$FLPvP?5System?$FN?5Att@
CONST	SEGMENT
??_C@_0IE@HMIJIHBA@?$FLJewelOfHarmony?$FN?$FLPvP?5System?$FN?5Att@ DB '[J'
	DB	'ewelOfHarmony][PvP System] Attacker:[%s][%s]-SD Decrease[%d] '
	DB	'SD Ignore[%d] Defender:[%s][%s] SD Increase Option[%d] - SD R'
	DB	'ate[%d]', 00H				; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv188 = -104						; size = 4
tv189 = -100						; size = 4
_iRand$234249 = -32					; size = 4
_iDamageDevideToSDRate$ = -28				; size = 4
_bReduceShieldGage$ = -21				; size = 1
_iReduceLifeForEffect$ = -20				; size = 4
_iReduceShield$ = -16					; size = 4
_iReduceLife$ = -12					; size = 4
_iShieldDamage$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
_iAttackDamage$ = 16					; size = 4
?GetShieldDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0H@Z PROC ; CDarkSpirit::GetShieldDamage
; _this$ = ecx

; 1641 : {

  034c0	55		 push	 ebp
  034c1	8b ec		 mov	 ebp, esp
  034c3	83 ec 68	 sub	 esp, 104		; 00000068H
  034c6	53		 push	 ebx
  034c7	56		 push	 esi
  034c8	57		 push	 edi
  034c9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 1642 : 	int iShieldDamage = 0;

  034cc	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _iShieldDamage$[ebp], 0

; 1643 : 
; 1644 : 	if ( g_ShieldSystemOn == FALSE )

  034d3	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_ShieldSystemOn@@3HA, 0 ; g_ShieldSystemOn
  034da	75 07		 jne	 SHORT $LN12@GetShieldD

; 1645 : 	{
; 1646 : 		return 0;

  034dc	33 c0		 xor	 eax, eax
  034de	e9 05 02 00 00	 jmp	 $LN13@GetShieldD
$LN12@GetShieldD:

; 1647 : 	}
; 1648 : 
; 1649 : 	if ( iAttackDamage <= 0 )

  034e3	83 7d 10 00	 cmp	 DWORD PTR _iAttackDamage$[ebp], 0
  034e7	7f 07		 jg	 SHORT $LN11@GetShieldD

; 1650 : 	{
; 1651 : 		return 0;

  034e9	33 c0		 xor	 eax, eax
  034eb	e9 f8 01 00 00	 jmp	 $LN13@GetShieldD
$LN11@GetShieldD:

; 1652 : 	}
; 1653 : 
; 1654 : 	int iReduceLife = 0;

  034f0	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _iReduceLife$[ebp], 0

; 1655 : 	int iReduceShield = 0;

  034f7	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _iReduceShield$[ebp], 0

; 1656 : 	int iReduceLifeForEffect = 0; 

  034fe	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _iReduceLifeForEffect$[ebp], 0

; 1657 : 	bool bReduceShieldGage = 0;

  03505	c6 45 eb 00	 mov	 BYTE PTR _bReduceShieldGage$[ebp], 0

; 1658 : 	int iDamageDevideToSDRate = g_iDamageDevideToSDRate;

  03509	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iDamageDevideToSDRate@@3HA ; g_iDamageDevideToSDRate
  0350e	89 45 e4	 mov	 DWORD PTR _iDamageDevideToSDRate$[ebp], eax

; 1659 : 	iDamageDevideToSDRate -= lpObj->m_JewelOfHarmonyEffect.HJOpDecreaseSDRate;

  03511	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03514	0f bf 88 e8 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8168]
  0351b	8b 55 e4	 mov	 edx, DWORD PTR _iDamageDevideToSDRate$[ebp]
  0351e	2b d1		 sub	 edx, ecx
  03520	89 55 e4	 mov	 DWORD PTR _iDamageDevideToSDRate$[ebp], edx

; 1660 : 	iDamageDevideToSDRate += lpTargetObj->m_JewelOfHarmonyEffect.HJOpAddSDRate;

  03523	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03526	0f bf 88 fc 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8188]
  0352d	03 4d e4	 add	 ecx, DWORD PTR _iDamageDevideToSDRate$[ebp]
  03530	89 4d e4	 mov	 DWORD PTR _iDamageDevideToSDRate$[ebp], ecx

; 1661 : 
; 1662 : 	if ( iDamageDevideToSDRate < 0 )

  03533	79 07		 jns	 SHORT $LN10@GetShieldD

; 1663 : 		iDamageDevideToSDRate = 0;

  03535	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _iDamageDevideToSDRate$[ebp], 0
$LN10@GetShieldD:

; 1664 : 
; 1665 : 	if ( iDamageDevideToSDRate > 100 )

  0353c	83 7d e4 64	 cmp	 DWORD PTR _iDamageDevideToSDRate$[ebp], 100 ; 00000064H
  03540	7e 07		 jle	 SHORT $LN9@GetShieldD

; 1666 : 		iDamageDevideToSDRate = 100;

  03542	c7 45 e4 64 00
	00 00		 mov	 DWORD PTR _iDamageDevideToSDRate$[ebp], 100 ; 00000064H
$LN9@GetShieldD:

; 1667 : 
; 1668 : 	if ( lpObj->m_JewelOfHarmonyEffect.HJOpAddIgnoreSDRate > 0 )

  03549	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0354c	0f bf 88 ea 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8170]
  03553	85 c9		 test	 ecx, ecx
  03555	7e 26		 jle	 SHORT $LN7@GetShieldD

; 1669 : 	{
; 1670 : 		int iRand = rand()%100;

  03557	e8 00 00 00 00	 call	 _rand
  0355c	99		 cdq
  0355d	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03562	f7 f9		 idiv	 ecx
  03564	89 55 e0	 mov	 DWORD PTR _iRand$234249[ebp], edx

; 1671 : 
; 1672 : 		if ( iRand < lpObj->m_JewelOfHarmonyEffect.HJOpAddIgnoreSDRate )

  03567	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0356a	0f bf 88 ea 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8170]
  03571	39 4d e0	 cmp	 DWORD PTR _iRand$234249[ebp], ecx
  03574	7d 07		 jge	 SHORT $LN7@GetShieldD

; 1673 : 		{
; 1674 : 			iDamageDevideToSDRate = 0;

  03576	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _iDamageDevideToSDRate$[ebp], 0
$LN7@GetShieldD:

; 1675 : 		}
; 1676 : 	}
; 1677 : 
; 1678 : 	if ( lpObj->m_JewelOfHarmonyEffect.HJOpDecreaseSDRate || lpTargetObj->m_JewelOfHarmonyEffect.HJOpAddSDRate || lpObj->m_JewelOfHarmonyEffect.HJOpAddIgnoreSDRate )

  0357d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03580	0f bf 88 e8 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8168]
  03587	85 c9		 test	 ecx, ecx
  03589	75 1c		 jne	 SHORT $LN5@GetShieldD
  0358b	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  0358e	0f bf 88 fc 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8188]
  03595	85 c9		 test	 ecx, ecx
  03597	75 0e		 jne	 SHORT $LN5@GetShieldD
  03599	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0359c	0f bf 88 ea 1f
	00 00		 movsx	 ecx, WORD PTR [eax+8170]
  035a3	85 c9		 test	 ecx, ecx
  035a5	74 4f		 je	 SHORT $LN6@GetShieldD
$LN5@GetShieldD:

; 1679 : 	{
; 1680 : 		LogAddTD("[JewelOfHarmony][PvP System] Attacker:[%s][%s]-SD Decrease[%d] SD Ignore[%d] Defender:[%s][%s] SD Increase Option[%d] - SD Rate[%d]",
; 1681 : 			lpObj->AccountID, lpObj->Name,
; 1682 : 			lpObj->m_JewelOfHarmonyEffect.HJOpDecreaseSDRate, lpObj->m_JewelOfHarmonyEffect.HJOpAddIgnoreSDRate, lpTargetObj->AccountID, lpTargetObj->Name, lpTargetObj->m_JewelOfHarmonyEffect.HJOpAddSDRate, iDamageDevideToSDRate);

  035a7	8b 45 e4	 mov	 eax, DWORD PTR _iDamageDevideToSDRate$[ebp]
  035aa	50		 push	 eax
  035ab	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  035ae	0f bf 91 fc 1f
	00 00		 movsx	 edx, WORD PTR [ecx+8188]
  035b5	52		 push	 edx
  035b6	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  035b9	83 c0 77	 add	 eax, 119		; 00000077H
  035bc	50		 push	 eax
  035bd	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  035c0	83 c1 6c	 add	 ecx, 108		; 0000006cH
  035c3	51		 push	 ecx
  035c4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  035c7	0f bf 82 ea 1f
	00 00		 movsx	 eax, WORD PTR [edx+8170]
  035ce	50		 push	 eax
  035cf	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  035d2	0f bf 91 e8 1f
	00 00		 movsx	 edx, WORD PTR [ecx+8168]
  035d9	52		 push	 edx
  035da	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  035dd	83 c0 77	 add	 eax, 119		; 00000077H
  035e0	50		 push	 eax
  035e1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  035e4	83 c1 6c	 add	 ecx, 108		; 0000006cH
  035e7	51		 push	 ecx
  035e8	68 00 00 00 00	 push	 OFFSET ??_C@_0IE@HMIJIHBA@?$FLJewelOfHarmony?$FN?$FLPvP?5System?$FN?5Att@
  035ed	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  035f3	83 c4 24	 add	 esp, 36			; 00000024H
$LN6@GetShieldD:

; 1683 : 	}
; 1684 : 
; 1685 : 	iReduceShield = iAttackDamage * iDamageDevideToSDRate / 100;

  035f6	8b 45 10	 mov	 eax, DWORD PTR _iAttackDamage$[ebp]
  035f9	0f af 45 e4	 imul	 eax, DWORD PTR _iDamageDevideToSDRate$[ebp]
  035fd	99		 cdq
  035fe	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03603	f7 f9		 idiv	 ecx
  03605	89 45 f0	 mov	 DWORD PTR _iReduceShield$[ebp], eax

; 1686 : 	iReduceLife = iAttackDamage - iReduceShield;

  03608	8b 45 10	 mov	 eax, DWORD PTR _iAttackDamage$[ebp]
  0360b	2b 45 f0	 sub	 eax, DWORD PTR _iReduceShield$[ebp]
  0360e	89 45 f4	 mov	 DWORD PTR _iReduceLife$[ebp], eax

; 1687 : 
; 1688 : 	if ( (lpTargetObj->iShield-iReduceShield) <0 )

  03611	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03614	8b 88 54 01 00
	00		 mov	 ecx, DWORD PTR [eax+340]
  0361a	2b 4d f0	 sub	 ecx, DWORD PTR _iReduceShield$[ebp]
  0361d	79 2e		 jns	 SHORT $LN3@GetShieldD

; 1689 : 	{
; 1690 : 		iReduceLife += iReduceShield  - lpTargetObj->iShield;

  0361f	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03622	8b 4d f0	 mov	 ecx, DWORD PTR _iReduceShield$[ebp]
  03625	2b 88 54 01 00
	00		 sub	 ecx, DWORD PTR [eax+340]
  0362b	03 4d f4	 add	 ecx, DWORD PTR _iReduceLife$[ebp]
  0362e	89 4d f4	 mov	 DWORD PTR _iReduceLife$[ebp], ecx

; 1691 : 		iReduceShield = lpTargetObj->iShield;

  03631	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03634	8b 88 54 01 00
	00		 mov	 ecx, DWORD PTR [eax+340]
  0363a	89 4d f0	 mov	 DWORD PTR _iReduceShield$[ebp], ecx

; 1692 : 
; 1693 : 		if ( lpTargetObj->iShield > 0 )

  0363d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03640	83 b8 54 01 00
	00 00		 cmp	 DWORD PTR [eax+340], 0
  03647	7e 04		 jle	 SHORT $LN3@GetShieldD

; 1694 : 		{
; 1695 : 			bReduceShieldGage = true;

  03649	c6 45 eb 01	 mov	 BYTE PTR _bReduceShieldGage$[ebp], 1
$LN3@GetShieldD:

; 1696 : 		}
; 1697 : 	}
; 1698 : 
; 1699 : 	iReduceLifeForEffect = (int)(( lpTargetObj->MaxLife + lpTargetObj->AddLife ) * 20.0f / 100.0f);

  0364d	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03650	db 80 4c 01 00
	00		 fild	 DWORD PTR [eax+332]
  03656	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  03659	d8 81 00 01 00
	00		 fadd	 DWORD PTR [ecx+256]
  0365f	dc 0d 00 00 00
	00		 fmul	 QWORD PTR __real@4034000000000000
  03665	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  0366b	e8 00 00 00 00	 call	 __ftol2_sse
  03670	89 45 ec	 mov	 DWORD PTR _iReduceLifeForEffect$[ebp], eax

; 1700 : 
; 1701 : 	if ( bReduceShieldGage == true && iReduceLife > iReduceLifeForEffect )

  03673	0f b6 45 eb	 movzx	 eax, BYTE PTR _bReduceShieldGage$[ebp]
  03677	83 f8 01	 cmp	 eax, 1
  0367a	75 69		 jne	 SHORT $LN1@GetShieldD
  0367c	8b 45 f4	 mov	 eax, DWORD PTR _iReduceLife$[ebp]
  0367f	3b 45 ec	 cmp	 eax, DWORD PTR _iReduceLifeForEffect$[ebp]
  03682	7e 61		 jle	 SHORT $LN1@GetShieldD

; 1702 : 	{
; 1703 : 		if ( !CC_MAP_RANGE(lpTargetObj->MapNumber) )

  03684	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  03687	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0368e	83 f9 35	 cmp	 ecx, 53			; 00000035H
  03691	75 09		 jne	 SHORT $LN17@GetShieldD
  03693	c7 45 9c 01 00
	00 00		 mov	 DWORD PTR tv189[ebp], 1
  0369a	eb 33		 jmp	 SHORT $LN18@GetShieldD
$LN17@GetShieldD:
  0369c	8b 55 0c	 mov	 edx, DWORD PTR _lpTargetObj$[ebp]
  0369f	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  036a6	83 f8 12	 cmp	 eax, 18			; 00000012H
  036a9	7d 09		 jge	 SHORT $LN15@GetShieldD
  036ab	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv188[ebp], 0
  036b2	eb 15		 jmp	 SHORT $LN16@GetShieldD
$LN15@GetShieldD:
  036b4	8b 4d 0c	 mov	 ecx, DWORD PTR _lpTargetObj$[ebp]
  036b7	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  036be	33 c0		 xor	 eax, eax
  036c0	83 fa 17	 cmp	 edx, 23			; 00000017H
  036c3	0f 9e c0	 setle	 al
  036c6	89 45 98	 mov	 DWORD PTR tv188[ebp], eax
$LN16@GetShieldD:
  036c9	8b 4d 98	 mov	 ecx, DWORD PTR tv188[ebp]
  036cc	89 4d 9c	 mov	 DWORD PTR tv189[ebp], ecx
$LN18@GetShieldD:
  036cf	83 7d 9c 00	 cmp	 DWORD PTR tv189[ebp], 0
  036d3	75 10		 jne	 SHORT $LN1@GetShieldD

; 1704 : 		{
; 1705 : 			GCSendEffectInfo(lpTargetObj->m_Index, 17);

  036d5	6a 11		 push	 17			; 00000011H
  036d7	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  036da	8b 08		 mov	 ecx, DWORD PTR [eax]
  036dc	51		 push	 ecx
  036dd	e8 00 00 00 00	 call	 ?GCSendEffectInfo@@YAXHE@Z ; GCSendEffectInfo
  036e2	83 c4 08	 add	 esp, 8
$LN1@GetShieldD:

; 1706 : 		}
; 1707 : 	}
; 1708 : 
; 1709 : 	return iReduceShield;

  036e5	8b 45 f0	 mov	 eax, DWORD PTR _iReduceShield$[ebp]
$LN13@GetShieldD:

; 1710 : }

  036e8	5f		 pop	 edi
  036e9	5e		 pop	 esi
  036ea	5b		 pop	 ebx
  036eb	8b e5		 mov	 esp, ebp
  036ed	5d		 pop	 ebp
  036ee	c2 0c 00	 ret	 12			; 0000000cH
?GetShieldDamage@CDarkSpirit@@QAEHPAUOBJECTSTRUCT@@0H@Z ENDP ; CDarkSpirit::GetShieldDamage
; Function compile flags: /Odtp /ZI
; File d:\microsoft visual studio 10.0\vc\include\vector
_TEXT	ENDS
;	COMDAT ?size@?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QBEIXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?size@?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QBEIXZ PROC ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::size, COMDAT
; _this$ = ecx

; 878  : 		{	// return length of sequence

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 879  : 		return (this->_Mylast - this->_Myfirst);

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00012	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  00015	2b 01		 sub	 eax, DWORD PTR [ecx]
  00017	c1 f8 02	 sar	 eax, 2

; 880  : 		}

  0001a	5f		 pop	 edi
  0001b	5e		 pop	 esi
  0001c	5b		 pop	 ebx
  0001d	8b e5		 mov	 esp, ebp
  0001f	5d		 pop	 ebp
  00020	c3		 ret	 0
?size@?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QBEIXZ ENDP ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::size
; Function compile flags: /Odtp /ZI
_TEXT	ENDS
;	COMDAT ??A?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QAEAAUDARKREVAN_ATTACK_BLOCK@@I@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
__Pos$ = 8						; size = 4
??A?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QAEAAUDARKREVAN_ATTACK_BLOCK@@I@Z PROC ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::operator[], COMDAT
; _this$ = ecx

; 928  : 		{	// subscript mutable sequence

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 929  :  #if _ITERATOR_DEBUG_LEVEL == 2
; 930  : 		if (size() <= _Pos)
; 931  : 			{	// report error
; 932  : 			_DEBUG_ERROR("vector subscript out of range");
; 933  : 			_SCL_SECURE_OUT_OF_RANGE;
; 934  : 			}
; 935  : 
; 936  :  #elif _ITERATOR_DEBUG_LEVEL == 1
; 937  : 		_SCL_SECURE_VALIDATE_RANGE(_Pos < size());
; 938  :  #endif /* _ITERATOR_DEBUG_LEVEL */
; 939  : 
; 940  : 		return (*(this->_Myfirst + _Pos));

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00011	8b 55 08	 mov	 edx, DWORD PTR __Pos$[ebp]
  00014	8d 04 91	 lea	 eax, DWORD PTR [ecx+edx*4]

; 941  : 		}

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 04 00	 ret	 4
??A?$vector@UDARKREVAN_ATTACK_BLOCK@@V?$allocator@UDARKREVAN_ATTACK_BLOCK@@@std@@@std@@QAEAAUDARKREVAN_ATTACK_BLOCK@@I@Z ENDP ; std::vector<DARKREVAN_ATTACK_BLOCK,std::allocator<DARKREVAN_ATTACK_BLOCK> >::operator[]
_TEXT	ENDS
EXTRN	_atexit:PROC
EXTRN	??_L@YGXPAXIHP6EX0@Z1@Z:PROC			; `eh vector constructor iterator'
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\darkspirit.cpp
;	COMDAT ??__EgDarkSpirit@@YAXXZ
text$yc	SEGMENT
??__EgDarkSpirit@@YAXXZ PROC				; `dynamic initializer for 'gDarkSpirit'', COMDAT

; 26   : CDarkSpirit gDarkSpirit[OBJMAX];

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	68 00 00 00 00	 push	 OFFSET ??1CDarkSpirit@@UAE@XZ ; CDarkSpirit::~CDarkSpirit
  0000e	68 00 00 00 00	 push	 OFFSET ??0CDarkSpirit@@QAE@XZ ; CDarkSpirit::CDarkSpirit
  00013	68 98 3a 00 00	 push	 15000			; 00003a98H
  00018	6a 28		 push	 40			; 00000028H
  0001a	68 00 00 00 00	 push	 OFFSET ?gDarkSpirit@@3PAVCDarkSpirit@@A ; gDarkSpirit
  0001f	e8 00 00 00 00	 call	 ??_L@YGXPAXIHP6EX0@Z1@Z
  00024	68 00 00 00 00	 push	 OFFSET ??__FgDarkSpirit@@YAXXZ ; `dynamic atexit destructor for 'gDarkSpirit''
  00029	e8 00 00 00 00	 call	 _atexit
  0002e	83 c4 04	 add	 esp, 4
  00031	5f		 pop	 edi
  00032	5e		 pop	 esi
  00033	5b		 pop	 ebx
  00034	8b e5		 mov	 esp, ebp
  00036	5d		 pop	 ebp
  00037	c3		 ret	 0
??__EgDarkSpirit@@YAXXZ ENDP				; `dynamic initializer for 'gDarkSpirit''
text$yc	ENDS
EXTRN	??_M@YGXPAXIHP6EX0@Z@Z:PROC			; `eh vector destructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??__FgDarkSpirit@@YAXXZ
text$yd	SEGMENT
??__FgDarkSpirit@@YAXXZ PROC				; `dynamic atexit destructor for 'gDarkSpirit'', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	68 00 00 00 00	 push	 OFFSET ??1CDarkSpirit@@UAE@XZ ; CDarkSpirit::~CDarkSpirit
  0000e	68 98 3a 00 00	 push	 15000			; 00003a98H
  00013	6a 28		 push	 40			; 00000028H
  00015	68 00 00 00 00	 push	 OFFSET ?gDarkSpirit@@3PAVCDarkSpirit@@A ; gDarkSpirit
  0001a	e8 00 00 00 00	 call	 ??_M@YGXPAXIHP6EX0@Z@Z
  0001f	5f		 pop	 edi
  00020	5e		 pop	 esi
  00021	5b		 pop	 ebx
  00022	8b e5		 mov	 esp, ebp
  00024	5d		 pop	 ebp
  00025	c3		 ret	 0
??__FgDarkSpirit@@YAXXZ ENDP				; `dynamic atexit destructor for 'gDarkSpirit''
text$yd	ENDS
PUBLIC	?gDarkSpirit@@3PAVCDarkSpirit@@A		; gDarkSpirit
_BSS	SEGMENT
?gDarkSpirit@@3PAVCDarkSpirit@@A DB 0927c0H DUP (?)	; gDarkSpirit
_BSS	ENDS
CRT$XCU	SEGMENT
_gDarkSpirit$initializer$ DD FLAT:??__EgDarkSpirit@@YAXXZ
CRT$XCU	ENDS
END
