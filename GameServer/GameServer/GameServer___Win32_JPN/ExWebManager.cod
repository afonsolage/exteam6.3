; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\ExWebManager.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?g_ExWebManager@@3VCExWebManager@@A		; g_ExWebManager
_BSS	SEGMENT
?g_ExWebManager@@3VCExWebManager@@A DB 01H DUP (?)	; g_ExWebManager
_BSS	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?CreditsUpdate@CExWebManager@@QAEXPAUCREDIT_WEB_UPDATE@@@Z ; CExWebManager::CreditsUpdate
PUBLIC	?GameShopUpdate@CExWebManager@@QAEXPAUGAMESHOP_WEB_UPDATE@@@Z ; CExWebManager::GameShopUpdate
PUBLIC	?Protocol@CExWebManager@@QAEXEPAE@Z		; CExWebManager::Protocol
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\exwebmanager.cpp
_TEXT	SEGMENT
tv65 = -72						; size = 4
_this$ = -4						; size = 4
_protoNum$ = 8						; size = 1
_aRecv$ = 12						; size = 4
?Protocol@CExWebManager@@QAEXEPAE@Z PROC		; CExWebManager::Protocol
; _this$ = ecx

; 10   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 11   : 	switch(protoNum)

  0000c	8a 45 08	 mov	 al, BYTE PTR _protoNum$[ebp]
  0000f	88 45 b8	 mov	 BYTE PTR tv65[ebp], al
  00012	80 7d b8 00	 cmp	 BYTE PTR tv65[ebp], 0
  00016	74 08		 je	 SHORT $LN2@Protocol
  00018	80 7d b8 01	 cmp	 BYTE PTR tv65[ebp], 1
  0001c	74 10		 je	 SHORT $LN1@Protocol
  0001e	eb 1a		 jmp	 SHORT $LN5@Protocol
$LN2@Protocol:

; 12   : 	{
; 13   : 	case 0x00:
; 14   : 		this->GameShopUpdate((GAMESHOP_WEB_UPDATE*)aRecv);

  00020	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00023	50		 push	 eax
  00024	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00027	e8 00 00 00 00	 call	 ?GameShopUpdate@CExWebManager@@QAEXPAUGAMESHOP_WEB_UPDATE@@@Z ; CExWebManager::GameShopUpdate

; 15   : 		break;

  0002c	eb 0c		 jmp	 SHORT $LN5@Protocol
$LN1@Protocol:

; 16   : 	case 0x01:
; 17   : 		this->CreditsUpdate((CREDIT_WEB_UPDATE*)aRecv);

  0002e	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00031	50		 push	 eax
  00032	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00035	e8 00 00 00 00	 call	 ?CreditsUpdate@CExWebManager@@QAEXPAUCREDIT_WEB_UPDATE@@@Z ; CExWebManager::CreditsUpdate
$LN5@Protocol:

; 18   : 		break;
; 19   : 	}
; 20   : }

  0003a	5f		 pop	 edi
  0003b	5e		 pop	 esi
  0003c	5b		 pop	 ebx
  0003d	8b e5		 mov	 esp, ebp
  0003f	5d		 pop	 ebp
  00040	c2 08 00	 ret	 8
?Protocol@CExWebManager@@QAEXEPAE@Z ENDP		; CExWebManager::Protocol
_TEXT	ENDS
EXTRN	?ExUserDataSend@@YAXH@Z:PROC			; ExUserDataSend
EXTRN	_strcmp:PROC
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	__fltused:DWORD
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv162 = -88						; size = 8
tv156 = -88						; size = 8
tv150 = -88						; size = 8
_lpUser$ = -16						; size = 4
_n$220132 = -12						; size = 4
_aIndex$ = -8						; size = 4
_this$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
?GameShopUpdate@CExWebManager@@QAEXPAUGAMESHOP_WEB_UPDATE@@@Z PROC ; CExWebManager::GameShopUpdate
; _this$ = ecx

; 23   : {

  00050	55		 push	 ebp
  00051	8b ec		 mov	 ebp, esp
  00053	83 ec 58	 sub	 esp, 88			; 00000058H
  00056	53		 push	 ebx
  00057	56		 push	 esi
  00058	57		 push	 edi
  00059	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 24   : 	int aIndex = -1;

  0005c	c7 45 f8 ff ff
	ff ff		 mov	 DWORD PTR _aIndex$[ebp], -1

; 25   : 
; 26   : 	for(int n = OBJ_STARTUSERINDEX; n < OBJMAX; n++)

  00063	c7 45 f4 b0 36
	00 00		 mov	 DWORD PTR _n$220132[ebp], 14000 ; 000036b0H
  0006a	eb 09		 jmp	 SHORT $LN7@GameShopUp
$LN6@GameShopUp:
  0006c	8b 45 f4	 mov	 eax, DWORD PTR _n$220132[ebp]
  0006f	83 c0 01	 add	 eax, 1
  00072	89 45 f4	 mov	 DWORD PTR _n$220132[ebp], eax
$LN7@GameShopUp:
  00075	81 7d f4 98 3a
	00 00		 cmp	 DWORD PTR _n$220132[ebp], 15000 ; 00003a98H
  0007c	7d 66		 jge	 SHORT $LN5@GameShopUp

; 27   : 	{
; 28   : 		if(gObj[n].Connected == PLAYER_PLAYING)

  0007e	8b 45 f4	 mov	 eax, DWORD PTR _n$220132[ebp]
  00081	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00087	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0008d	83 7c 01 04 03	 cmp	 DWORD PTR [ecx+eax+4], 3
  00092	75 4e		 jne	 SHORT $LN2@GameShopUp

; 29   : 		{
; 30   : 			if(gObj[n].AccountID[0] == lpMsg->AccountID[0])

  00094	8b 45 f4	 mov	 eax, DWORD PTR _n$220132[ebp]
  00097	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0009d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000a3	0f be 54 01 6c	 movsx	 edx, BYTE PTR [ecx+eax+108]
  000a8	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  000ab	0f be 48 04	 movsx	 ecx, BYTE PTR [eax+4]
  000af	3b d1		 cmp	 edx, ecx
  000b1	75 2f		 jne	 SHORT $LN2@GameShopUp

; 31   : 			{
; 32   : 				if(strcmp(&gObj[n].AccountID[0] , lpMsg->AccountID) == 0)

  000b3	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  000b6	83 c0 04	 add	 eax, 4
  000b9	50		 push	 eax
  000ba	8b 4d f4	 mov	 ecx, DWORD PTR _n$220132[ebp]
  000bd	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  000c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000c9	8d 44 0a 6c	 lea	 eax, DWORD PTR [edx+ecx+108]
  000cd	50		 push	 eax
  000ce	e8 00 00 00 00	 call	 _strcmp
  000d3	83 c4 08	 add	 esp, 8
  000d6	85 c0		 test	 eax, eax
  000d8	75 08		 jne	 SHORT $LN2@GameShopUp

; 33   : 				{
; 34   : 					aIndex = n;

  000da	8b 45 f4	 mov	 eax, DWORD PTR _n$220132[ebp]
  000dd	89 45 f8	 mov	 DWORD PTR _aIndex$[ebp], eax

; 35   : 					break;

  000e0	eb 02		 jmp	 SHORT $LN5@GameShopUp
$LN2@GameShopUp:

; 36   : 				}
; 37   : 			}
; 38   : 		}
; 39   : 	}

  000e2	eb 88		 jmp	 SHORT $LN6@GameShopUp
$LN5@GameShopUp:

; 40   : 
; 41   : 	if(aIndex == -1)

  000e4	83 7d f8 ff	 cmp	 DWORD PTR _aIndex$[ebp], -1
  000e8	75 02		 jne	 SHORT $LN1@GameShopUp

; 42   : 	{
; 43   : 		return;

  000ea	eb 72		 jmp	 SHORT $LN8@GameShopUp
$LN1@GameShopUp:

; 44   : 	}
; 45   : 
; 46   : 	LPOBJ lpUser = &gObj[aIndex];

  000ec	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  000ef	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  000f5	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000fb	89 45 f0	 mov	 DWORD PTR _lpUser$[ebp], eax

; 47   : 	lpUser->GameShop.WCoinC = lpMsg->WCoinC;

  000fe	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  00101	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  00104	89 4d a8	 mov	 DWORD PTR tv150[ebp], ecx
  00107	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv150[ebp+4], 0
  0010e	df 6d a8	 fild	 QWORD PTR tv150[ebp]
  00111	8b 55 f0	 mov	 edx, DWORD PTR _lpUser$[ebp]
  00114	dd 9a 00 23 00
	00		 fstp	 QWORD PTR [edx+8960]

; 48   : 	lpUser->GameShop.WCoinP = lpMsg->WCoinP;

  0011a	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0011d	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00120	89 4d a8	 mov	 DWORD PTR tv156[ebp], ecx
  00123	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv156[ebp+4], 0
  0012a	df 6d a8	 fild	 QWORD PTR tv156[ebp]
  0012d	8b 55 f0	 mov	 edx, DWORD PTR _lpUser$[ebp]
  00130	dd 9a f8 22 00
	00		 fstp	 QWORD PTR [edx+8952]

; 49   : 	lpUser->GameShop.GoblinPoint = lpMsg->GoblinPoint;

  00136	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  00139	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  0013c	89 4d a8	 mov	 DWORD PTR tv162[ebp], ecx
  0013f	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv162[ebp+4], 0
  00146	df 6d a8	 fild	 QWORD PTR tv162[ebp]
  00149	8b 55 f0	 mov	 edx, DWORD PTR _lpUser$[ebp]
  0014c	dd 9a 08 23 00
	00		 fstp	 QWORD PTR [edx+8968]

; 50   : 
; 51   : 	ExUserDataSend(aIndex);

  00152	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00155	50		 push	 eax
  00156	e8 00 00 00 00	 call	 ?ExUserDataSend@@YAXH@Z	; ExUserDataSend
  0015b	83 c4 04	 add	 esp, 4
$LN8@GameShopUp:

; 52   : }

  0015e	5f		 pop	 edi
  0015f	5e		 pop	 esi
  00160	5b		 pop	 ebx
  00161	8b e5		 mov	 esp, ebp
  00163	5d		 pop	 ebp
  00164	c2 04 00	 ret	 4
?GameShopUpdate@CExWebManager@@QAEXPAUGAMESHOP_WEB_UPDATE@@@Z ENDP ; CExWebManager::GameShopUpdate
; Function compile flags: /Odtp /ZI
tv141 = -88						; size = 8
_lpUser$ = -16						; size = 4
_n$220146 = -12						; size = 4
_aIndex$ = -8						; size = 4
_this$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
?CreditsUpdate@CExWebManager@@QAEXPAUCREDIT_WEB_UPDATE@@@Z PROC ; CExWebManager::CreditsUpdate
; _this$ = ecx

; 55   : {

  00170	55		 push	 ebp
  00171	8b ec		 mov	 ebp, esp
  00173	83 ec 58	 sub	 esp, 88			; 00000058H
  00176	53		 push	 ebx
  00177	56		 push	 esi
  00178	57		 push	 edi
  00179	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 56   : 	int aIndex = -1;

  0017c	c7 45 f8 ff ff
	ff ff		 mov	 DWORD PTR _aIndex$[ebp], -1

; 57   : 
; 58   : 	for(int n = OBJ_STARTUSERINDEX; n < OBJMAX; n++)

  00183	c7 45 f4 b0 36
	00 00		 mov	 DWORD PTR _n$220146[ebp], 14000 ; 000036b0H
  0018a	eb 09		 jmp	 SHORT $LN7@CreditsUpd
$LN6@CreditsUpd:
  0018c	8b 45 f4	 mov	 eax, DWORD PTR _n$220146[ebp]
  0018f	83 c0 01	 add	 eax, 1
  00192	89 45 f4	 mov	 DWORD PTR _n$220146[ebp], eax
$LN7@CreditsUpd:
  00195	81 7d f4 98 3a
	00 00		 cmp	 DWORD PTR _n$220146[ebp], 15000 ; 00003a98H
  0019c	7d 66		 jge	 SHORT $LN5@CreditsUpd

; 59   : 	{
; 60   : 		if(gObj[n].Connected == PLAYER_PLAYING)

  0019e	8b 45 f4	 mov	 eax, DWORD PTR _n$220146[ebp]
  001a1	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  001a7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001ad	83 7c 01 04 03	 cmp	 DWORD PTR [ecx+eax+4], 3
  001b2	75 4e		 jne	 SHORT $LN2@CreditsUpd

; 61   : 		{
; 62   : 			if(gObj[n].AccountID[0] == lpMsg->AccountID[0])

  001b4	8b 45 f4	 mov	 eax, DWORD PTR _n$220146[ebp]
  001b7	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  001bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001c3	0f be 54 01 6c	 movsx	 edx, BYTE PTR [ecx+eax+108]
  001c8	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  001cb	0f be 48 04	 movsx	 ecx, BYTE PTR [eax+4]
  001cf	3b d1		 cmp	 edx, ecx
  001d1	75 2f		 jne	 SHORT $LN2@CreditsUpd

; 63   : 			{
; 64   : 				if(strcmp(&gObj[n].AccountID[0] , lpMsg->AccountID) == 0)

  001d3	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  001d6	83 c0 04	 add	 eax, 4
  001d9	50		 push	 eax
  001da	8b 4d f4	 mov	 ecx, DWORD PTR _n$220146[ebp]
  001dd	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  001e3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001e9	8d 44 0a 6c	 lea	 eax, DWORD PTR [edx+ecx+108]
  001ed	50		 push	 eax
  001ee	e8 00 00 00 00	 call	 _strcmp
  001f3	83 c4 08	 add	 esp, 8
  001f6	85 c0		 test	 eax, eax
  001f8	75 08		 jne	 SHORT $LN2@CreditsUpd

; 65   : 				{
; 66   : 					aIndex = n;

  001fa	8b 45 f4	 mov	 eax, DWORD PTR _n$220146[ebp]
  001fd	89 45 f8	 mov	 DWORD PTR _aIndex$[ebp], eax

; 67   : 					break;

  00200	eb 02		 jmp	 SHORT $LN5@CreditsUpd
$LN2@CreditsUpd:

; 68   : 				}
; 69   : 			}
; 70   : 		}
; 71   : 	}

  00202	eb 88		 jmp	 SHORT $LN6@CreditsUpd
$LN5@CreditsUpd:

; 72   : 
; 73   : 	if(aIndex == -1)

  00204	83 7d f8 ff	 cmp	 DWORD PTR _aIndex$[ebp], -1
  00208	75 02		 jne	 SHORT $LN1@CreditsUpd

; 74   : 	{
; 75   : 		return;

  0020a	eb 3a		 jmp	 SHORT $LN8@CreditsUpd
$LN1@CreditsUpd:

; 76   : 	}
; 77   : 
; 78   : 	LPOBJ lpUser = &gObj[aIndex];

  0020c	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0020f	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00215	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0021b	89 45 f0	 mov	 DWORD PTR _lpUser$[ebp], eax

; 79   : 	lpUser->ExCred = lpMsg->Credit;

  0021e	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  00221	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  00224	89 4d a8	 mov	 DWORD PTR tv141[ebp], ecx
  00227	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv141[ebp+4], 0
  0022e	df 6d a8	 fild	 QWORD PTR tv141[ebp]
  00231	8b 55 f0	 mov	 edx, DWORD PTR _lpUser$[ebp]
  00234	d9 9a a8 22 00
	00		 fstp	 DWORD PTR [edx+8872]

; 80   : 
; 81   : 	ExUserDataSend(aIndex);

  0023a	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0023d	50		 push	 eax
  0023e	e8 00 00 00 00	 call	 ?ExUserDataSend@@YAXH@Z	; ExUserDataSend
  00243	83 c4 04	 add	 esp, 4
$LN8@CreditsUpd:

; 82   : }

  00246	5f		 pop	 edi
  00247	5e		 pop	 esi
  00248	5b		 pop	 ebx
  00249	8b e5		 mov	 esp, ebp
  0024b	5d		 pop	 ebp
  0024c	c2 04 00	 ret	 4
?CreditsUpdate@CExWebManager@@QAEXPAUCREDIT_WEB_UPDATE@@@Z ENDP ; CExWebManager::CreditsUpdate
_TEXT	ENDS
END
