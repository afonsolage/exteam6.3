; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\ImperialBattleOfGalia.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_sttBLOODCASTLE_LEVEL DD 0fH
	DD	050H
	DD	0aH
	DD	03cH
	DD	051H
	DD	082H
	DD	03dH
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	0190H
	DD	0137H
	DD	0190H
	DD	0fH
	DD	0257H
	DD	0aH
	DD	0257H
_DATA	ENDS
CONST	SEGMENT
_g_DestlerGate DD 020dH
	DD	0eaH
	DD	01dH
	DD	01H
	DD	020cH
	DD	0e9H
	DD	037H
	DD	01H
	DD	020dH
	DD	0d8H
	DD	050H
	DD	03H
	DD	020dH
	DD	0c2H
	DD	019H
	DD	03H
	DD	020cH
	DD	0a6H
	DD	019H
	DD	03H
	DD	020dH
	DD	09aH
	DD	035H
	DD	01H
	DD	020dH
	DD	0b4H
	DD	04fH
	DD	01H
	ORG $+32
_g_DestlerMapAttr DD 0e8H
	DD	01cH
	DD	0ecH
	DD	021H
	DD	0e7H
	DD	037H
	DD	0eaH
	DD	03bH
	DD	0d4H
	DD	04fH
	DD	0d8H
	DD	050H
	DD	0beH
	DD	018H
	DD	0c2H
	DD	01aH
	DD	0a2H
	DD	018H
	DD	0a8H
	DD	01aH
	DD	09aH
	DD	035H
	DD	09cH
	DD	039H
	DD	0b3H
	DD	04fH
	DD	0b5H
	DD	055H
	ORG $+32
_g_DestlerTrap DD 0e8H
	DD	03dH
	DD	0e1H
	DD	042H
	DD	0dbH
	DD	044H
	DD	0dcH
	DD	04bH
	DD	0dcH
	DD	053H
	DD	0a0H
	DD	019H
	DD	09bH
	DD	01bH
	DD	09bH
	DD	020H
	DD	09bH
	DD	025H
	DD	09bH
	DD	02cH
	DD	09bH
	DD	032H
	ORG $+8
CONST	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?ResetData@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::ResetData
PUBLIC	??_7CImperialBattleOfGalia@@6B@			; CImperialBattleOfGalia::`vftable'
PUBLIC	??0CImperialBattleOfGalia@@QAE@XZ		; CImperialBattleOfGalia::CImperialBattleOfGalia
PUBLIC	??_R4CImperialBattleOfGalia@@6B@		; CImperialBattleOfGalia::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCImperialBattleOfGalia@@@8		; CImperialBattleOfGalia `RTTI Type Descriptor'
PUBLIC	??_R3CImperialBattleOfGalia@@8			; CImperialBattleOfGalia::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CImperialBattleOfGalia@@8			; CImperialBattleOfGalia::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CImperialBattleOfGalia@@8		; CImperialBattleOfGalia::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECImperialBattleOfGalia@@UAEPAXI@Z:PROC	; CImperialBattleOfGalia::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CImperialBattleOfGalia@@8
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgalia.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CImperialBattleOfGalia@@8 DD FLAT:??_R0?AVCImperialBattleOfGalia@@@8 ; CImperialBattleOfGalia::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CImperialBattleOfGalia@@8
rdata$r	ENDS
;	COMDAT ??_R2CImperialBattleOfGalia@@8
rdata$r	SEGMENT
??_R2CImperialBattleOfGalia@@8 DD FLAT:??_R1A@?0A@EA@CImperialBattleOfGalia@@8 ; CImperialBattleOfGalia::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CImperialBattleOfGalia@@8
rdata$r	SEGMENT
??_R3CImperialBattleOfGalia@@8 DD 00H			; CImperialBattleOfGalia::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CImperialBattleOfGalia@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCImperialBattleOfGalia@@@8
_DATA	SEGMENT
??_R0?AVCImperialBattleOfGalia@@@8 DD FLAT:??_7type_info@@6B@ ; CImperialBattleOfGalia `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCImperialBattleOfGalia@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CImperialBattleOfGalia@@6B@
rdata$r	SEGMENT
??_R4CImperialBattleOfGalia@@6B@ DD 00H			; CImperialBattleOfGalia::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCImperialBattleOfGalia@@@8
	DD	FLAT:??_R3CImperialBattleOfGalia@@8
rdata$r	ENDS
;	COMDAT ??_7CImperialBattleOfGalia@@6B@
CONST	SEGMENT
??_7CImperialBattleOfGalia@@6B@ DD FLAT:??_R4CImperialBattleOfGalia@@6B@ ; CImperialBattleOfGalia::`vftable'
	DD	FLAT:??_ECImperialBattleOfGalia@@UAEPAXI@Z
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CImperialBattleOfGalia@@QAE@XZ PROC			; CImperialBattleOfGalia::CImperialBattleOfGalia
; _this$ = ecx

; 14   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CImperialBattleOfGalia@@6B@

; 15   : 	this->ResetData();

  00015	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00018	e8 00 00 00 00	 call	 ?ResetData@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ResetData

; 16   : }

  0001d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??0CImperialBattleOfGalia@@QAE@XZ ENDP			; CImperialBattleOfGalia::CImperialBattleOfGalia
_TEXT	ENDS
PUBLIC	??1CImperialBattleOfGalia@@UAE@XZ		; CImperialBattleOfGalia::~CImperialBattleOfGalia
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCImperialBattleOfGalia@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCImperialBattleOfGalia@@UAEPAXI@Z PROC		; CImperialBattleOfGalia::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CImperialBattleOfGalia@@UAE@XZ ; CImperialBattleOfGalia::~CImperialBattleOfGalia
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0c		 je	 SHORT $LN1@scalar
  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	50		 push	 eax
  00020	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00025	83 c4 04	 add	 esp, 4
$LN1@scalar:
  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	5f		 pop	 edi
  0002c	5e		 pop	 esi
  0002d	5b		 pop	 ebx
  0002e	8b e5		 mov	 esp, ebp
  00030	5d		 pop	 ebp
  00031	c2 04 00	 ret	 4
??_GCImperialBattleOfGalia@@UAEPAXI@Z ENDP		; CImperialBattleOfGalia::`scalar deleting destructor'
; Function compile flags: /Odtp /ZI
_TEXT	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CImperialBattleOfGalia@@UAE@XZ PROC			; CImperialBattleOfGalia::~CImperialBattleOfGalia
; _this$ = ecx

; 19   : {

  00030	55		 push	 ebp
  00031	8b ec		 mov	 ebp, esp
  00033	83 ec 44	 sub	 esp, 68			; 00000044H
  00036	53		 push	 ebx
  00037	56		 push	 esi
  00038	57		 push	 edi
  00039	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CImperialBattleOfGalia@@6B@

; 20   : }

  00045	5f		 pop	 edi
  00046	5e		 pop	 esi
  00047	5b		 pop	 ebx
  00048	8b e5		 mov	 esp, ebp
  0004a	5d		 pop	 ebp
  0004b	c3		 ret	 0
??1CImperialBattleOfGalia@@UAE@XZ ENDP			; CImperialBattleOfGalia::~CImperialBattleOfGalia
_TEXT	ENDS
PUBLIC	?Reset@BATTLEOFGALIA_DATA@@QAEXXZ		; BATTLEOFGALIA_DATA::Reset
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
?ResetData@CImperialBattleOfGalia@@QAEXXZ PROC		; CImperialBattleOfGalia::ResetData
; _this$ = ecx

; 23   : {

  00050	55		 push	 ebp
  00051	8b ec		 mov	 ebp, esp
  00053	83 ec 44	 sub	 esp, 68			; 00000044H
  00056	53		 push	 ebx
  00057	56		 push	 esi
  00058	57		 push	 edi
  00059	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 24   : 	this->m_BattleData.Reset();

  0005c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0005f	83 c1 04	 add	 ecx, 4
  00062	e8 00 00 00 00	 call	 ?Reset@BATTLEOFGALIA_DATA@@QAEXXZ ; BATTLEOFGALIA_DATA::Reset

; 25   : }

  00067	5f		 pop	 edi
  00068	5e		 pop	 esi
  00069	5b		 pop	 ebx
  0006a	8b e5		 mov	 esp, ebp
  0006c	5d		 pop	 ebp
  0006d	c3		 ret	 0
?ResetData@CImperialBattleOfGalia@@QAEXXZ ENDP		; CImperialBattleOfGalia::ResetData
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgalia.h
_TEXT	ENDS
;	COMDAT ?Reset@BATTLEOFGALIA_DATA@@QAEXXZ
_TEXT	SEGMENT
_n$218884 = -12						; size = 4
_i$218880 = -8						; size = 4
_this$ = -4						; size = 4
?Reset@BATTLEOFGALIA_DATA@@QAEXXZ PROC			; BATTLEOFGALIA_DATA::Reset, COMDAT
; _this$ = ecx

; 16   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 17   : 		for(int i=0;i<3;++i)

  0000c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _i$218880[ebp], 0
  00013	eb 09		 jmp	 SHORT $LN6@Reset
$LN5@Reset:
  00015	8b 45 f8	 mov	 eax, DWORD PTR _i$218880[ebp]
  00018	83 c0 01	 add	 eax, 1
  0001b	89 45 f8	 mov	 DWORD PTR _i$218880[ebp], eax
$LN6@Reset:
  0001e	83 7d f8 03	 cmp	 DWORD PTR _i$218880[ebp], 3
  00022	7d 0f		 jge	 SHORT $LN4@Reset

; 18   : 		{
; 19   : 			this->AIGroups[i] = -1;

  00024	8b 45 f8	 mov	 eax, DWORD PTR _i$218880[ebp]
  00027	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002a	c7 04 81 ff ff
	ff ff		 mov	 DWORD PTR [ecx+eax*4], -1

; 20   : 		}

  00031	eb e2		 jmp	 SHORT $LN5@Reset
$LN4@Reset:

; 21   : 		for(int n=0;n<9;++n)

  00033	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _n$218884[ebp], 0
  0003a	eb 09		 jmp	 SHORT $LN3@Reset
$LN2@Reset:
  0003c	8b 45 f4	 mov	 eax, DWORD PTR _n$218884[ebp]
  0003f	83 c0 01	 add	 eax, 1
  00042	89 45 f4	 mov	 DWORD PTR _n$218884[ebp], eax
$LN3@Reset:
  00045	83 7d f4 09	 cmp	 DWORD PTR _n$218884[ebp], 9
  00049	7d 10		 jge	 SHORT $LN1@Reset

; 22   : 		{
; 23   : 			this->GateIndex[n] = -1;

  0004b	8b 45 f4	 mov	 eax, DWORD PTR _n$218884[ebp]
  0004e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00051	c7 44 81 10 ff
	ff ff ff	 mov	 DWORD PTR [ecx+eax*4+16], -1

; 24   : 		}

  00059	eb e1		 jmp	 SHORT $LN2@Reset
$LN1@Reset:

; 25   : 		this->CurrentLeaderIndex = -1;

  0005b	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0005e	c7 40 0c ff ff
	ff ff		 mov	 DWORD PTR [eax+12], -1

; 26   : 		this->MonsterCount = 0;

  00065	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00068	c7 40 40 00 00
	00 00		 mov	 DWORD PTR [eax+64], 0

; 27   : 		this->TrapIndex = -1;

  0006f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00072	c7 40 48 ff ff
	ff ff		 mov	 DWORD PTR [eax+72], -1

; 28   : 		this->NotifyCount = -1;

  00079	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0007c	c6 40 50 ff	 mov	 BYTE PTR [eax+80], 255	; 000000ffH

; 29   : 	}

  00080	5f		 pop	 edi
  00081	5e		 pop	 esi
  00082	5b		 pop	 ebx
  00083	8b e5		 mov	 esp, ebp
  00085	5d		 pop	 ebp
  00086	c3		 ret	 0
?Reset@BATTLEOFGALIA_DATA@@QAEXXZ ENDP			; BATTLEOFGALIA_DATA::Reset
_TEXT	ENDS
PUBLIC	?SetState_END@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SetState_END
PUBLIC	?SetState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SetState_PHAZE3
PUBLIC	?SetState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_STANDBY3
PUBLIC	?SetState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SetState_PHAZE2
PUBLIC	?SetState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_STANDBY2
PUBLIC	?SetState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SetState_PHAZE1
PUBLIC	?SetState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_STANDBY1
PUBLIC	?SetState_NONE@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SetState_NONE
PUBLIC	?SetState@CImperialBattleOfGalia@@QAEXH@Z	; CImperialBattleOfGalia::SetState
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgalia.cpp
_TEXT	SEGMENT
tv64 = -72						; size = 4
_this$ = -4						; size = 4
_iState$ = 8						; size = 4
?SetState@CImperialBattleOfGalia@@QAEXH@Z PROC		; CImperialBattleOfGalia::SetState
; _this$ = ecx

; 28   : {

  00070	55		 push	 ebp
  00071	8b ec		 mov	 ebp, esp
  00073	83 ec 48	 sub	 esp, 72			; 00000048H
  00076	53		 push	 ebx
  00077	56		 push	 esi
  00078	57		 push	 edi
  00079	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 29   : 	switch ( iState )

  0007c	8b 45 08	 mov	 eax, DWORD PTR _iState$[ebp]
  0007f	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  00082	83 7d b8 07	 cmp	 DWORD PTR tv64[ebp], 7
  00086	77 58		 ja	 SHORT $LN11@SetState
  00088	8b 4d b8	 mov	 ecx, DWORD PTR tv64[ebp]
  0008b	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN13@SetState[ecx*4]
$LN8@SetState:

; 30   : 	{
; 31   : 		case 0:
; 32   : 			this->SetState_NONE();

  00092	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00095	e8 00 00 00 00	 call	 ?SetState_NONE@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_NONE

; 33   : 			break;

  0009a	eb 44		 jmp	 SHORT $LN11@SetState
$LN7@SetState:

; 34   : 		case 1:
; 35   : 			this->SetState_STANDBY1();

  0009c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0009f	e8 00 00 00 00	 call	 ?SetState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_STANDBY1

; 36   : 			break;

  000a4	eb 3a		 jmp	 SHORT $LN11@SetState
$LN6@SetState:

; 37   : 		case 2:
; 38   : 			this->SetState_PHAZE1();

  000a6	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000a9	e8 00 00 00 00	 call	 ?SetState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_PHAZE1

; 39   : 			break;

  000ae	eb 30		 jmp	 SHORT $LN11@SetState
$LN5@SetState:

; 40   : 		case 3:
; 41   : 			this->SetState_STANDBY2();

  000b0	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000b3	e8 00 00 00 00	 call	 ?SetState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_STANDBY2

; 42   : 			break;

  000b8	eb 26		 jmp	 SHORT $LN11@SetState
$LN4@SetState:

; 43   : 		case 4:
; 44   : 			this->SetState_PHAZE2();

  000ba	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000bd	e8 00 00 00 00	 call	 ?SetState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_PHAZE2

; 45   : 			break;

  000c2	eb 1c		 jmp	 SHORT $LN11@SetState
$LN3@SetState:

; 46   : 		case 5: 
; 47   : 			this->SetState_STANDBY3();

  000c4	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c7	e8 00 00 00 00	 call	 ?SetState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_STANDBY3

; 48   : 			break;

  000cc	eb 12		 jmp	 SHORT $LN11@SetState
$LN2@SetState:

; 49   : 		case 6:
; 50   : 			this->SetState_PHAZE3();

  000ce	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000d1	e8 00 00 00 00	 call	 ?SetState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_PHAZE3

; 51   : 			break;

  000d6	eb 08		 jmp	 SHORT $LN11@SetState
$LN1@SetState:

; 52   : 		case 7:
; 53   : 			this->SetState_END();

  000d8	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000db	e8 00 00 00 00	 call	 ?SetState_END@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetState_END
$LN11@SetState:

; 54   : 			break;
; 55   : 	}
; 56   : }

  000e0	5f		 pop	 edi
  000e1	5e		 pop	 esi
  000e2	5b		 pop	 ebx
  000e3	8b e5		 mov	 esp, ebp
  000e5	5d		 pop	 ebp
  000e6	c2 04 00	 ret	 4
  000e9	8d 49 00	 npad	 3
$LN13@SetState:
  000ec	00 00 00 00	 DD	 $LN8@SetState
  000f0	00 00 00 00	 DD	 $LN7@SetState
  000f4	00 00 00 00	 DD	 $LN6@SetState
  000f8	00 00 00 00	 DD	 $LN5@SetState
  000fc	00 00 00 00	 DD	 $LN4@SetState
  00100	00 00 00 00	 DD	 $LN3@SetState
  00104	00 00 00 00	 DD	 $LN2@SetState
  00108	00 00 00 00	 DD	 $LN1@SetState
?SetState@CImperialBattleOfGalia@@QAEXH@Z ENDP		; CImperialBattleOfGalia::SetState
_TEXT	ENDS
PUBLIC	??_C@_0DG@DACCBGAJ@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
EXTRN	?DelGroupInstance@TMonsterAIGroup@@SAHH@Z:PROC	; TMonsterAIGroup::DelGroupInstance
EXTRN	?LogAddC@@3P6AXEPADZZA:DWORD			; LogAddC
;	COMDAT ??_C@_0DG@DACCBGAJ@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DG@DACCBGAJ@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> NONE', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_NONE@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_NONE
; _this$ = ecx

; 59   : {

  00110	55		 push	 ebp
  00111	8b ec		 mov	 ebp, esp
  00113	83 ec 44	 sub	 esp, 68			; 00000044H
  00116	53		 push	 ebx
  00117	56		 push	 esi
  00118	57		 push	 edi
  00119	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 60   : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> NONE", this->m_BattleData.CurrentState);

  0011c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0011f	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00122	51		 push	 ecx
  00123	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@DACCBGAJ@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  00128	6a 02		 push	 2
  0012a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00130	83 c4 0c	 add	 esp, 12			; 0000000cH

; 61   : 	this->ResetData();

  00133	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00136	e8 00 00 00 00	 call	 ?ResetData@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ResetData

; 62   : 	TMonsterAIGroup::DelGroupInstance(24);

  0013b	6a 18		 push	 24			; 00000018H
  0013d	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00142	83 c4 04	 add	 esp, 4

; 63   : 	TMonsterAIGroup::DelGroupInstance(25);

  00145	6a 19		 push	 25			; 00000019H
  00147	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  0014c	83 c4 04	 add	 esp, 4

; 64   : 	TMonsterAIGroup::DelGroupInstance(33);

  0014f	6a 21		 push	 33			; 00000021H
  00151	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00156	83 c4 04	 add	 esp, 4

; 65   : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_NONE;

  00159	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0015c	c7 40 40 00 00
	00 00		 mov	 DWORD PTR [eax+64], 0

; 66   : }

  00163	5f		 pop	 edi
  00164	5e		 pop	 esi
  00165	5b		 pop	 ebx
  00166	8b e5		 mov	 esp, ebp
  00168	5d		 pop	 ebp
  00169	c3		 ret	 0
?SetState_NONE@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_NONE
_TEXT	ENDS
PUBLIC	?SendEventState@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SendEventState
PUBLIC	??_C@_0EE@JIDKNPPC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
PUBLIC	??_C@_0DK@DNEHJCAH@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
EXTRN	?Init@TMonsterAIGroup@@SAXH@Z:PROC		; TMonsterAIGroup::Init
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
;	COMDAT ??_C@_0EE@JIDKNPPC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0EE@JIDKNPPC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] Create Gate Index: %d Class'
	DB	': %d', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@DNEHJCAH@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DK@DNEHJCAH@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> STANDBY1', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_i$221120 = -8						; size = 4
_this$ = -4						; size = 4
?SetState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_STANDBY1
; _this$ = ecx

; 70   : {

  00170	55		 push	 ebp
  00171	8b ec		 mov	 ebp, esp
  00173	83 ec 48	 sub	 esp, 72			; 00000048H
  00176	53		 push	 ebx
  00177	56		 push	 esi
  00178	57		 push	 edi
  00179	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 71   : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> STANDBY1", this->m_BattleData.CurrentState);

  0017c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0017f	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00182	51		 push	 ecx
  00183	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@DNEHJCAH@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  00188	6a 02		 push	 2
  0018a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00190	83 c4 0c	 add	 esp, 12			; 0000000cH

; 72   : 	for(int i=0;i<7;++i)

  00193	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _i$221120[ebp], 0
  0019a	eb 09		 jmp	 SHORT $LN4@SetState_S
$LN3@SetState_S:
  0019c	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  0019f	83 c0 01	 add	 eax, 1
  001a2	89 45 f8	 mov	 DWORD PTR _i$221120[ebp], eax
$LN4@SetState_S:
  001a5	83 7d f8 07	 cmp	 DWORD PTR _i$221120[ebp], 7
  001a9	0f 8d 51 02 00
	00		 jge	 $LN2@SetState_S

; 73   : 	{
; 74   : 		this->m_BattleData.GateIndex[i] = gObjAddMonster(69);

  001af	6a 45		 push	 69			; 00000045H
  001b1	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  001b6	83 c4 04	 add	 esp, 4
  001b9	98		 cwde
  001ba	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  001bd	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  001c0	89 44 8a 14	 mov	 DWORD PTR [edx+ecx*4+20], eax

; 75   : 		if(this->m_BattleData.GateIndex[i] >= 0)

  001c4	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  001c7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  001ca	83 7c 81 14 00	 cmp	 DWORD PTR [ecx+eax*4+20], 0
  001cf	0f 8c 26 02 00
	00		 jl	 $LN1@SetState_S

; 76   : 		{
; 77   : 			gObj[this->m_BattleData.GateIndex[i]].MapNumber = 69;

  001d5	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  001d8	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  001db	8b 54 81 14	 mov	 edx, DWORD PTR [ecx+eax*4+20]
  001df	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  001e5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001ea	c6 84 10 49 01
	00 00 45	 mov	 BYTE PTR [eax+edx+329], 69 ; 00000045H

; 78   : 			gObj[this->m_BattleData.GateIndex[i]].X = g_DestlerGate[i].X;

  001f2	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  001f5	c1 e0 04	 shl	 eax, 4
  001f8	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  001fb	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  001fe	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  00202	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00208	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0020e	66 8b 80 04 00
	00 00		 mov	 ax, WORD PTR _g_DestlerGate[eax+4]
  00215	66 89 84 0a 44
	01 00 00	 mov	 WORD PTR [edx+ecx+324], ax

; 79   : 			gObj[this->m_BattleData.GateIndex[i]].Y = g_DestlerGate[i].Y;

  0021d	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  00220	c1 e0 04	 shl	 eax, 4
  00223	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  00226	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00229	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  0022d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00233	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00239	66 8b 80 08 00
	00 00		 mov	 ax, WORD PTR _g_DestlerGate[eax+8]
  00240	66 89 84 0a 46
	01 00 00	 mov	 WORD PTR [edx+ecx+326], ax

; 80   : 			gObj[this->m_BattleData.GateIndex[i]].Dir = g_DestlerGate[i].Dir;

  00248	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  0024b	c1 e0 04	 shl	 eax, 4
  0024e	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  00251	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00254	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  00258	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0025e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00264	8a 80 0c 00 00
	00		 mov	 al, BYTE PTR _g_DestlerGate[eax+12]
  0026a	88 84 0a 48 01
	00 00		 mov	 BYTE PTR [edx+ecx+328], al

; 81   : 			gObj[this->m_BattleData.GateIndex[i]].TX = g_DestlerGate[i].X;

  00271	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  00274	c1 e0 04	 shl	 eax, 4
  00277	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  0027a	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  0027d	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  00281	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00287	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0028d	66 8b 80 04 00
	00 00		 mov	 ax, WORD PTR _g_DestlerGate[eax+4]
  00294	66 89 84 0a 7c
	01 00 00	 mov	 WORD PTR [edx+ecx+380], ax

; 82   : 			gObj[this->m_BattleData.GateIndex[i]].TY = g_DestlerGate[i].Y;

  0029c	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  0029f	c1 e0 04	 shl	 eax, 4
  002a2	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  002a5	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  002a8	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  002ac	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  002b2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002b8	66 8b 80 08 00
	00 00		 mov	 ax, WORD PTR _g_DestlerGate[eax+8]
  002bf	66 89 84 0a 7e
	01 00 00	 mov	 WORD PTR [edx+ecx+382], ax

; 83   : 			gObj[this->m_BattleData.GateIndex[i]].StartX = g_DestlerGate[i].X;

  002c7	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  002ca	c1 e0 04	 shl	 eax, 4
  002cd	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  002d0	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  002d3	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  002d7	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  002dd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002e3	8a 80 04 00 00
	00		 mov	 al, BYTE PTR _g_DestlerGate[eax+4]
  002e9	88 84 0a 76 01
	00 00		 mov	 BYTE PTR [edx+ecx+374], al

; 84   : 			gObj[this->m_BattleData.GateIndex[i]].StartY = g_DestlerGate[i].Y;

  002f0	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  002f3	c1 e0 04	 shl	 eax, 4
  002f6	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  002f9	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  002fc	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  00300	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00306	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0030c	8a 80 08 00 00
	00		 mov	 al, BYTE PTR _g_DestlerGate[eax+8]
  00312	88 84 0a 77 01
	00 00		 mov	 BYTE PTR [edx+ecx+375], al

; 85   : 			gObj[this->m_BattleData.GateIndex[i]].m_OldX = g_DestlerGate[i].X;

  00319	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  0031c	c1 e0 04	 shl	 eax, 4
  0031f	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  00322	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00325	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  00329	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0032f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00335	66 8b 80 04 00
	00 00		 mov	 ax, WORD PTR _g_DestlerGate[eax+4]
  0033c	66 89 84 0a 78
	01 00 00	 mov	 WORD PTR [edx+ecx+376], ax

; 86   : 			gObj[this->m_BattleData.GateIndex[i]].m_OldY = g_DestlerGate[i].Y;

  00344	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  00347	c1 e0 04	 shl	 eax, 4
  0034a	8b 4d f8	 mov	 ecx, DWORD PTR _i$221120[ebp]
  0034d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00350	8b 4c 8a 14	 mov	 ecx, DWORD PTR [edx+ecx*4+20]
  00354	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0035a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00360	66 8b 80 08 00
	00 00		 mov	 ax, WORD PTR _g_DestlerGate[eax+8]
  00367	66 89 84 0a 7a
	01 00 00	 mov	 WORD PTR [edx+ecx+378], ax

; 87   : 			gObjSetMonster(this->m_BattleData.GateIndex[i], g_DestlerGate[i].Class);

  0036f	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  00372	c1 e0 04	 shl	 eax, 4
  00375	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR _g_DestlerGate[eax]
  0037b	51		 push	 ecx
  0037c	8b 55 f8	 mov	 edx, DWORD PTR _i$221120[ebp]
  0037f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00382	8b 4c 90 14	 mov	 ecx, DWORD PTR [eax+edx*4+20]
  00386	51		 push	 ecx
  00387	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  0038c	83 c4 08	 add	 esp, 8

; 88   : 			gObj[this->m_BattleData.GateIndex[i]].m_ImmuneToHarmCount = 3600; // IMMUNITY FOR GATES

  0038f	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  00392	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00395	8b 54 81 14	 mov	 edx, DWORD PTR [ecx+eax*4+20]
  00399	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  0039f	b8 10 0e 00 00	 mov	 eax, 3600		; 00000e10H
  003a4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003aa	66 89 84 11 84
	22 00 00	 mov	 WORD PTR [ecx+edx+8836], ax

; 89   : 			gObj[this->m_BattleData.GateIndex[i]].m_ImmuneToMagicCount = 3600; // IMMUNITY FOR GATES

  003b2	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  003b5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  003b8	8b 54 81 14	 mov	 edx, DWORD PTR [ecx+eax*4+20]
  003bc	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  003c2	b8 10 0e 00 00	 mov	 eax, 3600		; 00000e10H
  003c7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003cd	66 89 84 11 82
	22 00 00	 mov	 WORD PTR [ecx+edx+8834], ax

; 90   : 
; 91   : 			LogAddTD("[ IMPERIAL FORT ] [ BattleOfGalia ] Create Gate Index: %d Class: %d",
; 92   : 				this->m_BattleData.GateIndex[i], g_DestlerGate[i].Class);

  003d5	8b 45 f8	 mov	 eax, DWORD PTR _i$221120[ebp]
  003d8	c1 e0 04	 shl	 eax, 4
  003db	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR _g_DestlerGate[eax]
  003e1	51		 push	 ecx
  003e2	8b 55 f8	 mov	 edx, DWORD PTR _i$221120[ebp]
  003e5	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  003e8	8b 4c 90 14	 mov	 ecx, DWORD PTR [eax+edx*4+20]
  003ec	51		 push	 ecx
  003ed	68 00 00 00 00	 push	 OFFSET ??_C@_0EE@JIDKNPPC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  003f2	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003f8	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@SetState_S:

; 93   : 		}
; 94   : 	}

  003fb	e9 9c fd ff ff	 jmp	 $LN3@SetState_S
$LN2@SetState_S:

; 95   : 	this->m_BattleData.Time = 60000;

  00400	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00403	c7 40 38 60 ea
	00 00		 mov	 DWORD PTR [eax+56], 60000 ; 0000ea60H

; 96   : 	this->m_BattleData.TickCount = GetTickCount();

  0040a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00410	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00413	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 97   : 	TMonsterAIGroup::Init(24);

  00416	6a 18		 push	 24			; 00000018H
  00418	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  0041d	83 c4 04	 add	 esp, 4

; 98   : 	this->m_BattleData.MonsterCount = 0;

  00420	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00423	c7 40 44 00 00
	00 00		 mov	 DWORD PTR [eax+68], 0

; 99   : 	this->m_BattleData.CurrentAIGroup = 24;

  0042a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0042d	c7 40 48 18 00
	00 00		 mov	 DWORD PTR [eax+72], 24	; 00000018H

; 100  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_STANDBY1;

  00434	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00437	c7 40 40 01 00
	00 00		 mov	 DWORD PTR [eax+64], 1

; 101  : 	this->SendEventState();

  0043e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00441	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventState

; 102  : }

  00446	5f		 pop	 edi
  00447	5e		 pop	 esi
  00448	5b		 pop	 ebx
  00449	8b e5		 mov	 esp, ebp
  0044b	5d		 pop	 ebp
  0044c	c3		 ret	 0
?SetState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_STANDBY1
_TEXT	ENDS
PUBLIC	??_C@_0DK@BGGKMBME@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
;	COMDAT ??_C@_0DK@BGGKMBME@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DK@BGGKMBME@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> STANDBY2', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_STANDBY2
; _this$ = ecx

; 105  : {

  00450	55		 push	 ebp
  00451	8b ec		 mov	 ebp, esp
  00453	83 ec 44	 sub	 esp, 68			; 00000044H
  00456	53		 push	 ebx
  00457	56		 push	 esi
  00458	57		 push	 edi
  00459	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 106  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> STANDBY2", this->m_BattleData.CurrentState);

  0045c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0045f	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00462	51		 push	 ecx
  00463	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@BGGKMBME@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  00468	6a 02		 push	 2
  0046a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00470	83 c4 0c	 add	 esp, 12			; 0000000cH

; 107  : 	this->m_BattleData.Time = 60000;

  00473	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00476	c7 40 38 60 ea
	00 00		 mov	 DWORD PTR [eax+56], 60000 ; 0000ea60H

; 108  : 	this->m_BattleData.TickCount = GetTickCount();

  0047d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00483	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00486	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 109  : 	TMonsterAIGroup::DelGroupInstance(24);

  00489	6a 18		 push	 24			; 00000018H
  0048b	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00490	83 c4 04	 add	 esp, 4

; 110  : 	TMonsterAIGroup::Init(25);

  00493	6a 19		 push	 25			; 00000019H
  00495	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  0049a	83 c4 04	 add	 esp, 4

; 111  : 	this->m_BattleData.MonsterCount = 0;

  0049d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004a0	c7 40 44 00 00
	00 00		 mov	 DWORD PTR [eax+68], 0

; 112  : 	this->m_BattleData.CurrentAIGroup = 25;

  004a7	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004aa	c7 40 48 19 00
	00 00		 mov	 DWORD PTR [eax+72], 25	; 00000019H

; 113  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_STANDBY2;

  004b1	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004b4	c7 40 40 03 00
	00 00		 mov	 DWORD PTR [eax+64], 3

; 114  : 	this->SendEventState();

  004bb	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  004be	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventState

; 115  : }

  004c3	5f		 pop	 edi
  004c4	5e		 pop	 esi
  004c5	5b		 pop	 ebx
  004c6	8b e5		 mov	 esp, ebp
  004c8	5d		 pop	 ebp
  004c9	c3		 ret	 0
?SetState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_STANDBY2
_TEXT	ENDS
PUBLIC	??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@ ; `string'
PUBLIC	??_C@_0DK@PHBPAIF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
EXTRN	?FindGroupLeader@TMonsterAIGroup@@SAHH@Z:PROC	; TMonsterAIGroup::FindGroupLeader
;	COMDAT ??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@
CONST	SEGMENT
??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@ DB '['
	DB	' IMPERIAL FORT ] Create BOSS %s Index: %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@PHBPAIF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DK@PHBPAIF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ I'
	DB	'MPERIAL FORT ] [ BattleOfGalia ] State(%d) -> STANDBY3', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_STANDBY3
; _this$ = ecx

; 118  : {

  004d0	55		 push	 ebp
  004d1	8b ec		 mov	 ebp, esp
  004d3	83 ec 44	 sub	 esp, 68			; 00000044H
  004d6	53		 push	 ebx
  004d7	56		 push	 esi
  004d8	57		 push	 edi
  004d9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 119  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> STANDBY3", this->m_BattleData.CurrentState);

  004dc	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004df	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  004e2	51		 push	 ecx
  004e3	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@PHBPAIF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  004e8	6a 02		 push	 2
  004ea	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  004f0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 120  : 	this->m_BattleData.Time = 60000;

  004f3	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004f6	c7 40 38 60 ea
	00 00		 mov	 DWORD PTR [eax+56], 60000 ; 0000ea60H

; 121  : 	this->m_BattleData.TickCount = GetTickCount();

  004fd	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00503	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00506	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 122  : 	TMonsterAIGroup::DelGroupInstance(25);

  00509	6a 19		 push	 25			; 00000019H
  0050b	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00510	83 c4 04	 add	 esp, 4

; 123  : 	TMonsterAIGroup::Init(33);

  00513	6a 21		 push	 33			; 00000021H
  00515	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  0051a	83 c4 04	 add	 esp, 4

; 124  : 	this->m_BattleData.MonsterCount = 0;

  0051d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00520	c7 40 44 00 00
	00 00		 mov	 DWORD PTR [eax+68], 0

; 125  : 	this->m_BattleData.CurrentLeaderIndex = TMonsterAIGroup::FindGroupLeader(33);

  00527	6a 21		 push	 33			; 00000021H
  00529	e8 00 00 00 00	 call	 ?FindGroupLeader@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::FindGroupLeader
  0052e	83 c4 04	 add	 esp, 4
  00531	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00534	89 41 10	 mov	 DWORD PTR [ecx+16], eax

; 126  : 	LogAddTD("[ IMPERIAL FORT ] Create BOSS %s Index: %d", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.CurrentLeaderIndex);

  00537	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0053a	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  0053d	51		 push	 ecx
  0053e	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00541	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  00544	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0054a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00550	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  00554	52		 push	 edx
  00555	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@
  0055a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00560	83 c4 0c	 add	 esp, 12			; 0000000cH

; 127  : 	this->m_BattleData.CurrentAIGroup = 33;

  00563	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00566	c7 40 48 21 00
	00 00		 mov	 DWORD PTR [eax+72], 33	; 00000021H

; 128  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_STANDBY3;

  0056d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00570	c7 40 40 05 00
	00 00		 mov	 DWORD PTR [eax+64], 5

; 129  : 	this->SendEventState();

  00577	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0057a	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventState

; 130  : }

  0057f	5f		 pop	 edi
  00580	5e		 pop	 esi
  00581	5b		 pop	 ebx
  00582	8b e5		 mov	 esp, ebp
  00584	5d		 pop	 ebp
  00585	c3		 ret	 0
?SetState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_STANDBY3
_TEXT	ENDS
PUBLIC	?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers
PUBLIC	??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@	; `string'
PUBLIC	??_C@_0DI@DFNEHBJA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z:PROC	; TNotice::MakeNoticeMsg
EXTRN	?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA:BYTE ; TMonsterAIGroup::s_iMonsterAIGroupMemberCount
EXTRN	?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z:PROC	; TMonsterAIGroup::ChangeAIOrder
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
CONST	SEGMENT
??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@ DB 'Quest Started!', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@DFNEHBJA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DI@DFNEHBJA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> PHAZE1', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_PHAZE1
; _this$ = ecx

; 133  : {

  00590	55		 push	 ebp
  00591	8b ec		 mov	 ebp, esp
  00593	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00599	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0059e	33 c5		 xor	 eax, ebp
  005a0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  005a3	53		 push	 ebx
  005a4	56		 push	 esi
  005a5	57		 push	 edi
  005a6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 134  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> PHAZE1", this->m_BattleData.CurrentState);

  005a9	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  005ac	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  005af	51		 push	 ecx
  005b0	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@DFNEHBJA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  005b5	6a 02		 push	 2
  005b7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  005bd	83 c4 0c	 add	 esp, 12			; 0000000cH

; 135  : 	gObj[this->m_BattleData.GateIndex[0]].m_ImmuneToHarmCount = 0;

  005c0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  005c3	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  005c6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  005cc	33 d2		 xor	 edx, edx
  005ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005d3	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 136  : 	gObj[this->m_BattleData.GateIndex[0]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  005db	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  005de	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  005e1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  005e7	33 d2		 xor	 edx, edx
  005e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005ee	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 137  : 	this->m_BattleData.Time = 600000;

  005f6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  005f9	c7 40 38 c0 27
	09 00		 mov	 DWORD PTR [eax+56], 600000 ; 000927c0H

; 138  : 	this->m_BattleData.TickCount = GetTickCount();

  00600	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00606	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00609	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 139  : 	TMonsterAIGroup::ChangeAIOrder(24, 1);

  0060c	6a 01		 push	 1
  0060e	6a 18		 push	 24			; 00000018H
  00610	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  00615	83 c4 08	 add	 esp, 8

; 140  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[24];

  00618	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0061b	8b 0d 60 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+96
  00621	89 48 44	 mov	 DWORD PTR [eax+68], ecx

; 141  : 	this->m_BattleData.PhazeStep = 0;

  00624	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00627	c7 40 50 00 00
	00 00		 mov	 DWORD PTR [eax+80], 0

; 142  : 	this->m_BattleData.NotifyCount = -1;

  0062e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00631	c6 40 54 ff	 mov	 BYTE PTR [eax+84], 255	; 000000ffH

; 143  : 	PMSG_NOTICE pNotice;
; 144  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00635	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0063a	6a 00		 push	 0
  0063c	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00642	50		 push	 eax
  00643	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00648	83 c4 0c	 add	 esp, 12			; 0000000cH

; 145  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0064b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00652	50		 push	 eax
  00653	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00659	51		 push	 ecx
  0065a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0065d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers

; 146  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_PHAZE1;

  00662	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00665	c7 40 40 02 00
	00 00		 mov	 DWORD PTR [eax+64], 2

; 147  : }

  0066c	5f		 pop	 edi
  0066d	5e		 pop	 esi
  0066e	5b		 pop	 ebx
  0066f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00672	33 cd		 xor	 ecx, ebp
  00674	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00679	8b e5		 mov	 esp, ebp
  0067b	5d		 pop	 ebp
  0067c	c3		 ret	 0
?SetState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_PHAZE1
_TEXT	ENDS
PUBLIC	??_C@_0DI@BOPJCCFD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0DI@BOPJCCFD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DI@BOPJCCFD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> PHAZE2', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_PHAZE2
; _this$ = ecx

; 150  : {

  00680	55		 push	 ebp
  00681	8b ec		 mov	 ebp, esp
  00683	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00689	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0068e	33 c5		 xor	 eax, ebp
  00690	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00693	53		 push	 ebx
  00694	56		 push	 esi
  00695	57		 push	 edi
  00696	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 151  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> PHAZE2", this->m_BattleData.CurrentState);

  00699	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0069c	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  0069f	51		 push	 ecx
  006a0	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@BOPJCCFD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  006a5	6a 02		 push	 2
  006a7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  006ad	83 c4 0c	 add	 esp, 12			; 0000000cH

; 152  : 	gObj[this->m_BattleData.GateIndex[3]].m_ImmuneToHarmCount = 0;

  006b0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  006b3	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  006b6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  006bc	33 d2		 xor	 edx, edx
  006be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006c3	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 153  : 	gObj[this->m_BattleData.GateIndex[3]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  006cb	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  006ce	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  006d1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  006d7	33 d2		 xor	 edx, edx
  006d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006de	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 154  : 	this->m_BattleData.Time = 600000;

  006e6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  006e9	c7 40 38 c0 27
	09 00		 mov	 DWORD PTR [eax+56], 600000 ; 000927c0H

; 155  : 	this->m_BattleData.TickCount = GetTickCount();

  006f0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  006f6	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  006f9	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 156  : 	TMonsterAIGroup::ChangeAIOrder(25, 1);

  006fc	6a 01		 push	 1
  006fe	6a 19		 push	 25			; 00000019H
  00700	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  00705	83 c4 08	 add	 esp, 8

; 157  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[25];

  00708	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0070b	8b 0d 64 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+100
  00711	89 48 44	 mov	 DWORD PTR [eax+68], ecx

; 158  : 	this->m_BattleData.PhazeStep = 0;

  00714	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00717	c7 40 50 00 00
	00 00		 mov	 DWORD PTR [eax+80], 0

; 159  : 	this->m_BattleData.NotifyCount = -1;

  0071e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00721	c6 40 54 ff	 mov	 BYTE PTR [eax+84], 255	; 000000ffH

; 160  : 	PMSG_NOTICE pNotice;
; 161  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00725	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0072a	6a 00		 push	 0
  0072c	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00732	50		 push	 eax
  00733	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00738	83 c4 0c	 add	 esp, 12			; 0000000cH

; 162  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0073b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00742	50		 push	 eax
  00743	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00749	51		 push	 ecx
  0074a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0074d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers

; 163  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_PHAZE2;

  00752	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00755	c7 40 40 04 00
	00 00		 mov	 DWORD PTR [eax+64], 4

; 164  : }

  0075c	5f		 pop	 edi
  0075d	5e		 pop	 esi
  0075e	5b		 pop	 ebx
  0075f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00762	33 cd		 xor	 ecx, ebp
  00764	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00769	8b e5		 mov	 esp, ebp
  0076b	5d		 pop	 ebp
  0076c	c3		 ret	 0
?SetState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_PHAZE2
_TEXT	ENDS
PUBLIC	??_C@_0DI@HOCBDBC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0DI@HOCBDBC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DI@HOCBDBC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ I'
	DB	'MPERIAL FORT ] [ BattleOfGalia ] State(%d) -> PHAZE3', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_PHAZE3
; _this$ = ecx

; 167  : {

  00770	55		 push	 ebp
  00771	8b ec		 mov	 ebp, esp
  00773	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00779	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0077e	33 c5		 xor	 eax, ebp
  00780	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00783	53		 push	 ebx
  00784	56		 push	 esi
  00785	57		 push	 edi
  00786	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 168  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> PHAZE3", this->m_BattleData.CurrentState);

  00789	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0078c	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  0078f	51		 push	 ecx
  00790	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@HOCBDBC@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  00795	6a 02		 push	 2
  00797	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  0079d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 169  : 	gObj[this->m_BattleData.GateIndex[6]].m_ImmuneToHarmCount = 0;

  007a0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007a3	8b 48 2c	 mov	 ecx, DWORD PTR [eax+44]
  007a6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  007ac	33 d2		 xor	 edx, edx
  007ae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  007b3	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 170  : 	gObj[this->m_BattleData.GateIndex[6]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  007bb	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007be	8b 48 2c	 mov	 ecx, DWORD PTR [eax+44]
  007c1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  007c7	33 d2		 xor	 edx, edx
  007c9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  007ce	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 171  : 	this->m_BattleData.Time = 600000;

  007d6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007d9	c7 40 38 c0 27
	09 00		 mov	 DWORD PTR [eax+56], 600000 ; 000927c0H

; 172  : 	this->m_BattleData.TickCount = GetTickCount();

  007e0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  007e6	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  007e9	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 173  : 	TMonsterAIGroup::ChangeAIOrder(33, 1);

  007ec	6a 01		 push	 1
  007ee	6a 21		 push	 33			; 00000021H
  007f0	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  007f5	83 c4 08	 add	 esp, 8

; 174  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[33];

  007f8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007fb	8b 0d 84 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+132
  00801	89 48 44	 mov	 DWORD PTR [eax+68], ecx

; 175  : 	this->m_BattleData.PhazeStep = 0;

  00804	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00807	c7 40 50 00 00
	00 00		 mov	 DWORD PTR [eax+80], 0

; 176  : 	this->m_BattleData.NotifyCount = -1;

  0080e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00811	c6 40 54 ff	 mov	 BYTE PTR [eax+84], 255	; 000000ffH

; 177  : 	PMSG_NOTICE pNotice;
; 178  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00815	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0081a	6a 00		 push	 0
  0081c	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00822	50		 push	 eax
  00823	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00828	83 c4 0c	 add	 esp, 12			; 0000000cH

; 179  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0082b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00832	50		 push	 eax
  00833	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00839	51		 push	 ecx
  0083a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0083d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers

; 180  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_PHAZE3;

  00842	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00845	c7 40 40 06 00
	00 00		 mov	 DWORD PTR [eax+64], 6

; 181  : }

  0084c	5f		 pop	 edi
  0084d	5e		 pop	 esi
  0084e	5b		 pop	 ebx
  0084f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00852	33 cd		 xor	 ecx, ebp
  00854	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00859	8b e5		 mov	 esp, ebp
  0085b	5d		 pop	 ebp
  0085c	c3		 ret	 0
?SetState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_PHAZE3
_TEXT	ENDS
PUBLIC	??_C@_0DF@LNHDFAEM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ ; `string'
;	COMDAT ??_C@_0DF@LNHDFAEM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
CONST	SEGMENT
??_C@_0DF@LNHDFAEM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> END', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_END@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetState_END
; _this$ = ecx

; 184  : {

  00860	55		 push	 ebp
  00861	8b ec		 mov	 ebp, esp
  00863	83 ec 44	 sub	 esp, 68			; 00000044H
  00866	53		 push	 ebx
  00867	56		 push	 esi
  00868	57		 push	 edi
  00869	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 185  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGalia ] State(%d) -> END", this->m_BattleData.CurrentState);

  0086c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0086f	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00872	51		 push	 ecx
  00873	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@LNHDFAEM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGali@
  00878	6a 02		 push	 2
  0087a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00880	83 c4 0c	 add	 esp, 12			; 0000000cH

; 186  : 	this->m_BattleData.CurrentState = BATTLEOFGALIA_STATE_END;

  00883	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00886	c7 40 40 07 00
	00 00		 mov	 DWORD PTR [eax+64], 7

; 187  : 	return;
; 188  : }

  0088d	5f		 pop	 edi
  0088e	5e		 pop	 esi
  0088f	5b		 pop	 ebx
  00890	8b e5		 mov	 esp, ebp
  00892	5d		 pop	 ebp
  00893	c3		 ret	 0
?SetState_END@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetState_END
_TEXT	ENDS
PUBLIC	?ProcState_END@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::ProcState_END
PUBLIC	?ProcState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_PHAZE3
PUBLIC	?ProcState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_STANDBY3
PUBLIC	?ProcState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_PHAZE2
PUBLIC	?ProcState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_STANDBY2
PUBLIC	?ProcState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_PHAZE1
PUBLIC	?ProcState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_STANDBY1
PUBLIC	?Run@CImperialBattleOfGalia@@QAEXXZ		; CImperialBattleOfGalia::Run
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv66 = -72						; size = 4
_this$ = -4						; size = 4
?Run@CImperialBattleOfGalia@@QAEXXZ PROC		; CImperialBattleOfGalia::Run
; _this$ = ecx

; 193  : {

  008a0	55		 push	 ebp
  008a1	8b ec		 mov	 ebp, esp
  008a3	83 ec 48	 sub	 esp, 72			; 00000048H
  008a6	53		 push	 ebx
  008a7	56		 push	 esi
  008a8	57		 push	 edi
  008a9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 194  : 	switch ( this->m_BattleData.CurrentState )

  008ac	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  008af	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  008b2	89 4d b8	 mov	 DWORD PTR tv66[ebp], ecx
  008b5	83 7d b8 07	 cmp	 DWORD PTR tv66[ebp], 7
  008b9	77 50		 ja	 SHORT $LN11@Run
  008bb	8b 55 b8	 mov	 edx, DWORD PTR tv66[ebp]
  008be	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN13@Run[edx*4]
$LN8@Run:

; 195  : 	{
; 196  : 		case 0:
; 197  : 			return;

  008c5	eb 44		 jmp	 SHORT $LN11@Run
$LN7@Run:

; 198  : 		case 1:
; 199  : 			this->ProcState_STANDBY1();

  008c7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008ca	e8 00 00 00 00	 call	 ?ProcState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_STANDBY1

; 200  : 			break;

  008cf	eb 3a		 jmp	 SHORT $LN11@Run
$LN6@Run:

; 201  : 		case 2:
; 202  : 			this->ProcState_PHAZE1();

  008d1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008d4	e8 00 00 00 00	 call	 ?ProcState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_PHAZE1

; 203  : 			break;

  008d9	eb 30		 jmp	 SHORT $LN11@Run
$LN5@Run:

; 204  : 		case 3:
; 205  : 			this->ProcState_STANDBY2();

  008db	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008de	e8 00 00 00 00	 call	 ?ProcState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_STANDBY2

; 206  : 			break;

  008e3	eb 26		 jmp	 SHORT $LN11@Run
$LN4@Run:

; 207  : 		case 4:
; 208  : 			this->ProcState_PHAZE2();

  008e5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008e8	e8 00 00 00 00	 call	 ?ProcState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_PHAZE2

; 209  : 			break;

  008ed	eb 1c		 jmp	 SHORT $LN11@Run
$LN3@Run:

; 210  : 		case 5:
; 211  : 			this->ProcState_STANDBY3();

  008ef	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008f2	e8 00 00 00 00	 call	 ?ProcState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_STANDBY3

; 212  : 			break;

  008f7	eb 12		 jmp	 SHORT $LN11@Run
$LN2@Run:

; 213  : 		case 6:
; 214  : 			this->ProcState_PHAZE3();

  008f9	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  008fc	e8 00 00 00 00	 call	 ?ProcState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_PHAZE3

; 215  : 			break;

  00901	eb 08		 jmp	 SHORT $LN11@Run
$LN1@Run:

; 216  : 		case 7:
; 217  : 			this->ProcState_END();

  00903	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00906	e8 00 00 00 00	 call	 ?ProcState_END@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::ProcState_END
$LN11@Run:

; 218  : 			break;
; 219  : 	}
; 220  : }

  0090b	5f		 pop	 edi
  0090c	5e		 pop	 esi
  0090d	5b		 pop	 ebx
  0090e	8b e5		 mov	 esp, ebp
  00910	5d		 pop	 ebp
  00911	c3		 ret	 0
  00912	8b ff		 npad	 2
$LN13@Run:
  00914	00 00 00 00	 DD	 $LN8@Run
  00918	00 00 00 00	 DD	 $LN7@Run
  0091c	00 00 00 00	 DD	 $LN6@Run
  00920	00 00 00 00	 DD	 $LN5@Run
  00924	00 00 00 00	 DD	 $LN4@Run
  00928	00 00 00 00	 DD	 $LN3@Run
  0092c	00 00 00 00	 DD	 $LN2@Run
  00930	00 00 00 00	 DD	 $LN1@Run
?Run@CImperialBattleOfGalia@@QAEXXZ ENDP		; CImperialBattleOfGalia::Run
_TEXT	ENDS
PUBLIC	?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_STANDBY1
; _this$ = ecx

; 223  : {

  00940	55		 push	 ebp
  00941	8b ec		 mov	 ebp, esp
  00943	83 ec 48	 sub	 esp, 72			; 00000048H
  00946	53		 push	 ebx
  00947	56		 push	 esi
  00948	57		 push	 edi
  00949	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 224  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  0094c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00952	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00955	2b 41 3c	 sub	 eax, DWORD PTR [ecx+60]
  00958	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 225  : 	if(Tick >= 1000)

  0095b	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00962	7c 36		 jl	 SHORT $LN3@ProcState_

; 226  : 	{
; 227  : 		this->m_BattleData.Time -= Tick;

  00964	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00967	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0096a	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  0096d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00970	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 228  : 		this->m_BattleData.TickCount = GetTickCount();

  00973	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00979	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0097c	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 229  : 
; 230  : 		this->SendEventInterface();

  0097f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00982	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface

; 231  : 
; 232  : 		if(this->m_BattleData.Time <= 0)

  00987	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0098a	83 78 38 00	 cmp	 DWORD PTR [eax+56], 0
  0098e	7f 0a		 jg	 SHORT $LN3@ProcState_

; 233  : 		{
; 234  : 			this->SetState(BATTLEOFGALIA_STATE_PHAZE1);

  00990	6a 02		 push	 2
  00992	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00995	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState
$LN3@ProcState_:

; 235  : 		}
; 236  : 	}
; 237  : }

  0099a	5f		 pop	 edi
  0099b	5e		 pop	 esi
  0099c	5b		 pop	 ebx
  0099d	8b e5		 mov	 esp, ebp
  0099f	5d		 pop	 ebp
  009a0	c3		 ret	 0
?ProcState_STANDBY1@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_STANDBY1
_TEXT	ENDS
PUBLIC	?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z	; CImperialBattleOfGalia::SetMapAttr
PUBLIC	??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@ ; `string'
PUBLIC	?GetIndex@CImperialBattleUser@@QAEHXZ		; CImperialBattleUser::GetIndex
PUBLIC	?MonsterProc@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::MonsterProc
PUBLIC	__$ArrayPad$
EXTRN	?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ:PROC	; TNotice::MakeNoticeMsgEx
EXTRN	?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z:PROC ; gObjAttack
EXTRN	?GetUserCount@CImperialBattleUserMng@@QAEHXZ:PROC ; CImperialBattleUserMng::GetUserCount
EXTRN	?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A:BYTE ; g_ImperialBattleUserMng
;	COMDAT ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
CONST	SEGMENT
??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@ DB 'Portal '
	DB	'will be closed after %d minutes', 00H	; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$221194 = -292					; size = 272
_n$221188 = -20						; size = 4
_i$221184 = -16						; size = 4
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_PHAZE1
; _this$ = ecx

; 240  : {

  009b0	55		 push	 ebp
  009b1	8b ec		 mov	 ebp, esp
  009b3	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  009b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  009be	33 c5		 xor	 eax, ebp
  009c0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  009c3	53		 push	 ebx
  009c4	56		 push	 esi
  009c5	57		 push	 edi
  009c6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 241  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  009c9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  009cf	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  009d2	2b 41 3c	 sub	 eax, DWORD PTR [ecx+60]
  009d5	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 242  : 	if(Tick >= 1000)

  009d8	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  009df	0f 8c 56 03 00
	00		 jl	 $LN14@ProcState_@2

; 243  : 	{
; 244  : 		this->m_BattleData.Time -= Tick;

  009e5	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  009e8	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  009eb	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  009ee	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  009f1	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 245  : 		this->m_BattleData.TickCount = GetTickCount();

  009f4	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  009fa	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  009fd	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 246  : 
; 247  : 		this->SendEventInterface();

  00a00	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00a03	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface

; 248  : 		this->MonsterProc();

  00a08	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00a0b	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::MonsterProc

; 249  : 
; 250  : 		for(int i=0;i<12;++i)

  00a10	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _i$221184[ebp], 0
  00a17	eb 09		 jmp	 SHORT $LN12@ProcState_@2
$LN11@ProcState_@2:
  00a19	8b 45 f0	 mov	 eax, DWORD PTR _i$221184[ebp]
  00a1c	83 c0 01	 add	 eax, 1
  00a1f	89 45 f0	 mov	 DWORD PTR _i$221184[ebp], eax
$LN12@ProcState_@2:
  00a22	83 7d f0 0c	 cmp	 DWORD PTR _i$221184[ebp], 12 ; 0000000cH
  00a26	0f 8d 56 01 00
	00		 jge	 $LN10@ProcState_@2

; 251  : 		{
; 252  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  00a2c	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$221188[ebp], 0
  00a33	eb 09		 jmp	 SHORT $LN9@ProcState_@2
$LN8@ProcState_@2:
  00a35	8b 45 ec	 mov	 eax, DWORD PTR _n$221188[ebp]
  00a38	83 c0 01	 add	 eax, 1
  00a3b	89 45 ec	 mov	 DWORD PTR _n$221188[ebp], eax
$LN9@ProcState_@2:
  00a3e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00a43	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00a48	39 45 ec	 cmp	 DWORD PTR _n$221188[ebp], eax
  00a4b	0f 8d 2c 01 00
	00		 jge	 $LN7@ProcState_@2

; 253  : 			{
; 254  : 
; 255  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_DestlerTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_DestlerTrap[i].X+5
; 256  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_DestlerTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_DestlerTrap[i].Y+5)

  00a51	8b 4d ec	 mov	 ecx, DWORD PTR _n$221188[ebp]
  00a54	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00a57	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00a5d	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00a62	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00a68	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00a6e	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  00a76	8b 45 f0	 mov	 eax, DWORD PTR _i$221184[ebp]
  00a79	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8]
  00a80	83 e9 05	 sub	 ecx, 5
  00a83	3b d1		 cmp	 edx, ecx
  00a85	0f 8c ed 00 00
	00		 jl	 $LN6@ProcState_@2
  00a8b	8b 4d ec	 mov	 ecx, DWORD PTR _n$221188[ebp]
  00a8e	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00a91	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00a97	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00a9c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00aa2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00aa8	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  00ab0	8b 45 f0	 mov	 eax, DWORD PTR _i$221184[ebp]
  00ab3	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8]
  00aba	83 c1 05	 add	 ecx, 5
  00abd	3b d1		 cmp	 edx, ecx
  00abf	0f 8f b3 00 00
	00		 jg	 $LN6@ProcState_@2
  00ac5	8b 4d ec	 mov	 ecx, DWORD PTR _n$221188[ebp]
  00ac8	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00acb	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00ad1	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00ad6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00adc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00ae2	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  00aea	8b 45 f0	 mov	 eax, DWORD PTR _i$221184[ebp]
  00aed	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8+4]
  00af4	83 e9 05	 sub	 ecx, 5
  00af7	3b d1		 cmp	 edx, ecx
  00af9	7c 7d		 jl	 SHORT $LN6@ProcState_@2
  00afb	8b 4d ec	 mov	 ecx, DWORD PTR _n$221188[ebp]
  00afe	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00b01	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00b07	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00b0c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00b12	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00b18	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  00b20	8b 45 f0	 mov	 eax, DWORD PTR _i$221184[ebp]
  00b23	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8+4]
  00b2a	83 c1 05	 add	 ecx, 5
  00b2d	3b d1		 cmp	 edx, ecx
  00b2f	7f 47		 jg	 SHORT $LN6@ProcState_@2

; 257  : 				{
; 258  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  00b31	6a 00		 push	 0
  00b33	6a 00		 push	 0
  00b35	6a 00		 push	 0
  00b37	6a 00		 push	 0
  00b39	6a 00		 push	 0
  00b3b	6a 00		 push	 0
  00b3d	6a 00		 push	 0
  00b3f	8b 4d ec	 mov	 ecx, DWORD PTR _n$221188[ebp]
  00b42	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00b45	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00b4b	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00b50	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00b56	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00b5c	50		 push	 eax
  00b5d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00b60	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  00b63	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00b69	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00b6f	51		 push	 ecx
  00b70	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  00b75	83 c4 24	 add	 esp, 36			; 00000024H
$LN6@ProcState_@2:

; 259  : 				}
; 260  : 			}

  00b78	e9 b8 fe ff ff	 jmp	 $LN8@ProcState_@2
$LN7@ProcState_@2:

; 261  : 		}

  00b7d	e9 97 fe ff ff	 jmp	 $LN11@ProcState_@2
$LN10@ProcState_@2:

; 262  : 
; 263  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00b82	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00b85	83 78 38 00	 cmp	 DWORD PTR [eax+56], 0
  00b89	7e 65		 jle	 SHORT $LN5@ProcState_@2
  00b8b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00b8e	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  00b91	99		 cdq
  00b92	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00b97	f7 f9		 idiv	 ecx
  00b99	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00b9c	0f b6 4a 54	 movzx	 ecx, BYTE PTR [edx+84]
  00ba0	3b c1		 cmp	 eax, ecx
  00ba2	74 4c		 je	 SHORT $LN5@ProcState_@2

; 264  : 		{
; 265  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  00ba4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00ba7	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  00baa	99		 cdq
  00bab	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00bb0	f7 f9		 idiv	 ecx
  00bb2	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00bb5	88 42 54	 mov	 BYTE PTR [edx+84], al

; 266  : 			PMSG_NOTICE pNotice;
; 267  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  00bb8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00bbb	0f b6 48 54	 movzx	 ecx, BYTE PTR [eax+84]
  00bbf	83 c1 01	 add	 ecx, 1
  00bc2	51		 push	 ecx
  00bc3	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  00bc8	6a 00		 push	 0
  00bca	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$221194[ebp]
  00bd0	52		 push	 edx
  00bd1	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  00bd6	83 c4 10	 add	 esp, 16			; 00000010H

; 268  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00bd9	0f b6 85 dd fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221194[ebp+1]
  00be0	50		 push	 eax
  00be1	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221194[ebp]
  00be7	51		 push	 ecx
  00be8	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00beb	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers
$LN5@ProcState_@2:

; 269  : 		}
; 270  : 
; 271  : 		if(gObj[this->m_BattleData.GateIndex[0]].Live == false && this->m_BattleData.PhazeStep == 0)

  00bf0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00bf3	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00bf6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00bfc	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c02	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  00c07	85 c0		 test	 eax, eax
  00c09	75 22		 jne	 SHORT $LN4@ProcState_@2
  00c0b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c0e	83 78 50 00	 cmp	 DWORD PTR [eax+80], 0
  00c12	75 19		 jne	 SHORT $LN4@ProcState_@2

; 272  : 		{
; 273  : 			this->SetMapAttr(0);

  00c14	6a 00		 push	 0
  00c16	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00c19	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 274  : 			this->m_BattleData.PhazeStep++;

  00c1e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c21	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00c24	83 c1 01	 add	 ecx, 1
  00c27	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00c2a	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN4@ProcState_@2:

; 275  : 		}
; 276  : 
; 277  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  00c2d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c30	83 78 44 00	 cmp	 DWORD PTR [eax+68], 0
  00c34	7f 4e		 jg	 SHORT $LN3@ProcState_@2
  00c36	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c39	83 78 50 01	 cmp	 DWORD PTR [eax+80], 1
  00c3d	75 45		 jne	 SHORT $LN3@ProcState_@2

; 278  : 		{
; 279  : 			gObj[this->m_BattleData.GateIndex[1]].m_ImmuneToHarmCount = 0;

  00c3f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c42	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00c45	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00c4b	33 d2		 xor	 edx, edx
  00c4d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c52	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 280  : 			gObj[this->m_BattleData.GateIndex[1]].m_ImmuneToMagicCount = 0;

  00c5a	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c5d	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00c60	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00c66	33 d2		 xor	 edx, edx
  00c68	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c6d	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 281  : 			this->m_BattleData.PhazeStep++;

  00c75	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c78	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00c7b	83 c1 01	 add	 ecx, 1
  00c7e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00c81	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN3@ProcState_@2:

; 282  : 		}
; 283  : 		if(gObj[this->m_BattleData.GateIndex[1]].Live == false && this->m_BattleData.PhazeStep == 2)

  00c84	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c87	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  00c8a	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00c90	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c96	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  00c9b	85 c0		 test	 eax, eax
  00c9d	75 58		 jne	 SHORT $LN2@ProcState_@2
  00c9f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00ca2	83 78 50 02	 cmp	 DWORD PTR [eax+80], 2
  00ca6	75 4f		 jne	 SHORT $LN2@ProcState_@2

; 284  : 		{
; 285  : 			gObj[this->m_BattleData.GateIndex[2]].m_ImmuneToHarmCount = 0;

  00ca8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00cab	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  00cae	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00cb4	33 d2		 xor	 edx, edx
  00cb6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00cbb	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 286  : 			gObj[this->m_BattleData.GateIndex[2]].m_ImmuneToMagicCount = 0;

  00cc3	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00cc6	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  00cc9	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00ccf	33 d2		 xor	 edx, edx
  00cd1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00cd6	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 287  : 			this->SetMapAttr(1);

  00cde	6a 01		 push	 1
  00ce0	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00ce3	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 288  : 			this->m_BattleData.PhazeStep++;

  00ce8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00ceb	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00cee	83 c1 01	 add	 ecx, 1
  00cf1	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00cf4	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN2@ProcState_@2:

; 289  : 		}
; 290  : 		if(gObj[this->m_BattleData.GateIndex[2]].Live == false && this->m_BattleData.PhazeStep == 3)

  00cf7	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00cfa	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  00cfd	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00d03	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00d09	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  00d0e	85 c0		 test	 eax, eax
  00d10	75 29		 jne	 SHORT $LN14@ProcState_@2
  00d12	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d15	83 78 50 03	 cmp	 DWORD PTR [eax+80], 3
  00d19	75 20		 jne	 SHORT $LN14@ProcState_@2

; 291  : 		{
; 292  : 			this->SetMapAttr(2);

  00d1b	6a 02		 push	 2
  00d1d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00d20	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 293  : 			this->PortalSetState = false;

  00d25	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d28	c6 40 58 00	 mov	 BYTE PTR [eax+88], 0

; 294  : 			this->m_BattleData.PhazeStep++;

  00d2c	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d2f	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00d32	83 c1 01	 add	 ecx, 1
  00d35	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00d38	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN14@ProcState_@2:

; 295  : 		}
; 296  : 	}
; 297  : }

  00d3b	5f		 pop	 edi
  00d3c	5e		 pop	 esi
  00d3d	5b		 pop	 ebx
  00d3e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00d41	33 cd		 xor	 ecx, ebp
  00d43	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00d48	8b e5		 mov	 esp, ebp
  00d4a	5d		 pop	 ebp
  00d4b	c3		 ret	 0
?ProcState_PHAZE1@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_PHAZE1
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleuser.h
_TEXT	ENDS
;	COMDAT ?GetIndex@CImperialBattleUser@@QAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetIndex@CImperialBattleUser@@QAEHXZ PROC		; CImperialBattleUser::GetIndex, COMDAT
; _this$ = ecx

; 22   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 23   : 		return this->m_iIndex;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 40 04	 mov	 eax, DWORD PTR [eax+4]

; 24   : 	}

  00012	5f		 pop	 edi
  00013	5e		 pop	 esi
  00014	5b		 pop	 ebx
  00015	8b e5		 mov	 esp, ebp
  00017	5d		 pop	 ebp
  00018	c3		 ret	 0
?GetIndex@CImperialBattleUser@@QAEHXZ ENDP		; CImperialBattleUser::GetIndex
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgalia.cpp
_TEXT	ENDS
_TEXT	SEGMENT
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_STANDBY2
; _this$ = ecx

; 300  : {

  00d50	55		 push	 ebp
  00d51	8b ec		 mov	 ebp, esp
  00d53	83 ec 48	 sub	 esp, 72			; 00000048H
  00d56	53		 push	 ebx
  00d57	56		 push	 esi
  00d58	57		 push	 edi
  00d59	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 301  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00d5c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00d62	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00d65	2b 41 3c	 sub	 eax, DWORD PTR [ecx+60]
  00d68	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 302  : 	if(Tick >= 1000)

  00d6b	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00d72	7c 36		 jl	 SHORT $LN3@ProcState_@3

; 303  : 	{
; 304  : 		this->m_BattleData.Time -= Tick;

  00d74	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00d77	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00d7a	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  00d7d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00d80	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 305  : 		this->m_BattleData.TickCount = GetTickCount();

  00d83	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00d89	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00d8c	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 306  : 
; 307  : 		this->SendEventInterface();

  00d8f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00d92	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface

; 308  : 
; 309  : 		if(this->m_BattleData.Time <= 0)

  00d97	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00d9a	83 78 38 00	 cmp	 DWORD PTR [eax+56], 0
  00d9e	7f 0a		 jg	 SHORT $LN3@ProcState_@3

; 310  : 		{
; 311  : 			this->SetState(BATTLEOFGALIA_STATE_PHAZE2);

  00da0	6a 04		 push	 4
  00da2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00da5	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState
$LN3@ProcState_@3:

; 312  : 		}
; 313  : 	}
; 314  : }

  00daa	5f		 pop	 edi
  00dab	5e		 pop	 esi
  00dac	5b		 pop	 ebx
  00dad	8b e5		 mov	 esp, ebp
  00daf	5d		 pop	 ebp
  00db0	c3		 ret	 0
?ProcState_STANDBY2@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_STANDBY2
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pNotice$221222 = -292					; size = 272
_n$221216 = -20						; size = 4
_i$221212 = -16						; size = 4
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_PHAZE2
; _this$ = ecx

; 317  : {

  00dc0	55		 push	 ebp
  00dc1	8b ec		 mov	 ebp, esp
  00dc3	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  00dc9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00dce	33 c5		 xor	 eax, ebp
  00dd0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00dd3	53		 push	 ebx
  00dd4	56		 push	 esi
  00dd5	57		 push	 edi
  00dd6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 318  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00dd9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00ddf	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00de2	2b 41 3c	 sub	 eax, DWORD PTR [ecx+60]
  00de5	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 319  : 	if(Tick >= 1000)

  00de8	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00def	0f 8c 56 03 00
	00		 jl	 $LN14@ProcState_@4

; 320  : 	{
; 321  : 		this->m_BattleData.Time -= Tick;

  00df5	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00df8	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00dfb	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  00dfe	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00e01	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 322  : 		this->m_BattleData.TickCount = GetTickCount();

  00e04	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00e0a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00e0d	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 323  : 
; 324  : 		this->SendEventInterface();

  00e10	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00e13	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface

; 325  : 		this->MonsterProc();

  00e18	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00e1b	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::MonsterProc

; 326  : 
; 327  : 		for(int i=0;i<12;++i)

  00e20	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _i$221212[ebp], 0
  00e27	eb 09		 jmp	 SHORT $LN12@ProcState_@4
$LN11@ProcState_@4:
  00e29	8b 45 f0	 mov	 eax, DWORD PTR _i$221212[ebp]
  00e2c	83 c0 01	 add	 eax, 1
  00e2f	89 45 f0	 mov	 DWORD PTR _i$221212[ebp], eax
$LN12@ProcState_@4:
  00e32	83 7d f0 0c	 cmp	 DWORD PTR _i$221212[ebp], 12 ; 0000000cH
  00e36	0f 8d 56 01 00
	00		 jge	 $LN10@ProcState_@4

; 328  : 		{
; 329  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  00e3c	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$221216[ebp], 0
  00e43	eb 09		 jmp	 SHORT $LN9@ProcState_@4
$LN8@ProcState_@4:
  00e45	8b 45 ec	 mov	 eax, DWORD PTR _n$221216[ebp]
  00e48	83 c0 01	 add	 eax, 1
  00e4b	89 45 ec	 mov	 DWORD PTR _n$221216[ebp], eax
$LN9@ProcState_@4:
  00e4e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00e53	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00e58	39 45 ec	 cmp	 DWORD PTR _n$221216[ebp], eax
  00e5b	0f 8d 2c 01 00
	00		 jge	 $LN7@ProcState_@4

; 330  : 			{
; 331  : 
; 332  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_DestlerTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_DestlerTrap[i].X+5
; 333  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_DestlerTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_DestlerTrap[i].Y+5)

  00e61	8b 4d ec	 mov	 ecx, DWORD PTR _n$221216[ebp]
  00e64	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00e67	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00e6d	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00e72	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00e78	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00e7e	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  00e86	8b 45 f0	 mov	 eax, DWORD PTR _i$221212[ebp]
  00e89	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8]
  00e90	83 e9 05	 sub	 ecx, 5
  00e93	3b d1		 cmp	 edx, ecx
  00e95	0f 8c ed 00 00
	00		 jl	 $LN6@ProcState_@4
  00e9b	8b 4d ec	 mov	 ecx, DWORD PTR _n$221216[ebp]
  00e9e	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00ea1	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00ea7	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00eac	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00eb2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00eb8	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  00ec0	8b 45 f0	 mov	 eax, DWORD PTR _i$221212[ebp]
  00ec3	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8]
  00eca	83 c1 05	 add	 ecx, 5
  00ecd	3b d1		 cmp	 edx, ecx
  00ecf	0f 8f b3 00 00
	00		 jg	 $LN6@ProcState_@4
  00ed5	8b 4d ec	 mov	 ecx, DWORD PTR _n$221216[ebp]
  00ed8	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00edb	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00ee1	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00ee6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00eec	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00ef2	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  00efa	8b 45 f0	 mov	 eax, DWORD PTR _i$221212[ebp]
  00efd	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8+4]
  00f04	83 e9 05	 sub	 ecx, 5
  00f07	3b d1		 cmp	 edx, ecx
  00f09	7c 7d		 jl	 SHORT $LN6@ProcState_@4
  00f0b	8b 4d ec	 mov	 ecx, DWORD PTR _n$221216[ebp]
  00f0e	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00f11	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00f17	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00f1c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00f22	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00f28	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  00f30	8b 45 f0	 mov	 eax, DWORD PTR _i$221212[ebp]
  00f33	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_DestlerTrap[eax*8+4]
  00f3a	83 c1 05	 add	 ecx, 5
  00f3d	3b d1		 cmp	 edx, ecx
  00f3f	7f 47		 jg	 SHORT $LN6@ProcState_@4

; 334  : 				{
; 335  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  00f41	6a 00		 push	 0
  00f43	6a 00		 push	 0
  00f45	6a 00		 push	 0
  00f47	6a 00		 push	 0
  00f49	6a 00		 push	 0
  00f4b	6a 00		 push	 0
  00f4d	6a 00		 push	 0
  00f4f	8b 4d ec	 mov	 ecx, DWORD PTR _n$221216[ebp]
  00f52	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00f55	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00f5b	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00f60	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00f66	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00f6c	50		 push	 eax
  00f6d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f70	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  00f73	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00f79	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00f7f	51		 push	 ecx
  00f80	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  00f85	83 c4 24	 add	 esp, 36			; 00000024H
$LN6@ProcState_@4:

; 336  : 				}
; 337  : 			}

  00f88	e9 b8 fe ff ff	 jmp	 $LN8@ProcState_@4
$LN7@ProcState_@4:

; 338  : 		}

  00f8d	e9 97 fe ff ff	 jmp	 $LN11@ProcState_@4
$LN10@ProcState_@4:

; 339  : 
; 340  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00f92	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f95	83 78 38 00	 cmp	 DWORD PTR [eax+56], 0
  00f99	7e 65		 jle	 SHORT $LN5@ProcState_@4
  00f9b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f9e	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  00fa1	99		 cdq
  00fa2	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00fa7	f7 f9		 idiv	 ecx
  00fa9	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00fac	0f b6 4a 54	 movzx	 ecx, BYTE PTR [edx+84]
  00fb0	3b c1		 cmp	 eax, ecx
  00fb2	74 4c		 je	 SHORT $LN5@ProcState_@4

; 341  : 		{
; 342  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  00fb4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00fb7	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  00fba	99		 cdq
  00fbb	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00fc0	f7 f9		 idiv	 ecx
  00fc2	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00fc5	88 42 54	 mov	 BYTE PTR [edx+84], al

; 343  : 			PMSG_NOTICE pNotice;
; 344  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  00fc8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00fcb	0f b6 48 54	 movzx	 ecx, BYTE PTR [eax+84]
  00fcf	83 c1 01	 add	 ecx, 1
  00fd2	51		 push	 ecx
  00fd3	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  00fd8	6a 00		 push	 0
  00fda	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$221222[ebp]
  00fe0	52		 push	 edx
  00fe1	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  00fe6	83 c4 10	 add	 esp, 16			; 00000010H

; 345  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00fe9	0f b6 85 dd fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221222[ebp+1]
  00ff0	50		 push	 eax
  00ff1	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221222[ebp]
  00ff7	51		 push	 ecx
  00ff8	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00ffb	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers
$LN5@ProcState_@4:

; 346  : 		}
; 347  : 
; 348  : 		if(gObj[this->m_BattleData.GateIndex[3]].Live == false && this->m_BattleData.PhazeStep == 0)

  01000	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01003	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  01006	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0100c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01012	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  01017	85 c0		 test	 eax, eax
  01019	75 22		 jne	 SHORT $LN4@ProcState_@4
  0101b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0101e	83 78 50 00	 cmp	 DWORD PTR [eax+80], 0
  01022	75 19		 jne	 SHORT $LN4@ProcState_@4

; 349  : 		{
; 350  : 			this->SetMapAttr(3);

  01024	6a 03		 push	 3
  01026	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01029	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 351  : 			this->m_BattleData.PhazeStep++;

  0102e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01031	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  01034	83 c1 01	 add	 ecx, 1
  01037	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0103a	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN4@ProcState_@4:

; 352  : 		}
; 353  : 
; 354  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  0103d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01040	83 78 44 00	 cmp	 DWORD PTR [eax+68], 0
  01044	7f 4e		 jg	 SHORT $LN3@ProcState_@4
  01046	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01049	83 78 50 01	 cmp	 DWORD PTR [eax+80], 1
  0104d	75 45		 jne	 SHORT $LN3@ProcState_@4

; 355  : 		{
; 356  : 			gObj[this->m_BattleData.GateIndex[4]].m_ImmuneToHarmCount = 0;

  0104f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01052	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  01055	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0105b	33 d2		 xor	 edx, edx
  0105d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01062	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 357  : 			gObj[this->m_BattleData.GateIndex[4]].m_ImmuneToMagicCount = 0;

  0106a	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0106d	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  01070	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01076	33 d2		 xor	 edx, edx
  01078	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0107d	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 358  : 			this->m_BattleData.PhazeStep++;

  01085	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01088	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  0108b	83 c1 01	 add	 ecx, 1
  0108e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01091	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN3@ProcState_@4:

; 359  : 		}
; 360  : 		if(gObj[this->m_BattleData.GateIndex[4]].Live == false && this->m_BattleData.PhazeStep == 2)

  01094	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01097	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  0109a	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  010a0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  010a6	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  010ab	85 c0		 test	 eax, eax
  010ad	75 58		 jne	 SHORT $LN2@ProcState_@4
  010af	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  010b2	83 78 50 02	 cmp	 DWORD PTR [eax+80], 2
  010b6	75 4f		 jne	 SHORT $LN2@ProcState_@4

; 361  : 		{
; 362  : 			gObj[this->m_BattleData.GateIndex[5]].m_ImmuneToHarmCount = 0;

  010b8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  010bb	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  010be	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  010c4	33 d2		 xor	 edx, edx
  010c6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  010cb	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 363  : 			gObj[this->m_BattleData.GateIndex[5]].m_ImmuneToMagicCount = 0;

  010d3	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  010d6	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  010d9	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  010df	33 d2		 xor	 edx, edx
  010e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  010e6	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 364  : 			this->SetMapAttr(4);

  010ee	6a 04		 push	 4
  010f0	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  010f3	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 365  : 			this->m_BattleData.PhazeStep++;

  010f8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  010fb	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  010fe	83 c1 01	 add	 ecx, 1
  01101	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01104	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN2@ProcState_@4:

; 366  : 		}
; 367  : 		if(gObj[this->m_BattleData.GateIndex[5]].Live == false && this->m_BattleData.PhazeStep == 3)

  01107	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0110a	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  0110d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01113	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01119	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  0111e	85 c0		 test	 eax, eax
  01120	75 29		 jne	 SHORT $LN14@ProcState_@4
  01122	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01125	83 78 50 03	 cmp	 DWORD PTR [eax+80], 3
  01129	75 20		 jne	 SHORT $LN14@ProcState_@4

; 368  : 		{
; 369  : 			this->SetMapAttr(5);

  0112b	6a 05		 push	 5
  0112d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01130	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 370  : 			this->PortalSetState = false;

  01135	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01138	c6 40 58 00	 mov	 BYTE PTR [eax+88], 0

; 371  : 			this->m_BattleData.PhazeStep++;

  0113c	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0113f	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  01142	83 c1 01	 add	 ecx, 1
  01145	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01148	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN14@ProcState_@4:

; 372  : 		}
; 373  : 	}
; 374  : }

  0114b	5f		 pop	 edi
  0114c	5e		 pop	 esi
  0114d	5b		 pop	 ebx
  0114e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01151	33 cd		 xor	 ecx, ebp
  01153	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01158	8b e5		 mov	 esp, ebp
  0115a	5d		 pop	 ebp
  0115b	c3		 ret	 0
?ProcState_PHAZE2@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_PHAZE2
; Function compile flags: /Odtp /ZI
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_STANDBY3
; _this$ = ecx

; 377  : {

  01160	55		 push	 ebp
  01161	8b ec		 mov	 ebp, esp
  01163	83 ec 48	 sub	 esp, 72			; 00000048H
  01166	53		 push	 ebx
  01167	56		 push	 esi
  01168	57		 push	 edi
  01169	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 378  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  0116c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  01172	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01175	2b 41 3c	 sub	 eax, DWORD PTR [ecx+60]
  01178	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 379  : 	if(Tick >= 1000)

  0117b	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  01182	7c 36		 jl	 SHORT $LN3@ProcState_@5

; 380  : 	{
; 381  : 		this->m_BattleData.Time -= Tick;

  01184	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01187	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0118a	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  0118d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  01190	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 382  : 		this->m_BattleData.TickCount = GetTickCount();

  01193	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  01199	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0119c	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 383  : 
; 384  : 		this->SendEventInterface();

  0119f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  011a2	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface

; 385  : 
; 386  : 		if(this->m_BattleData.Time <= 0)

  011a7	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  011aa	83 78 38 00	 cmp	 DWORD PTR [eax+56], 0
  011ae	7f 0a		 jg	 SHORT $LN3@ProcState_@5

; 387  : 		{
; 388  : 			this->SetState(BATTLEOFGALIA_STATE_PHAZE3);

  011b0	6a 06		 push	 6
  011b2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  011b5	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState
$LN3@ProcState_@5:

; 389  : 		}
; 390  : 	}
; 391  : }

  011ba	5f		 pop	 edi
  011bb	5e		 pop	 esi
  011bc	5b		 pop	 ebx
  011bd	8b e5		 mov	 esp, ebp
  011bf	5d		 pop	 ebp
  011c0	c3		 ret	 0
?ProcState_STANDBY3@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_STANDBY3
_TEXT	ENDS
PUBLIC	?SetSuccessValue@CImperialBattleOfGalia@@QAEX_N@Z ; CImperialBattleOfGalia::SetSuccessValue
PUBLIC	??_C@_0BJ@NGPECLFD@?$CFd?5minutes?5to?5escape?5?$CFs?$CB?$AA@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0BJ@NGPECLFD@?$CFd?5minutes?5to?5escape?5?$CFs?$CB?$AA@
CONST	SEGMENT
??_C@_0BJ@NGPECLFD@?$CFd?5minutes?5to?5escape?5?$CFs?$CB?$AA@ DB '%d minu'
	DB	'tes to escape %s!', 00H			; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$221240 = -284					; size = 272
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_PHAZE3
; _this$ = ecx

; 394  : {

  011d0	55		 push	 ebp
  011d1	8b ec		 mov	 ebp, esp
  011d3	81 ec 5c 01 00
	00		 sub	 esp, 348		; 0000015cH
  011d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  011de	33 c5		 xor	 eax, ebp
  011e0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  011e3	53		 push	 ebx
  011e4	56		 push	 esi
  011e5	57		 push	 edi
  011e6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 395  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  011e9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  011ef	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  011f2	2b 41 3c	 sub	 eax, DWORD PTR [ecx+60]
  011f5	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 396  : 	if(Tick >= 1000)

  011f8	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  011ff	0f 8c 1c 01 00
	00		 jl	 $LN5@ProcState_@6

; 397  : 	{
; 398  : 		this->m_BattleData.Time -= Tick;

  01205	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01208	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0120b	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  0120e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01211	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 399  : 		this->m_BattleData.TickCount = GetTickCount();

  01214	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0121a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0121d	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 400  : 
; 401  : 		this->SendEventInterface();

  01220	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01223	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SendEventInterface

; 402  : 		this->MonsterProc();

  01228	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0122b	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::MonsterProc

; 403  : 
; 404  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  01230	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01233	83 78 38 00	 cmp	 DWORD PTR [eax+56], 0
  01237	7e 7c		 jle	 SHORT $LN3@ProcState_@6
  01239	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0123c	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  0123f	99		 cdq
  01240	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  01245	f7 f9		 idiv	 ecx
  01247	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0124a	0f b6 4a 54	 movzx	 ecx, BYTE PTR [edx+84]
  0124e	3b c1		 cmp	 eax, ecx
  01250	74 63		 je	 SHORT $LN3@ProcState_@6

; 405  : 		{
; 406  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  01252	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01255	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  01258	99		 cdq
  01259	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  0125e	f7 f9		 idiv	 ecx
  01260	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01263	88 42 54	 mov	 BYTE PTR [edx+84], al

; 407  : 			PMSG_NOTICE pNotice;
; 408  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "%d minutes to escape %s!", this->m_BattleData.NotifyCount+1, gObj[this->m_BattleData.CurrentLeaderIndex].Name);

  01266	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01269	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  0126c	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01272	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01278	8d 44 0a 77	 lea	 eax, DWORD PTR [edx+ecx+119]
  0127c	50		 push	 eax
  0127d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01280	0f b6 51 54	 movzx	 edx, BYTE PTR [ecx+84]
  01284	83 c2 01	 add	 edx, 1
  01287	52		 push	 edx
  01288	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@NGPECLFD@?$CFd?5minutes?5to?5escape?5?$CFs?$CB?$AA@
  0128d	6a 00		 push	 0
  0128f	8d 85 e4 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$221240[ebp]
  01295	50		 push	 eax
  01296	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  0129b	83 c4 14	 add	 esp, 20			; 00000014H

; 409  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0129e	0f b6 85 e5 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221240[ebp+1]
  012a5	50		 push	 eax
  012a6	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221240[ebp]
  012ac	51		 push	 ecx
  012ad	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  012b0	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers
$LN3@ProcState_@6:

; 410  : 		}
; 411  : 
; 412  : 		if(gObj[this->m_BattleData.GateIndex[6]].Live == false && this->m_BattleData.PhazeStep == 0)

  012b5	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012b8	8b 48 2c	 mov	 ecx, DWORD PTR [eax+44]
  012bb	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  012c1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  012c7	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  012cc	85 c0		 test	 eax, eax
  012ce	75 22		 jne	 SHORT $LN2@ProcState_@6
  012d0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012d3	83 78 50 00	 cmp	 DWORD PTR [eax+80], 0
  012d7	75 19		 jne	 SHORT $LN2@ProcState_@6

; 413  : 		{
; 414  : 			this->SetMapAttr(6);

  012d9	6a 06		 push	 6
  012db	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  012de	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetMapAttr

; 415  : 			this->m_BattleData.PhazeStep++;

  012e3	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012e6	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  012e9	83 c1 01	 add	 ecx, 1
  012ec	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  012ef	89 4a 50	 mov	 DWORD PTR [edx+80], ecx
$LN2@ProcState_@6:

; 416  : 		}
; 417  : 
; 418  : 		if(gObj[this->m_BattleData.CurrentLeaderIndex].Live == false)

  012f2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012f5	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  012f8	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  012fe	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01304	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  01309	85 c0		 test	 eax, eax
  0130b	75 14		 jne	 SHORT $LN5@ProcState_@6

; 419  : 		{
; 420  : 			this->SetSuccessValue(true);

  0130d	6a 01		 push	 1
  0130f	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01312	e8 00 00 00 00	 call	 ?SetSuccessValue@CImperialBattleOfGalia@@QAEX_N@Z ; CImperialBattleOfGalia::SetSuccessValue

; 421  : 			this->SetState(BATTLEOFGALIA_STATE_END);

  01317	6a 07		 push	 7
  01319	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0131c	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState
$LN5@ProcState_@6:

; 422  : 		}
; 423  : 	}
; 424  : }

  01321	5f		 pop	 edi
  01322	5e		 pop	 esi
  01323	5b		 pop	 ebx
  01324	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01327	33 cd		 xor	 ecx, ebp
  01329	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0132e	8b e5		 mov	 esp, ebp
  01330	5d		 pop	 ebp
  01331	c3		 ret	 0
?ProcState_PHAZE3@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_PHAZE3
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgalia.h
_TEXT	ENDS
;	COMDAT ?SetSuccessValue@CImperialBattleOfGalia@@QAEX_N@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_SuccessValue$ = 8					; size = 1
?SetSuccessValue@CImperialBattleOfGalia@@QAEX_N@Z PROC	; CImperialBattleOfGalia::SetSuccessValue, COMDAT
; _this$ = ecx

; 79   : 	void SetSuccessValue(bool SuccessValue) { this->SuccessValue = SuccessValue; }

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8a 4d 08	 mov	 cl, BYTE PTR _SuccessValue$[ebp]
  00012	88 48 59	 mov	 BYTE PTR [eax+89], cl
  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c2 04 00	 ret	 4
?SetSuccessValue@CImperialBattleOfGalia@@QAEX_N@Z ENDP	; CImperialBattleOfGalia::SetSuccessValue
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgalia.cpp
_TEXT	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?ProcState_END@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::ProcState_END
; _this$ = ecx

; 427  : {

  01340	55		 push	 ebp
  01341	8b ec		 mov	 ebp, esp
  01343	83 ec 44	 sub	 esp, 68			; 00000044H
  01346	53		 push	 ebx
  01347	56		 push	 esi
  01348	57		 push	 edi
  01349	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 428  : 	return;
; 429  : }

  0134c	5f		 pop	 edi
  0134d	5e		 pop	 esi
  0134e	5b		 pop	 ebx
  0134f	8b e5		 mov	 esp, ebp
  01351	5d		 pop	 ebp
  01352	c3		 ret	 0
?ProcState_END@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::ProcState_END
_TEXT	ENDS
PUBLIC	?GetEventTime@CImperialBattleOfGalia@@QAEHXZ	; CImperialBattleOfGalia::GetEventTime
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetEventTime@CImperialBattleOfGalia@@QAEHXZ PROC	; CImperialBattleOfGalia::GetEventTime
; _this$ = ecx

; 432  : {

  01360	55		 push	 ebp
  01361	8b ec		 mov	 ebp, esp
  01363	83 ec 44	 sub	 esp, 68			; 00000044H
  01366	53		 push	 ebx
  01367	56		 push	 esi
  01368	57		 push	 edi
  01369	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 433  : 	return this->m_BattleData.Time / 1000;

  0136c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0136f	8b 40 38	 mov	 eax, DWORD PTR [eax+56]
  01372	99		 cdq
  01373	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
  01378	f7 f9		 idiv	 ecx

; 434  : }

  0137a	5f		 pop	 edi
  0137b	5e		 pop	 esi
  0137c	5b		 pop	 ebx
  0137d	8b e5		 mov	 esp, ebp
  0137f	5d		 pop	 ebp
  01380	c3		 ret	 0
?GetEventTime@CImperialBattleOfGalia@@QAEHXZ ENDP	; CImperialBattleOfGalia::GetEventTime
_TEXT	ENDS
PUBLIC	?GetEventState@CImperialBattleOfGalia@@QAEHXZ	; CImperialBattleOfGalia::GetEventState
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_CurrState$ = -8					; size = 4
_this$ = -4						; size = 4
?GetEventState@CImperialBattleOfGalia@@QAEHXZ PROC	; CImperialBattleOfGalia::GetEventState
; _this$ = ecx

; 437  : {

  01390	55		 push	 ebp
  01391	8b ec		 mov	 ebp, esp
  01393	83 ec 48	 sub	 esp, 72			; 00000048H
  01396	53		 push	 ebx
  01397	56		 push	 esi
  01398	57		 push	 edi
  01399	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 438  : 	int CurrState = this->m_BattleData.CurrentState;

  0139c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0139f	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  013a2	89 4d f8	 mov	 DWORD PTR _CurrState$[ebp], ecx

; 439  : 	if(CurrState == 1 || CurrState == 3 || CurrState == 5)

  013a5	83 7d f8 01	 cmp	 DWORD PTR _CurrState$[ebp], 1
  013a9	74 0c		 je	 SHORT $LN6@GetEventSt
  013ab	83 7d f8 03	 cmp	 DWORD PTR _CurrState$[ebp], 3
  013af	74 06		 je	 SHORT $LN6@GetEventSt
  013b1	83 7d f8 05	 cmp	 DWORD PTR _CurrState$[ebp], 5
  013b5	75 09		 jne	 SHORT $LN7@GetEventSt
$LN6@GetEventSt:

; 440  : 	{
; 441  : 		return 1;

  013b7	b8 01 00 00 00	 mov	 eax, 1
  013bc	eb 2c		 jmp	 SHORT $LN8@GetEventSt
  013be	eb 25		 jmp	 SHORT $LN5@GetEventSt
$LN7@GetEventSt:

; 442  : 	}
; 443  : 	else if(CurrState == 2 || CurrState == 4 || CurrState == 6)

  013c0	83 7d f8 02	 cmp	 DWORD PTR _CurrState$[ebp], 2
  013c4	74 0c		 je	 SHORT $LN3@GetEventSt
  013c6	83 7d f8 04	 cmp	 DWORD PTR _CurrState$[ebp], 4
  013ca	74 06		 je	 SHORT $LN3@GetEventSt
  013cc	83 7d f8 06	 cmp	 DWORD PTR _CurrState$[ebp], 6
  013d0	75 09		 jne	 SHORT $LN4@GetEventSt
$LN3@GetEventSt:

; 444  : 	{
; 445  : 		return 2;

  013d2	b8 02 00 00 00	 mov	 eax, 2
  013d7	eb 11		 jmp	 SHORT $LN8@GetEventSt
  013d9	eb 0a		 jmp	 SHORT $LN5@GetEventSt
$LN4@GetEventSt:

; 446  : 	}
; 447  : 	else if(CurrState == 7)

  013db	83 7d f8 07	 cmp	 DWORD PTR _CurrState$[ebp], 7
  013df	75 04		 jne	 SHORT $LN5@GetEventSt

; 448  : 	{
; 449  : 		return 0;

  013e1	33 c0		 xor	 eax, eax
  013e3	eb 05		 jmp	 SHORT $LN8@GetEventSt
$LN5@GetEventSt:

; 450  : 	}
; 451  : 	return 3;

  013e5	b8 03 00 00 00	 mov	 eax, 3
$LN8@GetEventSt:

; 452  : }

  013ea	5f		 pop	 edi
  013eb	5e		 pop	 esi
  013ec	5b		 pop	 ebx
  013ed	8b e5		 mov	 esp, ebp
  013ef	5d		 pop	 ebp
  013f0	c3		 ret	 0
?GetEventState@CImperialBattleOfGalia@@QAEHXZ ENDP	; CImperialBattleOfGalia::GetEventState
_TEXT	ENDS
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv83 = -80						; size = 4
_i$221268 = -12						; size = 4
_index$ = -8						; size = 4
_this$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
_iSize$ = 12						; size = 4
?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z PROC ; CImperialBattleOfGalia::SendImperialPlayers
; _this$ = ecx

; 455  : {

  01400	55		 push	 ebp
  01401	8b ec		 mov	 ebp, esp
  01403	83 ec 50	 sub	 esp, 80			; 00000050H
  01406	53		 push	 ebx
  01407	56		 push	 esi
  01408	57		 push	 edi
  01409	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 456  : 	int index;
; 457  : 	for(int i=0; i < g_ImperialBattleUserMng.GetUserCount();++i)

  0140c	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _i$221268[ebp], 0
  01413	eb 09		 jmp	 SHORT $LN4@SendImperi
$LN3@SendImperi:
  01415	8b 45 f4	 mov	 eax, DWORD PTR _i$221268[ebp]
  01418	83 c0 01	 add	 eax, 1
  0141b	89 45 f4	 mov	 DWORD PTR _i$221268[ebp], eax
$LN4@SendImperi:
  0141e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  01423	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  01428	39 45 f4	 cmp	 DWORD PTR _i$221268[ebp], eax
  0142b	7d 7a		 jge	 SHORT $LN5@SendImperi

; 458  : 	{
; 459  : 		index = g_ImperialBattleUserMng.m_BattleUser[i].GetIndex();

  0142d	8b 4d f4	 mov	 ecx, DWORD PTR _i$221268[ebp]
  01430	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01433	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  01439	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  0143e	89 45 f8	 mov	 DWORD PTR _index$[ebp], eax

; 460  : 
; 461  : 		if(IMPERIAL_MAP_RANGE(gObj[index].MapNumber))

  01441	8b 45 f8	 mov	 eax, DWORD PTR _index$[ebp]
  01444	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0144a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01450	0f b6 94 01 49
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+329]
  01458	83 fa 45	 cmp	 edx, 69			; 00000045H
  0145b	7d 09		 jge	 SHORT $LN7@SendImperi
  0145d	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv83[ebp], 0
  01464	eb 22		 jmp	 SHORT $LN8@SendImperi
$LN7@SendImperi:
  01466	8b 45 f8	 mov	 eax, DWORD PTR _index$[ebp]
  01469	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0146f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01475	0f b6 94 01 49
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+329]
  0147d	33 c0		 xor	 eax, eax
  0147f	83 fa 48	 cmp	 edx, 72			; 00000048H
  01482	0f 9e c0	 setle	 al
  01485	89 45 b0	 mov	 DWORD PTR tv83[ebp], eax
$LN8@SendImperi:
  01488	83 7d b0 00	 cmp	 DWORD PTR tv83[ebp], 0
  0148c	74 14		 je	 SHORT $LN1@SendImperi

; 462  : 		{
; 463  : 			DataSend(index, lpMsg, iSize);

  0148e	8b 45 0c	 mov	 eax, DWORD PTR _iSize$[ebp]
  01491	50		 push	 eax
  01492	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  01495	51		 push	 ecx
  01496	8b 55 f8	 mov	 edx, DWORD PTR _index$[ebp]
  01499	52		 push	 edx
  0149a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0149f	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@SendImperi:

; 464  : 		}	
; 465  : 	}

  014a2	e9 6e ff ff ff	 jmp	 $LN3@SendImperi
$LN5@SendImperi:

; 466  : }

  014a7	5f		 pop	 edi
  014a8	5e		 pop	 esi
  014a9	5b		 pop	 ebx
  014aa	8b e5		 mov	 esp, ebp
  014ac	5d		 pop	 ebp
  014ad	c2 08 00	 ret	 8
?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ENDP ; CImperialBattleOfGalia::SendImperialPlayers
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	?PHeadSubSetB@@YAXPAEEEH@Z:PROC			; PHeadSubSetB
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_Time$ = -28						; size = 4
_pMsg$ = -24						; size = 16
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SendEventInterface
; _this$ = ecx

; 469  : {

  014b0	55		 push	 ebp
  014b1	8b ec		 mov	 ebp, esp
  014b3	83 ec 5c	 sub	 esp, 92			; 0000005cH
  014b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  014bb	33 c5		 xor	 eax, ebp
  014bd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  014c0	53		 push	 ebx
  014c1	56		 push	 esi
  014c2	57		 push	 edi
  014c3	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 470  : 	PMSG_FORT_TIMER pMsg;
; 471  : 
; 472  : 	PHeadSubSetB((LPBYTE)&pMsg,0xF7,0x04,sizeof(pMsg));

  014c6	6a 10		 push	 16			; 00000010H
  014c8	6a 04		 push	 4
  014ca	68 f7 00 00 00	 push	 247			; 000000f7H
  014cf	8d 45 e8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  014d2	50		 push	 eax
  014d3	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  014d8	83 c4 10	 add	 esp, 16			; 00000010H

; 473  : 
; 474  : 	int Time = this->GetEventTime() * 4;

  014db	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  014de	e8 00 00 00 00	 call	 ?GetEventTime@CImperialBattleOfGalia@@QAEHXZ ; CImperialBattleOfGalia::GetEventTime
  014e3	c1 e0 02	 shl	 eax, 2
  014e6	89 45 e4	 mov	 DWORD PTR _Time$[ebp], eax

; 475  : 
; 476  : 	pMsg.Status = this->GetEventState();

  014e9	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  014ec	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGalia@@QAEHXZ ; CImperialBattleOfGalia::GetEventState
  014f1	88 45 ec	 mov	 BYTE PTR _pMsg$[ebp+4], al

; 477  : 	pMsg.Unk1 = 1;

  014f4	c6 45 ed 01	 mov	 BYTE PTR _pMsg$[ebp+5], 1

; 478  : 	pMsg.Unk2 = 1;

  014f8	c6 45 ee 01	 mov	 BYTE PTR _pMsg$[ebp+6], 1

; 479  : 	pMsg.Unk3 = 0;

  014fc	c6 45 ef 00	 mov	 BYTE PTR _pMsg$[ebp+7], 0

; 480  : 	pMsg.Unk5 = 0;

  01500	c6 45 f0 00	 mov	 BYTE PTR _pMsg$[ebp+8], 0

; 481  : 	pMsg.TimerH = HIBYTE(Time);

  01504	8b 45 e4	 mov	 eax, DWORD PTR _Time$[ebp]
  01507	c1 e8 08	 shr	 eax, 8
  0150a	25 ff 00 00 00	 and	 eax, 255		; 000000ffH
  0150f	88 45 f2	 mov	 BYTE PTR _pMsg$[ebp+10], al

; 482  : 	pMsg.TimerL = LOBYTE(Time);

  01512	8b 45 e4	 mov	 eax, DWORD PTR _Time$[ebp]
  01515	25 ff 00 00 00	 and	 eax, 255		; 000000ffH
  0151a	88 45 f1	 mov	 BYTE PTR _pMsg$[ebp+9], al

; 483  : 	pMsg.Unk4 = 0;

  0151d	c6 45 f3 00	 mov	 BYTE PTR _pMsg$[ebp+11], 0

; 484  : 	pMsg.Monster = this->m_BattleData.MonsterCount;

  01521	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01524	8b 48 44	 mov	 ecx, DWORD PTR [eax+68]
  01527	89 4d f4	 mov	 DWORD PTR _pMsg$[ebp+12], ecx

; 485  : 
; 486  : 	this->SendImperialPlayers((LPBYTE)&pMsg, pMsg.h.size);

  0152a	0f b6 45 e9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0152e	50		 push	 eax
  0152f	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  01532	51		 push	 ecx
  01533	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01536	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers

; 487  : }

  0153b	5f		 pop	 edi
  0153c	5e		 pop	 esi
  0153d	5b		 pop	 ebx
  0153e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01541	33 cd		 xor	 ecx, ebp
  01543	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01548	8b e5		 mov	 esp, ebp
  0154a	5d		 pop	 ebp
  0154b	c3		 ret	 0
?SendEventInterface@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SendEventInterface
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpMsgBody$ = -276					; size = 4
_lpMsg$ = -272						; size = 4
_PacketSize$ = -268					; size = 2
_Buff$ = -264						; size = 256
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_Gate$ = 8						; size = 4
?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z PROC	; CImperialBattleOfGalia::SetMapAttr
; _this$ = ecx

; 490  : {

  01550	55		 push	 ebp
  01551	8b ec		 mov	 ebp, esp
  01553	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  01559	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0155e	33 c5		 xor	 eax, ebp
  01560	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01563	53		 push	 ebx
  01564	56		 push	 esi
  01565	57		 push	 edi
  01566	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 491  : 	char Buff[256];
; 492  : 	short PacketSize = 0;

  01569	33 c0		 xor	 eax, eax
  0156b	66 89 85 f4 fe
	ff ff		 mov	 WORD PTR _PacketSize$[ebp], ax

; 493  : 	PMSG_SETMAPATTR_COUNT * lpMsg = (PMSG_SETMAPATTR_COUNT *)(Buff);

  01572	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  01578	89 85 f0 fe ff
	ff		 mov	 DWORD PTR _lpMsg$[ebp], eax

; 494  : 	PMSG_SETMAPATTR * lpMsgBody = (PMSG_SETMAPATTR *)(Buff + sizeof(PMSG_SETMAPATTR_COUNT));

  0157e	8d 85 ff fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp+7]
  01584	89 85 ec fe ff
	ff		 mov	 DWORD PTR _lpMsgBody$[ebp], eax

; 495  : 
; 496  : 	lpMsgBody[0].btX = g_DestlerMapAttr[Gate].StartX;

  0158a	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  0158d	c1 e0 04	 shl	 eax, 4
  01590	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  01596	8a 90 00 00 00
	00		 mov	 dl, BYTE PTR _g_DestlerMapAttr[eax]
  0159c	88 11		 mov	 BYTE PTR [ecx], dl

; 497  : 	lpMsgBody[0].btY = g_DestlerMapAttr[Gate].StartY;

  0159e	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  015a1	c1 e0 04	 shl	 eax, 4
  015a4	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  015aa	8a 90 04 00 00
	00		 mov	 dl, BYTE PTR _g_DestlerMapAttr[eax+4]
  015b0	88 51 01	 mov	 BYTE PTR [ecx+1], dl

; 498  : 	lpMsgBody[1].btX = g_DestlerMapAttr[Gate].EndX;

  015b3	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  015b6	c1 e0 04	 shl	 eax, 4
  015b9	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  015bf	8a 90 08 00 00
	00		 mov	 dl, BYTE PTR _g_DestlerMapAttr[eax+8]
  015c5	88 51 02	 mov	 BYTE PTR [ecx+2], dl

; 499  : 	lpMsgBody[1].btY = g_DestlerMapAttr[Gate].EndY;

  015c8	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  015cb	c1 e0 04	 shl	 eax, 4
  015ce	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  015d4	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR _g_DestlerMapAttr[eax+12]
  015da	88 51 03	 mov	 BYTE PTR [ecx+3], dl

; 500  : 
; 501  : 	PacketSize = (sizeof(PMSG_SETMAPATTR_COUNT)+6*sizeof(PMSG_SETMAPATTR));

  015dd	b8 13 00 00 00	 mov	 eax, 19			; 00000013H
  015e2	66 89 85 f4 fe
	ff ff		 mov	 WORD PTR _PacketSize$[ebp], ax

; 502  : 
; 503  : 	lpMsg->btMapAttr = 16;

  015e9	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  015ef	c6 40 04 10	 mov	 BYTE PTR [eax+4], 16	; 00000010H

; 504  : 	lpMsg->btMapSetType = 1;

  015f3	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  015f9	c6 40 05 01	 mov	 BYTE PTR [eax+5], 1

; 505  : 	lpMsg->btCount = 1;

  015fd	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01603	c6 40 06 01	 mov	 BYTE PTR [eax+6], 1

; 506  : 	lpMsg->btType = 0;

  01607	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0160d	c6 40 03 00	 mov	 BYTE PTR [eax+3], 0

; 507  : 
; 508  : 	lpMsg->h.c = 0xC1;

  01611	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01617	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H

; 509  : 	lpMsg->h.headcode = 0x46;

  0161a	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01620	c6 40 02 46	 mov	 BYTE PTR [eax+2], 70	; 00000046H

; 510  : 	lpMsg->h.size = PacketSize;

  01624	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0162a	8a 8d f4 fe ff
	ff		 mov	 cl, BYTE PTR _PacketSize$[ebp]
  01630	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 511  : 
; 512  : 	this->SendImperialPlayers((LPBYTE)Buff, PacketSize);

  01633	0f bf 85 f4 fe
	ff ff		 movsx	 eax, WORD PTR _PacketSize$[ebp]
  0163a	50		 push	 eax
  0163b	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  01641	51		 push	 ecx
  01642	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01645	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers

; 513  : }

  0164a	5f		 pop	 edi
  0164b	5e		 pop	 esi
  0164c	5b		 pop	 ebx
  0164d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01650	33 cd		 xor	 ecx, ebp
  01652	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01657	8b e5		 mov	 esp, ebp
  01659	5d		 pop	 ebp
  0165a	c2 04 00	 ret	 4
?SetMapAttr@CImperialBattleOfGalia@@QAEXH@Z ENDP	; CImperialBattleOfGalia::SetMapAttr
_TEXT	ENDS
EXTRN	?FindGroupMemberObjectIndex@TMonsterAIGroup@@SAHHH@Z:PROC ; TMonsterAIGroup::FindGroupMemberObjectIndex
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_i$221302 = -12						; size = 4
_alivecount$ = -8					; size = 2
_this$ = -4						; size = 4
?MonsterProc@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::MonsterProc
; _this$ = ecx

; 516  : {

  01660	55		 push	 ebp
  01661	8b ec		 mov	 ebp, esp
  01663	83 ec 4c	 sub	 esp, 76			; 0000004cH
  01666	53		 push	 ebx
  01667	56		 push	 esi
  01668	57		 push	 edi
  01669	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 517  : 	short alivecount = 0;

  0166c	33 c0		 xor	 eax, eax
  0166e	66 89 45 f8	 mov	 WORD PTR _alivecount$[ebp], ax

; 518  : 	for(int i=0;i<TMonsterAIGroup::s_iMonsterAIGroupMemberCount[this->m_BattleData.CurrentAIGroup];++i)

  01672	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _i$221302[ebp], 0
  01679	eb 09		 jmp	 SHORT $LN4@MonsterPro
$LN3@MonsterPro:
  0167b	8b 45 f4	 mov	 eax, DWORD PTR _i$221302[ebp]
  0167e	83 c0 01	 add	 eax, 1
  01681	89 45 f4	 mov	 DWORD PTR _i$221302[ebp], eax
$LN4@MonsterPro:
  01684	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01687	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  0168a	8b 55 f4	 mov	 edx, DWORD PTR _i$221302[ebp]
  0168d	3b 14 8d 00 00
	00 00		 cmp	 edx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA[ecx*4]
  01694	7d 37		 jge	 SHORT $LN2@MonsterPro

; 519  : 	{
; 520  : 		if(gObj[TMonsterAIGroup::FindGroupMemberObjectIndex(this->m_BattleData.CurrentAIGroup, i)].Live == true)

  01696	8b 45 f4	 mov	 eax, DWORD PTR _i$221302[ebp]
  01699	50		 push	 eax
  0169a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0169d	8b 51 48	 mov	 edx, DWORD PTR [ecx+72]
  016a0	52		 push	 edx
  016a1	e8 00 00 00 00	 call	 ?FindGroupMemberObjectIndex@TMonsterAIGroup@@SAHHH@Z ; TMonsterAIGroup::FindGroupMemberObjectIndex
  016a6	83 c4 08	 add	 esp, 8
  016a9	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  016af	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  016b5	0f b6 54 01 6a	 movzx	 edx, BYTE PTR [ecx+eax+106]
  016ba	83 fa 01	 cmp	 edx, 1
  016bd	75 0c		 jne	 SHORT $LN1@MonsterPro

; 521  : 		{
; 522  : 			++alivecount;

  016bf	66 8b 45 f8	 mov	 ax, WORD PTR _alivecount$[ebp]
  016c3	66 83 c0 01	 add	 ax, 1
  016c7	66 89 45 f8	 mov	 WORD PTR _alivecount$[ebp], ax
$LN1@MonsterPro:

; 523  : 		}
; 524  : 	}

  016cb	eb ae		 jmp	 SHORT $LN3@MonsterPro
$LN2@MonsterPro:

; 525  : 	this->m_BattleData.MonsterCount = alivecount;

  016cd	0f bf 45 f8	 movsx	 eax, WORD PTR _alivecount$[ebp]
  016d1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  016d4	89 41 44	 mov	 DWORD PTR [ecx+68], eax

; 526  : }

  016d7	5f		 pop	 edi
  016d8	5e		 pop	 esi
  016d9	5b		 pop	 ebx
  016da	8b e5		 mov	 esp, ebp
  016dc	5d		 pop	 ebp
  016dd	c3		 ret	 0
?MonsterProc@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::MonsterProc
_TEXT	ENDS
PUBLIC	?OperatePortalGate@CImperialBattleOfGalia@@QAEX_N0H@Z ; CImperialBattleOfGalia::OperatePortalGate
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_Block$ = 8						; size = 1
_ForAll$ = 12						; size = 1
_aIndex$ = 16						; size = 4
?OperatePortalGate@CImperialBattleOfGalia@@QAEX_N0H@Z PROC ; CImperialBattleOfGalia::OperatePortalGate
; _this$ = ecx

; 529  : {

  016e0	55		 push	 ebp
  016e1	8b ec		 mov	 ebp, esp
  016e3	83 ec 44	 sub	 esp, 68			; 00000044H
  016e6	53		 push	 ebx
  016e7	56		 push	 esi
  016e8	57		 push	 edi
  016e9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 530  : 	return;
; 531  : }

  016ec	5f		 pop	 edi
  016ed	5e		 pop	 esi
  016ee	5b		 pop	 ebx
  016ef	8b e5		 mov	 esp, ebp
  016f1	5d		 pop	 ebp
  016f2	c2 0c 00	 ret	 12			; 0000000cH
?OperatePortalGate@CImperialBattleOfGalia@@QAEX_N0H@Z ENDP ; CImperialBattleOfGalia::OperatePortalGate
_TEXT	ENDS
PUBLIC	?SetNextState@CImperialBattleOfGalia@@QAEXXZ	; CImperialBattleOfGalia::SetNextState
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_iNextState$ = -8					; size = 4
_this$ = -4						; size = 4
?SetNextState@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SetNextState
; _this$ = ecx

; 534  : {

  01700	55		 push	 ebp
  01701	8b ec		 mov	 ebp, esp
  01703	83 ec 48	 sub	 esp, 72			; 00000048H
  01706	53		 push	 ebx
  01707	56		 push	 esi
  01708	57		 push	 edi
  01709	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 535  : 	int iNextState = this->m_BattleData.CurrentState + 1;

  0170c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0170f	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  01712	83 c1 01	 add	 ecx, 1
  01715	89 4d f8	 mov	 DWORD PTR _iNextState$[ebp], ecx

; 536  : 
; 537  : 	if ( iNextState >= BATTLEOFGALIA_STATE_END )

  01718	83 7d f8 07	 cmp	 DWORD PTR _iNextState$[ebp], 7
  0171c	7c 07		 jl	 SHORT $LN1@SetNextSta

; 538  : 	{
; 539  : 		iNextState = BATTLEOFGALIA_STATE_NONE;

  0171e	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _iNextState$[ebp], 0
$LN1@SetNextSta:

; 540  : 	}
; 541  : 
; 542  : 	this->SetState(iNextState);

  01725	8b 45 f8	 mov	 eax, DWORD PTR _iNextState$[ebp]
  01728	50		 push	 eax
  01729	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0172c	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState

; 543  : }

  01731	5f		 pop	 edi
  01732	5e		 pop	 esi
  01733	5b		 pop	 ebx
  01734	8b e5		 mov	 esp, ebp
  01736	5d		 pop	 ebp
  01737	c3		 ret	 0
?SetNextState@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SetNextState
_TEXT	ENDS
PUBLIC	?EnterPortal@CImperialBattleOfGalia@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfGalia::EnterPortal
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?EnterPortal@CImperialBattleOfGalia@@QAE_NPAUOBJECTSTRUCT@@@Z PROC ; CImperialBattleOfGalia::EnterPortal
; _this$ = ecx

; 546  : {

  01740	55		 push	 ebp
  01741	8b ec		 mov	 ebp, esp
  01743	83 ec 44	 sub	 esp, 68			; 00000044H
  01746	53		 push	 ebx
  01747	56		 push	 esi
  01748	57		 push	 edi
  01749	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 547  : 	if(this->m_BattleData.MonsterCount > 0)

  0174c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0174f	83 78 44 00	 cmp	 DWORD PTR [eax+68], 0
  01753	7e 04		 jle	 SHORT $LN2@EnterPorta

; 548  : 		return false;

  01755	32 c0		 xor	 al, al
  01757	eb 1c		 jmp	 SHORT $LN3@EnterPorta
$LN2@EnterPorta:

; 549  : 	
; 550  : 	//if(this->m_BattleData.PhazeStep != 4)	//DeBug
; 551  : 	//	return false;
; 552  : 
; 553  : 	if(!this->PortalSetState)

  01759	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0175c	0f b6 48 58	 movzx	 ecx, BYTE PTR [eax+88]
  01760	85 c9		 test	 ecx, ecx
  01762	75 0f		 jne	 SHORT $LN1@EnterPorta

; 554  : 	{
; 555  : 		this->SetNextState();

  01764	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01767	e8 00 00 00 00	 call	 ?SetNextState@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::SetNextState

; 556  : 		this->PortalSetState = true;

  0176c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0176f	c6 40 58 01	 mov	 BYTE PTR [eax+88], 1
$LN1@EnterPorta:

; 557  : 	}
; 558  : 
; 559  : 	return true;

  01773	b0 01		 mov	 al, 1
$LN3@EnterPorta:

; 560  : }

  01775	5f		 pop	 edi
  01776	5e		 pop	 esi
  01777	5b		 pop	 ebx
  01778	8b e5		 mov	 esp, ebp
  0177a	5d		 pop	 ebp
  0177b	c2 04 00	 ret	 4
?EnterPortal@CImperialBattleOfGalia@@QAE_NPAUOBJECTSTRUCT@@@Z ENDP ; CImperialBattleOfGalia::EnterPortal
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_State$ = -24						; size = 4
_pMsg$ = -20						; size = 12
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SendEventState@CImperialBattleOfGalia@@QAEXXZ PROC	; CImperialBattleOfGalia::SendEventState
; _this$ = ecx

; 563  : {

  01780	55		 push	 ebp
  01781	8b ec		 mov	 ebp, esp
  01783	83 ec 58	 sub	 esp, 88			; 00000058H
  01786	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0178b	33 c5		 xor	 eax, ebp
  0178d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01790	53		 push	 ebx
  01791	56		 push	 esi
  01792	57		 push	 edi
  01793	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 564  : 	PMSG_FORT_ENTER_RESULT pMsg;
; 565  : 
; 566  : 	PHeadSubSetB((LPBYTE)&pMsg, 0xF7, 0x02, sizeof(pMsg));

  01796	6a 0c		 push	 12			; 0000000cH
  01798	6a 02		 push	 2
  0179a	68 f7 00 00 00	 push	 247			; 000000f7H
  0179f	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  017a2	50		 push	 eax
  017a3	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  017a8	83 c4 10	 add	 esp, 16			; 00000010H

; 567  : 
; 568  : 	pMsg.EntryTime = 0;

  017ab	33 c0		 xor	 eax, eax
  017ad	66 89 45 f6	 mov	 WORD PTR _pMsg$[ebp+10], ax

; 569  : 	pMsg.Day = 4;

  017b1	c6 45 f1 04	 mov	 BYTE PTR _pMsg$[ebp+5], 4

; 570  : 	pMsg.Result = 0;

  017b5	c6 45 f0 00	 mov	 BYTE PTR _pMsg$[ebp+4], 0

; 571  : 	
; 572  : 	int State;
; 573  : 
; 574  : 	if(this->m_BattleData.CurrentState == 1 || this->m_BattleData.CurrentState == 2)

  017b9	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017bc	83 78 40 01	 cmp	 DWORD PTR [eax+64], 1
  017c0	74 09		 je	 SHORT $LN7@SendEventS
  017c2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017c5	83 78 40 02	 cmp	 DWORD PTR [eax+64], 2
  017c9	75 09		 jne	 SHORT $LN8@SendEventS
$LN7@SendEventS:

; 575  : 	{
; 576  : 		State = 1;

  017cb	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _State$[ebp], 1
  017d2	eb 34		 jmp	 SHORT $LN6@SendEventS
$LN8@SendEventS:

; 577  : 	}
; 578  : 	else if(this->m_BattleData.CurrentState == 3 || this->m_BattleData.CurrentState == 4)

  017d4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017d7	83 78 40 03	 cmp	 DWORD PTR [eax+64], 3
  017db	74 09		 je	 SHORT $LN4@SendEventS
  017dd	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017e0	83 78 40 04	 cmp	 DWORD PTR [eax+64], 4
  017e4	75 09		 jne	 SHORT $LN5@SendEventS
$LN4@SendEventS:

; 579  : 	{
; 580  : 		State = 2;

  017e6	c7 45 e8 02 00
	00 00		 mov	 DWORD PTR _State$[ebp], 2
  017ed	eb 19		 jmp	 SHORT $LN6@SendEventS
$LN5@SendEventS:

; 581  : 	}
; 582  : 	else if(this->m_BattleData.CurrentState == 5 || this->m_BattleData.CurrentState == 6)

  017ef	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017f2	83 78 40 05	 cmp	 DWORD PTR [eax+64], 5
  017f6	74 09		 je	 SHORT $LN1@SendEventS
  017f8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017fb	83 78 40 06	 cmp	 DWORD PTR [eax+64], 6
  017ff	75 07		 jne	 SHORT $LN6@SendEventS
$LN1@SendEventS:

; 583  : 	{
; 584  : 		State = 3;

  01801	c7 45 e8 03 00
	00 00		 mov	 DWORD PTR _State$[ebp], 3
$LN6@SendEventS:

; 585  : 	}
; 586  : 
; 587  : 	pMsg.State = State;

  01808	8a 45 e8	 mov	 al, BYTE PTR _State$[ebp]
  0180b	88 45 f2	 mov	 BYTE PTR _pMsg$[ebp+6], al

; 588  : 	pMsg.Unk = 3;

  0180e	c6 45 f3 03	 mov	 BYTE PTR _pMsg$[ebp+7], 3

; 589  : 
; 590  : 	this->SendImperialPlayers((LPBYTE)&pMsg, pMsg.h.size);

  01812	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  01816	50		 push	 eax
  01817	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0181a	51		 push	 ecx
  0181b	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0181e	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGalia@@QAEXPAEH@Z ; CImperialBattleOfGalia::SendImperialPlayers

; 591  : }

  01823	5f		 pop	 edi
  01824	5e		 pop	 esi
  01825	5b		 pop	 ebx
  01826	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01829	33 cd		 xor	 ecx, ebp
  0182b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01830	8b e5		 mov	 esp, ebp
  01832	5d		 pop	 ebp
  01833	c3		 ret	 0
?SendEventState@CImperialBattleOfGalia@@QAEXXZ ENDP	; CImperialBattleOfGalia::SendEventState
_TEXT	ENDS
END
