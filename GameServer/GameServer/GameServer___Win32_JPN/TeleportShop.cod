; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\TeleportShop.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?g_TeleportShop@@3VTeleportShop@@A		; g_TeleportShop
_BSS	SEGMENT
?g_TeleportShop@@3VTeleportShop@@A DB 0140H DUP (?)	; g_TeleportShop
_BSS	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?Init@TeleportShop@@QAEXXZ			; TeleportShop::Init
EXTRN	_memset:PROC
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\teleportshop.cpp
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Init@TeleportShop@@QAEXXZ PROC				; TeleportShop::Init
; _this$ = ecx

; 17   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 18   : 	this->Enable = 0;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c6 00 00	 mov	 BYTE PTR [eax], 0

; 19   : 	this->EventTime = 0;

  00012	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00015	c7 40 04 00 00
	00 00		 mov	 DWORD PTR [eax+4], 0

; 20   : 	this->Tick = 0;

  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	c7 80 e4 00 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+228], 0

; 21   : 	this->Start = false;

  00029	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002c	c6 80 e8 00 00
	00 00		 mov	 BYTE PTR [eax+232], 0

; 22   : 	this->TimeLoaded = 0;

  00033	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00036	c7 80 3c 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+316], 0

; 23   : 	if(this->IndexNPC >= 0)

  00040	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00043	83 b8 e0 00 00
	00 00		 cmp	 DWORD PTR [eax+224], 0
  0004a	7c 12		 jl	 SHORT $LN1@Init

; 24   : 	{
; 25   : 		gObjDel(this->IndexNPC);

  0004c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0004f	8b 88 e0 00 00
	00		 mov	 ecx, DWORD PTR [eax+224]
  00055	51		 push	 ecx
  00056	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  0005b	83 c4 04	 add	 esp, 4
$LN1@Init:

; 26   : 	}
; 27   : 	this->IndexNPC = -1;

  0005e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00061	c7 80 e0 00 00
	00 ff ff ff ff	 mov	 DWORD PTR [eax+224], -1

; 28   : 
; 29   : 	ZeroMemory(&this->DataTime, sizeof(DataTime));

  0006b	6a 50		 push	 80			; 00000050H
  0006d	6a 00		 push	 0
  0006f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00072	05 ec 00 00 00	 add	 eax, 236		; 000000ecH
  00077	50		 push	 eax
  00078	e8 00 00 00 00	 call	 _memset
  0007d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 30   : }

  00080	5f		 pop	 edi
  00081	5e		 pop	 esi
  00082	5b		 pop	 ebx
  00083	8b e5		 mov	 esp, ebp
  00085	5d		 pop	 ebp
  00086	c3		 ret	 0
?Init@TeleportShop@@QAEXXZ ENDP				; TeleportShop::Init
_TEXT	ENDS
PUBLIC	??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@		; `string'
PUBLIC	??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@	; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	??_C@_0L@NDGLNMKE@MessageEnd?$AA@		; `string'
PUBLIC	??_C@_0N@JBCJKKCC@MessageStart?$AA@		; `string'
PUBLIC	??_C@_0L@DHJBJFLO@Teleport_Y?$AA@		; `string'
PUBLIC	??_C@_0L@COIKKEPP@Teleport_X?$AA@		; `string'
PUBLIC	??_C@_0N@EDHCMLEF@Teleport_Map?$AA@		; `string'
PUBLIC	??_C@_0N@IAAFIODM@Teleport_NPC?$AA@		; `string'
PUBLIC	??_C@_09OHFGCBJB@EventTime?$AA@			; `string'
PUBLIC	??_C@_06MLPMCPDE@ExTeam?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Load@TeleportShop@@QAEXXZ			; TeleportShop::Load
EXTRN	_fclose:PROC
EXTRN	_sscanf:PROC
EXTRN	?Ex_IsBadFileLine@@YA_NPADAAH@Z:PROC		; Ex_IsBadFileLine
EXTRN	_fgets:PROC
EXTRN	_feof:PROC
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	_fopen:PROC
EXTRN	__imp__GetPrivateProfileStringA@24:PROC
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@ DB '%d %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@
CONST	SEGMENT
??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@ DB 'LOAD FILE ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@NDGLNMKE@MessageEnd?$AA@
CONST	SEGMENT
??_C@_0L@NDGLNMKE@MessageEnd?$AA@ DB 'MessageEnd', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@JBCJKKCC@MessageStart?$AA@
CONST	SEGMENT
??_C@_0N@JBCJKKCC@MessageStart?$AA@ DB 'MessageStart', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@DHJBJFLO@Teleport_Y?$AA@
CONST	SEGMENT
??_C@_0L@DHJBJFLO@Teleport_Y?$AA@ DB 'Teleport_Y', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@COIKKEPP@Teleport_X?$AA@
CONST	SEGMENT
??_C@_0L@COIKKEPP@Teleport_X?$AA@ DB 'Teleport_X', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@EDHCMLEF@Teleport_Map?$AA@
CONST	SEGMENT
??_C@_0N@EDHCMLEF@Teleport_Map?$AA@ DB 'Teleport_Map', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@IAAFIODM@Teleport_NPC?$AA@
CONST	SEGMENT
??_C@_0N@IAAFIODM@Teleport_NPC?$AA@ DB 'Teleport_NPC', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_09OHFGCBJB@EventTime?$AA@
CONST	SEGMENT
??_C@_09OHFGCBJB@EventTime?$AA@ DB 'EventTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_06MLPMCPDE@ExTeam?$AA@
CONST	SEGMENT
??_C@_06MLPMCPDE@ExTeam?$AA@ DB 'ExTeam', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
CONST	SEGMENT
??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@ DB '..\Data\Ex'
	DB	'Data\Events\TeleportShop.ini', 00H		; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_n$219338 = -280					; size = 8
_Flag$ = -272						; size = 4
_Buff$ = -268						; size = 256
_file$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?Load@TeleportShop@@QAEXXZ PROC				; TeleportShop::Load
; _this$ = ecx

; 34   : {

  00090	55		 push	 ebp
  00091	8b ec		 mov	 ebp, esp
  00093	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00099	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0009e	33 c5		 xor	 eax, ebp
  000a0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  000a3	53		 push	 ebx
  000a4	56		 push	 esi
  000a5	57		 push	 edi
  000a6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 35   : 	this->Init();

  000a9	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  000ac	e8 00 00 00 00	 call	 ?Init@TeleportShop@@QAEXXZ ; TeleportShop::Init

; 36   : 
; 37   : 	//if( g_ExLicense.CheckUser(feqan) == false)
; 38   : 	//{
; 39   : 	//	return;
; 40   : 	//}
; 41   : 
; 42   : 	this->Enable = GetPrivateProfileInt("ExTeam","Enable",0,TELEPORT_SHOP_DIR);

  000b1	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  000b6	6a 00		 push	 0
  000b8	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  000bd	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  000c2	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  000c8	85 c0		 test	 eax, eax
  000ca	0f 95 c0	 setne	 al
  000cd	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  000d0	88 01		 mov	 BYTE PTR [ecx], al

; 43   : 	this->EventTime = GetPrivateProfileInt("ExTeam","EventTime",0,TELEPORT_SHOP_DIR) * 60;

  000d2	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  000d7	6a 00		 push	 0
  000d9	68 00 00 00 00	 push	 OFFSET ??_C@_09OHFGCBJB@EventTime?$AA@
  000de	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  000e3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  000e9	6b c0 3c	 imul	 eax, 60			; 0000003cH
  000ec	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  000ef	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 44   : 	this->Teleport_NPC = GetPrivateProfileInt("ExTeam","Teleport_NPC",379,TELEPORT_SHOP_DIR);

  000f2	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  000f7	68 7b 01 00 00	 push	 379			; 0000017bH
  000fc	68 00 00 00 00	 push	 OFFSET ??_C@_0N@IAAFIODM@Teleport_NPC?$AA@
  00101	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  00106	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  0010c	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0010f	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 45   : 	this->Teleport_Map = GetPrivateProfileInt("ExTeam","Teleport_Map",0,TELEPORT_SHOP_DIR);

  00112	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  00117	6a 00		 push	 0
  00119	68 00 00 00 00	 push	 OFFSET ??_C@_0N@EDHCMLEF@Teleport_Map?$AA@
  0011e	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  00123	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  00129	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0012c	89 41 0c	 mov	 DWORD PTR [ecx+12], eax

; 46   : 	this->Teleport_X = GetPrivateProfileInt("ExTeam","Teleport_X",0,TELEPORT_SHOP_DIR);

  0012f	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  00134	6a 00		 push	 0
  00136	68 00 00 00 00	 push	 OFFSET ??_C@_0L@COIKKEPP@Teleport_X?$AA@
  0013b	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  00140	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  00146	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00149	89 41 10	 mov	 DWORD PTR [ecx+16], eax

; 47   : 	this->Teleport_Y = GetPrivateProfileInt("ExTeam","Teleport_Y",0,TELEPORT_SHOP_DIR);

  0014c	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  00151	6a 00		 push	 0
  00153	68 00 00 00 00	 push	 OFFSET ??_C@_0L@DHJBJFLO@Teleport_Y?$AA@
  00158	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  0015d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  00163	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00166	89 41 14	 mov	 DWORD PTR [ecx+20], eax

; 48   : 
; 49   : 	GetPrivateProfileString("ExTeam", "MessageStart","MessageStart",this->MessageStart,100,TELEPORT_SHOP_DIR);

  00169	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  0016e	6a 64		 push	 100			; 00000064H
  00170	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00173	83 c0 18	 add	 eax, 24			; 00000018H
  00176	50		 push	 eax
  00177	68 00 00 00 00	 push	 OFFSET ??_C@_0N@JBCJKKCC@MessageStart?$AA@
  0017c	68 00 00 00 00	 push	 OFFSET ??_C@_0N@JBCJKKCC@MessageStart?$AA@
  00181	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  00186	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileStringA@24

; 50   : 	GetPrivateProfileString("ExTeam", "MessageEnd","MessageEnd",this->MessageEnd,100,TELEPORT_SHOP_DIR);

  0018c	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  00191	6a 64		 push	 100			; 00000064H
  00193	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00196	83 c0 7c	 add	 eax, 124		; 0000007cH
  00199	50		 push	 eax
  0019a	68 00 00 00 00	 push	 OFFSET ??_C@_0L@NDGLNMKE@MessageEnd?$AA@
  0019f	68 00 00 00 00	 push	 OFFSET ??_C@_0L@NDGLNMKE@MessageEnd?$AA@
  001a4	68 00 00 00 00	 push	 OFFSET ??_C@_06MLPMCPDE@ExTeam?$AA@
  001a9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileStringA@24

; 51   : 
; 52   : 	FILE *file = fopen(TELEPORT_SHOP_DIR,"r");

  001af	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  001b4	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  001b9	e8 00 00 00 00	 call	 _fopen
  001be	83 c4 08	 add	 esp, 8
  001c1	89 45 f4	 mov	 DWORD PTR _file$[ebp], eax

; 53   : 
; 54   : 	/*char szBuf[256] = { 0 };
; 55   : 	sprintf(szBuf, "FILE SIZE: %d", file->_charbuf);
; 56   : 	MessageBoxA(0,szBuf,"LOAD FILE !!!",0);*/
; 57   : 
; 58   : 	if(file == NULL)

  001c4	83 7d f4 00	 cmp	 DWORD PTR _file$[ebp], 0
  001c8	75 19		 jne	 SHORT $LN6@Load

; 59   : 	{
; 60   : 		MessageBoxA(0,TELEPORT_SHOP_DIR,"LOAD FILE ERROR",0);

  001ca	6a 00		 push	 0
  001cc	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@
  001d1	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@PJPBFNHN@?4?4?2Data?2ExData?2Events?2TeleportSh@
  001d6	6a 00		 push	 0
  001d8	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__MessageBoxA@16

; 61   : 		return;

  001de	e9 f3 00 00 00	 jmp	 $LN7@Load
$LN6@Load:

; 62   : 	}
; 63   : 
; 64   : 	char Buff[256];
; 65   : 	int Flag = 0;

  001e3	c7 85 f0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _Flag$[ebp], 0

; 66   : 
; 67   : 	this->TimeLoaded = 0;

  001ed	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  001f0	c7 80 3c 01 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+316], 0
$LN5@Load:

; 68   : 
; 69   : 	while(!feof(file)) 

  001fa	8b 45 f4	 mov	 eax, DWORD PTR _file$[ebp]
  001fd	50		 push	 eax
  001fe	e8 00 00 00 00	 call	 _feof
  00203	83 c4 04	 add	 esp, 4
  00206	85 c0		 test	 eax, eax
  00208	0f 85 bc 00 00
	00		 jne	 $LN4@Load

; 70   : 	{
; 71   : 		fgets(Buff,256,file);

  0020e	8b 45 f4	 mov	 eax, DWORD PTR _file$[ebp]
  00211	50		 push	 eax
  00212	68 00 01 00 00	 push	 256			; 00000100H
  00217	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  0021d	51		 push	 ecx
  0021e	e8 00 00 00 00	 call	 _fgets
  00223	83 c4 0c	 add	 esp, 12			; 0000000cH

; 72   : 		if(Ex_IsBadFileLine(Buff, Flag))

  00226	8d 85 f0 fe ff
	ff		 lea	 eax, DWORD PTR _Flag$[ebp]
  0022c	50		 push	 eax
  0022d	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  00233	51		 push	 ecx
  00234	e8 00 00 00 00	 call	 ?Ex_IsBadFileLine@@YA_NPADAAH@Z ; Ex_IsBadFileLine
  00239	83 c4 08	 add	 esp, 8
  0023c	0f b6 d0	 movzx	 edx, al
  0023f	85 d2		 test	 edx, edx
  00241	74 02		 je	 SHORT $LN3@Load

; 73   : 			continue;

  00243	eb b5		 jmp	 SHORT $LN5@Load
$LN3@Load:

; 74   : 
; 75   : 		if(Flag == 1)

  00245	83 bd f0 fe ff
	ff 01		 cmp	 DWORD PTR _Flag$[ebp], 1
  0024c	75 77		 jne	 SHORT $LN2@Load

; 76   : 		{
; 77   : 			if(TimeLoaded >= 10)

  0024e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00251	83 b8 3c 01 00
	00 0a		 cmp	 DWORD PTR [eax+316], 10	; 0000000aH
  00258	7c 02		 jl	 SHORT $LN1@Load

; 78   : 			{
; 79   : 				break;

  0025a	eb 6e		 jmp	 SHORT $LN4@Load
$LN1@Load:

; 80   : 			}
; 81   : 			int n[2];
; 82   : 			sscanf(Buff, "%d %d", &n[0], &n[1]);

  0025c	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _n$219338[ebp+4]
  00262	50		 push	 eax
  00263	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$219338[ebp]
  00269	51		 push	 ecx
  0026a	68 00 00 00 00	 push	 OFFSET ??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@
  0026f	8d 95 f4 fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  00275	52		 push	 edx
  00276	e8 00 00 00 00	 call	 _sscanf
  0027b	83 c4 10	 add	 esp, 16			; 00000010H

; 83   : 			this->DataTime[this->TimeLoaded].Hour  = n[0];

  0027e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00281	8b 88 3c 01 00
	00		 mov	 ecx, DWORD PTR [eax+316]
  00287	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0028a	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$219338[ebp]
  00290	89 84 ca ec 00
	00 00		 mov	 DWORD PTR [edx+ecx*8+236], eax

; 84   : 			this->DataTime[this->TimeLoaded].Min   = n[1];

  00297	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0029a	8b 88 3c 01 00
	00		 mov	 ecx, DWORD PTR [eax+316]
  002a0	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  002a3	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _n$219338[ebp+4]
  002a9	89 84 ca f0 00
	00 00		 mov	 DWORD PTR [edx+ecx*8+240], eax

; 85   : 			this->TimeLoaded++;

  002b0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  002b3	8b 88 3c 01 00
	00		 mov	 ecx, DWORD PTR [eax+316]
  002b9	83 c1 01	 add	 ecx, 1
  002bc	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  002bf	89 8a 3c 01 00
	00		 mov	 DWORD PTR [edx+316], ecx
$LN2@Load:

; 86   : 		}
; 87   : 	}

  002c5	e9 30 ff ff ff	 jmp	 $LN5@Load
$LN4@Load:

; 88   : 	fclose(file);

  002ca	8b 45 f4	 mov	 eax, DWORD PTR _file$[ebp]
  002cd	50		 push	 eax
  002ce	e8 00 00 00 00	 call	 _fclose
  002d3	83 c4 04	 add	 esp, 4
$LN7@Load:

; 89   : }

  002d6	5f		 pop	 edi
  002d7	5e		 pop	 esi
  002d8	5b		 pop	 ebx
  002d9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002dc	33 cd		 xor	 ecx, ebp
  002de	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002e3	8b e5		 mov	 esp, ebp
  002e5	5d		 pop	 ebp
  002e6	c3		 ret	 0
?Load@TeleportShop@@QAEXXZ ENDP				; TeleportShop::Load
_TEXT	ENDS
PUBLIC	?EventStart@TeleportShop@@QAEXXZ		; TeleportShop::EventStart
PUBLIC	?EventEnd@TeleportShop@@QAEXXZ			; TeleportShop::EventEnd
PUBLIC	__$ArrayPad$
PUBLIC	?TickTime@TeleportShop@@QAEXXZ			; TeleportShop::TickTime
EXTRN	?GetSecond@CTimerEx@@QAEHXZ:PROC		; CTimerEx::GetSecond
EXTRN	?g_TimerEx@@3VCTimerEx@@A:DWORD			; g_TimerEx
EXTRN	__imp__GetLocalTime@4:PROC
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_i$219348 = -28						; size = 4
_t$ = -24						; size = 16
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?TickTime@TeleportShop@@QAEXXZ PROC			; TeleportShop::TickTime
; _this$ = ecx

; 93   : {

  002f0	55		 push	 ebp
  002f1	8b ec		 mov	 ebp, esp
  002f3	83 ec 5c	 sub	 esp, 92			; 0000005cH
  002f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  002fb	33 c5		 xor	 eax, ebp
  002fd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00300	53		 push	 ebx
  00301	56		 push	 esi
  00302	57		 push	 edi
  00303	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 94   : 	if(!this->Enable)

  00306	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00309	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0030c	85 c9		 test	 ecx, ecx
  0030e	75 05		 jne	 SHORT $LN8@TickTime

; 95   : 		return;

  00310	e9 a9 00 00 00	 jmp	 $LN9@TickTime
$LN8@TickTime:

; 96   : 
; 97   : 	if(this->Start == true)

  00315	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00318	0f b6 88 e8 00
	00 00		 movzx	 ecx, BYTE PTR [eax+232]
  0031f	83 f9 01	 cmp	 ecx, 1
  00322	75 30		 jne	 SHORT $LN7@TickTime

; 98   : 	{
; 99   : 		this->Tick++;

  00324	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00327	8b 88 e4 00 00
	00		 mov	 ecx, DWORD PTR [eax+228]
  0032d	83 c1 01	 add	 ecx, 1
  00330	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00333	89 8a e4 00 00
	00		 mov	 DWORD PTR [edx+228], ecx

; 100  : 		if(this->Tick >= this->EventTime)

  00339	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0033c	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0033f	8b 90 e4 00 00
	00		 mov	 edx, DWORD PTR [eax+228]
  00345	3b 51 04	 cmp	 edx, DWORD PTR [ecx+4]
  00348	7c 08		 jl	 SHORT $LN6@TickTime

; 101  : 		{
; 102  : 			this->EventEnd();

  0034a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0034d	e8 00 00 00 00	 call	 ?EventEnd@TeleportShop@@QAEXXZ ; TeleportShop::EventEnd
$LN6@TickTime:

; 103  : 		}
; 104  : 		return;

  00352	eb 6a		 jmp	 SHORT $LN9@TickTime
$LN7@TickTime:

; 105  : 	}
; 106  : 
; 107  : 	SYSTEMTIME t;
; 108  : 	GetLocalTime(&t);

  00354	8d 45 e8	 lea	 eax, DWORD PTR _t$[ebp]
  00357	50		 push	 eax
  00358	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetLocalTime@4

; 109  : #if(NEWTIMEREX)
; 110  : 	if(g_TimerEx.GetSecond() == 00)

  0035e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TimerEx@@3VCTimerEx@@A ; g_TimerEx
  00363	e8 00 00 00 00	 call	 ?GetSecond@CTimerEx@@QAEHXZ ; CTimerEx::GetSecond
  00368	85 c0		 test	 eax, eax
  0036a	75 52		 jne	 SHORT $LN9@TickTime

; 111  : #else
; 112  : 	if(t.wSecond == 00)
; 113  : #endif
; 114  : 	{
; 115  : 		for(int i = 0; i < this->TimeLoaded; i++)

  0036c	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _i$219348[ebp], 0
  00373	eb 09		 jmp	 SHORT $LN4@TickTime
$LN3@TickTime:
  00375	8b 45 e4	 mov	 eax, DWORD PTR _i$219348[ebp]
  00378	83 c0 01	 add	 eax, 1
  0037b	89 45 e4	 mov	 DWORD PTR _i$219348[ebp], eax
$LN4@TickTime:
  0037e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00381	8b 4d e4	 mov	 ecx, DWORD PTR _i$219348[ebp]
  00384	3b 88 3c 01 00
	00		 cmp	 ecx, DWORD PTR [eax+316]
  0038a	7d 32		 jge	 SHORT $LN9@TickTime

; 116  : 		{
; 117  : 			if(this->DataTime[i].Hour == t.wHour && this->DataTime[i].Min == t.wMinute)

  0038c	0f b7 45 f0	 movzx	 eax, WORD PTR _t$[ebp+8]
  00390	8b 4d e4	 mov	 ecx, DWORD PTR _i$219348[ebp]
  00393	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00396	39 84 ca ec 00
	00 00		 cmp	 DWORD PTR [edx+ecx*8+236], eax
  0039d	75 1d		 jne	 SHORT $LN1@TickTime
  0039f	0f b7 45 f2	 movzx	 eax, WORD PTR _t$[ebp+10]
  003a3	8b 4d e4	 mov	 ecx, DWORD PTR _i$219348[ebp]
  003a6	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  003a9	39 84 ca f0 00
	00 00		 cmp	 DWORD PTR [edx+ecx*8+240], eax
  003b0	75 0a		 jne	 SHORT $LN1@TickTime

; 118  : 			{
; 119  : 				this->EventStart();

  003b2	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  003b5	e8 00 00 00 00	 call	 ?EventStart@TeleportShop@@QAEXXZ ; TeleportShop::EventStart

; 120  : 				return;

  003ba	eb 02		 jmp	 SHORT $LN9@TickTime
$LN1@TickTime:

; 121  : 			}
; 122  : 		}

  003bc	eb b7		 jmp	 SHORT $LN3@TickTime
$LN9@TickTime:

; 123  : 	}
; 124  : }

  003be	5f		 pop	 edi
  003bf	5e		 pop	 esi
  003c0	5b		 pop	 ebx
  003c1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003c4	33 cd		 xor	 ecx, ebp
  003c6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  003cb	8b e5		 mov	 esp, ebp
  003cd	5d		 pop	 ebp
  003ce	c3		 ret	 0
?TickTime@TeleportShop@@QAEXXZ ENDP			; TeleportShop::TickTime
_TEXT	ENDS
EXTRN	?MessaageAllGlobal@@YAXPADZZ:PROC		; MessaageAllGlobal
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
EXTRN	_srand:PROC
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_result$ = -16						; size = 4
_Y$ = -12						; size = 4
_X$ = -8						; size = 4
_this$ = -4						; size = 4
?EventStart@TeleportShop@@QAEXXZ PROC			; TeleportShop::EventStart
; _this$ = ecx

; 128  : {

  003d0	55		 push	 ebp
  003d1	8b ec		 mov	 ebp, esp
  003d3	83 ec 50	 sub	 esp, 80			; 00000050H
  003d6	53		 push	 ebx
  003d7	56		 push	 esi
  003d8	57		 push	 edi
  003d9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 129  : 	srand(time(NULL));

  003dc	6a 00		 push	 0
  003de	e8 00 00 00 00	 call	 _time
  003e3	83 c4 04	 add	 esp, 4
  003e6	50		 push	 eax
  003e7	e8 00 00 00 00	 call	 _srand
  003ec	83 c4 04	 add	 esp, 4

; 130  : 
; 131  : 	int X = this->Teleport_X;

  003ef	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  003f2	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  003f5	89 4d f8	 mov	 DWORD PTR _X$[ebp], ecx

; 132  : 	int Y = this->Teleport_Y;

  003f8	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  003fb	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  003fe	89 4d f4	 mov	 DWORD PTR _Y$[ebp], ecx

; 133  : 
; 134  : 	int result = gObjAddMonster(this->Teleport_Map);

  00401	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00404	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  00407	51		 push	 ecx
  00408	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  0040d	83 c4 04	 add	 esp, 4
  00410	0f bf d0	 movsx	 edx, ax
  00413	89 55 f0	 mov	 DWORD PTR _result$[ebp], edx

; 135  : 
; 136  : 	if(result >= 0 && result < OBJ_MAXMONSTER)

  00416	83 7d f0 00	 cmp	 DWORD PTR _result$[ebp], 0
  0041a	0f 8c f0 01 00
	00		 jl	 $LN1@EventStart
  00420	81 7d f0 c8 32
	00 00		 cmp	 DWORD PTR _result$[ebp], 13000 ; 000032c8H
  00427	0f 8d e3 01 00
	00		 jge	 $LN1@EventStart

; 137  : 	{
; 138  : 		gObj[result].m_PosNum = (WORD)-1;

  0042d	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00430	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00436	83 c9 ff	 or	 ecx, -1
  00439	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0043f	66 89 8c 02 b0
	03 00 00	 mov	 WORD PTR [edx+eax+944], cx

; 139  : 		gObj[result].MapNumber = this->Teleport_Map;

  00447	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  0044a	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00450	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00456	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00459	8a 52 0c	 mov	 dl, BYTE PTR [edx+12]
  0045c	88 94 01 49 01
	00 00		 mov	 BYTE PTR [ecx+eax+329], dl

; 140  : 		gObj[result].X = X;

  00463	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00466	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0046c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00472	66 8b 55 f8	 mov	 dx, WORD PTR _X$[ebp]
  00476	66 89 94 01 44
	01 00 00	 mov	 WORD PTR [ecx+eax+324], dx

; 141  : 		gObj[result].Y = Y;

  0047e	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00481	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00487	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0048d	66 8b 55 f4	 mov	 dx, WORD PTR _Y$[ebp]
  00491	66 89 94 01 46
	01 00 00	 mov	 WORD PTR [ecx+eax+326], dx

; 142  : 		gObj[result].TX = X;

  00499	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  0049c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004a2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004a8	66 8b 55 f8	 mov	 dx, WORD PTR _X$[ebp]
  004ac	66 89 94 01 7c
	01 00 00	 mov	 WORD PTR [ecx+eax+380], dx

; 143  : 		gObj[result].TY = Y;

  004b4	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  004b7	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004c3	66 8b 55 f4	 mov	 dx, WORD PTR _Y$[ebp]
  004c7	66 89 94 01 7e
	01 00 00	 mov	 WORD PTR [ecx+eax+382], dx

; 144  : 		gObj[result].m_OldX = X;

  004cf	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  004d2	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004d8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004de	66 8b 55 f8	 mov	 dx, WORD PTR _X$[ebp]
  004e2	66 89 94 01 78
	01 00 00	 mov	 WORD PTR [ecx+eax+376], dx

; 145  : 		gObj[result].m_OldY = Y;

  004ea	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  004ed	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004f3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004f9	66 8b 55 f4	 mov	 dx, WORD PTR _Y$[ebp]
  004fd	66 89 94 01 7a
	01 00 00	 mov	 WORD PTR [ecx+eax+378], dx

; 146  : 		gObj[result].StartX = X;

  00505	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00508	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0050e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00514	8a 55 f8	 mov	 dl, BYTE PTR _X$[ebp]
  00517	88 94 01 76 01
	00 00		 mov	 BYTE PTR [ecx+eax+374], dl

; 147  : 		gObj[result].StartY = Y;

  0051e	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00521	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00527	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0052d	8a 55 f4	 mov	 dl, BYTE PTR _Y$[ebp]
  00530	88 94 01 77 01
	00 00		 mov	 BYTE PTR [ecx+eax+375], dl

; 148  : 		gObj[result].MaxRegenTime = 0;

  00537	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  0053a	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00540	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00546	c7 84 01 ac 03
	00 00 00 00 00
	00		 mov	 DWORD PTR [ecx+eax+940], 0

; 149  : 		gObj[result].Dir = 3;//rand()%8;

  00551	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00554	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0055a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00560	c6 84 01 48 01
	00 00 03	 mov	 BYTE PTR [ecx+eax+328], 3

; 150  : 		gObj[result].RegenTime = GetTickCount();

  00568	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0056e	8b 4d f0	 mov	 ecx, DWORD PTR _result$[ebp]
  00571	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00577	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0057d	89 84 0a a8 03
	00 00		 mov	 DWORD PTR [edx+ecx+936], eax

; 151  : 
; 152  : 		gObj[result].m_ActState.Emotion       = 1;

  00584	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  00587	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0058d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00593	8b 94 01 18 02
	00 00		 mov	 edx, DWORD PTR [ecx+eax+536]
  0059a	81 e2 0f ff ff
	ff		 and	 edx, -241		; ffffff0fH
  005a0	83 ca 10	 or	 edx, 16			; 00000010H
  005a3	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  005a6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  005ac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005b2	89 94 01 18 02
	00 00		 mov	 DWORD PTR [ecx+eax+536], edx

; 153  : 		gObj[result].m_ActState.EmotionCount  = 15;

  005b9	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  005bc	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  005c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005c8	8b 94 01 18 02
	00 00		 mov	 edx, DWORD PTR [ecx+eax+536]
  005cf	81 e2 ff 00 ff
	ff		 and	 edx, -65281		; ffff00ffH
  005d5	81 ca 00 0f 00
	00		 or	 edx, 3840		; 00000f00H
  005db	8b 45 f0	 mov	 eax, DWORD PTR _result$[ebp]
  005de	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  005e4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005ea	89 94 01 18 02
	00 00		 mov	 DWORD PTR [ecx+eax+536], edx

; 154  : 
; 155  : 		gObjSetMonster(result,this->Teleport_NPC);

  005f1	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005f4	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  005f7	51		 push	 ecx
  005f8	8b 55 f0	 mov	 edx, DWORD PTR _result$[ebp]
  005fb	52		 push	 edx
  005fc	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  00601	83 c4 08	 add	 esp, 8

; 156  : 
; 157  : 		this->IndexNPC = result;

  00604	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00607	8b 4d f0	 mov	 ecx, DWORD PTR _result$[ebp]
  0060a	89 88 e0 00 00
	00		 mov	 DWORD PTR [eax+224], ecx
$LN1@EventStart:

; 158  : 	}
; 159  : 
; 160  : 	MessaageAllGlobal(this->MessageStart);

  00610	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00613	83 c0 18	 add	 eax, 24			; 00000018H
  00616	50		 push	 eax
  00617	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  0061c	83 c4 04	 add	 esp, 4

; 161  : 	this->Start = true;

  0061f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00622	c6 80 e8 00 00
	00 01		 mov	 BYTE PTR [eax+232], 1

; 162  : }

  00629	5f		 pop	 edi
  0062a	5e		 pop	 esi
  0062b	5b		 pop	 ebx
  0062c	8b e5		 mov	 esp, ebp
  0062e	5d		 pop	 ebp
  0062f	c3		 ret	 0
?EventStart@TeleportShop@@QAEXXZ ENDP			; TeleportShop::EventStart
_TEXT	ENDS
EXTRN	__time64:PROC
; Function compile flags: /Odtp /ZI
; File d:\microsoft visual studio 10.0\vc\include\time.inl
_TEXT	SEGMENT
__Time$ = 8						; size = 4
_time	PROC

; 132  : {

  00630	55		 push	 ebp
  00631	8b ec		 mov	 ebp, esp
  00633	83 ec 40	 sub	 esp, 64			; 00000040H
  00636	53		 push	 ebx
  00637	56		 push	 esi
  00638	57		 push	 edi

; 133  :     return _time64(_Time);

  00639	8b 45 08	 mov	 eax, DWORD PTR __Time$[ebp]
  0063c	50		 push	 eax
  0063d	e8 00 00 00 00	 call	 __time64
  00642	83 c4 04	 add	 esp, 4

; 134  : }

  00645	5f		 pop	 edi
  00646	5e		 pop	 esi
  00647	5b		 pop	 ebx
  00648	8b e5		 mov	 esp, ebp
  0064a	5d		 pop	 ebp
  0064b	c3		 ret	 0
_time	ENDP
_TEXT	ENDS
PUBLIC	?GC_CloseWindowShop@TeleportShop@@QAEXXZ	; TeleportShop::GC_CloseWindowShop
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\teleportshop.cpp
_TEXT	SEGMENT
_this$ = -4						; size = 4
?EventEnd@TeleportShop@@QAEXXZ PROC			; TeleportShop::EventEnd
; _this$ = ecx

; 166  : {

  00650	55		 push	 ebp
  00651	8b ec		 mov	 ebp, esp
  00653	83 ec 44	 sub	 esp, 68			; 00000044H
  00656	53		 push	 ebx
  00657	56		 push	 esi
  00658	57		 push	 edi
  00659	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 167  : 	this->Start = false;

  0065c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0065f	c6 80 e8 00 00
	00 00		 mov	 BYTE PTR [eax+232], 0

; 168  : 	this->Tick = 0;

  00666	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00669	c7 80 e4 00 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+228], 0

; 169  : 	if(this->IndexNPC >= 0)

  00673	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00676	83 b8 e0 00 00
	00 00		 cmp	 DWORD PTR [eax+224], 0
  0067d	7c 12		 jl	 SHORT $LN1@EventEnd

; 170  : 	{
; 171  : 		gObjDel(this->IndexNPC);

  0067f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00682	8b 88 e0 00 00
	00		 mov	 ecx, DWORD PTR [eax+224]
  00688	51		 push	 ecx
  00689	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  0068e	83 c4 04	 add	 esp, 4
$LN1@EventEnd:

; 172  : 	}
; 173  : 	this->IndexNPC = -1;

  00691	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00694	c7 80 e0 00 00
	00 ff ff ff ff	 mov	 DWORD PTR [eax+224], -1

; 174  : 	MessaageAllGlobal(this->MessageEnd);

  0069e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  006a1	83 c0 7c	 add	 eax, 124		; 0000007cH
  006a4	50		 push	 eax
  006a5	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  006aa	83 c4 04	 add	 esp, 4

; 175  : 	this->GC_CloseWindowShop();

  006ad	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  006b0	e8 00 00 00 00	 call	 ?GC_CloseWindowShop@TeleportShop@@QAEXXZ ; TeleportShop::GC_CloseWindowShop

; 176  : }

  006b5	5f		 pop	 edi
  006b6	5e		 pop	 esi
  006b7	5b		 pop	 ebx
  006b8	8b e5		 mov	 esp, ebp
  006ba	5d		 pop	 ebp
  006bb	c3		 ret	 0
?EventEnd@TeleportShop@@QAEXXZ ENDP			; TeleportShop::EventEnd
_TEXT	ENDS
PUBLIC	?set@PBMSG_HEAD2@@QAEXPAEEEE@Z			; PBMSG_HEAD2::set
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_rSend$219375 = -20					; size = 5
_lpSearch$219372 = -12					; size = 4
_n$219368 = -8						; size = 4
_this$ = -4						; size = 4
?GC_CloseWindowShop@TeleportShop@@QAEXXZ PROC		; TeleportShop::GC_CloseWindowShop
; _this$ = ecx

; 180  : {

  006c0	55		 push	 ebp
  006c1	8b ec		 mov	 ebp, esp
  006c3	83 ec 54	 sub	 esp, 84			; 00000054H
  006c6	53		 push	 ebx
  006c7	56		 push	 esi
  006c8	57		 push	 edi
  006c9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 181  : 	for(int n=OBJ_STARTUSERINDEX;n<OBJMAX;n++)

  006cc	c7 45 f8 b0 36
	00 00		 mov	 DWORD PTR _n$219368[ebp], 14000 ; 000036b0H
  006d3	eb 09		 jmp	 SHORT $LN5@GC_CloseWi
$LN4@GC_CloseWi:
  006d5	8b 45 f8	 mov	 eax, DWORD PTR _n$219368[ebp]
  006d8	83 c0 01	 add	 eax, 1
  006db	89 45 f8	 mov	 DWORD PTR _n$219368[ebp], eax
$LN5@GC_CloseWi:
  006de	81 7d f8 98 3a
	00 00		 cmp	 DWORD PTR _n$219368[ebp], 15000 ; 00003a98H
  006e5	7d 6b		 jge	 SHORT $LN6@GC_CloseWi

; 182  : 	{
; 183  : 		LPOBJ lpSearch = &gObj[n];

  006e7	8b 45 f8	 mov	 eax, DWORD PTR _n$219368[ebp]
  006ea	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  006f0	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006f6	89 45 f4	 mov	 DWORD PTR _lpSearch$219372[ebp], eax

; 184  : 		if(lpSearch->Connected < PLAYER_PLAYING) 

  006f9	8b 45 f4	 mov	 eax, DWORD PTR _lpSearch$219372[ebp]
  006fc	83 78 04 03	 cmp	 DWORD PTR [eax+4], 3
  00700	7d 02		 jge	 SHORT $LN2@GC_CloseWi

; 185  : 		{
; 186  : 			continue;

  00702	eb d1		 jmp	 SHORT $LN4@GC_CloseWi
$LN2@GC_CloseWi:

; 187  : 		}
; 188  : 		if(lpSearch->NPC == this->Teleport_NPC)

  00704	8b 45 f4	 mov	 eax, DWORD PTR _lpSearch$219372[ebp]
  00707	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0070a	8b 90 a4 22 00
	00		 mov	 edx, DWORD PTR [eax+8868]
  00710	3b 51 08	 cmp	 edx, DWORD PTR [ecx+8]
  00713	75 3b		 jne	 SHORT $LN1@GC_CloseWi

; 189  : 		{
; 190  : 			// -> GC Close Wingosw packet 21
; 191  : 			GC_SHOP_CLOSE rSend;
; 192  : 			ZeroMemory(&rSend,sizeof(rSend));

  00715	6a 05		 push	 5
  00717	6a 00		 push	 0
  00719	8d 45 ec	 lea	 eax, DWORD PTR _rSend$219375[ebp]
  0071c	50		 push	 eax
  0071d	e8 00 00 00 00	 call	 _memset
  00722	83 c4 0c	 add	 esp, 12			; 0000000cH

; 193  : 			rSend.h.set((LPBYTE)&rSend, 0xFB, 21, sizeof(rSend));

  00725	6a 05		 push	 5
  00727	6a 15		 push	 21			; 00000015H
  00729	68 fb 00 00 00	 push	 251			; 000000fbH
  0072e	8d 45 ec	 lea	 eax, DWORD PTR _rSend$219375[ebp]
  00731	50		 push	 eax
  00732	8d 4d ec	 lea	 ecx, DWORD PTR _rSend$219375[ebp]
  00735	e8 00 00 00 00	 call	 ?set@PBMSG_HEAD2@@QAEXPAEEEE@Z ; PBMSG_HEAD2::set

; 194  : 			rSend.Close = 1;

  0073a	c6 45 f0 01	 mov	 BYTE PTR _rSend$219375[ebp+4], 1

; 195  : 			DataSend(n,(LPBYTE)&rSend,sizeof(rSend));

  0073e	6a 05		 push	 5
  00740	8d 45 ec	 lea	 eax, DWORD PTR _rSend$219375[ebp]
  00743	50		 push	 eax
  00744	8b 4d f8	 mov	 ecx, DWORD PTR _n$219368[ebp]
  00747	51		 push	 ecx
  00748	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0074d	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@GC_CloseWi:

; 196  : 		}
; 197  : 	}

  00750	eb 83		 jmp	 SHORT $LN4@GC_CloseWi
$LN6@GC_CloseWi:

; 198  : }

  00752	5f		 pop	 edi
  00753	5e		 pop	 esi
  00754	5b		 pop	 ebx
  00755	8b e5		 mov	 esp, ebp
  00757	5d		 pop	 ebp
  00758	c3		 ret	 0
?GC_CloseWindowShop@TeleportShop@@QAEXXZ ENDP		; TeleportShop::GC_CloseWindowShop
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\include\prodef.h
_TEXT	ENDS
;	COMDAT ?set@PBMSG_HEAD2@@QAEXPAEEEE@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_sub$ = 16						; size = 1
_size$ = 20						; size = 1
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z PROC			; PBMSG_HEAD2::set, COMDAT
; _this$ = ecx

; 104  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 105  : 		lpBuf[0] = 0xC1;

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  0000f	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H

; 106  : 		lpBuf[1] = size;

  00012	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  00015	8a 4d 14	 mov	 cl, BYTE PTR _size$[ebp]
  00018	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 107  : 		lpBuf[2] = head;

  0001b	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  0001e	8a 4d 0c	 mov	 cl, BYTE PTR _head$[ebp]
  00021	88 48 02	 mov	 BYTE PTR [eax+2], cl

; 108  : 		lpBuf[3] = sub;

  00024	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]
  00027	8a 4d 10	 mov	 cl, BYTE PTR _sub$[ebp]
  0002a	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 109  : 	};

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c2 10 00	 ret	 16			; 00000010H
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z ENDP			; PBMSG_HEAD2::set
_TEXT	ENDS
END
