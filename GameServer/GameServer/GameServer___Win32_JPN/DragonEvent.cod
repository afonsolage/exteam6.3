; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\DragonEvent.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?Init@CDragonEvent@@QAEXXZ			; CDragonEvent::Init
PUBLIC	??_7CDragonEvent@@6B@				; CDragonEvent::`vftable'
PUBLIC	??0CDragonEvent@@QAE@XZ				; CDragonEvent::CDragonEvent
PUBLIC	??_R4CDragonEvent@@6B@				; CDragonEvent::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCDragonEvent@@@8			; CDragonEvent `RTTI Type Descriptor'
PUBLIC	??_R3CDragonEvent@@8				; CDragonEvent::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CDragonEvent@@8				; CDragonEvent::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CDragonEvent@@8			; CDragonEvent::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECDragonEvent@@UAEPAXI@Z:PROC		; CDragonEvent::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CDragonEvent@@8
; File d:\projects\exteam6.3\source\gameserver\gameserver\dragonevent.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CDragonEvent@@8 DD FLAT:??_R0?AVCDragonEvent@@@8 ; CDragonEvent::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CDragonEvent@@8
rdata$r	ENDS
;	COMDAT ??_R2CDragonEvent@@8
rdata$r	SEGMENT
??_R2CDragonEvent@@8 DD FLAT:??_R1A@?0A@EA@CDragonEvent@@8 ; CDragonEvent::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CDragonEvent@@8
rdata$r	SEGMENT
??_R3CDragonEvent@@8 DD 00H				; CDragonEvent::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CDragonEvent@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCDragonEvent@@@8
_DATA	SEGMENT
??_R0?AVCDragonEvent@@@8 DD FLAT:??_7type_info@@6B@	; CDragonEvent `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCDragonEvent@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CDragonEvent@@6B@
rdata$r	SEGMENT
??_R4CDragonEvent@@6B@ DD 00H				; CDragonEvent::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCDragonEvent@@@8
	DD	FLAT:??_R3CDragonEvent@@8
rdata$r	ENDS
;	COMDAT ??_7CDragonEvent@@6B@
CONST	SEGMENT
??_7CDragonEvent@@6B@ DD FLAT:??_R4CDragonEvent@@6B@	; CDragonEvent::`vftable'
	DD	FLAT:??_ECDragonEvent@@UAEPAXI@Z
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CDragonEvent@@QAE@XZ PROC				; CDragonEvent::CDragonEvent
; _this$ = ecx

; 9    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CDragonEvent@@6B@

; 10   : 	this->Init();

  00015	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00018	e8 00 00 00 00	 call	 ?Init@CDragonEvent@@QAEXXZ ; CDragonEvent::Init

; 11   : }

  0001d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??0CDragonEvent@@QAE@XZ ENDP				; CDragonEvent::CDragonEvent
_TEXT	ENDS
PUBLIC	??1CDragonEvent@@UAE@XZ				; CDragonEvent::~CDragonEvent
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCDragonEvent@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCDragonEvent@@UAEPAXI@Z PROC			; CDragonEvent::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CDragonEvent@@UAE@XZ	; CDragonEvent::~CDragonEvent
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0c		 je	 SHORT $LN1@scalar
  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	50		 push	 eax
  00020	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00025	83 c4 04	 add	 esp, 4
$LN1@scalar:
  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	5f		 pop	 edi
  0002c	5e		 pop	 esi
  0002d	5b		 pop	 ebx
  0002e	8b e5		 mov	 esp, ebp
  00030	5d		 pop	 ebp
  00031	c2 04 00	 ret	 4
??_GCDragonEvent@@UAEPAXI@Z ENDP			; CDragonEvent::`scalar deleting destructor'
; Function compile flags: /Odtp /ZI
_TEXT	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CDragonEvent@@UAE@XZ PROC				; CDragonEvent::~CDragonEvent
; _this$ = ecx

; 14   : {

  00030	55		 push	 ebp
  00031	8b ec		 mov	 ebp, esp
  00033	83 ec 44	 sub	 esp, 68			; 00000044H
  00036	53		 push	 ebx
  00037	56		 push	 esi
  00038	57		 push	 edi
  00039	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CDragonEvent@@6B@

; 15   : 	return;
; 16   : }

  00045	5f		 pop	 edi
  00046	5e		 pop	 esi
  00047	5b		 pop	 ebx
  00048	8b e5		 mov	 esp, ebp
  0004a	5d		 pop	 ebp
  0004b	c3		 ret	 0
??1CDragonEvent@@UAE@XZ ENDP				; CDragonEvent::~CDragonEvent
; Function compile flags: /Odtp /ZI
_this$ = -4						; size = 4
?Init@CDragonEvent@@QAEXXZ PROC				; CDragonEvent::Init
; _this$ = ecx

; 19   : {

  00050	55		 push	 ebp
  00051	8b ec		 mov	 ebp, esp
  00053	83 ec 44	 sub	 esp, 68			; 00000044H
  00056	53		 push	 ebx
  00057	56		 push	 esi
  00058	57		 push	 edi
  00059	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 20   : 	this->EventState=0;

  0005c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0005f	c6 40 04 00	 mov	 BYTE PTR [eax+4], 0

; 21   : 	this->EventStartTime =0;

  00063	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00066	c7 40 08 00 00
	00 00		 mov	 DWORD PTR [eax+8], 0

; 22   : 	this->m_MapNumber =0;

  0006d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00070	c6 40 0c 00	 mov	 BYTE PTR [eax+12], 0

; 23   : 	this->m_bMenualStart =0;

  00074	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00077	c7 40 10 00 00
	00 00		 mov	 DWORD PTR [eax+16], 0

; 24   : }

  0007e	5f		 pop	 edi
  0007f	5e		 pop	 esi
  00080	5b		 pop	 ebx
  00081	8b e5		 mov	 esp, ebp
  00083	5d		 pop	 ebp
  00084	c3		 ret	 0
?Init@CDragonEvent@@QAEXXZ ENDP				; CDragonEvent::Init
_TEXT	ENDS
PUBLIC	??_C@_03PGMJMGNM@?5?$KB?Y?$AA@			; `string'
PUBLIC	??_C@_03DMLAHEJO@?$KB?Y?5?$AA@			; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Start@CDragonEvent@@QAEXXZ			; CDragonEvent::Start
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?AllSendServerMsg@@YAXPAD@Z:PROC		; AllSendServerMsg
EXTRN	_strcat:PROC
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	_strcpy:PROC
EXTRN	_rand:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_03PGMJMGNM@?5?$KB?Y?$AA@
CONST	SEGMENT
??_C@_03PGMJMGNM@?5?$KB?Y?$AA@ DB ' ', 0a1H, 0d9H, 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_03DMLAHEJO@?$KB?Y?5?$AA@
CONST	SEGMENT
??_C@_03DMLAHEJO@?$KB?Y?5?$AA@ DB 0a1H, 0d9H, ' ', 00H	; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv78 = -336						; size = 4
_map$ = -268						; size = 3
_szTemp$ = -264						; size = 256
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?Start@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::Start
; _this$ = ecx

; 27   : {

  00090	55		 push	 ebp
  00091	8b ec		 mov	 ebp, esp
  00093	81 ec 50 01 00
	00		 sub	 esp, 336		; 00000150H
  00099	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0009e	33 c5		 xor	 eax, ebp
  000a0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  000a3	53		 push	 ebx
  000a4	56		 push	 esi
  000a5	57		 push	 edi
  000a6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 28   : 	char szTemp[256];
; 29   : 	char map[3];
; 30   : 
; 31   : 	if ( this->EventState != 0 )

  000a9	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000ac	0f b6 48 04	 movzx	 ecx, BYTE PTR [eax+4]
  000b0	85 c9		 test	 ecx, ecx
  000b2	74 05		 je	 SHORT $LN6@Start

; 32   : 	{
; 33   : 		return;

  000b4	e9 30 01 00 00	 jmp	 $LN7@Start
$LN6@Start:

; 34   : 	}
; 35   : 
; 36   : 	this->Init();

  000b9	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  000bc	e8 00 00 00 00	 call	 ?Init@CDragonEvent@@QAEXXZ ; CDragonEvent::Init

; 37   : 
; 38   : 	//map[0]=MAP_INDEX_RORENCIA;
; 39   : 	//map[1]=MAP_INDEX_DEVIAS;
; 40   : 	//map[2]=MAP_INDEX_NORIA;
; 41   : 
; 42   : 	//season4.5 new
; 43   : 	map[0]=MAP_INDEX_NORIA;

  000c1	c6 85 f4 fe ff
	ff 03		 mov	 BYTE PTR _map$[ebp], 3

; 44   : 	map[1]=MAP_INDEX_RORENCIA;

  000c8	c6 85 f5 fe ff
	ff 00		 mov	 BYTE PTR _map$[ebp+1], 0

; 45   : 
; 46   : 	this->EventState = 1;

  000cf	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000d2	c6 40 04 01	 mov	 BYTE PTR [eax+4], 1

; 47   : 	this->m_MapNumber  = map [ rand()%2 ]; //season4.5 changed

  000d6	e8 00 00 00 00	 call	 _rand
  000db	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000e0	79 05		 jns	 SHORT $LN9@Start
  000e2	48		 dec	 eax
  000e3	83 c8 fe	 or	 eax, -2			; fffffffeH
  000e6	40		 inc	 eax
$LN9@Start:
  000e7	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  000ea	8a 94 05 f4 fe
	ff ff		 mov	 dl, BYTE PTR _map$[ebp+eax]
  000f1	88 51 0c	 mov	 BYTE PTR [ecx+12], dl

; 48   : 
; 49   : 	strcpy(szTemp, "¡Ù ");

  000f4	68 00 00 00 00	 push	 OFFSET ??_C@_03DMLAHEJO@?$KB?Y?5?$AA@
  000f9	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  000ff	50		 push	 eax
  00100	e8 00 00 00 00	 call	 _strcpy
  00105	83 c4 08	 add	 esp, 8

; 50   : 
; 51   : 	switch ( this->m_MapNumber  )

  00108	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0010b	8a 48 0c	 mov	 cl, BYTE PTR [eax+12]
  0010e	88 8d b0 fe ff
	ff		 mov	 BYTE PTR tv78[ebp], cl
  00114	80 bd b0 fe ff
	ff 00		 cmp	 BYTE PTR tv78[ebp], 0
  0011b	74 14		 je	 SHORT $LN3@Start
  0011d	80 bd b0 fe ff
	ff 02		 cmp	 BYTE PTR tv78[ebp], 2
  00124	74 2c		 je	 SHORT $LN2@Start
  00126	80 bd b0 fe ff
	ff 03		 cmp	 BYTE PTR tv78[ebp], 3
  0012d	74 44		 je	 SHORT $LN1@Start
  0012f	eb 61		 jmp	 SHORT $LN4@Start
$LN3@Start:

; 52   : 	{
; 53   : 		case MAP_INDEX_RORENCIA:
; 54   : 			strcat(szTemp, lMsg.Get(MSGGET(7, 208)) );

  00131	68 d0 07 00 00	 push	 2000			; 000007d0H
  00136	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0013b	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00140	50		 push	 eax
  00141	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  00147	50		 push	 eax
  00148	e8 00 00 00 00	 call	 _strcat
  0014d	83 c4 08	 add	 esp, 8

; 55   : 			break;

  00150	eb 40		 jmp	 SHORT $LN4@Start
$LN2@Start:

; 56   : 
; 57   : 		case MAP_INDEX_DEVIAS:
; 58   : 			strcat(szTemp, lMsg.Get(MSGGET(7, 210)) );

  00152	68 d2 07 00 00	 push	 2002			; 000007d2H
  00157	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0015c	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00161	50		 push	 eax
  00162	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  00168	50		 push	 eax
  00169	e8 00 00 00 00	 call	 _strcat
  0016e	83 c4 08	 add	 esp, 8

; 59   : 			break;

  00171	eb 1f		 jmp	 SHORT $LN4@Start
$LN1@Start:

; 60   : 
; 61   : 		case MAP_INDEX_NORIA:
; 62   : 			strcat(szTemp, lMsg.Get(MSGGET(7, 211)) );

  00173	68 d3 07 00 00	 push	 2003			; 000007d3H
  00178	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0017d	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00182	50		 push	 eax
  00183	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  00189	50		 push	 eax
  0018a	e8 00 00 00 00	 call	 _strcat
  0018f	83 c4 08	 add	 esp, 8
$LN4@Start:

; 63   : 			break;
; 64   : 
; 65   : 	}
; 66   : 	
; 67   : 	strcat(szTemp, lMsg.Get(MSGGET(4, 132)) );

  00192	68 84 04 00 00	 push	 1156			; 00000484H
  00197	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0019c	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001a1	50		 push	 eax
  001a2	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  001a8	50		 push	 eax
  001a9	e8 00 00 00 00	 call	 _strcat
  001ae	83 c4 08	 add	 esp, 8

; 68   : 	strcat(szTemp, " ¡Ù");

  001b1	68 00 00 00 00	 push	 OFFSET ??_C@_03PGMJMGNM@?5?$KB?Y?$AA@
  001b6	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$[ebp]
  001bc	50		 push	 eax
  001bd	e8 00 00 00 00	 call	 _strcat
  001c2	83 c4 08	 add	 esp, 8

; 69   : 
; 70   : 	AllSendServerMsg(lMsg.Get(MSGGET(4, 132)));

  001c5	68 84 04 00 00	 push	 1156			; 00000484H
  001ca	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  001cf	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  001d4	50		 push	 eax
  001d5	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  001da	83 c4 04	 add	 esp, 4

; 71   : 	this->EventStartTime  = GetTickCount();

  001dd	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  001e3	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  001e6	89 41 08	 mov	 DWORD PTR [ecx+8], eax
$LN7@Start:

; 72   : }	

  001e9	5f		 pop	 edi
  001ea	5e		 pop	 esi
  001eb	5b		 pop	 ebx
  001ec	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001ef	33 cd		 xor	 ecx, ebp
  001f1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001f6	8b e5		 mov	 esp, ebp
  001f8	5d		 pop	 ebp
  001f9	c3		 ret	 0
?Start@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::Start
_TEXT	ENDS
PUBLIC	??_C@_0M@JPEAEJLO@Event?51?5End?$AA@		; `string'
PUBLIC	?End@CDragonEvent@@QAEXXZ			; CDragonEvent::End
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?GCMapEventStateSend@@YAXHEE@Z:PROC		; GCMapEventStateSend
;	COMDAT ??_C@_0M@JPEAEJLO@Event?51?5End?$AA@
CONST	SEGMENT
??_C@_0M@JPEAEJLO@Event?51?5End?$AA@ DB 'Event 1 End', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?End@CDragonEvent@@QAEXXZ PROC				; CDragonEvent::End
; _this$ = ecx

; 75   : {

  00200	55		 push	 ebp
  00201	8b ec		 mov	 ebp, esp
  00203	83 ec 44	 sub	 esp, 68			; 00000044H
  00206	53		 push	 ebx
  00207	56		 push	 esi
  00208	57		 push	 edi
  00209	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 76   : 	GCMapEventStateSend(this->m_MapNumber, 0, 1 );

  0020c	6a 01		 push	 1
  0020e	6a 00		 push	 0
  00210	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00213	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  00217	51		 push	 ecx
  00218	e8 00 00 00 00	 call	 ?GCMapEventStateSend@@YAXHEE@Z ; GCMapEventStateSend
  0021d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 77   : 	LogAdd("Event 1 End");

  00220	68 00 00 00 00	 push	 OFFSET ??_C@_0M@JPEAEJLO@Event?51?5End?$AA@
  00225	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0022b	83 c4 04	 add	 esp, 4

; 78   : 	this->EventState=0;

  0022e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00231	c6 40 04 00	 mov	 BYTE PTR [eax+4], 0

; 79   : }

  00235	5f		 pop	 edi
  00236	5e		 pop	 esi
  00237	5b		 pop	 ebx
  00238	8b e5		 mov	 esp, ebp
  0023a	5d		 pop	 ebp
  0023b	c3		 ret	 0
?End@CDragonEvent@@QAEXXZ ENDP				; CDragonEvent::End
_TEXT	ENDS
PUBLIC	?DragonActive@CDragonEvent@@QAEXXZ		; CDragonEvent::DragonActive
EXTRN	?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z:PROC ; CMonsterSetBase::GetBoxPosition
EXTRN	?gMSetBase@@3VCMonsterSetBase@@A:BYTE		; gMSetBase
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv80 = -76						; size = 4
_n$227027 = -8						; size = 4
_this$ = -4						; size = 4
?DragonActive@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::DragonActive
; _this$ = ecx

; 82   : {

  00240	55		 push	 ebp
  00241	8b ec		 mov	 ebp, esp
  00243	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00246	53		 push	 ebx
  00247	56		 push	 esi
  00248	57		 push	 edi
  00249	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 83   : 	for ( int n = 0; n<OBJ_MAXMONSTER ; n++)

  0024c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _n$227027[ebp], 0
  00253	eb 09		 jmp	 SHORT $LN17@DragonActi
$LN16@DragonActi:
  00255	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00258	83 c0 01	 add	 eax, 1
  0025b	89 45 f8	 mov	 DWORD PTR _n$227027[ebp], eax
$LN17@DragonActi:
  0025e	81 7d f8 c8 32
	00 00		 cmp	 DWORD PTR _n$227027[ebp], 13000 ; 000032c8H
  00265	0f 8d 1e 03 00
	00		 jge	 $LN18@DragonActi

; 84   : 	{
; 85   : 		if ( gObj[n].Class == 44 )

  0026b	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  0026e	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00274	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0027a	0f b7 94 01 b8
	00 00 00	 movzx	 edx, WORD PTR [ecx+eax+184]
  00282	83 fa 2c	 cmp	 edx, 44			; 0000002cH
  00285	0f 85 f9 02 00
	00		 jne	 $LN14@DragonActi

; 86   : 		{
; 87   : 			gObj[n].Live = TRUE;

  0028b	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  0028e	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00294	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0029a	c6 44 01 6a 01	 mov	 BYTE PTR [ecx+eax+106], 1

; 88   : 			gObj[n].MapNumber = this->m_MapNumber;

  0029f	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  002a2	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  002a8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002ae	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  002b1	8a 52 0c	 mov	 dl, BYTE PTR [edx+12]
  002b4	88 94 01 49 01
	00 00		 mov	 BYTE PTR [ecx+eax+329], dl

; 89   : 
; 90   : 			switch ( this->m_MapNumber )

  002bb	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  002be	8a 48 0c	 mov	 cl, BYTE PTR [eax+12]
  002c1	88 4d b4	 mov	 BYTE PTR tv80[ebp], cl
  002c4	80 7d b4 00	 cmp	 BYTE PTR tv80[ebp], 0
  002c8	74 19		 je	 SHORT $LN11@DragonActi
  002ca	80 7d b4 02	 cmp	 BYTE PTR tv80[ebp], 2
  002ce	0f 84 25 01 00
	00		 je	 $LN6@DragonActi
  002d4	80 7d b4 03	 cmp	 BYTE PTR tv80[ebp], 3
  002d8	0f 84 d3 01 00
	00		 je	 $LN3@DragonActi
  002de	e9 87 02 00 00	 jmp	 $LN12@DragonActi
$LN11@DragonActi:

; 91   : 			{
; 92   : 				case MAP_INDEX_RORENCIA:
; 93   : 					if ( (rand()%3) == 0 )

  002e3	e8 00 00 00 00	 call	 _rand
  002e8	99		 cdq
  002e9	b9 03 00 00 00	 mov	 ecx, 3
  002ee	f7 f9		 idiv	 ecx
  002f0	85 d2		 test	 edx, edx
  002f2	75 53		 jne	 SHORT $LN10@DragonActi

; 94   : 					{
; 95   : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 135, 61, 146, 70, gObj[n].X, gObj[n].Y);

  002f4	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  002f7	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  002fd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00303	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  0030a	52		 push	 edx
  0030b	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  0030e	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00314	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0031a	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  00321	52		 push	 edx
  00322	6a 46		 push	 70			; 00000046H
  00324	68 92 00 00 00	 push	 146			; 00000092H
  00329	6a 3d		 push	 61			; 0000003dH
  0032b	68 87 00 00 00	 push	 135			; 00000087H
  00330	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00333	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  00337	51		 push	 ecx
  00338	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  0033d	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
  00342	e9 ad 00 00 00	 jmp	 $LN9@DragonActi
$LN10@DragonActi:

; 96   : 					}
; 97   : 					else if ( (rand()%3) == 1 )

  00347	e8 00 00 00 00	 call	 _rand
  0034c	99		 cdq
  0034d	b9 03 00 00 00	 mov	 ecx, 3
  00352	f7 f9		 idiv	 ecx
  00354	83 fa 01	 cmp	 edx, 1
  00357	75 50		 jne	 SHORT $LN8@DragonActi

; 98   : 					{
; 99   : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 120, 204, 126, 219, gObj[n].X, gObj[n].Y);

  00359	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  0035c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00362	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00368	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  0036f	52		 push	 edx
  00370	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00373	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00379	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0037f	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  00386	52		 push	 edx
  00387	68 db 00 00 00	 push	 219			; 000000dbH
  0038c	6a 7e		 push	 126			; 0000007eH
  0038e	68 cc 00 00 00	 push	 204			; 000000ccH
  00393	6a 78		 push	 120			; 00000078H
  00395	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00398	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  0039c	51		 push	 ecx
  0039d	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  003a2	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition

; 100  : 					}
; 101  : 					else

  003a7	eb 4b		 jmp	 SHORT $LN9@DragonActi
$LN8@DragonActi:

; 102  : 					{
; 103  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 67, 116, 77, 131, gObj[n].X, gObj[n].Y);

  003a9	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  003ac	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  003b2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003b8	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  003bf	52		 push	 edx
  003c0	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  003c3	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  003c9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003cf	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  003d6	52		 push	 edx
  003d7	68 83 00 00 00	 push	 131			; 00000083H
  003dc	6a 4d		 push	 77			; 0000004dH
  003de	6a 74		 push	 116			; 00000074H
  003e0	6a 43		 push	 67			; 00000043H
  003e2	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  003e5	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  003e9	51		 push	 ecx
  003ea	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  003ef	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
$LN9@DragonActi:

; 104  : 					}
; 105  : 
; 106  : 					break;

  003f4	e9 71 01 00 00	 jmp	 $LN12@DragonActi
$LN6@DragonActi:

; 107  : 
; 108  : 				case MAP_INDEX_DEVIAS:
; 109  : 					
; 110  : 					if ( (rand()%2) == 0 )

  003f9	e8 00 00 00 00	 call	 _rand
  003fe	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00403	79 05		 jns	 SHORT $LN20@DragonActi
  00405	48		 dec	 eax
  00406	83 c8 fe	 or	 eax, -2			; fffffffeH
  00409	40		 inc	 eax
$LN20@DragonActi:
  0040a	85 c0		 test	 eax, eax
  0040c	75 50		 jne	 SHORT $LN5@DragonActi

; 111  : 					{
; 112  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 155, 16, 169, 55, gObj[n].X, gObj[n].Y);

  0040e	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00411	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00417	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0041d	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  00424	52		 push	 edx
  00425	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00428	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0042e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00434	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  0043b	52		 push	 edx
  0043c	6a 37		 push	 55			; 00000037H
  0043e	68 a9 00 00 00	 push	 169			; 000000a9H
  00443	6a 10		 push	 16			; 00000010H
  00445	68 9b 00 00 00	 push	 155			; 0000009bH
  0044a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0044d	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  00451	51		 push	 ecx
  00452	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  00457	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition

; 113  : 					}
; 114  : 					else

  0045c	eb 4e		 jmp	 SHORT $LN4@DragonActi
$LN5@DragonActi:

; 115  : 					{
; 116  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 193, 110, 232, 126, gObj[n].X, gObj[n].Y);

  0045e	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00461	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00467	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0046d	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  00474	52		 push	 edx
  00475	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00478	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0047e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00484	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  0048b	52		 push	 edx
  0048c	6a 7e		 push	 126			; 0000007eH
  0048e	68 e8 00 00 00	 push	 232			; 000000e8H
  00493	6a 6e		 push	 110			; 0000006eH
  00495	68 c1 00 00 00	 push	 193			; 000000c1H
  0049a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0049d	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  004a1	51		 push	 ecx
  004a2	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  004a7	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
$LN4@DragonActi:

; 117  : 					}
; 118  : 
; 119  : 					break;

  004ac	e9 b9 00 00 00	 jmp	 $LN12@DragonActi
$LN3@DragonActi:

; 120  : 
; 121  : 				case MAP_INDEX_NORIA:
; 122  : 
; 123  : 					if ( (rand()%2) == 0 )

  004b1	e8 00 00 00 00	 call	 _rand
  004b6	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  004bb	79 05		 jns	 SHORT $LN21@DragonActi
  004bd	48		 dec	 eax
  004be	83 c8 fe	 or	 eax, -2			; fffffffeH
  004c1	40		 inc	 eax
$LN21@DragonActi:
  004c2	85 c0		 test	 eax, eax
  004c4	75 56		 jne	 SHORT $LN2@DragonActi

; 124  : 					{
; 125  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 198, 161, 223, 175, gObj[n].X, gObj[n].Y);

  004c6	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  004c9	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004cf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004d5	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  004dc	52		 push	 edx
  004dd	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  004e0	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  004e6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004ec	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  004f3	52		 push	 edx
  004f4	68 af 00 00 00	 push	 175			; 000000afH
  004f9	68 df 00 00 00	 push	 223			; 000000dfH
  004fe	68 a1 00 00 00	 push	 161			; 000000a1H
  00503	68 c6 00 00 00	 push	 198			; 000000c6H
  00508	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0050b	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  0050f	51		 push	 ecx
  00510	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  00515	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition

; 126  : 					}
; 127  : 					else

  0051a	eb 4e		 jmp	 SHORT $LN12@DragonActi
$LN2@DragonActi:

; 128  : 					{
; 129  : 						gMSetBase.GetBoxPosition(this->m_MapNumber, 136, 50, 164, 59, gObj[n].X, gObj[n].Y);

  0051c	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  0051f	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00525	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0052b	8d 94 01 46 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+326]
  00532	52		 push	 edx
  00533	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  00536	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0053c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00542	8d 94 01 44 01
	00 00		 lea	 edx, DWORD PTR [ecx+eax+324]
  00549	52		 push	 edx
  0054a	6a 3b		 push	 59			; 0000003bH
  0054c	68 a4 00 00 00	 push	 164			; 000000a4H
  00551	6a 32		 push	 50			; 00000032H
  00553	68 88 00 00 00	 push	 136			; 00000088H
  00558	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0055b	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  0055f	51		 push	 ecx
  00560	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  00565	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
$LN12@DragonActi:

; 130  : 					}
; 131  : 
; 132  : 					break;
; 133  : 			}
; 134  : 
; 135  : 			gObj[n].m_State = 1;

  0056a	8b 45 f8	 mov	 eax, DWORD PTR _n$227027[ebp]
  0056d	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00573	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00579	c7 84 01 20 02
	00 00 01 00 00
	00		 mov	 DWORD PTR [ecx+eax+544], 1
$LN14@DragonActi:

; 136  : 		}
; 137  : 	}

  00584	e9 cc fc ff ff	 jmp	 $LN16@DragonActi
$LN18@DragonActi:

; 138  : }

  00589	5f		 pop	 edi
  0058a	5e		 pop	 esi
  0058b	5b		 pop	 ebx
  0058c	8b e5		 mov	 esp, ebp
  0058e	5d		 pop	 ebp
  0058f	c3		 ret	 0
?DragonActive@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::DragonActive
_TEXT	ENDS
PUBLIC	??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@		; `string'
PUBLIC	?Run@CDragonEvent@@QAEXXZ			; CDragonEvent::Run
;	COMDAT ??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@
CONST	SEGMENT
??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@ DB 'Event Start 1', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Run@CDragonEvent@@QAEXXZ PROC				; CDragonEvent::Run
; _this$ = ecx

; 141  : {

  00590	55		 push	 ebp
  00591	8b ec		 mov	 ebp, esp
  00593	83 ec 44	 sub	 esp, 68			; 00000044H
  00596	53		 push	 ebx
  00597	56		 push	 esi
  00598	57		 push	 edi
  00599	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 142  : 	if ( this->m_bMenualStart != FALSE )

  0059c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0059f	83 78 10 00	 cmp	 DWORD PTR [eax+16], 0
  005a3	74 05		 je	 SHORT $LN7@Run

; 143  : 	{
; 144  : 		return;

  005a5	e9 97 00 00 00	 jmp	 $LN8@Run
$LN7@Run:

; 145  : 	}
; 146  : 
; 147  : 	if ( this->EventState == 0 )

  005aa	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005ad	0f b6 48 04	 movzx	 ecx, BYTE PTR [eax+4]
  005b1	85 c9		 test	 ecx, ecx
  005b3	75 05		 jne	 SHORT $LN6@Run

; 148  : 	{
; 149  : 		return;

  005b5	e9 87 00 00 00	 jmp	 $LN8@Run
$LN6@Run:

; 150  : 	}
; 151  : 
; 152  : 	if ( this->EventState == 1 )

  005ba	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005bd	0f b6 48 04	 movzx	 ecx, BYTE PTR [eax+4]
  005c1	83 f9 01	 cmp	 ecx, 1
  005c4	75 54		 jne	 SHORT $LN5@Run

; 153  : 	{
; 154  : 		if ( ( GetTickCount() - this->EventStartTime ) > 3000 )

  005c6	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  005cc	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  005cf	2b 41 08	 sub	 eax, DWORD PTR [ecx+8]
  005d2	3d b8 0b 00 00	 cmp	 eax, 3000		; 00000bb8H
  005d7	76 3f		 jbe	 SHORT $LN4@Run

; 155  : 		{
; 156  : 			this->EventState = 2;

  005d9	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005dc	c6 40 04 02	 mov	 BYTE PTR [eax+4], 2

; 157  : 			GCMapEventStateSend(this->m_MapNumber , 1, 1 );

  005e0	6a 01		 push	 1
  005e2	6a 01		 push	 1
  005e4	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005e7	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  005eb	51		 push	 ecx
  005ec	e8 00 00 00 00	 call	 ?GCMapEventStateSend@@YAXHEE@Z ; GCMapEventStateSend
  005f1	83 c4 0c	 add	 esp, 12			; 0000000cH

; 158  : 			LogAdd("Event Start 1");

  005f4	68 00 00 00 00	 push	 OFFSET ??_C@_0O@KHDGKEEO@Event?5Start?51?$AA@
  005f9	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  005ff	83 c4 04	 add	 esp, 4

; 159  : 			this->DragonActive();

  00602	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00605	e8 00 00 00 00	 call	 ?DragonActive@CDragonEvent@@QAEXXZ ; CDragonEvent::DragonActive

; 160  : 			this->EventStartTime = GetTickCount();

  0060a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00610	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00613	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 161  : 			return;

  00616	eb 29		 jmp	 SHORT $LN8@Run
$LN4@Run:

; 162  : 		}
; 163  : 	}
; 164  : 	else

  00618	eb 27		 jmp	 SHORT $LN8@Run
$LN5@Run:

; 165  : 	{
; 166  : 		if ( this->EventState == 2 )

  0061a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0061d	0f b6 48 04	 movzx	 ecx, BYTE PTR [eax+4]
  00621	83 f9 02	 cmp	 ecx, 2
  00624	75 1b		 jne	 SHORT $LN8@Run

; 167  : 		{
; 168  : 			if ( (GetTickCount() - this->EventStartTime ) > 300000 )

  00626	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0062c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0062f	2b 41 08	 sub	 eax, DWORD PTR [ecx+8]
  00632	3d e0 93 04 00	 cmp	 eax, 300000		; 000493e0H
  00637	76 08		 jbe	 SHORT $LN8@Run

; 169  : 			{
; 170  : 				this->End();

  00639	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0063c	e8 00 00 00 00	 call	 ?End@CDragonEvent@@QAEXXZ ; CDragonEvent::End
$LN8@Run:

; 171  : 			}
; 172  : 		}
; 173  : 	}
; 174  : }

  00641	5f		 pop	 edi
  00642	5e		 pop	 esi
  00643	5b		 pop	 ebx
  00644	8b e5		 mov	 esp, ebp
  00646	5d		 pop	 ebp
  00647	c3		 ret	 0
?Run@CDragonEvent@@QAEXXZ ENDP				; CDragonEvent::Run
_TEXT	ENDS
PUBLIC	??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@ ; `string'
PUBLIC	?SetMenualStart@CDragonEvent@@QAEXH@Z		; CDragonEvent::SetMenualStart
PUBLIC	?Start_Menual@CDragonEvent@@QAEXXZ		; CDragonEvent::Start_Menual
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
;	COMDAT ??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@
CONST	SEGMENT
??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@ DB 0a1H
	DB	0dbH, 0a1H, 0dcH, '[Event Management] [Start] Dragon Event!', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Start_Menual@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::Start_Menual
; _this$ = ecx

; 177  : {

  00650	55		 push	 ebp
  00651	8b ec		 mov	 ebp, esp
  00653	83 ec 44	 sub	 esp, 68			; 00000044H
  00656	53		 push	 ebx
  00657	56		 push	 esi
  00658	57		 push	 edi
  00659	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 178  : 	this->SetMenualStart(TRUE);

  0065c	6a 01		 push	 1
  0065e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00661	e8 00 00 00 00	 call	 ?SetMenualStart@CDragonEvent@@QAEXH@Z ; CDragonEvent::SetMenualStart

; 179  : 	LogAddTD("¡Û¡Ü[Event Management] [Start] Dragon Event!");

  00666	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@HLGGPDEG@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5D@
  0066b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00671	83 c4 04	 add	 esp, 4

; 180  : 	this->EventState=0;

  00674	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00677	c6 40 04 00	 mov	 BYTE PTR [eax+4], 0

; 181  : 	this->Start();

  0067b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0067e	e8 00 00 00 00	 call	 ?Start@CDragonEvent@@QAEXXZ ; CDragonEvent::Start

; 182  : }

  00683	5f		 pop	 edi
  00684	5e		 pop	 esi
  00685	5b		 pop	 ebx
  00686	8b e5		 mov	 esp, ebp
  00688	5d		 pop	 ebp
  00689	c3		 ret	 0
?Start_Menual@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::Start_Menual
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\dragonevent.h
_TEXT	ENDS
;	COMDAT ?SetMenualStart@CDragonEvent@@QAEXH@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_bMenualStart$ = 8					; size = 4
?SetMenualStart@CDragonEvent@@QAEXH@Z PROC		; CDragonEvent::SetMenualStart, COMDAT
; _this$ = ecx

; 23   : 	void SetMenualStart(BOOL bMenualStart){this->m_bMenualStart = bMenualStart;}

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 4d 08	 mov	 ecx, DWORD PTR _bMenualStart$[ebp]
  00012	89 48 10	 mov	 DWORD PTR [eax+16], ecx
  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c2 04 00	 ret	 4
?SetMenualStart@CDragonEvent@@QAEXH@Z ENDP		; CDragonEvent::SetMenualStart
_TEXT	ENDS
PUBLIC	?End_Menual@CDragonEvent@@QAEXXZ		; CDragonEvent::End_Menual
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\dragonevent.cpp
_TEXT	SEGMENT
_this$ = -4						; size = 4
?End_Menual@CDragonEvent@@QAEXXZ PROC			; CDragonEvent::End_Menual
; _this$ = ecx

; 185  : {

  00690	55		 push	 ebp
  00691	8b ec		 mov	 ebp, esp
  00693	83 ec 44	 sub	 esp, 68			; 00000044H
  00696	53		 push	 ebx
  00697	56		 push	 esi
  00698	57		 push	 edi
  00699	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 186  : 	this->SetMenualStart(FALSE);

  0069c	6a 00		 push	 0
  0069e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  006a1	e8 00 00 00 00	 call	 ?SetMenualStart@CDragonEvent@@QAEXH@Z ; CDragonEvent::SetMenualStart

; 187  : 	this->End();

  006a6	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  006a9	e8 00 00 00 00	 call	 ?End@CDragonEvent@@QAEXXZ ; CDragonEvent::End

; 188  : }

  006ae	5f		 pop	 edi
  006af	5e		 pop	 esi
  006b0	5b		 pop	 ebx
  006b1	8b e5		 mov	 esp, ebp
  006b3	5d		 pop	 ebp
  006b4	c3		 ret	 0
?End_Menual@CDragonEvent@@QAEXXZ ENDP			; CDragonEvent::End_Menual
_TEXT	ENDS
END
