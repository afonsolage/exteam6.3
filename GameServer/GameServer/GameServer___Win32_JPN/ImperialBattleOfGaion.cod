; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\ImperialBattleOfGaion.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_sttBLOODCASTLE_LEVEL DD 0fH
	DD	050H
	DD	0aH
	DD	03cH
	DD	051H
	DD	082H
	DD	03dH
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	0190H
	DD	0137H
	DD	0190H
	DD	0fH
	DD	0257H
	DD	0aH
	DD	0257H
_DATA	ENDS
CONST	SEGMENT
_g_GaionGate DD	0210H
	DD	051H
	DD	044H
	DD	03H
	DD	020fH
	DD	032H
	DD	045H
	DD	03H
	DD	0210H
	DD	020H
	DD	05aH
	DD	01H
	DD	0210H
	DD	022H
	DD	0b0H
	DD	01H
	DD	020fH
	DD	034H
	DD	0bfH
	DD	03H
	DD	0210H
	DD	045H
	DD	0a6H
	DD	01H
	DD	0210H
	DD	09cH
	DD	084H
	DD	03H
	DD	020fH
	DD	0c5H
	DD	084H
	DD	03H
	DD	0210H
	DD	0e1H
	DD	09fH
	DD	01H
	DD	0210H
	DD	0d6H
	DD	018H
	DD	03H
_g_GaionMapAttr DD 04dH
	DD	043H
	DD	052H
	DD	045H
	DD	02eH
	DD	044H
	DD	033H
	DD	046H
	DD	01fH
	DD	059H
	DD	021H
	DD	05eH
	DD	021H
	DD	0afH
	DD	023H
	DD	0b4H
	DD	033H
	DD	0beH
	DD	038H
	DD	0c0H
	DD	044H
	DD	0a2H
	DD	045H
	DD	0a7H
	DD	09bH
	DD	083H
	DD	0a0H
	DD	085H
	DD	0c3H
	DD	083H
	DD	0c9H
	DD	085H
	DD	0e0H
	DD	09eH
	DD	0e2H
	DD	0a3H
	DD	0d2H
	DD	017H
	DD	0d7H
	DD	019H
_g_GaionTrap DD	02cH
	DD	04aH
	DD	02cH
	DD	045H
	DD	025H
	DD	042H
	DD	025H
	DD	046H
	DD	01dH
	DD	043H
	DD	01dH
	DD	04bH
	DD	022H
	DD	04bH
	DD	021H
	DD	050H
	DD	021H
	DD	056H
	DD	01dH
	DD	054H
	DD	03aH
	DD	0beH
	DD	040H
	DD	0beH
	DD	045H
	DD	0beH
	DD	045H
	DD	0b8H
	DD	045H
	DD	0b3H
	DD	044H
	DD	0a5H
	DD	044H
	DD	0abH
	DD	0ccH
	DD	083H
	DD	0d0H
	DD	084H
	DD	0d5H
	DD	084H
	DD	0d9H
	DD	085H
	DD	0e1H
	DD	087H
	DD	0e0H
	DD	08cH
	DD	0e0H
	DD	091H
	DD	0e1H
	DD	096H
	DD	0e1H
	DD	099H
CONST	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?ResetData@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::ResetData
PUBLIC	??_7CImperialBattleOfGaion@@6B@			; CImperialBattleOfGaion::`vftable'
PUBLIC	??0CImperialBattleOfGaion@@QAE@XZ		; CImperialBattleOfGaion::CImperialBattleOfGaion
PUBLIC	??_R4CImperialBattleOfGaion@@6B@		; CImperialBattleOfGaion::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCImperialBattleOfGaion@@@8		; CImperialBattleOfGaion `RTTI Type Descriptor'
PUBLIC	??_R3CImperialBattleOfGaion@@8			; CImperialBattleOfGaion::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CImperialBattleOfGaion@@8			; CImperialBattleOfGaion::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CImperialBattleOfGaion@@8		; CImperialBattleOfGaion::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECImperialBattleOfGaion@@UAEPAXI@Z:PROC	; CImperialBattleOfGaion::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CImperialBattleOfGaion@@8
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgaion.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CImperialBattleOfGaion@@8 DD FLAT:??_R0?AVCImperialBattleOfGaion@@@8 ; CImperialBattleOfGaion::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CImperialBattleOfGaion@@8
rdata$r	ENDS
;	COMDAT ??_R2CImperialBattleOfGaion@@8
rdata$r	SEGMENT
??_R2CImperialBattleOfGaion@@8 DD FLAT:??_R1A@?0A@EA@CImperialBattleOfGaion@@8 ; CImperialBattleOfGaion::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CImperialBattleOfGaion@@8
rdata$r	SEGMENT
??_R3CImperialBattleOfGaion@@8 DD 00H			; CImperialBattleOfGaion::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CImperialBattleOfGaion@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCImperialBattleOfGaion@@@8
_DATA	SEGMENT
??_R0?AVCImperialBattleOfGaion@@@8 DD FLAT:??_7type_info@@6B@ ; CImperialBattleOfGaion `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCImperialBattleOfGaion@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CImperialBattleOfGaion@@6B@
rdata$r	SEGMENT
??_R4CImperialBattleOfGaion@@6B@ DD 00H			; CImperialBattleOfGaion::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCImperialBattleOfGaion@@@8
	DD	FLAT:??_R3CImperialBattleOfGaion@@8
rdata$r	ENDS
;	COMDAT ??_7CImperialBattleOfGaion@@6B@
CONST	SEGMENT
??_7CImperialBattleOfGaion@@6B@ DD FLAT:??_R4CImperialBattleOfGaion@@6B@ ; CImperialBattleOfGaion::`vftable'
	DD	FLAT:??_ECImperialBattleOfGaion@@UAEPAXI@Z
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CImperialBattleOfGaion@@QAE@XZ PROC			; CImperialBattleOfGaion::CImperialBattleOfGaion
; _this$ = ecx

; 13   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CImperialBattleOfGaion@@6B@

; 14   : 	this->ResetData();

  00015	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00018	e8 00 00 00 00	 call	 ?ResetData@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ResetData

; 15   : }

  0001d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??0CImperialBattleOfGaion@@QAE@XZ ENDP			; CImperialBattleOfGaion::CImperialBattleOfGaion
_TEXT	ENDS
PUBLIC	??1CImperialBattleOfGaion@@UAE@XZ		; CImperialBattleOfGaion::~CImperialBattleOfGaion
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCImperialBattleOfGaion@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCImperialBattleOfGaion@@UAEPAXI@Z PROC		; CImperialBattleOfGaion::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CImperialBattleOfGaion@@UAE@XZ ; CImperialBattleOfGaion::~CImperialBattleOfGaion
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0c		 je	 SHORT $LN1@scalar
  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	50		 push	 eax
  00020	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00025	83 c4 04	 add	 esp, 4
$LN1@scalar:
  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	5f		 pop	 edi
  0002c	5e		 pop	 esi
  0002d	5b		 pop	 ebx
  0002e	8b e5		 mov	 esp, ebp
  00030	5d		 pop	 ebp
  00031	c2 04 00	 ret	 4
??_GCImperialBattleOfGaion@@UAEPAXI@Z ENDP		; CImperialBattleOfGaion::`scalar deleting destructor'
; Function compile flags: /Odtp /ZI
_TEXT	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CImperialBattleOfGaion@@UAE@XZ PROC			; CImperialBattleOfGaion::~CImperialBattleOfGaion
; _this$ = ecx

; 18   : {

  00030	55		 push	 ebp
  00031	8b ec		 mov	 ebp, esp
  00033	83 ec 44	 sub	 esp, 68			; 00000044H
  00036	53		 push	 ebx
  00037	56		 push	 esi
  00038	57		 push	 edi
  00039	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CImperialBattleOfGaion@@6B@

; 19   : }

  00045	5f		 pop	 edi
  00046	5e		 pop	 esi
  00047	5b		 pop	 ebx
  00048	8b e5		 mov	 esp, ebp
  0004a	5d		 pop	 ebp
  0004b	c3		 ret	 0
??1CImperialBattleOfGaion@@UAE@XZ ENDP			; CImperialBattleOfGaion::~CImperialBattleOfGaion
_TEXT	ENDS
PUBLIC	?Reset@BATTLEOFGAION_DATA@@QAEXXZ		; BATTLEOFGAION_DATA::Reset
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
?ResetData@CImperialBattleOfGaion@@QAEXXZ PROC		; CImperialBattleOfGaion::ResetData
; _this$ = ecx

; 22   : {

  00050	55		 push	 ebp
  00051	8b ec		 mov	 ebp, esp
  00053	83 ec 44	 sub	 esp, 68			; 00000044H
  00056	53		 push	 ebx
  00057	56		 push	 esi
  00058	57		 push	 edi
  00059	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 23   : 	this->m_BattleData.Reset();

  0005c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0005f	83 c1 04	 add	 ecx, 4
  00062	e8 00 00 00 00	 call	 ?Reset@BATTLEOFGAION_DATA@@QAEXXZ ; BATTLEOFGAION_DATA::Reset

; 24   : }

  00067	5f		 pop	 edi
  00068	5e		 pop	 esi
  00069	5b		 pop	 ebx
  0006a	8b e5		 mov	 esp, ebp
  0006c	5d		 pop	 ebp
  0006d	c3		 ret	 0
?ResetData@CImperialBattleOfGaion@@QAEXXZ ENDP		; CImperialBattleOfGaion::ResetData
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgaion.h
_TEXT	ENDS
;	COMDAT ?Reset@BATTLEOFGAION_DATA@@QAEXXZ
_TEXT	SEGMENT
_n$218881 = -8						; size = 4
_this$ = -4						; size = 4
?Reset@BATTLEOFGAION_DATA@@QAEXXZ PROC			; BATTLEOFGAION_DATA::Reset, COMDAT
; _this$ = ecx

; 19   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 20   : 		for(int n=0;n<10;++n)

  0000c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _n$218881[ebp], 0
  00013	eb 09		 jmp	 SHORT $LN3@Reset
$LN2@Reset:
  00015	8b 45 f8	 mov	 eax, DWORD PTR _n$218881[ebp]
  00018	83 c0 01	 add	 eax, 1
  0001b	89 45 f8	 mov	 DWORD PTR _n$218881[ebp], eax
$LN3@Reset:
  0001e	83 7d f8 0a	 cmp	 DWORD PTR _n$218881[ebp], 10 ; 0000000aH
  00022	7d 10		 jge	 SHORT $LN1@Reset

; 21   : 		{
; 22   : 			this->GateIndex[n] = -1;

  00024	8b 45 f8	 mov	 eax, DWORD PTR _n$218881[ebp]
  00027	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002a	c7 44 81 04 ff
	ff ff ff	 mov	 DWORD PTR [ecx+eax*4+4], -1

; 23   : 		}

  00032	eb e1		 jmp	 SHORT $LN2@Reset
$LN1@Reset:

; 24   : 		this->CurrentLeaderIndex = -1;

  00034	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00037	c7 00 ff ff ff
	ff		 mov	 DWORD PTR [eax], -1

; 25   : 		this->MonsterCount = 0;

  0003d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00040	c7 40 38 00 00
	00 00		 mov	 DWORD PTR [eax+56], 0

; 26   : 		this->TrapIndex = -1;

  00047	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0004a	c7 40 40 ff ff
	ff ff		 mov	 DWORD PTR [eax+64], -1

; 27   : 		this->NotifyCount = -1;

  00051	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00054	c6 40 48 ff	 mov	 BYTE PTR [eax+72], 255	; 000000ffH

; 28   : 	}

  00058	5f		 pop	 edi
  00059	5e		 pop	 esi
  0005a	5b		 pop	 ebx
  0005b	8b e5		 mov	 esp, ebp
  0005d	5d		 pop	 ebp
  0005e	c3		 ret	 0
?Reset@BATTLEOFGAION_DATA@@QAEXXZ ENDP			; BATTLEOFGAION_DATA::Reset
_TEXT	ENDS
PUBLIC	?SetState_END@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_END
PUBLIC	?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE4
PUBLIC	?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY4
PUBLIC	?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE3
PUBLIC	?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY3
PUBLIC	?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE2
PUBLIC	?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY2
PUBLIC	?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE1
PUBLIC	?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY1
PUBLIC	?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_NONE
PUBLIC	?SetState@CImperialBattleOfGaion@@QAEXH@Z	; CImperialBattleOfGaion::SetState
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgaion.cpp
_TEXT	SEGMENT
tv64 = -72						; size = 4
_this$ = -4						; size = 4
_iState$ = 8						; size = 4
?SetState@CImperialBattleOfGaion@@QAEXH@Z PROC		; CImperialBattleOfGaion::SetState
; _this$ = ecx

; 27   : {

  00070	55		 push	 ebp
  00071	8b ec		 mov	 ebp, esp
  00073	83 ec 48	 sub	 esp, 72			; 00000048H
  00076	53		 push	 ebx
  00077	56		 push	 esi
  00078	57		 push	 edi
  00079	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 28   : 	switch ( iState )

  0007c	8b 45 08	 mov	 eax, DWORD PTR _iState$[ebp]
  0007f	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  00082	83 7d b8 09	 cmp	 DWORD PTR tv64[ebp], 9
  00086	77 6c		 ja	 SHORT $LN13@SetState
  00088	8b 4d b8	 mov	 ecx, DWORD PTR tv64[ebp]
  0008b	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN15@SetState[ecx*4]
$LN10@SetState:

; 29   : 	{
; 30   : 		case 0:
; 31   : 			this->SetState_NONE();

  00092	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00095	e8 00 00 00 00	 call	 ?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_NONE

; 32   : 			break;

  0009a	eb 58		 jmp	 SHORT $LN13@SetState
$LN9@SetState:

; 33   : 		case 1:
; 34   : 			this->SetState_STANDBY1();

  0009c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0009f	e8 00 00 00 00	 call	 ?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY1

; 35   : 			break;

  000a4	eb 4e		 jmp	 SHORT $LN13@SetState
$LN8@SetState:

; 36   : 		case 2:
; 37   : 			this->SetState_PHAZE1();

  000a6	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000a9	e8 00 00 00 00	 call	 ?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE1

; 38   : 			break;

  000ae	eb 44		 jmp	 SHORT $LN13@SetState
$LN7@SetState:

; 39   : 		case 3:
; 40   : 			this->SetState_STANDBY2();

  000b0	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000b3	e8 00 00 00 00	 call	 ?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY2

; 41   : 			break;

  000b8	eb 3a		 jmp	 SHORT $LN13@SetState
$LN6@SetState:

; 42   : 		case 4:
; 43   : 			this->SetState_PHAZE2();

  000ba	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000bd	e8 00 00 00 00	 call	 ?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE2

; 44   : 			break;

  000c2	eb 30		 jmp	 SHORT $LN13@SetState
$LN5@SetState:

; 45   : 		case 5: 
; 46   : 			this->SetState_STANDBY3();

  000c4	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c7	e8 00 00 00 00	 call	 ?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY3

; 47   : 			break;

  000cc	eb 26		 jmp	 SHORT $LN13@SetState
$LN4@SetState:

; 48   : 		case 6:
; 49   : 			this->SetState_PHAZE3();

  000ce	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000d1	e8 00 00 00 00	 call	 ?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE3

; 50   : 			break;

  000d6	eb 1c		 jmp	 SHORT $LN13@SetState
$LN3@SetState:

; 51   : 		case 7:
; 52   : 			this->SetState_STANDBY4();

  000d8	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000db	e8 00 00 00 00	 call	 ?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY4

; 53   : 			break;

  000e0	eb 12		 jmp	 SHORT $LN13@SetState
$LN2@SetState:

; 54   : 		case 8:
; 55   : 			this->SetState_PHAZE4();

  000e2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000e5	e8 00 00 00 00	 call	 ?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE4

; 56   : 			break;

  000ea	eb 08		 jmp	 SHORT $LN13@SetState
$LN1@SetState:

; 57   : 		case 9:
; 58   : 			this->SetState_END();

  000ec	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000ef	e8 00 00 00 00	 call	 ?SetState_END@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_END
$LN13@SetState:

; 59   : 			break;
; 60   : 	}
; 61   : }

  000f4	5f		 pop	 edi
  000f5	5e		 pop	 esi
  000f6	5b		 pop	 ebx
  000f7	8b e5		 mov	 esp, ebp
  000f9	5d		 pop	 ebp
  000fa	c2 04 00	 ret	 4
  000fd	8d 49 00	 npad	 3
$LN15@SetState:
  00100	00 00 00 00	 DD	 $LN10@SetState
  00104	00 00 00 00	 DD	 $LN9@SetState
  00108	00 00 00 00	 DD	 $LN8@SetState
  0010c	00 00 00 00	 DD	 $LN7@SetState
  00110	00 00 00 00	 DD	 $LN6@SetState
  00114	00 00 00 00	 DD	 $LN5@SetState
  00118	00 00 00 00	 DD	 $LN4@SetState
  0011c	00 00 00 00	 DD	 $LN3@SetState
  00120	00 00 00 00	 DD	 $LN2@SetState
  00124	00 00 00 00	 DD	 $LN1@SetState
?SetState@CImperialBattleOfGaion@@QAEXH@Z ENDP		; CImperialBattleOfGaion::SetState
_TEXT	ENDS
PUBLIC	??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
EXTRN	?DelGroupInstance@TMonsterAIGroup@@SAHH@Z:PROC	; TMonsterAIGroup::DelGroupInstance
EXTRN	?LogAddC@@3P6AXEPADZZA:DWORD			; LogAddC
;	COMDAT ??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> NONE', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_NONE
; _this$ = ecx

; 64   : {

  00130	55		 push	 ebp
  00131	8b ec		 mov	 ebp, esp
  00133	83 ec 44	 sub	 esp, 68			; 00000044H
  00136	53		 push	 ebx
  00137	56		 push	 esi
  00138	57		 push	 edi
  00139	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 65   : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> NONE", this->m_BattleData.CurrentState);

  0013c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0013f	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00142	51		 push	 ecx
  00143	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00148	6a 02		 push	 2
  0014a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00150	83 c4 0c	 add	 esp, 12			; 0000000cH

; 66   : 	this->ResetData();

  00153	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00156	e8 00 00 00 00	 call	 ?ResetData@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ResetData

; 67   : 	TMonsterAIGroup::DelGroupInstance(36);

  0015b	6a 24		 push	 36			; 00000024H
  0015d	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00162	83 c4 04	 add	 esp, 4

; 68   : 	TMonsterAIGroup::DelGroupInstance(37);

  00165	6a 25		 push	 37			; 00000025H
  00167	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  0016c	83 c4 04	 add	 esp, 4

; 69   : 	TMonsterAIGroup::DelGroupInstance(38);

  0016f	6a 26		 push	 38			; 00000026H
  00171	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00176	83 c4 04	 add	 esp, 4

; 70   : 	TMonsterAIGroup::DelGroupInstance(39);

  00179	6a 27		 push	 39			; 00000027H
  0017b	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00180	83 c4 04	 add	 esp, 4

; 71   : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_NONE;

  00183	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00186	c7 40 38 00 00
	00 00		 mov	 DWORD PTR [eax+56], 0

; 72   : }

  0018d	5f		 pop	 edi
  0018e	5e		 pop	 esi
  0018f	5b		 pop	 ebx
  00190	8b e5		 mov	 esp, ebp
  00192	5d		 pop	 ebp
  00193	c3		 ret	 0
?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_NONE
_TEXT	ENDS
PUBLIC	?SendEventState@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SendEventState
PUBLIC	??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
EXTRN	?Init@TMonsterAIGroup@@SAXH@Z:PROC		; TMonsterAIGroup::Init
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
;	COMDAT ??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] Create Gate Index: %d Class'
	DB	': %d', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ I'
	DB	'MPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY1', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_i$221018 = -8						; size = 4
_this$ = -4						; size = 4
?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY1
; _this$ = ecx

; 76   : {

  001a0	55		 push	 ebp
  001a1	8b ec		 mov	 ebp, esp
  001a3	83 ec 48	 sub	 esp, 72			; 00000048H
  001a6	53		 push	 ebx
  001a7	56		 push	 esi
  001a8	57		 push	 edi
  001a9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 77   : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY1", this->m_BattleData.CurrentState);

  001ac	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  001af	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  001b2	51		 push	 ecx
  001b3	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  001b8	6a 02		 push	 2
  001ba	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  001c0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 78   : 	for(int i=0;i<10;++i)

  001c3	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _i$221018[ebp], 0
  001ca	eb 09		 jmp	 SHORT $LN4@SetState_S
$LN3@SetState_S:
  001cc	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  001cf	83 c0 01	 add	 eax, 1
  001d2	89 45 f8	 mov	 DWORD PTR _i$221018[ebp], eax
$LN4@SetState_S:
  001d5	83 7d f8 0a	 cmp	 DWORD PTR _i$221018[ebp], 10 ; 0000000aH
  001d9	0f 8d 51 02 00
	00		 jge	 $LN2@SetState_S

; 79   : 	{
; 80   : 		this->m_BattleData.GateIndex[i] = gObjAddMonster(72);

  001df	6a 48		 push	 72			; 00000048H
  001e1	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  001e6	83 c4 04	 add	 esp, 4
  001e9	98		 cwde
  001ea	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  001ed	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  001f0	89 44 8a 08	 mov	 DWORD PTR [edx+ecx*4+8], eax

; 81   : 		if(this->m_BattleData.GateIndex[i] >= 0)

  001f4	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  001f7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  001fa	83 7c 81 08 00	 cmp	 DWORD PTR [ecx+eax*4+8], 0
  001ff	0f 8c 26 02 00
	00		 jl	 $LN1@SetState_S

; 82   : 		{
; 83   : 			gObj[this->m_BattleData.GateIndex[i]].MapNumber = 72;

  00205	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  00208	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0020b	8b 54 81 08	 mov	 edx, DWORD PTR [ecx+eax*4+8]
  0020f	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  00215	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0021a	c6 84 10 49 01
	00 00 48	 mov	 BYTE PTR [eax+edx+329], 72 ; 00000048H

; 84   : 			gObj[this->m_BattleData.GateIndex[i]].X = g_GaionGate[i].X;

  00222	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  00225	c1 e0 04	 shl	 eax, 4
  00228	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  0022b	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  0022e	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  00232	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00238	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0023e	66 8b 80 04 00
	00 00		 mov	 ax, WORD PTR _g_GaionGate[eax+4]
  00245	66 89 84 0a 44
	01 00 00	 mov	 WORD PTR [edx+ecx+324], ax

; 85   : 			gObj[this->m_BattleData.GateIndex[i]].Y = g_GaionGate[i].Y;

  0024d	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  00250	c1 e0 04	 shl	 eax, 4
  00253	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  00256	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00259	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  0025d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00263	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00269	66 8b 80 08 00
	00 00		 mov	 ax, WORD PTR _g_GaionGate[eax+8]
  00270	66 89 84 0a 46
	01 00 00	 mov	 WORD PTR [edx+ecx+326], ax

; 86   : 			gObj[this->m_BattleData.GateIndex[i]].Dir = g_GaionGate[i].Dir;

  00278	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  0027b	c1 e0 04	 shl	 eax, 4
  0027e	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  00281	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00284	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  00288	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0028e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00294	8a 80 0c 00 00
	00		 mov	 al, BYTE PTR _g_GaionGate[eax+12]
  0029a	88 84 0a 48 01
	00 00		 mov	 BYTE PTR [edx+ecx+328], al

; 87   : 			gObj[this->m_BattleData.GateIndex[i]].TX = g_GaionGate[i].X;

  002a1	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  002a4	c1 e0 04	 shl	 eax, 4
  002a7	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  002aa	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  002ad	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  002b1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  002b7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002bd	66 8b 80 04 00
	00 00		 mov	 ax, WORD PTR _g_GaionGate[eax+4]
  002c4	66 89 84 0a 7c
	01 00 00	 mov	 WORD PTR [edx+ecx+380], ax

; 88   : 			gObj[this->m_BattleData.GateIndex[i]].TY = g_GaionGate[i].Y;

  002cc	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  002cf	c1 e0 04	 shl	 eax, 4
  002d2	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  002d5	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  002d8	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  002dc	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  002e2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002e8	66 8b 80 08 00
	00 00		 mov	 ax, WORD PTR _g_GaionGate[eax+8]
  002ef	66 89 84 0a 7e
	01 00 00	 mov	 WORD PTR [edx+ecx+382], ax

; 89   : 			gObj[this->m_BattleData.GateIndex[i]].StartX = g_GaionGate[i].X;

  002f7	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  002fa	c1 e0 04	 shl	 eax, 4
  002fd	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  00300	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00303	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  00307	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0030d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00313	8a 80 04 00 00
	00		 mov	 al, BYTE PTR _g_GaionGate[eax+4]
  00319	88 84 0a 76 01
	00 00		 mov	 BYTE PTR [edx+ecx+374], al

; 90   : 			gObj[this->m_BattleData.GateIndex[i]].StartY = g_GaionGate[i].Y;

  00320	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  00323	c1 e0 04	 shl	 eax, 4
  00326	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  00329	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  0032c	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  00330	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00336	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0033c	8a 80 08 00 00
	00		 mov	 al, BYTE PTR _g_GaionGate[eax+8]
  00342	88 84 0a 77 01
	00 00		 mov	 BYTE PTR [edx+ecx+375], al

; 91   : 			gObj[this->m_BattleData.GateIndex[i]].m_OldX = g_GaionGate[i].X;

  00349	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  0034c	c1 e0 04	 shl	 eax, 4
  0034f	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  00352	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00355	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  00359	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0035f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00365	66 8b 80 04 00
	00 00		 mov	 ax, WORD PTR _g_GaionGate[eax+4]
  0036c	66 89 84 0a 78
	01 00 00	 mov	 WORD PTR [edx+ecx+376], ax

; 92   : 			gObj[this->m_BattleData.GateIndex[i]].m_OldY = g_GaionGate[i].Y;

  00374	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  00377	c1 e0 04	 shl	 eax, 4
  0037a	8b 4d f8	 mov	 ecx, DWORD PTR _i$221018[ebp]
  0037d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00380	8b 4c 8a 08	 mov	 ecx, DWORD PTR [edx+ecx*4+8]
  00384	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0038a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00390	66 8b 80 08 00
	00 00		 mov	 ax, WORD PTR _g_GaionGate[eax+8]
  00397	66 89 84 0a 7a
	01 00 00	 mov	 WORD PTR [edx+ecx+378], ax

; 93   : 			gObjSetMonster(this->m_BattleData.GateIndex[i], g_GaionGate[i].Class);

  0039f	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  003a2	c1 e0 04	 shl	 eax, 4
  003a5	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR _g_GaionGate[eax]
  003ab	51		 push	 ecx
  003ac	8b 55 f8	 mov	 edx, DWORD PTR _i$221018[ebp]
  003af	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  003b2	8b 4c 90 08	 mov	 ecx, DWORD PTR [eax+edx*4+8]
  003b6	51		 push	 ecx
  003b7	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  003bc	83 c4 08	 add	 esp, 8

; 94   : 			gObj[this->m_BattleData.GateIndex[i]].m_ImmuneToHarmCount = 3600; // IMMUNITY FOR GATES

  003bf	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  003c2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  003c5	8b 54 81 08	 mov	 edx, DWORD PTR [ecx+eax*4+8]
  003c9	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  003cf	b8 10 0e 00 00	 mov	 eax, 3600		; 00000e10H
  003d4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003da	66 89 84 11 84
	22 00 00	 mov	 WORD PTR [ecx+edx+8836], ax

; 95   : 			gObj[this->m_BattleData.GateIndex[i]].m_ImmuneToMagicCount = 3600; // IMMUNITY FOR GATES

  003e2	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  003e5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  003e8	8b 54 81 08	 mov	 edx, DWORD PTR [ecx+eax*4+8]
  003ec	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  003f2	b8 10 0e 00 00	 mov	 eax, 3600		; 00000e10H
  003f7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003fd	66 89 84 11 82
	22 00 00	 mov	 WORD PTR [ecx+edx+8834], ax

; 96   : 
; 97   : 			LogAddTD("[ IMPERIAL FORT ] [ BattleOfGaion ] Create Gate Index: %d Class: %d",
; 98   : 				this->m_BattleData.GateIndex[i], g_GaionGate[i].Class);

  00405	8b 45 f8	 mov	 eax, DWORD PTR _i$221018[ebp]
  00408	c1 e0 04	 shl	 eax, 4
  0040b	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR _g_GaionGate[eax]
  00411	51		 push	 ecx
  00412	8b 55 f8	 mov	 edx, DWORD PTR _i$221018[ebp]
  00415	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00418	8b 4c 90 08	 mov	 ecx, DWORD PTR [eax+edx*4+8]
  0041c	51		 push	 ecx
  0041d	68 00 00 00 00	 push	 OFFSET ??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00422	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00428	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@SetState_S:

; 99   : 		}
; 100  : 	}

  0042b	e9 9c fd ff ff	 jmp	 $LN3@SetState_S
$LN2@SetState_S:

; 101  : 	this->m_BattleData.Time = 60000;

  00430	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00433	c7 40 30 60 ea
	00 00		 mov	 DWORD PTR [eax+48], 60000 ; 0000ea60H

; 102  : 	this->m_BattleData.TickCount = GetTickCount();

  0043a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00440	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00443	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 103  : 	TMonsterAIGroup::Init(36);

  00446	6a 24		 push	 36			; 00000024H
  00448	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  0044d	83 c4 04	 add	 esp, 4

; 104  : 	this->m_BattleData.MonsterCount = 0;

  00450	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00453	c7 40 3c 00 00
	00 00		 mov	 DWORD PTR [eax+60], 0

; 105  : 	this->m_BattleData.CurrentAIGroup = 36;

  0045a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0045d	c7 40 40 24 00
	00 00		 mov	 DWORD PTR [eax+64], 36	; 00000024H

; 106  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY1;

  00464	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00467	c7 40 38 01 00
	00 00		 mov	 DWORD PTR [eax+56], 1

; 107  : 	this->SendEventState();

  0046e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00471	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState

; 108  : }

  00476	5f		 pop	 edi
  00477	5e		 pop	 esi
  00478	5b		 pop	 ebx
  00479	8b e5		 mov	 esp, ebp
  0047b	5d		 pop	 ebp
  0047c	c3		 ret	 0
?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY1
_TEXT	ENDS
PUBLIC	??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
;	COMDAT ??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY2', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY2
; _this$ = ecx

; 111  : {

  00480	55		 push	 ebp
  00481	8b ec		 mov	 ebp, esp
  00483	83 ec 44	 sub	 esp, 68			; 00000044H
  00486	53		 push	 ebx
  00487	56		 push	 esi
  00488	57		 push	 edi
  00489	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 112  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY2", this->m_BattleData.CurrentState);

  0048c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0048f	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00492	51		 push	 ecx
  00493	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00498	6a 02		 push	 2
  0049a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  004a0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 113  : 	this->m_BattleData.Time = 60000;

  004a3	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004a6	c7 40 30 60 ea
	00 00		 mov	 DWORD PTR [eax+48], 60000 ; 0000ea60H

; 114  : 	this->m_BattleData.TickCount = GetTickCount();

  004ad	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  004b3	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  004b6	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 115  : 	TMonsterAIGroup::DelGroupInstance(36);

  004b9	6a 24		 push	 36			; 00000024H
  004bb	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  004c0	83 c4 04	 add	 esp, 4

; 116  : 	TMonsterAIGroup::Init(37);

  004c3	6a 25		 push	 37			; 00000025H
  004c5	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  004ca	83 c4 04	 add	 esp, 4

; 117  : 	this->m_BattleData.MonsterCount = 0;

  004cd	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004d0	c7 40 3c 00 00
	00 00		 mov	 DWORD PTR [eax+60], 0

; 118  : 	this->m_BattleData.CurrentAIGroup = 37;

  004d7	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004da	c7 40 40 25 00
	00 00		 mov	 DWORD PTR [eax+64], 37	; 00000025H

; 119  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY2;

  004e1	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  004e4	c7 40 38 03 00
	00 00		 mov	 DWORD PTR [eax+56], 3

; 120  : 	this->SendEventState();

  004eb	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  004ee	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState

; 121  : }

  004f3	5f		 pop	 edi
  004f4	5e		 pop	 esi
  004f5	5b		 pop	 ebx
  004f6	8b e5		 mov	 esp, ebp
  004f8	5d		 pop	 ebp
  004f9	c3		 ret	 0
?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY2
_TEXT	ENDS
PUBLIC	??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@ ; `string'
PUBLIC	??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
EXTRN	?FindGroupLeader@TMonsterAIGroup@@SAHH@Z:PROC	; TMonsterAIGroup::FindGroupLeader
;	COMDAT ??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@
CONST	SEGMENT
??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@ DB '['
	DB	' IMPERIAL FORT ] Create BOSS %s Index: %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY3', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY3
; _this$ = ecx

; 124  : {

  00500	55		 push	 ebp
  00501	8b ec		 mov	 ebp, esp
  00503	83 ec 44	 sub	 esp, 68			; 00000044H
  00506	53		 push	 ebx
  00507	56		 push	 esi
  00508	57		 push	 edi
  00509	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 125  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY3", this->m_BattleData.CurrentState);

  0050c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0050f	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00512	51		 push	 ecx
  00513	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00518	6a 02		 push	 2
  0051a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00520	83 c4 0c	 add	 esp, 12			; 0000000cH

; 126  : 	this->m_BattleData.Time = 60000;

  00523	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00526	c7 40 30 60 ea
	00 00		 mov	 DWORD PTR [eax+48], 60000 ; 0000ea60H

; 127  : 	this->m_BattleData.TickCount = GetTickCount();

  0052d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00533	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00536	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 128  : 	TMonsterAIGroup::DelGroupInstance(37);

  00539	6a 25		 push	 37			; 00000025H
  0053b	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00540	83 c4 04	 add	 esp, 4

; 129  : 	TMonsterAIGroup::Init(38);

  00543	6a 26		 push	 38			; 00000026H
  00545	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  0054a	83 c4 04	 add	 esp, 4

; 130  : 	this->m_BattleData.MonsterCount = 0;

  0054d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00550	c7 40 3c 00 00
	00 00		 mov	 DWORD PTR [eax+60], 0

; 131  : 	this->m_BattleData.CurrentLeaderIndex = TMonsterAIGroup::FindGroupLeader(38);

  00557	6a 26		 push	 38			; 00000026H
  00559	e8 00 00 00 00	 call	 ?FindGroupLeader@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::FindGroupLeader
  0055e	83 c4 04	 add	 esp, 4
  00561	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00564	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 132  : 	LogAddTD("[ IMPERIAL FORT ] Create BOSS %s Index: %d", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.CurrentLeaderIndex);

  00567	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0056a	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0056d	51		 push	 ecx
  0056e	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00571	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  00574	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0057a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00580	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  00584	52		 push	 edx
  00585	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@
  0058a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00590	83 c4 0c	 add	 esp, 12			; 0000000cH

; 133  : 	this->m_BattleData.CurrentAIGroup = 38;

  00593	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00596	c7 40 40 26 00
	00 00		 mov	 DWORD PTR [eax+64], 38	; 00000026H

; 134  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY3;

  0059d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005a0	c7 40 38 05 00
	00 00		 mov	 DWORD PTR [eax+56], 5

; 135  : 	this->SendEventState();

  005a7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  005aa	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState

; 136  : }

  005af	5f		 pop	 edi
  005b0	5e		 pop	 esi
  005b1	5b		 pop	 ebx
  005b2	8b e5		 mov	 esp, ebp
  005b4	5d		 pop	 ebp
  005b5	c3		 ret	 0
?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY3
_TEXT	ENDS
PUBLIC	??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@ ; `string'
PUBLIC	??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
;	COMDAT ??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@
CONST	SEGMENT
??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@ DB '[ IMP'
	DB	'ERIAL FORT ] Create Imperial Fort Boss %s Index: %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY4', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY4
; _this$ = ecx

; 139  : {

  005c0	55		 push	 ebp
  005c1	8b ec		 mov	 ebp, esp
  005c3	83 ec 44	 sub	 esp, 68			; 00000044H
  005c6	53		 push	 ebx
  005c7	56		 push	 esi
  005c8	57		 push	 edi
  005c9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 140  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY4", this->m_BattleData.CurrentState);

  005cc	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005cf	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  005d2	51		 push	 ecx
  005d3	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  005d8	6a 02		 push	 2
  005da	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  005e0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 141  : 	this->m_BattleData.Time = 60000;

  005e3	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  005e6	c7 40 30 60 ea
	00 00		 mov	 DWORD PTR [eax+48], 60000 ; 0000ea60H

; 142  : 	this->m_BattleData.TickCount = GetTickCount();

  005ed	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  005f3	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  005f6	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 143  : 	TMonsterAIGroup::DelGroupInstance(38);

  005f9	6a 26		 push	 38			; 00000026H
  005fb	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  00600	83 c4 04	 add	 esp, 4

; 144  : 	TMonsterAIGroup::Init(39);

  00603	6a 27		 push	 39			; 00000027H
  00605	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  0060a	83 c4 04	 add	 esp, 4

; 145  : 	this->m_BattleData.MonsterCount = 0;

  0060d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00610	c7 40 3c 00 00
	00 00		 mov	 DWORD PTR [eax+60], 0

; 146  : 	this->m_BattleData.CurrentLeaderIndex = TMonsterAIGroup::FindGroupLeader(39);

  00617	6a 27		 push	 39			; 00000027H
  00619	e8 00 00 00 00	 call	 ?FindGroupLeader@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::FindGroupLeader
  0061e	83 c4 04	 add	 esp, 4
  00621	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00624	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 147  : 	LogAddTD("[ IMPERIAL FORT ] Create Imperial Fort Boss %s Index: %d", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.CurrentLeaderIndex);

  00627	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0062a	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0062d	51		 push	 ecx
  0062e	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00631	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  00634	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0063a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00640	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  00644	52		 push	 edx
  00645	68 00 00 00 00	 push	 OFFSET ??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@
  0064a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00650	83 c4 0c	 add	 esp, 12			; 0000000cH

; 148  : 	this->m_BattleData.CurrentAIGroup = 38;

  00653	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00656	c7 40 40 26 00
	00 00		 mov	 DWORD PTR [eax+64], 38	; 00000026H

; 149  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY4;

  0065d	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00660	c7 40 38 07 00
	00 00		 mov	 DWORD PTR [eax+56], 7

; 150  : 	this->SendEventState();

  00667	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0066a	e8 00 00 00 00	 call	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState

; 151  : }

  0066f	5f		 pop	 edi
  00670	5e		 pop	 esi
  00671	5b		 pop	 ebx
  00672	8b e5		 mov	 esp, ebp
  00674	5d		 pop	 ebp
  00675	c3		 ret	 0
?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY4
_TEXT	ENDS
PUBLIC	?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
PUBLIC	??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@	; `string'
PUBLIC	??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z:PROC	; TNotice::MakeNoticeMsg
EXTRN	?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA:BYTE ; TMonsterAIGroup::s_iMonsterAIGroupMemberCount
EXTRN	?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z:PROC	; TMonsterAIGroup::ChangeAIOrder
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
CONST	SEGMENT
??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@ DB 'Quest Started!', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE1', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE1
; _this$ = ecx

; 154  : {

  00680	55		 push	 ebp
  00681	8b ec		 mov	 ebp, esp
  00683	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00689	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0068e	33 c5		 xor	 eax, ebp
  00690	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00693	53		 push	 ebx
  00694	56		 push	 esi
  00695	57		 push	 edi
  00696	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 155  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE1", this->m_BattleData.CurrentState);

  00699	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0069c	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0069f	51		 push	 ecx
  006a0	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  006a5	6a 02		 push	 2
  006a7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  006ad	83 c4 0c	 add	 esp, 12			; 0000000cH

; 156  : 	gObj[this->m_BattleData.GateIndex[0]].m_ImmuneToHarmCount = 0;

  006b0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  006b3	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  006b6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  006bc	33 d2		 xor	 edx, edx
  006be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006c3	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 157  : 	gObj[this->m_BattleData.GateIndex[0]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  006cb	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  006ce	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  006d1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  006d7	33 d2		 xor	 edx, edx
  006d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  006de	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 158  : 	this->m_BattleData.Time = 600000;

  006e6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  006e9	c7 40 30 c0 27
	09 00		 mov	 DWORD PTR [eax+48], 600000 ; 000927c0H

; 159  : 	this->m_BattleData.TickCount = GetTickCount();

  006f0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  006f6	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  006f9	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 160  : 	TMonsterAIGroup::ChangeAIOrder(36, 1);

  006fc	6a 01		 push	 1
  006fe	6a 24		 push	 36			; 00000024H
  00700	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  00705	83 c4 08	 add	 esp, 8

; 161  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[36];

  00708	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0070b	8b 0d 90 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+144
  00711	89 48 3c	 mov	 DWORD PTR [eax+60], ecx

; 162  : 	this->m_BattleData.PhazeStep = 0;

  00714	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00717	c7 40 48 00 00
	00 00		 mov	 DWORD PTR [eax+72], 0

; 163  : 	this->m_BattleData.NotifyCount = -1;

  0071e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00721	c6 40 4c ff	 mov	 BYTE PTR [eax+76], 255	; 000000ffH

; 164  : 	PMSG_NOTICE pNotice;
; 165  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00725	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0072a	6a 00		 push	 0
  0072c	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00732	50		 push	 eax
  00733	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00738	83 c4 0c	 add	 esp, 12			; 0000000cH

; 166  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0073b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00742	50		 push	 eax
  00743	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00749	51		 push	 ecx
  0074a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0074d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 167  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE1;

  00752	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00755	c7 40 38 02 00
	00 00		 mov	 DWORD PTR [eax+56], 2

; 168  : }

  0075c	5f		 pop	 edi
  0075d	5e		 pop	 esi
  0075e	5b		 pop	 ebx
  0075f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00762	33 cd		 xor	 ecx, ebp
  00764	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00769	8b e5		 mov	 esp, ebp
  0076b	5d		 pop	 ebp
  0076c	c3		 ret	 0
?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE1
_TEXT	ENDS
PUBLIC	??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE2', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE2
; _this$ = ecx

; 171  : {

  00770	55		 push	 ebp
  00771	8b ec		 mov	 ebp, esp
  00773	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00779	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0077e	33 c5		 xor	 eax, ebp
  00780	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00783	53		 push	 ebx
  00784	56		 push	 esi
  00785	57		 push	 edi
  00786	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 172  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE2", this->m_BattleData.CurrentState);

  00789	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0078c	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0078f	51		 push	 ecx
  00790	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00795	6a 02		 push	 2
  00797	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  0079d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 173  : 	gObj[this->m_BattleData.GateIndex[3]].m_ImmuneToHarmCount = 0;

  007a0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007a3	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  007a6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  007ac	33 d2		 xor	 edx, edx
  007ae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  007b3	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 174  : 	gObj[this->m_BattleData.GateIndex[3]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  007bb	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007be	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  007c1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  007c7	33 d2		 xor	 edx, edx
  007c9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  007ce	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 175  : 	this->m_BattleData.Time = 600000;

  007d6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007d9	c7 40 30 c0 27
	09 00		 mov	 DWORD PTR [eax+48], 600000 ; 000927c0H

; 176  : 	this->m_BattleData.TickCount = GetTickCount();

  007e0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  007e6	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  007e9	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 177  : 	TMonsterAIGroup::ChangeAIOrder(37, 1);

  007ec	6a 01		 push	 1
  007ee	6a 25		 push	 37			; 00000025H
  007f0	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  007f5	83 c4 08	 add	 esp, 8

; 178  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[37];

  007f8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  007fb	8b 0d 94 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+148
  00801	89 48 3c	 mov	 DWORD PTR [eax+60], ecx

; 179  : 	this->m_BattleData.PhazeStep = 0;

  00804	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00807	c7 40 48 00 00
	00 00		 mov	 DWORD PTR [eax+72], 0

; 180  : 	this->m_BattleData.NotifyCount = -1;

  0080e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00811	c6 40 4c ff	 mov	 BYTE PTR [eax+76], 255	; 000000ffH

; 181  : 	PMSG_NOTICE pNotice;
; 182  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00815	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0081a	6a 00		 push	 0
  0081c	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00822	50		 push	 eax
  00823	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00828	83 c4 0c	 add	 esp, 12			; 0000000cH

; 183  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0082b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00832	50		 push	 eax
  00833	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00839	51		 push	 ecx
  0083a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0083d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 184  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE2;

  00842	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00845	c7 40 38 04 00
	00 00		 mov	 DWORD PTR [eax+56], 4

; 185  : }

  0084c	5f		 pop	 edi
  0084d	5e		 pop	 esi
  0084e	5b		 pop	 ebx
  0084f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00852	33 cd		 xor	 ecx, ebp
  00854	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00859	8b e5		 mov	 esp, ebp
  0085b	5d		 pop	 ebp
  0085c	c3		 ret	 0
?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE2
_TEXT	ENDS
PUBLIC	??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE3', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE3
; _this$ = ecx

; 188  : {

  00860	55		 push	 ebp
  00861	8b ec		 mov	 ebp, esp
  00863	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00869	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0086e	33 c5		 xor	 eax, ebp
  00870	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00873	53		 push	 ebx
  00874	56		 push	 esi
  00875	57		 push	 edi
  00876	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 189  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE3", this->m_BattleData.CurrentState);

  00879	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0087c	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0087f	51		 push	 ecx
  00880	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00885	6a 02		 push	 2
  00887	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  0088d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 190  : 	gObj[this->m_BattleData.GateIndex[6]].m_ImmuneToHarmCount = 0;

  00890	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00893	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  00896	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0089c	33 d2		 xor	 edx, edx
  0089e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  008a3	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 191  : 	gObj[this->m_BattleData.GateIndex[6]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  008ab	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  008ae	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  008b1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  008b7	33 d2		 xor	 edx, edx
  008b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  008be	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 192  : 	this->m_BattleData.Time = 600000;

  008c6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  008c9	c7 40 30 c0 27
	09 00		 mov	 DWORD PTR [eax+48], 600000 ; 000927c0H

; 193  : 	this->m_BattleData.TickCount = GetTickCount();

  008d0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  008d6	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  008d9	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 194  : 	TMonsterAIGroup::ChangeAIOrder(38, 1);

  008dc	6a 01		 push	 1
  008de	6a 26		 push	 38			; 00000026H
  008e0	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  008e5	83 c4 08	 add	 esp, 8

; 195  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[38];

  008e8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  008eb	8b 0d 98 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+152
  008f1	89 48 3c	 mov	 DWORD PTR [eax+60], ecx

; 196  : 	this->m_BattleData.PhazeStep = 0;

  008f4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  008f7	c7 40 48 00 00
	00 00		 mov	 DWORD PTR [eax+72], 0

; 197  : 	this->m_BattleData.NotifyCount = -1;

  008fe	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00901	c6 40 4c ff	 mov	 BYTE PTR [eax+76], 255	; 000000ffH

; 198  : 	PMSG_NOTICE pNotice;
; 199  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00905	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0090a	6a 00		 push	 0
  0090c	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00912	50		 push	 eax
  00913	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00918	83 c4 0c	 add	 esp, 12			; 0000000cH

; 200  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0091b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00922	50		 push	 eax
  00923	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00929	51		 push	 ecx
  0092a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0092d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 201  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE3;

  00932	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00935	c7 40 38 06 00
	00 00		 mov	 DWORD PTR [eax+56], 6

; 202  : }

  0093c	5f		 pop	 edi
  0093d	5e		 pop	 esi
  0093e	5b		 pop	 ebx
  0093f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00942	33 cd		 xor	 ecx, ebp
  00944	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00949	8b e5		 mov	 esp, ebp
  0094b	5d		 pop	 ebp
  0094c	c3		 ret	 0
?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE3
_TEXT	ENDS
PUBLIC	??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ I'
	DB	'MPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE4', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$ = -280					; size = 272
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE4
; _this$ = ecx

; 205  : {

  00950	55		 push	 ebp
  00951	8b ec		 mov	 ebp, esp
  00953	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  00959	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0095e	33 c5		 xor	 eax, ebp
  00960	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00963	53		 push	 ebx
  00964	56		 push	 esi
  00965	57		 push	 edi
  00966	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 206  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE4", this->m_BattleData.CurrentState);

  00969	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0096c	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0096f	51		 push	 ecx
  00970	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00975	6a 02		 push	 2
  00977	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  0097d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 207  : 	gObj[this->m_BattleData.GateIndex[9]].m_ImmuneToHarmCount = 0;

  00980	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00983	8b 48 2c	 mov	 ecx, DWORD PTR [eax+44]
  00986	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0098c	33 d2		 xor	 edx, edx
  0098e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00993	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 208  : 	gObj[this->m_BattleData.GateIndex[9]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  0099b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0099e	8b 48 2c	 mov	 ecx, DWORD PTR [eax+44]
  009a1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  009a7	33 d2		 xor	 edx, edx
  009a9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  009ae	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 209  : 	this->m_BattleData.Time = 600000;

  009b6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  009b9	c7 40 30 c0 27
	09 00		 mov	 DWORD PTR [eax+48], 600000 ; 000927c0H

; 210  : 	this->m_BattleData.TickCount = GetTickCount();

  009c0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  009c6	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  009c9	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 211  : 	TMonsterAIGroup::ChangeAIOrder(39, 1);

  009cc	6a 01		 push	 1
  009ce	6a 27		 push	 39			; 00000027H
  009d0	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder
  009d5	83 c4 08	 add	 esp, 8

; 212  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[39];

  009d8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  009db	8b 0d 9c 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+156
  009e1	89 48 3c	 mov	 DWORD PTR [eax+60], ecx

; 213  : 	this->m_BattleData.PhazeStep = 0;

  009e4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  009e7	c7 40 48 00 00
	00 00		 mov	 DWORD PTR [eax+72], 0

; 214  : 	this->m_BattleData.NotifyCount = -1;

  009ee	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  009f1	c6 40 4c ff	 mov	 BYTE PTR [eax+76], 255	; 000000ffH

; 215  : 	PMSG_NOTICE pNotice;
; 216  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  009f5	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  009fa	6a 00		 push	 0
  009fc	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$[ebp]
  00a02	50		 push	 eax
  00a03	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  00a08	83 c4 0c	 add	 esp, 12			; 0000000cH

; 217  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00a0b	0f b6 85 e9 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  00a12	50		 push	 eax
  00a13	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00a19	51		 push	 ecx
  00a1a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00a1d	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 218  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE4;

  00a22	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00a25	c7 40 38 08 00
	00 00		 mov	 DWORD PTR [eax+56], 8

; 219  : }

  00a2c	5f		 pop	 edi
  00a2d	5e		 pop	 esi
  00a2e	5b		 pop	 ebx
  00a2f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00a32	33 cd		 xor	 ecx, ebp
  00a34	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00a39	8b e5		 mov	 esp, ebp
  00a3b	5d		 pop	 ebp
  00a3c	c3		 ret	 0
?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE4
_TEXT	ENDS
PUBLIC	??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
;	COMDAT ??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> END', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?SetState_END@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_END
; _this$ = ecx

; 222  : {

  00a40	55		 push	 ebp
  00a41	8b ec		 mov	 ebp, esp
  00a43	83 ec 44	 sub	 esp, 68			; 00000044H
  00a46	53		 push	 ebx
  00a47	56		 push	 esi
  00a48	57		 push	 edi
  00a49	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 223  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> END", this->m_BattleData.CurrentState);

  00a4c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00a4f	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00a52	51		 push	 ecx
  00a53	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00a58	6a 02		 push	 2
  00a5a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00a60	83 c4 0c	 add	 esp, 12			; 0000000cH

; 224  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_END;

  00a63	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00a66	c7 40 38 09 00
	00 00		 mov	 DWORD PTR [eax+56], 9

; 225  : 	return;
; 226  : }

  00a6d	5f		 pop	 edi
  00a6e	5e		 pop	 esi
  00a6f	5b		 pop	 ebx
  00a70	8b e5		 mov	 esp, ebp
  00a72	5d		 pop	 ebp
  00a73	c3		 ret	 0
?SetState_END@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_END
_TEXT	ENDS
PUBLIC	?ProcState_END@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::ProcState_END
PUBLIC	?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE4
PUBLIC	?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY4
PUBLIC	?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE3
PUBLIC	?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY3
PUBLIC	?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE2
PUBLIC	?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY2
PUBLIC	?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE1
PUBLIC	?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY1
PUBLIC	?Run@CImperialBattleOfGaion@@QAEXXZ		; CImperialBattleOfGaion::Run
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv66 = -72						; size = 4
_this$ = -4						; size = 4
?Run@CImperialBattleOfGaion@@QAEXXZ PROC		; CImperialBattleOfGaion::Run
; _this$ = ecx

; 231  : {

  00a80	55		 push	 ebp
  00a81	8b ec		 mov	 ebp, esp
  00a83	83 ec 48	 sub	 esp, 72			; 00000048H
  00a86	53		 push	 ebx
  00a87	56		 push	 esi
  00a88	57		 push	 edi
  00a89	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 232  : 	switch ( this->m_BattleData.CurrentState )

  00a8c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00a8f	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00a92	89 4d b8	 mov	 DWORD PTR tv66[ebp], ecx
  00a95	83 7d b8 09	 cmp	 DWORD PTR tv66[ebp], 9
  00a99	77 64		 ja	 SHORT $LN13@Run
  00a9b	8b 55 b8	 mov	 edx, DWORD PTR tv66[ebp]
  00a9e	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN15@Run[edx*4]
$LN10@Run:

; 233  : 	{
; 234  : 		case 0:
; 235  : 			return;

  00aa5	eb 58		 jmp	 SHORT $LN13@Run
$LN9@Run:

; 236  : 		case 1:
; 237  : 			this->ProcState_STANDBY1();

  00aa7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00aaa	e8 00 00 00 00	 call	 ?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY1

; 238  : 			break;

  00aaf	eb 4e		 jmp	 SHORT $LN13@Run
$LN8@Run:

; 239  : 		case 2:
; 240  : 			this->ProcState_PHAZE1();

  00ab1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00ab4	e8 00 00 00 00	 call	 ?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE1

; 241  : 			break;

  00ab9	eb 44		 jmp	 SHORT $LN13@Run
$LN7@Run:

; 242  : 		case 3:
; 243  : 			this->ProcState_STANDBY2();

  00abb	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00abe	e8 00 00 00 00	 call	 ?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY2

; 244  : 			break;

  00ac3	eb 3a		 jmp	 SHORT $LN13@Run
$LN6@Run:

; 245  : 		case 4:
; 246  : 			this->ProcState_PHAZE2();

  00ac5	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00ac8	e8 00 00 00 00	 call	 ?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE2

; 247  : 			break;

  00acd	eb 30		 jmp	 SHORT $LN13@Run
$LN5@Run:

; 248  : 		case 5:
; 249  : 			this->ProcState_STANDBY3();

  00acf	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00ad2	e8 00 00 00 00	 call	 ?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY3

; 250  : 			break;

  00ad7	eb 26		 jmp	 SHORT $LN13@Run
$LN4@Run:

; 251  : 		case 6:
; 252  : 			this->ProcState_PHAZE3();

  00ad9	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00adc	e8 00 00 00 00	 call	 ?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE3

; 253  : 			break;

  00ae1	eb 1c		 jmp	 SHORT $LN13@Run
$LN3@Run:

; 254  : 		case 7:
; 255  : 			this->ProcState_STANDBY4();

  00ae3	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00ae6	e8 00 00 00 00	 call	 ?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY4

; 256  : 			break;

  00aeb	eb 12		 jmp	 SHORT $LN13@Run
$LN2@Run:

; 257  : 		case 8:
; 258  : 			this->ProcState_PHAZE4();

  00aed	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00af0	e8 00 00 00 00	 call	 ?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE4

; 259  : 			break;

  00af5	eb 08		 jmp	 SHORT $LN13@Run
$LN1@Run:

; 260  : 		case 9:
; 261  : 			this->ProcState_END();

  00af7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00afa	e8 00 00 00 00	 call	 ?ProcState_END@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_END
$LN13@Run:

; 262  : 			break;
; 263  : 	}
; 264  : }

  00aff	5f		 pop	 edi
  00b00	5e		 pop	 esi
  00b01	5b		 pop	 ebx
  00b02	8b e5		 mov	 esp, ebp
  00b04	5d		 pop	 ebp
  00b05	c3		 ret	 0
  00b06	8b ff		 npad	 2
$LN15@Run:
  00b08	00 00 00 00	 DD	 $LN10@Run
  00b0c	00 00 00 00	 DD	 $LN9@Run
  00b10	00 00 00 00	 DD	 $LN8@Run
  00b14	00 00 00 00	 DD	 $LN7@Run
  00b18	00 00 00 00	 DD	 $LN6@Run
  00b1c	00 00 00 00	 DD	 $LN5@Run
  00b20	00 00 00 00	 DD	 $LN4@Run
  00b24	00 00 00 00	 DD	 $LN3@Run
  00b28	00 00 00 00	 DD	 $LN2@Run
  00b2c	00 00 00 00	 DD	 $LN1@Run
?Run@CImperialBattleOfGaion@@QAEXXZ ENDP		; CImperialBattleOfGaion::Run
_TEXT	ENDS
PUBLIC	?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY1
; _this$ = ecx

; 267  : {

  00b30	55		 push	 ebp
  00b31	8b ec		 mov	 ebp, esp
  00b33	83 ec 48	 sub	 esp, 72			; 00000048H
  00b36	53		 push	 ebx
  00b37	56		 push	 esi
  00b38	57		 push	 edi
  00b39	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 268  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00b3c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00b42	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00b45	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  00b48	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 269  : 	if(Tick >= 1000)

  00b4b	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00b52	7c 36		 jl	 SHORT $LN3@ProcState_

; 270  : 	{
; 271  : 		this->m_BattleData.Time -= Tick;

  00b54	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00b57	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  00b5a	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  00b5d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00b60	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 272  : 		this->m_BattleData.TickCount = GetTickCount();

  00b63	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00b69	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00b6c	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 273  : 
; 274  : 		this->SendEventInterface();

  00b6f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00b72	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 275  : 
; 276  : 		if(this->m_BattleData.Time <= 0)

  00b77	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00b7a	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  00b7e	7f 0a		 jg	 SHORT $LN3@ProcState_

; 277  : 		{
; 278  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE1);

  00b80	6a 02		 push	 2
  00b82	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00b85	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN3@ProcState_:

; 279  : 		}
; 280  : 	}
; 281  : }

  00b8a	5f		 pop	 edi
  00b8b	5e		 pop	 esi
  00b8c	5b		 pop	 ebx
  00b8d	8b e5		 mov	 esp, ebp
  00b8f	5d		 pop	 ebp
  00b90	c3		 ret	 0
?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY1
_TEXT	ENDS
PUBLIC	?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue
PUBLIC	?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z	; CImperialBattleOfGaion::SetMapAttr
PUBLIC	??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@ ; `string'
PUBLIC	?GetIndex@CImperialBattleUser@@QAEHXZ		; CImperialBattleUser::GetIndex
PUBLIC	?MonsterProc@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::MonsterProc
PUBLIC	__$ArrayPad$
EXTRN	?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ:PROC	; TNotice::MakeNoticeMsgEx
EXTRN	?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z:PROC ; gObjAttack
EXTRN	?GetUserCount@CImperialBattleUserMng@@QAEHXZ:PROC ; CImperialBattleUserMng::GetUserCount
EXTRN	?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A:BYTE ; g_ImperialBattleUserMng
;	COMDAT ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
CONST	SEGMENT
??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@ DB 'Portal '
	DB	'will be closed after %d minutes', 00H	; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$221105 = -292					; size = 272
_n$221099 = -20						; size = 4
_i$221095 = -16						; size = 4
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE1
; _this$ = ecx

; 284  : {

  00ba0	55		 push	 ebp
  00ba1	8b ec		 mov	 ebp, esp
  00ba3	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  00ba9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00bae	33 c5		 xor	 eax, ebp
  00bb0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00bb3	53		 push	 ebx
  00bb4	56		 push	 esi
  00bb5	57		 push	 edi
  00bb6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 285  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00bb9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00bbf	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00bc2	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  00bc5	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 286  : 	if(Tick >= 1000)

  00bc8	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00bcf	0f 8c 73 03 00
	00		 jl	 $LN15@ProcState_@2

; 287  : 	{
; 288  : 		this->m_BattleData.Time -= Tick;

  00bd5	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00bd8	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  00bdb	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  00bde	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00be1	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 289  : 		this->m_BattleData.TickCount = GetTickCount();

  00be4	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00bea	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00bed	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 290  : 
; 291  : 		this->SendEventInterface();

  00bf0	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00bf3	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 292  : 		this->MonsterProc();

  00bf8	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00bfb	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc

; 293  : 
; 294  : 		for(int i=0;i<26;++i)

  00c00	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _i$221095[ebp], 0
  00c07	eb 09		 jmp	 SHORT $LN13@ProcState_@2
$LN12@ProcState_@2:
  00c09	8b 45 f0	 mov	 eax, DWORD PTR _i$221095[ebp]
  00c0c	83 c0 01	 add	 eax, 1
  00c0f	89 45 f0	 mov	 DWORD PTR _i$221095[ebp], eax
$LN13@ProcState_@2:
  00c12	83 7d f0 1a	 cmp	 DWORD PTR _i$221095[ebp], 26 ; 0000001aH
  00c16	0f 8d 56 01 00
	00		 jge	 $LN11@ProcState_@2

; 295  : 		{
; 296  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  00c1c	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$221099[ebp], 0
  00c23	eb 09		 jmp	 SHORT $LN10@ProcState_@2
$LN9@ProcState_@2:
  00c25	8b 45 ec	 mov	 eax, DWORD PTR _n$221099[ebp]
  00c28	83 c0 01	 add	 eax, 1
  00c2b	89 45 ec	 mov	 DWORD PTR _n$221099[ebp], eax
$LN10@ProcState_@2:
  00c2e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00c33	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00c38	39 45 ec	 cmp	 DWORD PTR _n$221099[ebp], eax
  00c3b	0f 8d 2c 01 00
	00		 jge	 $LN8@ProcState_@2

; 297  : 			{
; 298  : 
; 299  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_GaionTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_GaionTrap[i].X+5
; 300  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_GaionTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_GaionTrap[i].Y+5)

  00c41	8b 4d ec	 mov	 ecx, DWORD PTR _n$221099[ebp]
  00c44	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00c47	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00c4d	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00c52	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00c58	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c5e	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  00c66	8b 45 f0	 mov	 eax, DWORD PTR _i$221095[ebp]
  00c69	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8]
  00c70	83 e9 05	 sub	 ecx, 5
  00c73	3b d1		 cmp	 edx, ecx
  00c75	0f 8c ed 00 00
	00		 jl	 $LN7@ProcState_@2
  00c7b	8b 4d ec	 mov	 ecx, DWORD PTR _n$221099[ebp]
  00c7e	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00c81	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00c87	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00c8c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00c92	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00c98	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  00ca0	8b 45 f0	 mov	 eax, DWORD PTR _i$221095[ebp]
  00ca3	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8]
  00caa	83 c1 05	 add	 ecx, 5
  00cad	3b d1		 cmp	 edx, ecx
  00caf	0f 8f b3 00 00
	00		 jg	 $LN7@ProcState_@2
  00cb5	8b 4d ec	 mov	 ecx, DWORD PTR _n$221099[ebp]
  00cb8	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00cbb	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00cc1	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00cc6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00ccc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00cd2	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  00cda	8b 45 f0	 mov	 eax, DWORD PTR _i$221095[ebp]
  00cdd	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8+4]
  00ce4	83 e9 05	 sub	 ecx, 5
  00ce7	3b d1		 cmp	 edx, ecx
  00ce9	7c 7d		 jl	 SHORT $LN7@ProcState_@2
  00ceb	8b 4d ec	 mov	 ecx, DWORD PTR _n$221099[ebp]
  00cee	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00cf1	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00cf7	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00cfc	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00d02	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00d08	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  00d10	8b 45 f0	 mov	 eax, DWORD PTR _i$221095[ebp]
  00d13	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8+4]
  00d1a	83 c1 05	 add	 ecx, 5
  00d1d	3b d1		 cmp	 edx, ecx
  00d1f	7f 47		 jg	 SHORT $LN7@ProcState_@2

; 301  : 				{
; 302  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  00d21	6a 00		 push	 0
  00d23	6a 00		 push	 0
  00d25	6a 00		 push	 0
  00d27	6a 00		 push	 0
  00d29	6a 00		 push	 0
  00d2b	6a 00		 push	 0
  00d2d	6a 00		 push	 0
  00d2f	8b 4d ec	 mov	 ecx, DWORD PTR _n$221099[ebp]
  00d32	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  00d35	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  00d3b	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  00d40	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00d46	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00d4c	50		 push	 eax
  00d4d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d50	8b 48 44	 mov	 ecx, DWORD PTR [eax+68]
  00d53	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00d59	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00d5f	51		 push	 ecx
  00d60	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  00d65	83 c4 24	 add	 esp, 36			; 00000024H
$LN7@ProcState_@2:

; 303  : 				}
; 304  : 			}

  00d68	e9 b8 fe ff ff	 jmp	 $LN9@ProcState_@2
$LN8@ProcState_@2:

; 305  : 		}

  00d6d	e9 97 fe ff ff	 jmp	 $LN12@ProcState_@2
$LN11@ProcState_@2:

; 306  : 
; 307  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00d72	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d75	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  00d79	7e 65		 jle	 SHORT $LN6@ProcState_@2
  00d7b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d7e	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  00d81	99		 cdq
  00d82	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00d87	f7 f9		 idiv	 ecx
  00d89	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00d8c	0f b6 4a 4c	 movzx	 ecx, BYTE PTR [edx+76]
  00d90	3b c1		 cmp	 eax, ecx
  00d92	74 4c		 je	 SHORT $LN6@ProcState_@2

; 308  : 		{
; 309  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  00d94	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00d97	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  00d9a	99		 cdq
  00d9b	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00da0	f7 f9		 idiv	 ecx
  00da2	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00da5	88 42 4c	 mov	 BYTE PTR [edx+76], al

; 310  : 			PMSG_NOTICE pNotice;
; 311  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  00da8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00dab	0f b6 48 4c	 movzx	 ecx, BYTE PTR [eax+76]
  00daf	83 c1 01	 add	 ecx, 1
  00db2	51		 push	 ecx
  00db3	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  00db8	6a 00		 push	 0
  00dba	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$221105[ebp]
  00dc0	52		 push	 edx
  00dc1	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  00dc6	83 c4 10	 add	 esp, 16			; 00000010H

; 312  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00dc9	0f b6 85 dd fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221105[ebp+1]
  00dd0	50		 push	 eax
  00dd1	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221105[ebp]
  00dd7	51		 push	 ecx
  00dd8	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00ddb	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
$LN6@ProcState_@2:

; 313  : 		}
; 314  : 
; 315  : 		if(gObj[this->m_BattleData.GateIndex[0]].Live == false && this->m_BattleData.PhazeStep == 0)

  00de0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00de3	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  00de6	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00dec	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00df2	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  00df7	85 c0		 test	 eax, eax
  00df9	75 22		 jne	 SHORT $LN5@ProcState_@2
  00dfb	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00dfe	83 78 48 00	 cmp	 DWORD PTR [eax+72], 0
  00e02	75 19		 jne	 SHORT $LN5@ProcState_@2

; 316  : 		{
; 317  : 			this->SetMapAttr(0);

  00e04	6a 00		 push	 0
  00e06	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00e09	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 318  : 			this->m_BattleData.PhazeStep++;

  00e0e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e11	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  00e14	83 c1 01	 add	 ecx, 1
  00e17	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00e1a	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN5@ProcState_@2:

; 319  : 		}
; 320  : 
; 321  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  00e1d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e20	83 78 3c 00	 cmp	 DWORD PTR [eax+60], 0
  00e24	7f 4e		 jg	 SHORT $LN4@ProcState_@2
  00e26	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e29	83 78 48 01	 cmp	 DWORD PTR [eax+72], 1
  00e2d	75 45		 jne	 SHORT $LN4@ProcState_@2

; 322  : 		{
; 323  : 			gObj[this->m_BattleData.GateIndex[1]].m_ImmuneToHarmCount = 0;

  00e2f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e32	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  00e35	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00e3b	33 d2		 xor	 edx, edx
  00e3d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00e42	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 324  : 			gObj[this->m_BattleData.GateIndex[1]].m_ImmuneToMagicCount = 0;

  00e4a	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e4d	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  00e50	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00e56	33 d2		 xor	 edx, edx
  00e58	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00e5d	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 325  : 			this->m_BattleData.PhazeStep++;

  00e65	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e68	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  00e6b	83 c1 01	 add	 ecx, 1
  00e6e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00e71	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN4@ProcState_@2:

; 326  : 		}
; 327  : 		if(gObj[this->m_BattleData.GateIndex[1]].Live == false && this->m_BattleData.PhazeStep == 2)

  00e74	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e77	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  00e7a	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00e80	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00e86	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  00e8b	85 c0		 test	 eax, eax
  00e8d	75 58		 jne	 SHORT $LN3@ProcState_@2
  00e8f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e92	83 78 48 02	 cmp	 DWORD PTR [eax+72], 2
  00e96	75 4f		 jne	 SHORT $LN3@ProcState_@2

; 328  : 		{
; 329  : 			gObj[this->m_BattleData.GateIndex[2]].m_ImmuneToHarmCount = 0;

  00e98	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00e9b	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  00e9e	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00ea4	33 d2		 xor	 edx, edx
  00ea6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00eab	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 330  : 			gObj[this->m_BattleData.GateIndex[2]].m_ImmuneToMagicCount = 0;

  00eb3	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00eb6	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  00eb9	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00ebf	33 d2		 xor	 edx, edx
  00ec1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00ec6	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 331  : 			this->SetMapAttr(1);

  00ece	6a 01		 push	 1
  00ed0	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00ed3	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 332  : 			this->m_BattleData.PhazeStep++;

  00ed8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00edb	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  00ede	83 c1 01	 add	 ecx, 1
  00ee1	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00ee4	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN3@ProcState_@2:

; 333  : 		}
; 334  : 		if(gObj[this->m_BattleData.GateIndex[2]].Live == false && this->m_BattleData.PhazeStep == 3)

  00ee7	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00eea	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  00eed	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  00ef3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00ef9	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  00efe	85 c0		 test	 eax, eax
  00f00	75 29		 jne	 SHORT $LN2@ProcState_@2
  00f02	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f05	83 78 48 03	 cmp	 DWORD PTR [eax+72], 3
  00f09	75 20		 jne	 SHORT $LN2@ProcState_@2

; 335  : 		{
; 336  : 			this->SetMapAttr(2);

  00f0b	6a 02		 push	 2
  00f0d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00f10	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 337  : 			this->PortalSetState = false;

  00f15	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f18	c6 40 50 00	 mov	 BYTE PTR [eax+80], 0

; 338  : 			this->m_BattleData.PhazeStep++;

  00f1c	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f1f	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  00f22	83 c1 01	 add	 ecx, 1
  00f25	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  00f28	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN2@ProcState_@2:

; 339  : 		}
; 340  : 
; 341  : 		if(this->m_BattleData.Time <= 0)

  00f2b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00f2e	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  00f32	7f 14		 jg	 SHORT $LN15@ProcState_@2

; 342  : 		{
; 343  : 			this->SetSuccessValue(false);

  00f34	6a 00		 push	 0
  00f36	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00f39	e8 00 00 00 00	 call	 ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue

; 344  : 			this->SetState(BATTLEOFGAION_STATE_END);

  00f3e	6a 09		 push	 9
  00f40	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00f43	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN15@ProcState_@2:

; 345  : 		}
; 346  : 	}
; 347  : }

  00f48	5f		 pop	 edi
  00f49	5e		 pop	 esi
  00f4a	5b		 pop	 ebx
  00f4b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00f4e	33 cd		 xor	 ecx, ebp
  00f50	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00f55	8b e5		 mov	 esp, ebp
  00f57	5d		 pop	 ebp
  00f58	c3		 ret	 0
?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE1
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgaion.h
_TEXT	ENDS
;	COMDAT ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_SuccessValue$ = 8					; size = 1
?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z PROC	; CImperialBattleOfGaion::SetSuccessValue, COMDAT
; _this$ = ecx

; 81   : 	void SetSuccessValue(bool SuccessValue) { this->SuccessValue = SuccessValue; }

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8a 4d 08	 mov	 cl, BYTE PTR _SuccessValue$[ebp]
  00012	88 48 51	 mov	 BYTE PTR [eax+81], cl
  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c2 04 00	 ret	 4
?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ENDP	; CImperialBattleOfGaion::SetSuccessValue
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleuser.h
_TEXT	ENDS
;	COMDAT ?GetIndex@CImperialBattleUser@@QAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetIndex@CImperialBattleUser@@QAEHXZ PROC		; CImperialBattleUser::GetIndex, COMDAT
; _this$ = ecx

; 22   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 23   : 		return this->m_iIndex;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 40 04	 mov	 eax, DWORD PTR [eax+4]

; 24   : 	}

  00012	5f		 pop	 edi
  00013	5e		 pop	 esi
  00014	5b		 pop	 ebx
  00015	8b e5		 mov	 esp, ebp
  00017	5d		 pop	 ebp
  00018	c3		 ret	 0
?GetIndex@CImperialBattleUser@@QAEHXZ ENDP		; CImperialBattleUser::GetIndex
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\imperialbattleofgaion.cpp
_TEXT	ENDS
_TEXT	SEGMENT
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY2
; _this$ = ecx

; 350  : {

  00f60	55		 push	 ebp
  00f61	8b ec		 mov	 ebp, esp
  00f63	83 ec 48	 sub	 esp, 72			; 00000048H
  00f66	53		 push	 ebx
  00f67	56		 push	 esi
  00f68	57		 push	 edi
  00f69	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 351  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00f6c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00f72	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00f75	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  00f78	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 352  : 	if(Tick >= 1000)

  00f7b	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00f82	7c 36		 jl	 SHORT $LN3@ProcState_@3

; 353  : 	{
; 354  : 		this->m_BattleData.Time -= Tick;

  00f84	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00f87	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  00f8a	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  00f8d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00f90	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 355  : 		this->m_BattleData.TickCount = GetTickCount();

  00f93	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00f99	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00f9c	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 356  : 
; 357  : 		this->SendEventInterface();

  00f9f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00fa2	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 358  : 
; 359  : 		if(this->m_BattleData.Time <= 0)

  00fa7	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00faa	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  00fae	7f 0a		 jg	 SHORT $LN3@ProcState_@3

; 360  : 		{
; 361  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE2);

  00fb0	6a 04		 push	 4
  00fb2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00fb5	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN3@ProcState_@3:

; 362  : 		}
; 363  : 	}
; 364  : }

  00fba	5f		 pop	 edi
  00fbb	5e		 pop	 esi
  00fbc	5b		 pop	 ebx
  00fbd	8b e5		 mov	 esp, ebp
  00fbf	5d		 pop	 ebp
  00fc0	c3		 ret	 0
?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY2
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pNotice$221134 = -292					; size = 272
_n$221128 = -20						; size = 4
_i$221124 = -16						; size = 4
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE2
; _this$ = ecx

; 367  : {

  00fd0	55		 push	 ebp
  00fd1	8b ec		 mov	 ebp, esp
  00fd3	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  00fd9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00fde	33 c5		 xor	 eax, ebp
  00fe0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00fe3	53		 push	 ebx
  00fe4	56		 push	 esi
  00fe5	57		 push	 edi
  00fe6	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 368  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00fe9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00fef	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00ff2	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  00ff5	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 369  : 	if(Tick >= 1000)

  00ff8	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  00fff	0f 8c 73 03 00
	00		 jl	 $LN15@ProcState_@4

; 370  : 	{
; 371  : 		this->m_BattleData.Time -= Tick;

  01005	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01008	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  0100b	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  0100e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01011	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 372  : 		this->m_BattleData.TickCount = GetTickCount();

  01014	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0101a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0101d	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 373  : 
; 374  : 		this->SendEventInterface();

  01020	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01023	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 375  : 		this->MonsterProc();

  01028	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0102b	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc

; 376  : 
; 377  : 		for(int i=0;i<26;++i)

  01030	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _i$221124[ebp], 0
  01037	eb 09		 jmp	 SHORT $LN13@ProcState_@4
$LN12@ProcState_@4:
  01039	8b 45 f0	 mov	 eax, DWORD PTR _i$221124[ebp]
  0103c	83 c0 01	 add	 eax, 1
  0103f	89 45 f0	 mov	 DWORD PTR _i$221124[ebp], eax
$LN13@ProcState_@4:
  01042	83 7d f0 1a	 cmp	 DWORD PTR _i$221124[ebp], 26 ; 0000001aH
  01046	0f 8d 56 01 00
	00		 jge	 $LN11@ProcState_@4

; 378  : 		{
; 379  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  0104c	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$221128[ebp], 0
  01053	eb 09		 jmp	 SHORT $LN10@ProcState_@4
$LN9@ProcState_@4:
  01055	8b 45 ec	 mov	 eax, DWORD PTR _n$221128[ebp]
  01058	83 c0 01	 add	 eax, 1
  0105b	89 45 ec	 mov	 DWORD PTR _n$221128[ebp], eax
$LN10@ProcState_@4:
  0105e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  01063	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  01068	39 45 ec	 cmp	 DWORD PTR _n$221128[ebp], eax
  0106b	0f 8d 2c 01 00
	00		 jge	 $LN8@ProcState_@4

; 380  : 			{
; 381  : 
; 382  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_GaionTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_GaionTrap[i].X+5
; 383  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_GaionTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_GaionTrap[i].Y+5)

  01071	8b 4d ec	 mov	 ecx, DWORD PTR _n$221128[ebp]
  01074	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01077	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  0107d	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  01082	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01088	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0108e	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  01096	8b 45 f0	 mov	 eax, DWORD PTR _i$221124[ebp]
  01099	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8]
  010a0	83 e9 05	 sub	 ecx, 5
  010a3	3b d1		 cmp	 edx, ecx
  010a5	0f 8c ed 00 00
	00		 jl	 $LN7@ProcState_@4
  010ab	8b 4d ec	 mov	 ecx, DWORD PTR _n$221128[ebp]
  010ae	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  010b1	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  010b7	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  010bc	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  010c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  010c8	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  010d0	8b 45 f0	 mov	 eax, DWORD PTR _i$221124[ebp]
  010d3	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8]
  010da	83 c1 05	 add	 ecx, 5
  010dd	3b d1		 cmp	 edx, ecx
  010df	0f 8f b3 00 00
	00		 jg	 $LN7@ProcState_@4
  010e5	8b 4d ec	 mov	 ecx, DWORD PTR _n$221128[ebp]
  010e8	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  010eb	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  010f1	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  010f6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  010fc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01102	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  0110a	8b 45 f0	 mov	 eax, DWORD PTR _i$221124[ebp]
  0110d	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8+4]
  01114	83 e9 05	 sub	 ecx, 5
  01117	3b d1		 cmp	 edx, ecx
  01119	7c 7d		 jl	 SHORT $LN7@ProcState_@4
  0111b	8b 4d ec	 mov	 ecx, DWORD PTR _n$221128[ebp]
  0111e	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01121	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  01127	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  0112c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01132	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01138	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  01140	8b 45 f0	 mov	 eax, DWORD PTR _i$221124[ebp]
  01143	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8+4]
  0114a	83 c1 05	 add	 ecx, 5
  0114d	3b d1		 cmp	 edx, ecx
  0114f	7f 47		 jg	 SHORT $LN7@ProcState_@4

; 384  : 				{
; 385  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  01151	6a 00		 push	 0
  01153	6a 00		 push	 0
  01155	6a 00		 push	 0
  01157	6a 00		 push	 0
  01159	6a 00		 push	 0
  0115b	6a 00		 push	 0
  0115d	6a 00		 push	 0
  0115f	8b 4d ec	 mov	 ecx, DWORD PTR _n$221128[ebp]
  01162	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01165	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  0116b	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  01170	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01176	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0117c	50		 push	 eax
  0117d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01180	8b 48 44	 mov	 ecx, DWORD PTR [eax+68]
  01183	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01189	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0118f	51		 push	 ecx
  01190	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  01195	83 c4 24	 add	 esp, 36			; 00000024H
$LN7@ProcState_@4:

; 386  : 				}
; 387  : 			}

  01198	e9 b8 fe ff ff	 jmp	 $LN9@ProcState_@4
$LN8@ProcState_@4:

; 388  : 		}

  0119d	e9 97 fe ff ff	 jmp	 $LN12@ProcState_@4
$LN11@ProcState_@4:

; 389  : 
; 390  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  011a2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  011a5	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  011a9	7e 65		 jle	 SHORT $LN6@ProcState_@4
  011ab	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  011ae	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  011b1	99		 cdq
  011b2	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  011b7	f7 f9		 idiv	 ecx
  011b9	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  011bc	0f b6 4a 4c	 movzx	 ecx, BYTE PTR [edx+76]
  011c0	3b c1		 cmp	 eax, ecx
  011c2	74 4c		 je	 SHORT $LN6@ProcState_@4

; 391  : 		{
; 392  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  011c4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  011c7	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  011ca	99		 cdq
  011cb	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  011d0	f7 f9		 idiv	 ecx
  011d2	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  011d5	88 42 4c	 mov	 BYTE PTR [edx+76], al

; 393  : 			PMSG_NOTICE pNotice;
; 394  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  011d8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  011db	0f b6 48 4c	 movzx	 ecx, BYTE PTR [eax+76]
  011df	83 c1 01	 add	 ecx, 1
  011e2	51		 push	 ecx
  011e3	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  011e8	6a 00		 push	 0
  011ea	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$221134[ebp]
  011f0	52		 push	 edx
  011f1	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  011f6	83 c4 10	 add	 esp, 16			; 00000010H

; 395  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  011f9	0f b6 85 dd fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221134[ebp+1]
  01200	50		 push	 eax
  01201	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221134[ebp]
  01207	51		 push	 ecx
  01208	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0120b	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
$LN6@ProcState_@4:

; 396  : 		}
; 397  : 
; 398  : 		if(gObj[this->m_BattleData.GateIndex[3]].Live == false && this->m_BattleData.PhazeStep == 0)

  01210	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01213	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  01216	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0121c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01222	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  01227	85 c0		 test	 eax, eax
  01229	75 22		 jne	 SHORT $LN5@ProcState_@4
  0122b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0122e	83 78 48 00	 cmp	 DWORD PTR [eax+72], 0
  01232	75 19		 jne	 SHORT $LN5@ProcState_@4

; 399  : 		{
; 400  : 			this->SetMapAttr(3);

  01234	6a 03		 push	 3
  01236	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01239	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 401  : 			this->m_BattleData.PhazeStep++;

  0123e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01241	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  01244	83 c1 01	 add	 ecx, 1
  01247	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0124a	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN5@ProcState_@4:

; 402  : 		}
; 403  : 
; 404  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  0124d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01250	83 78 3c 00	 cmp	 DWORD PTR [eax+60], 0
  01254	7f 4e		 jg	 SHORT $LN4@ProcState_@4
  01256	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01259	83 78 48 01	 cmp	 DWORD PTR [eax+72], 1
  0125d	75 45		 jne	 SHORT $LN4@ProcState_@4

; 405  : 		{
; 406  : 			gObj[this->m_BattleData.GateIndex[4]].m_ImmuneToHarmCount = 0;

  0125f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01262	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  01265	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0126b	33 d2		 xor	 edx, edx
  0126d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01272	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 407  : 			gObj[this->m_BattleData.GateIndex[4]].m_ImmuneToMagicCount = 0;

  0127a	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0127d	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  01280	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01286	33 d2		 xor	 edx, edx
  01288	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0128d	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 408  : 			this->m_BattleData.PhazeStep++;

  01295	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01298	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  0129b	83 c1 01	 add	 ecx, 1
  0129e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  012a1	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN4@ProcState_@4:

; 409  : 		}
; 410  : 		if(gObj[this->m_BattleData.GateIndex[4]].Live == false && this->m_BattleData.PhazeStep == 2)

  012a4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012a7	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  012aa	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  012b0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  012b6	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  012bb	85 c0		 test	 eax, eax
  012bd	75 58		 jne	 SHORT $LN3@ProcState_@4
  012bf	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012c2	83 78 48 02	 cmp	 DWORD PTR [eax+72], 2
  012c6	75 4f		 jne	 SHORT $LN3@ProcState_@4

; 411  : 		{
; 412  : 			gObj[this->m_BattleData.GateIndex[5]].m_ImmuneToHarmCount = 0;

  012c8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012cb	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  012ce	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  012d4	33 d2		 xor	 edx, edx
  012d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  012db	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 413  : 			gObj[this->m_BattleData.GateIndex[5]].m_ImmuneToMagicCount = 0;

  012e3	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  012e6	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  012e9	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  012ef	33 d2		 xor	 edx, edx
  012f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  012f6	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 414  : 			this->SetMapAttr(4);

  012fe	6a 04		 push	 4
  01300	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01303	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 415  : 			this->m_BattleData.PhazeStep++;

  01308	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0130b	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  0130e	83 c1 01	 add	 ecx, 1
  01311	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01314	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN3@ProcState_@4:

; 416  : 		}
; 417  : 		if(gObj[this->m_BattleData.GateIndex[5]].Live == false && this->m_BattleData.PhazeStep == 3)

  01317	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0131a	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  0131d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01323	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01329	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  0132e	85 c0		 test	 eax, eax
  01330	75 29		 jne	 SHORT $LN2@ProcState_@4
  01332	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01335	83 78 48 03	 cmp	 DWORD PTR [eax+72], 3
  01339	75 20		 jne	 SHORT $LN2@ProcState_@4

; 418  : 		{
; 419  : 			this->SetMapAttr(5);

  0133b	6a 05		 push	 5
  0133d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01340	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 420  : 			this->PortalSetState = false;

  01345	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01348	c6 40 50 00	 mov	 BYTE PTR [eax+80], 0

; 421  : 			this->m_BattleData.PhazeStep++;

  0134c	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0134f	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  01352	83 c1 01	 add	 ecx, 1
  01355	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01358	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN2@ProcState_@4:

; 422  : 		}
; 423  : 
; 424  : 		if(this->m_BattleData.Time <= 0)

  0135b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0135e	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  01362	7f 14		 jg	 SHORT $LN15@ProcState_@4

; 425  : 		{
; 426  : 			this->SetSuccessValue(false);

  01364	6a 00		 push	 0
  01366	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01369	e8 00 00 00 00	 call	 ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue

; 427  : 			this->SetState(BATTLEOFGAION_STATE_END);

  0136e	6a 09		 push	 9
  01370	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01373	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN15@ProcState_@4:

; 428  : 		}
; 429  : 	}
; 430  : }

  01378	5f		 pop	 edi
  01379	5e		 pop	 esi
  0137a	5b		 pop	 ebx
  0137b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0137e	33 cd		 xor	 ecx, ebp
  01380	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01385	8b e5		 mov	 esp, ebp
  01387	5d		 pop	 ebp
  01388	c3		 ret	 0
?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE2
; Function compile flags: /Odtp /ZI
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY3
; _this$ = ecx

; 433  : {

  01390	55		 push	 ebp
  01391	8b ec		 mov	 ebp, esp
  01393	83 ec 48	 sub	 esp, 72			; 00000048H
  01396	53		 push	 ebx
  01397	56		 push	 esi
  01398	57		 push	 edi
  01399	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 434  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  0139c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  013a2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  013a5	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  013a8	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 435  : 	if(Tick >= 1000)

  013ab	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  013b2	7c 36		 jl	 SHORT $LN3@ProcState_@5

; 436  : 	{
; 437  : 		this->m_BattleData.Time -= Tick;

  013b4	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  013b7	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  013ba	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  013bd	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  013c0	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 438  : 		this->m_BattleData.TickCount = GetTickCount();

  013c3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  013c9	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  013cc	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 439  : 
; 440  : 		this->SendEventInterface();

  013cf	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  013d2	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 441  : 
; 442  : 		if(this->m_BattleData.Time <= 0)

  013d7	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  013da	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  013de	7f 0a		 jg	 SHORT $LN3@ProcState_@5

; 443  : 		{
; 444  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE3);

  013e0	6a 06		 push	 6
  013e2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  013e5	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN3@ProcState_@5:

; 445  : 		}
; 446  : 	}
; 447  : }

  013ea	5f		 pop	 edi
  013eb	5e		 pop	 esi
  013ec	5b		 pop	 ebx
  013ed	8b e5		 mov	 esp, ebp
  013ef	5d		 pop	 ebp
  013f0	c3		 ret	 0
?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY3
_TEXT	ENDS
PUBLIC	??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@
CONST	SEGMENT
??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@ DB '%s is'
	DB	' dead, go to Gaion''s castle and kill him!', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$221166 = -564					; size = 272
_pNotice$221162 = -292					; size = 272
_n$221156 = -20						; size = 4
_i$221152 = -16						; size = 4
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE3
; _this$ = ecx

; 450  : {

  01400	55		 push	 ebp
  01401	8b ec		 mov	 ebp, esp
  01403	81 ec 74 02 00
	00		 sub	 esp, 628		; 00000274H
  01409	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0140e	33 c5		 xor	 eax, ebp
  01410	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01413	53		 push	 ebx
  01414	56		 push	 esi
  01415	57		 push	 edi
  01416	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 451  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  01419	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0141f	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01422	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  01425	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 452  : 	if(Tick >= 1000)

  01428	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  0142f	0f 8c bf 03 00
	00		 jl	 $LN15@ProcState_@6

; 453  : 	{
; 454  : 		this->m_BattleData.Time -= Tick;

  01435	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01438	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  0143b	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  0143e	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01441	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 455  : 		this->m_BattleData.TickCount = GetTickCount();

  01444	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0144a	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0144d	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 456  : 
; 457  : 		this->SendEventInterface();

  01450	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01453	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 458  : 		this->MonsterProc();

  01458	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0145b	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc

; 459  : 
; 460  : 		for(int i=0;i<26;++i)

  01460	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _i$221152[ebp], 0
  01467	eb 09		 jmp	 SHORT $LN13@ProcState_@6
$LN12@ProcState_@6:
  01469	8b 45 f0	 mov	 eax, DWORD PTR _i$221152[ebp]
  0146c	83 c0 01	 add	 eax, 1
  0146f	89 45 f0	 mov	 DWORD PTR _i$221152[ebp], eax
$LN13@ProcState_@6:
  01472	83 7d f0 1a	 cmp	 DWORD PTR _i$221152[ebp], 26 ; 0000001aH
  01476	0f 8d 56 01 00
	00		 jge	 $LN11@ProcState_@6

; 461  : 		{
; 462  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  0147c	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _n$221156[ebp], 0
  01483	eb 09		 jmp	 SHORT $LN10@ProcState_@6
$LN9@ProcState_@6:
  01485	8b 45 ec	 mov	 eax, DWORD PTR _n$221156[ebp]
  01488	83 c0 01	 add	 eax, 1
  0148b	89 45 ec	 mov	 DWORD PTR _n$221156[ebp], eax
$LN10@ProcState_@6:
  0148e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  01493	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  01498	39 45 ec	 cmp	 DWORD PTR _n$221156[ebp], eax
  0149b	0f 8d 2c 01 00
	00		 jge	 $LN8@ProcState_@6

; 463  : 			{
; 464  : 
; 465  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_GaionTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_GaionTrap[i].X+5
; 466  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_GaionTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_GaionTrap[i].Y+5)

  014a1	8b 4d ec	 mov	 ecx, DWORD PTR _n$221156[ebp]
  014a4	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  014a7	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  014ad	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  014b2	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  014b8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  014be	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  014c6	8b 45 f0	 mov	 eax, DWORD PTR _i$221152[ebp]
  014c9	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8]
  014d0	83 e9 05	 sub	 ecx, 5
  014d3	3b d1		 cmp	 edx, ecx
  014d5	0f 8c ed 00 00
	00		 jl	 $LN7@ProcState_@6
  014db	8b 4d ec	 mov	 ecx, DWORD PTR _n$221156[ebp]
  014de	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  014e1	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  014e7	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  014ec	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  014f2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  014f8	0f bf 94 01 44
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+324]
  01500	8b 45 f0	 mov	 eax, DWORD PTR _i$221152[ebp]
  01503	8b 0c c5 00 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8]
  0150a	83 c1 05	 add	 ecx, 5
  0150d	3b d1		 cmp	 edx, ecx
  0150f	0f 8f b3 00 00
	00		 jg	 $LN7@ProcState_@6
  01515	8b 4d ec	 mov	 ecx, DWORD PTR _n$221156[ebp]
  01518	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  0151b	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  01521	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  01526	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0152c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01532	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  0153a	8b 45 f0	 mov	 eax, DWORD PTR _i$221152[ebp]
  0153d	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8+4]
  01544	83 e9 05	 sub	 ecx, 5
  01547	3b d1		 cmp	 edx, ecx
  01549	7c 7d		 jl	 SHORT $LN7@ProcState_@6
  0154b	8b 4d ec	 mov	 ecx, DWORD PTR _n$221156[ebp]
  0154e	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01551	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  01557	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  0155c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01562	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01568	0f bf 94 01 46
	01 00 00	 movsx	 edx, WORD PTR [ecx+eax+326]
  01570	8b 45 f0	 mov	 eax, DWORD PTR _i$221152[ebp]
  01573	8b 0c c5 04 00
	00 00		 mov	 ecx, DWORD PTR _g_GaionTrap[eax*8+4]
  0157a	83 c1 05	 add	 ecx, 5
  0157d	3b d1		 cmp	 edx, ecx
  0157f	7f 47		 jg	 SHORT $LN7@ProcState_@6

; 467  : 				{
; 468  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  01581	6a 00		 push	 0
  01583	6a 00		 push	 0
  01585	6a 00		 push	 0
  01587	6a 00		 push	 0
  01589	6a 00		 push	 0
  0158b	6a 00		 push	 0
  0158d	6a 00		 push	 0
  0158f	8b 4d ec	 mov	 ecx, DWORD PTR _n$221156[ebp]
  01592	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01595	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  0159b	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  015a0	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  015a6	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  015ac	50		 push	 eax
  015ad	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  015b0	8b 48 44	 mov	 ecx, DWORD PTR [eax+68]
  015b3	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  015b9	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  015bf	51		 push	 ecx
  015c0	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  015c5	83 c4 24	 add	 esp, 36			; 00000024H
$LN7@ProcState_@6:

; 469  : 				}
; 470  : 			}

  015c8	e9 b8 fe ff ff	 jmp	 $LN9@ProcState_@6
$LN8@ProcState_@6:

; 471  : 		}

  015cd	e9 97 fe ff ff	 jmp	 $LN12@ProcState_@6
$LN11@ProcState_@6:

; 472  : 
; 473  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  015d2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  015d5	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  015d9	7e 65		 jle	 SHORT $LN6@ProcState_@6
  015db	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  015de	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  015e1	99		 cdq
  015e2	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  015e7	f7 f9		 idiv	 ecx
  015e9	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  015ec	0f b6 4a 4c	 movzx	 ecx, BYTE PTR [edx+76]
  015f0	3b c1		 cmp	 eax, ecx
  015f2	74 4c		 je	 SHORT $LN6@ProcState_@6

; 474  : 		{
; 475  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  015f4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  015f7	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  015fa	99		 cdq
  015fb	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  01600	f7 f9		 idiv	 ecx
  01602	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01605	88 42 4c	 mov	 BYTE PTR [edx+76], al

; 476  : 			PMSG_NOTICE pNotice;
; 477  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  01608	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0160b	0f b6 48 4c	 movzx	 ecx, BYTE PTR [eax+76]
  0160f	83 c1 01	 add	 ecx, 1
  01612	51		 push	 ecx
  01613	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  01618	6a 00		 push	 0
  0161a	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$221162[ebp]
  01620	52		 push	 edx
  01621	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  01626	83 c4 10	 add	 esp, 16			; 00000010H

; 478  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  01629	0f b6 85 dd fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221162[ebp+1]
  01630	50		 push	 eax
  01631	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221162[ebp]
  01637	51		 push	 ecx
  01638	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0163b	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
$LN6@ProcState_@6:

; 479  : 		}
; 480  : 
; 481  : 		if(gObj[this->m_BattleData.GateIndex[6]].Live == false && this->m_BattleData.PhazeStep == 0)

  01640	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01643	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  01646	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0164c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01652	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  01657	85 c0		 test	 eax, eax
  01659	75 22		 jne	 SHORT $LN5@ProcState_@6
  0165b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0165e	83 78 48 00	 cmp	 DWORD PTR [eax+72], 0
  01662	75 19		 jne	 SHORT $LN5@ProcState_@6

; 482  : 		{
; 483  : 			this->SetMapAttr(6);

  01664	6a 06		 push	 6
  01666	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01669	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 484  : 			this->m_BattleData.PhazeStep++;

  0166e	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01671	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  01674	83 c1 01	 add	 ecx, 1
  01677	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0167a	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN5@ProcState_@6:

; 485  : 		}
; 486  : 
; 487  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  0167d	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01680	83 78 3c 00	 cmp	 DWORD PTR [eax+60], 0
  01684	0f 8f 96 00 00
	00		 jg	 $LN4@ProcState_@6
  0168a	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0168d	83 78 48 01	 cmp	 DWORD PTR [eax+72], 1
  01691	0f 85 89 00 00
	00		 jne	 $LN4@ProcState_@6

; 488  : 		{
; 489  : 			PMSG_NOTICE pNotice;
; 490  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "%s is dead, go to Gaion's castle and kill him!", gObj[this->m_BattleData.CurrentLeaderIndex].Name);

  01697	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0169a	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0169d	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  016a3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  016a9	8d 44 0a 77	 lea	 eax, DWORD PTR [edx+ecx+119]
  016ad	50		 push	 eax
  016ae	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@
  016b3	6a 00		 push	 0
  016b5	8d 8d cc fd ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221166[ebp]
  016bb	51		 push	 ecx
  016bc	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  016c1	83 c4 10	 add	 esp, 16			; 00000010H

; 491  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  016c4	0f b6 85 cd fd
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221166[ebp+1]
  016cb	50		 push	 eax
  016cc	8d 8d cc fd ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221166[ebp]
  016d2	51		 push	 ecx
  016d3	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  016d6	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 492  : 			gObj[this->m_BattleData.GateIndex[7]].m_ImmuneToHarmCount = 0;

  016db	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  016de	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  016e1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  016e7	33 d2		 xor	 edx, edx
  016e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  016ee	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 493  : 			gObj[this->m_BattleData.GateIndex[7]].m_ImmuneToMagicCount = 0;

  016f6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  016f9	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  016fc	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01702	33 d2		 xor	 edx, edx
  01704	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01709	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 494  : 			this->m_BattleData.PhazeStep++;

  01711	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01714	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  01717	83 c1 01	 add	 ecx, 1
  0171a	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0171d	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN4@ProcState_@6:

; 495  : 		}
; 496  : 		if(gObj[this->m_BattleData.GateIndex[7]].Live == false && this->m_BattleData.PhazeStep == 2)

  01720	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01723	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  01726	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0172c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01732	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  01737	85 c0		 test	 eax, eax
  01739	75 58		 jne	 SHORT $LN3@ProcState_@6
  0173b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0173e	83 78 48 02	 cmp	 DWORD PTR [eax+72], 2
  01742	75 4f		 jne	 SHORT $LN3@ProcState_@6

; 497  : 		{
; 498  : 			gObj[this->m_BattleData.GateIndex[8]].m_ImmuneToHarmCount = 0;

  01744	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01747	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  0174a	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01750	33 d2		 xor	 edx, edx
  01752	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01757	66 89 94 08 84
	22 00 00	 mov	 WORD PTR [eax+ecx+8836], dx

; 499  : 			gObj[this->m_BattleData.GateIndex[8]].m_ImmuneToMagicCount = 0;

  0175f	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01762	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  01765	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0176b	33 d2		 xor	 edx, edx
  0176d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01772	66 89 94 08 82
	22 00 00	 mov	 WORD PTR [eax+ecx+8834], dx

; 500  : 			this->SetMapAttr(7);

  0177a	6a 07		 push	 7
  0177c	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0177f	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 501  : 			this->m_BattleData.PhazeStep++;

  01784	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01787	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  0178a	83 c1 01	 add	 ecx, 1
  0178d	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01790	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN3@ProcState_@6:

; 502  : 		}
; 503  : 		if(gObj[this->m_BattleData.GateIndex[8]].Live == false && this->m_BattleData.PhazeStep == 3)

  01793	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01796	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  01799	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0179f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  017a5	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  017aa	85 c0		 test	 eax, eax
  017ac	75 29		 jne	 SHORT $LN2@ProcState_@6
  017ae	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017b1	83 78 48 03	 cmp	 DWORD PTR [eax+72], 3
  017b5	75 20		 jne	 SHORT $LN2@ProcState_@6

; 504  : 		{
; 505  : 			this->SetMapAttr(8);

  017b7	6a 08		 push	 8
  017b9	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  017bc	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 506  : 			this->PortalSetState = false;

  017c1	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017c4	c6 40 50 00	 mov	 BYTE PTR [eax+80], 0

; 507  : 			this->m_BattleData.PhazeStep++;

  017c8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017cb	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  017ce	83 c1 01	 add	 ecx, 1
  017d1	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  017d4	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN2@ProcState_@6:

; 508  : 		}
; 509  : 
; 510  : 		if(this->m_BattleData.Time <= 0)

  017d7	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  017da	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  017de	7f 14		 jg	 SHORT $LN15@ProcState_@6

; 511  : 		{
; 512  : 			this->SetSuccessValue(false);

  017e0	6a 00		 push	 0
  017e2	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  017e5	e8 00 00 00 00	 call	 ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue

; 513  : 			this->SetState(BATTLEOFGAION_STATE_END);

  017ea	6a 09		 push	 9
  017ec	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  017ef	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN15@ProcState_@6:

; 514  : 		}
; 515  : 	}
; 516  : }

  017f4	5f		 pop	 edi
  017f5	5e		 pop	 esi
  017f6	5b		 pop	 ebx
  017f7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  017fa	33 cd		 xor	 ecx, ebp
  017fc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01801	8b e5		 mov	 esp, ebp
  01803	5d		 pop	 ebp
  01804	c3		 ret	 0
?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE3
; Function compile flags: /Odtp /ZI
_Tick$ = -8						; size = 4
_this$ = -4						; size = 4
?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY4
; _this$ = ecx

; 519  : {

  01810	55		 push	 ebp
  01811	8b ec		 mov	 ebp, esp
  01813	83 ec 48	 sub	 esp, 72			; 00000048H
  01816	53		 push	 ebx
  01817	56		 push	 esi
  01818	57		 push	 edi
  01819	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 520  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  0181c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  01822	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01825	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  01828	89 45 f8	 mov	 DWORD PTR _Tick$[ebp], eax

; 521  : 	if(Tick >= 1000)

  0182b	81 7d f8 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  01832	7c 36		 jl	 SHORT $LN3@ProcState_@7

; 522  : 	{
; 523  : 		this->m_BattleData.Time -= Tick;

  01834	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01837	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  0183a	2b 4d f8	 sub	 ecx, DWORD PTR _Tick$[ebp]
  0183d	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  01840	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 524  : 		this->m_BattleData.TickCount = GetTickCount();

  01843	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  01849	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0184c	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 525  : 
; 526  : 		this->SendEventInterface();

  0184f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01852	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 527  : 
; 528  : 		if(this->m_BattleData.Time <= 0)

  01857	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0185a	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  0185e	7f 0a		 jg	 SHORT $LN3@ProcState_@7

; 529  : 		{
; 530  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE4);

  01860	6a 08		 push	 8
  01862	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01865	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN3@ProcState_@7:

; 531  : 		}
; 532  : 	}
; 533  : }

  0186a	5f		 pop	 edi
  0186b	5e		 pop	 esi
  0186c	5b		 pop	 ebx
  0186d	8b e5		 mov	 esp, ebp
  0186f	5d		 pop	 ebp
  01870	c3		 ret	 0
?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY4
_TEXT	ENDS
PUBLIC	??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@
CONST	SEGMENT
??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@ DB '%s'
	DB	' will escape after %d minutes!', 00H	; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pNotice$221184 = -284					; size = 272
_Tick$ = -12						; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE4
; _this$ = ecx

; 536  : {

  01880	55		 push	 ebp
  01881	8b ec		 mov	 ebp, esp
  01883	81 ec 5c 01 00
	00		 sub	 esp, 348		; 0000015cH
  01889	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0188e	33 c5		 xor	 eax, ebp
  01890	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01893	53		 push	 ebx
  01894	56		 push	 esi
  01895	57		 push	 edi
  01896	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 537  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  01899	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0189f	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  018a2	2b 41 34	 sub	 eax, DWORD PTR [ecx+52]
  018a5	89 45 f4	 mov	 DWORD PTR _Tick$[ebp], eax

; 538  : 	if(Tick >= 1000)

  018a8	81 7d f4 e8 03
	00 00		 cmp	 DWORD PTR _Tick$[ebp], 1000 ; 000003e8H
  018af	0f 8c 55 01 00
	00		 jl	 $LN6@ProcState_@8

; 539  : 	{
; 540  : 		this->m_BattleData.Time -= Tick;

  018b5	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  018b8	8b 48 30	 mov	 ecx, DWORD PTR [eax+48]
  018bb	2b 4d f4	 sub	 ecx, DWORD PTR _Tick$[ebp]
  018be	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  018c1	89 4a 30	 mov	 DWORD PTR [edx+48], ecx

; 541  : 		this->m_BattleData.TickCount = GetTickCount();

  018c4	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  018ca	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  018cd	89 41 34	 mov	 DWORD PTR [ecx+52], eax

; 542  : 
; 543  : 		this->SendEventInterface();

  018d0	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  018d3	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 544  : 		this->MonsterProc();

  018d8	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  018db	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc

; 545  : 
; 546  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  018e0	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  018e3	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  018e7	7e 7c		 jle	 SHORT $LN4@ProcState_@8
  018e9	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  018ec	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  018ef	99		 cdq
  018f0	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  018f5	f7 f9		 idiv	 ecx
  018f7	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  018fa	0f b6 4a 4c	 movzx	 ecx, BYTE PTR [edx+76]
  018fe	3b c1		 cmp	 eax, ecx
  01900	74 63		 je	 SHORT $LN4@ProcState_@8

; 547  : 		{
; 548  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  01902	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01905	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  01908	99		 cdq
  01909	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  0190e	f7 f9		 idiv	 ecx
  01910	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01913	88 42 4c	 mov	 BYTE PTR [edx+76], al

; 549  : 			PMSG_NOTICE pNotice;
; 550  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "%s will escape after %d minutes!", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.NotifyCount+1);

  01916	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01919	0f b6 48 4c	 movzx	 ecx, BYTE PTR [eax+76]
  0191d	83 c1 01	 add	 ecx, 1
  01920	51		 push	 ecx
  01921	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  01924	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  01927	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0192d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01933	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  01937	52		 push	 edx
  01938	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@
  0193d	6a 00		 push	 0
  0193f	8d 85 e4 fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$221184[ebp]
  01945	50		 push	 eax
  01946	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx
  0194b	83 c4 14	 add	 esp, 20			; 00000014H

; 551  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  0194e	0f b6 85 e5 fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$221184[ebp+1]
  01955	50		 push	 eax
  01956	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$221184[ebp]
  0195c	51		 push	 ecx
  0195d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01960	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
$LN4@ProcState_@8:

; 552  : 		}
; 553  : 
; 554  : 		if(gObj[this->m_BattleData.GateIndex[9]].Live == false && this->m_BattleData.PhazeStep == 0)

  01965	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01968	8b 48 2c	 mov	 ecx, DWORD PTR [eax+44]
  0196b	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  01971	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01977	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  0197c	85 c0		 test	 eax, eax
  0197e	75 22		 jne	 SHORT $LN3@ProcState_@8
  01980	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01983	83 78 48 00	 cmp	 DWORD PTR [eax+72], 0
  01987	75 19		 jne	 SHORT $LN3@ProcState_@8

; 555  : 		{
; 556  : 			this->SetMapAttr(9);

  01989	6a 09		 push	 9
  0198b	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0198e	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 557  : 			this->m_BattleData.PhazeStep++;

  01993	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01996	8b 48 48	 mov	 ecx, DWORD PTR [eax+72]
  01999	83 c1 01	 add	 ecx, 1
  0199c	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  0199f	89 4a 48	 mov	 DWORD PTR [edx+72], ecx
$LN3@ProcState_@8:

; 558  : 		}
; 559  : 
; 560  : 		if(gObj[this->m_BattleData.CurrentLeaderIndex].Live == false)

  019a2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  019a5	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  019a8	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  019ae	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  019b4	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  019b9	85 c0		 test	 eax, eax
  019bb	75 14		 jne	 SHORT $LN2@ProcState_@8

; 561  : 		{
; 562  : 			this->SetSuccessValue(true);

  019bd	6a 01		 push	 1
  019bf	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  019c2	e8 00 00 00 00	 call	 ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue

; 563  : 			this->SetState(BATTLEOFGAION_STATE_END);

  019c7	6a 09		 push	 9
  019c9	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  019cc	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN2@ProcState_@8:

; 564  : 		}
; 565  : 		if(this->m_BattleData.Time <= 0 && gObj[this->m_BattleData.CurrentLeaderIndex].Live == true)

  019d1	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  019d4	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  019d8	7f 30		 jg	 SHORT $LN6@ProcState_@8
  019da	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  019dd	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  019e0	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  019e6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  019ec	0f b6 44 0a 6a	 movzx	 eax, BYTE PTR [edx+ecx+106]
  019f1	83 f8 01	 cmp	 eax, 1
  019f4	75 14		 jne	 SHORT $LN6@ProcState_@8

; 566  : 		{
; 567  : 			this->SetSuccessValue(false);

  019f6	6a 00		 push	 0
  019f8	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  019fb	e8 00 00 00 00	 call	 ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue

; 568  : 			this->SetState(BATTLEOFGAION_STATE_END);

  01a00	6a 09		 push	 9
  01a02	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01a05	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN6@ProcState_@8:

; 569  : 		}
; 570  : 	}
; 571  : }

  01a0a	5f		 pop	 edi
  01a0b	5e		 pop	 esi
  01a0c	5b		 pop	 ebx
  01a0d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01a10	33 cd		 xor	 ecx, ebp
  01a12	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01a17	8b e5		 mov	 esp, ebp
  01a19	5d		 pop	 ebp
  01a1a	c3		 ret	 0
?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE4
; Function compile flags: /Odtp /ZI
_this$ = -4						; size = 4
?ProcState_END@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_END
; _this$ = ecx

; 574  : {

  01a20	55		 push	 ebp
  01a21	8b ec		 mov	 ebp, esp
  01a23	83 ec 44	 sub	 esp, 68			; 00000044H
  01a26	53		 push	 ebx
  01a27	56		 push	 esi
  01a28	57		 push	 edi
  01a29	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 575  : 	return;
; 576  : }

  01a2c	5f		 pop	 edi
  01a2d	5e		 pop	 esi
  01a2e	5b		 pop	 ebx
  01a2f	8b e5		 mov	 esp, ebp
  01a31	5d		 pop	 ebp
  01a32	c3		 ret	 0
?ProcState_END@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_END
_TEXT	ENDS
PUBLIC	?GetEventTime@CImperialBattleOfGaion@@QAEHXZ	; CImperialBattleOfGaion::GetEventTime
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetEventTime@CImperialBattleOfGaion@@QAEHXZ PROC	; CImperialBattleOfGaion::GetEventTime
; _this$ = ecx

; 579  : {

  01a40	55		 push	 ebp
  01a41	8b ec		 mov	 ebp, esp
  01a43	83 ec 44	 sub	 esp, 68			; 00000044H
  01a46	53		 push	 ebx
  01a47	56		 push	 esi
  01a48	57		 push	 edi
  01a49	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 580  : 	return this->m_BattleData.Time / 1000;

  01a4c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01a4f	8b 40 30	 mov	 eax, DWORD PTR [eax+48]
  01a52	99		 cdq
  01a53	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
  01a58	f7 f9		 idiv	 ecx

; 581  : }

  01a5a	5f		 pop	 edi
  01a5b	5e		 pop	 esi
  01a5c	5b		 pop	 ebx
  01a5d	8b e5		 mov	 esp, ebp
  01a5f	5d		 pop	 ebp
  01a60	c3		 ret	 0
?GetEventTime@CImperialBattleOfGaion@@QAEHXZ ENDP	; CImperialBattleOfGaion::GetEventTime
_TEXT	ENDS
PUBLIC	?GetEventState@CImperialBattleOfGaion@@QAEHXZ	; CImperialBattleOfGaion::GetEventState
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_CurrState$ = -8					; size = 4
_this$ = -4						; size = 4
?GetEventState@CImperialBattleOfGaion@@QAEHXZ PROC	; CImperialBattleOfGaion::GetEventState
; _this$ = ecx

; 584  : {

  01a70	55		 push	 ebp
  01a71	8b ec		 mov	 ebp, esp
  01a73	83 ec 48	 sub	 esp, 72			; 00000048H
  01a76	53		 push	 ebx
  01a77	56		 push	 esi
  01a78	57		 push	 edi
  01a79	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 585  : 	int CurrState = this->m_BattleData.CurrentState;

  01a7c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01a7f	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  01a82	89 4d f8	 mov	 DWORD PTR _CurrState$[ebp], ecx

; 586  : 	if(CurrState == 1 || CurrState == 3 || CurrState == 5 || CurrState == 7)

  01a85	83 7d f8 01	 cmp	 DWORD PTR _CurrState$[ebp], 1
  01a89	74 12		 je	 SHORT $LN6@GetEventSt
  01a8b	83 7d f8 03	 cmp	 DWORD PTR _CurrState$[ebp], 3
  01a8f	74 0c		 je	 SHORT $LN6@GetEventSt
  01a91	83 7d f8 05	 cmp	 DWORD PTR _CurrState$[ebp], 5
  01a95	74 06		 je	 SHORT $LN6@GetEventSt
  01a97	83 7d f8 07	 cmp	 DWORD PTR _CurrState$[ebp], 7
  01a9b	75 09		 jne	 SHORT $LN7@GetEventSt
$LN6@GetEventSt:

; 587  : 	{
; 588  : 		return 1;

  01a9d	b8 01 00 00 00	 mov	 eax, 1
  01aa2	eb 32		 jmp	 SHORT $LN8@GetEventSt
  01aa4	eb 2b		 jmp	 SHORT $LN5@GetEventSt
$LN7@GetEventSt:

; 589  : 	}
; 590  : 	else if(CurrState == 2 || CurrState == 4 || CurrState == 6 || CurrState == 8)

  01aa6	83 7d f8 02	 cmp	 DWORD PTR _CurrState$[ebp], 2
  01aaa	74 12		 je	 SHORT $LN3@GetEventSt
  01aac	83 7d f8 04	 cmp	 DWORD PTR _CurrState$[ebp], 4
  01ab0	74 0c		 je	 SHORT $LN3@GetEventSt
  01ab2	83 7d f8 06	 cmp	 DWORD PTR _CurrState$[ebp], 6
  01ab6	74 06		 je	 SHORT $LN3@GetEventSt
  01ab8	83 7d f8 08	 cmp	 DWORD PTR _CurrState$[ebp], 8
  01abc	75 09		 jne	 SHORT $LN4@GetEventSt
$LN3@GetEventSt:

; 591  : 	{
; 592  : 		return 2;

  01abe	b8 02 00 00 00	 mov	 eax, 2
  01ac3	eb 11		 jmp	 SHORT $LN8@GetEventSt
  01ac5	eb 0a		 jmp	 SHORT $LN5@GetEventSt
$LN4@GetEventSt:

; 593  : 	}
; 594  : 	else if(CurrState == 9)

  01ac7	83 7d f8 09	 cmp	 DWORD PTR _CurrState$[ebp], 9
  01acb	75 04		 jne	 SHORT $LN5@GetEventSt

; 595  : 	{
; 596  : 		return 0;

  01acd	33 c0		 xor	 eax, eax
  01acf	eb 05		 jmp	 SHORT $LN8@GetEventSt
$LN5@GetEventSt:

; 597  : 	}
; 598  : 	return 3;

  01ad1	b8 03 00 00 00	 mov	 eax, 3
$LN8@GetEventSt:

; 599  : }

  01ad6	5f		 pop	 edi
  01ad7	5e		 pop	 esi
  01ad8	5b		 pop	 ebx
  01ad9	8b e5		 mov	 esp, ebp
  01adb	5d		 pop	 ebp
  01adc	c3		 ret	 0
?GetEventState@CImperialBattleOfGaion@@QAEHXZ ENDP	; CImperialBattleOfGaion::GetEventState
_TEXT	ENDS
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv83 = -80						; size = 4
_i$221213 = -12						; size = 4
_index$ = -8						; size = 4
_this$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
_iSize$ = 12						; size = 4
?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z PROC ; CImperialBattleOfGaion::SendImperialPlayers
; _this$ = ecx

; 602  : {

  01ae0	55		 push	 ebp
  01ae1	8b ec		 mov	 ebp, esp
  01ae3	83 ec 50	 sub	 esp, 80			; 00000050H
  01ae6	53		 push	 ebx
  01ae7	56		 push	 esi
  01ae8	57		 push	 edi
  01ae9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 603  : 	int index;
; 604  : 	for(int i=0; i < g_ImperialBattleUserMng.GetUserCount();++i)

  01aec	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _i$221213[ebp], 0
  01af3	eb 09		 jmp	 SHORT $LN4@SendImperi
$LN3@SendImperi:
  01af5	8b 45 f4	 mov	 eax, DWORD PTR _i$221213[ebp]
  01af8	83 c0 01	 add	 eax, 1
  01afb	89 45 f4	 mov	 DWORD PTR _i$221213[ebp], eax
$LN4@SendImperi:
  01afe	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  01b03	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  01b08	39 45 f4	 cmp	 DWORD PTR _i$221213[ebp], eax
  01b0b	7d 7a		 jge	 SHORT $LN5@SendImperi

; 605  : 	{
; 606  : 		index = g_ImperialBattleUserMng.m_BattleUser[i].GetIndex();

  01b0d	8b 4d f4	 mov	 ecx, DWORD PTR _i$221213[ebp]
  01b10	6b c9 0c	 imul	 ecx, 12			; 0000000cH
  01b13	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+4
  01b19	e8 00 00 00 00	 call	 ?GetIndex@CImperialBattleUser@@QAEHXZ ; CImperialBattleUser::GetIndex
  01b1e	89 45 f8	 mov	 DWORD PTR _index$[ebp], eax

; 607  : 
; 608  : 		if(IMPERIAL_MAP_RANGE(gObj[index].MapNumber))

  01b21	8b 45 f8	 mov	 eax, DWORD PTR _index$[ebp]
  01b24	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01b2a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01b30	0f b6 94 01 49
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+329]
  01b38	83 fa 45	 cmp	 edx, 69			; 00000045H
  01b3b	7d 09		 jge	 SHORT $LN7@SendImperi
  01b3d	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv83[ebp], 0
  01b44	eb 22		 jmp	 SHORT $LN8@SendImperi
$LN7@SendImperi:
  01b46	8b 45 f8	 mov	 eax, DWORD PTR _index$[ebp]
  01b49	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01b4f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01b55	0f b6 94 01 49
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+329]
  01b5d	33 c0		 xor	 eax, eax
  01b5f	83 fa 48	 cmp	 edx, 72			; 00000048H
  01b62	0f 9e c0	 setle	 al
  01b65	89 45 b0	 mov	 DWORD PTR tv83[ebp], eax
$LN8@SendImperi:
  01b68	83 7d b0 00	 cmp	 DWORD PTR tv83[ebp], 0
  01b6c	74 14		 je	 SHORT $LN1@SendImperi

; 609  : 		{
; 610  : 			DataSend(index, lpMsg, iSize);

  01b6e	8b 45 0c	 mov	 eax, DWORD PTR _iSize$[ebp]
  01b71	50		 push	 eax
  01b72	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  01b75	51		 push	 ecx
  01b76	8b 55 f8	 mov	 edx, DWORD PTR _index$[ebp]
  01b79	52		 push	 edx
  01b7a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  01b7f	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@SendImperi:

; 611  : 		}	
; 612  : 	}

  01b82	e9 6e ff ff ff	 jmp	 $LN3@SendImperi
$LN5@SendImperi:

; 613  : }

  01b87	5f		 pop	 edi
  01b88	5e		 pop	 esi
  01b89	5b		 pop	 ebx
  01b8a	8b e5		 mov	 esp, ebp
  01b8c	5d		 pop	 ebp
  01b8d	c2 08 00	 ret	 8
?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ENDP ; CImperialBattleOfGaion::SendImperialPlayers
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	?PHeadSubSetB@@YAXPAEEEH@Z:PROC			; PHeadSubSetB
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_Time$ = -28						; size = 4
_pMsg$ = -24						; size = 16
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SendEventInterface
; _this$ = ecx

; 616  : {

  01b90	55		 push	 ebp
  01b91	8b ec		 mov	 ebp, esp
  01b93	83 ec 5c	 sub	 esp, 92			; 0000005cH
  01b96	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  01b9b	33 c5		 xor	 eax, ebp
  01b9d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01ba0	53		 push	 ebx
  01ba1	56		 push	 esi
  01ba2	57		 push	 edi
  01ba3	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 617  : 	PMSG_FORT_TIMER pMsg;
; 618  : 
; 619  : 	PHeadSubSetB((LPBYTE)&pMsg,0xF7,0x04,sizeof(pMsg));

  01ba6	6a 10		 push	 16			; 00000010H
  01ba8	6a 04		 push	 4
  01baa	68 f7 00 00 00	 push	 247			; 000000f7H
  01baf	8d 45 e8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  01bb2	50		 push	 eax
  01bb3	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  01bb8	83 c4 10	 add	 esp, 16			; 00000010H

; 620  : 
; 621  : 	int Time = this->GetEventTime() * 4;

  01bbb	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01bbe	e8 00 00 00 00	 call	 ?GetEventTime@CImperialBattleOfGaion@@QAEHXZ ; CImperialBattleOfGaion::GetEventTime
  01bc3	c1 e0 02	 shl	 eax, 2
  01bc6	89 45 e4	 mov	 DWORD PTR _Time$[ebp], eax

; 622  : 
; 623  : 	pMsg.Status = this->GetEventState();

  01bc9	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01bcc	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGaion@@QAEHXZ ; CImperialBattleOfGaion::GetEventState
  01bd1	88 45 ec	 mov	 BYTE PTR _pMsg$[ebp+4], al

; 624  : 	pMsg.Unk1 = 1;

  01bd4	c6 45 ed 01	 mov	 BYTE PTR _pMsg$[ebp+5], 1

; 625  : 	pMsg.Unk2 = 1;

  01bd8	c6 45 ee 01	 mov	 BYTE PTR _pMsg$[ebp+6], 1

; 626  : 	pMsg.Unk3 = 0;

  01bdc	c6 45 ef 00	 mov	 BYTE PTR _pMsg$[ebp+7], 0

; 627  : 	pMsg.Unk5 = 0;

  01be0	c6 45 f0 00	 mov	 BYTE PTR _pMsg$[ebp+8], 0

; 628  : 	pMsg.TimerH = HIBYTE(Time);

  01be4	8b 45 e4	 mov	 eax, DWORD PTR _Time$[ebp]
  01be7	c1 e8 08	 shr	 eax, 8
  01bea	25 ff 00 00 00	 and	 eax, 255		; 000000ffH
  01bef	88 45 f2	 mov	 BYTE PTR _pMsg$[ebp+10], al

; 629  : 	pMsg.TimerL = LOBYTE(Time);

  01bf2	8b 45 e4	 mov	 eax, DWORD PTR _Time$[ebp]
  01bf5	25 ff 00 00 00	 and	 eax, 255		; 000000ffH
  01bfa	88 45 f1	 mov	 BYTE PTR _pMsg$[ebp+9], al

; 630  : 	pMsg.Unk4 = 0;

  01bfd	c6 45 f3 00	 mov	 BYTE PTR _pMsg$[ebp+11], 0

; 631  : 	pMsg.Monster = this->m_BattleData.MonsterCount;

  01c01	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01c04	8b 48 3c	 mov	 ecx, DWORD PTR [eax+60]
  01c07	89 4d f4	 mov	 DWORD PTR _pMsg$[ebp+12], ecx

; 632  : 
; 633  : 	this->SendImperialPlayers((LPBYTE)&pMsg, pMsg.h.size);

  01c0a	0f b6 45 e9	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  01c0e	50		 push	 eax
  01c0f	8d 4d e8	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  01c12	51		 push	 ecx
  01c13	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01c16	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 634  : }

  01c1b	5f		 pop	 edi
  01c1c	5e		 pop	 esi
  01c1d	5b		 pop	 ebx
  01c1e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01c21	33 cd		 xor	 ecx, ebp
  01c23	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01c28	8b e5		 mov	 esp, ebp
  01c2a	5d		 pop	 ebp
  01c2b	c3		 ret	 0
?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SendEventInterface
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpMsgBody$ = -276					; size = 4
_lpMsg$ = -272						; size = 4
_PacketSize$ = -268					; size = 2
_Buff$ = -264						; size = 256
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_Gate$ = 8						; size = 4
?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z PROC	; CImperialBattleOfGaion::SetMapAttr
; _this$ = ecx

; 637  : {

  01c30	55		 push	 ebp
  01c31	8b ec		 mov	 ebp, esp
  01c33	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  01c39	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  01c3e	33 c5		 xor	 eax, ebp
  01c40	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01c43	53		 push	 ebx
  01c44	56		 push	 esi
  01c45	57		 push	 edi
  01c46	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 638  : 	char Buff[256];
; 639  : 	short PacketSize = 0;

  01c49	33 c0		 xor	 eax, eax
  01c4b	66 89 85 f4 fe
	ff ff		 mov	 WORD PTR _PacketSize$[ebp], ax

; 640  : 	PMSG_SETMAPATTR_COUNT * lpMsg = (PMSG_SETMAPATTR_COUNT *)(Buff);

  01c52	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  01c58	89 85 f0 fe ff
	ff		 mov	 DWORD PTR _lpMsg$[ebp], eax

; 641  : 	PMSG_SETMAPATTR * lpMsgBody = (PMSG_SETMAPATTR *)(Buff + sizeof(PMSG_SETMAPATTR_COUNT));

  01c5e	8d 85 ff fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp+7]
  01c64	89 85 ec fe ff
	ff		 mov	 DWORD PTR _lpMsgBody$[ebp], eax

; 642  : 
; 643  : 	lpMsgBody[0].btX = g_GaionMapAttr[Gate].StartX;

  01c6a	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  01c6d	c1 e0 04	 shl	 eax, 4
  01c70	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  01c76	8a 90 00 00 00
	00		 mov	 dl, BYTE PTR _g_GaionMapAttr[eax]
  01c7c	88 11		 mov	 BYTE PTR [ecx], dl

; 644  : 	lpMsgBody[0].btY = g_GaionMapAttr[Gate].StartY;

  01c7e	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  01c81	c1 e0 04	 shl	 eax, 4
  01c84	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  01c8a	8a 90 04 00 00
	00		 mov	 dl, BYTE PTR _g_GaionMapAttr[eax+4]
  01c90	88 51 01	 mov	 BYTE PTR [ecx+1], dl

; 645  : 	lpMsgBody[1].btX = g_GaionMapAttr[Gate].EndX;

  01c93	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  01c96	c1 e0 04	 shl	 eax, 4
  01c99	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  01c9f	8a 90 08 00 00
	00		 mov	 dl, BYTE PTR _g_GaionMapAttr[eax+8]
  01ca5	88 51 02	 mov	 BYTE PTR [ecx+2], dl

; 646  : 	lpMsgBody[1].btY = g_GaionMapAttr[Gate].EndY;

  01ca8	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  01cab	c1 e0 04	 shl	 eax, 4
  01cae	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _lpMsgBody$[ebp]
  01cb4	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR _g_GaionMapAttr[eax+12]
  01cba	88 51 03	 mov	 BYTE PTR [ecx+3], dl

; 647  : 
; 648  : 	PacketSize = (sizeof(PMSG_SETMAPATTR_COUNT)+6*sizeof(PMSG_SETMAPATTR));

  01cbd	b8 13 00 00 00	 mov	 eax, 19			; 00000013H
  01cc2	66 89 85 f4 fe
	ff ff		 mov	 WORD PTR _PacketSize$[ebp], ax

; 649  : 
; 650  : 	lpMsg->btMapAttr = 16;

  01cc9	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01ccf	c6 40 04 10	 mov	 BYTE PTR [eax+4], 16	; 00000010H

; 651  : 	lpMsg->btMapSetType = 1;

  01cd3	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01cd9	c6 40 05 01	 mov	 BYTE PTR [eax+5], 1

; 652  : 	lpMsg->btCount = 1;

  01cdd	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01ce3	c6 40 06 01	 mov	 BYTE PTR [eax+6], 1

; 653  : 	lpMsg->btType = 0;

  01ce7	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01ced	c6 40 03 00	 mov	 BYTE PTR [eax+3], 0

; 654  : 
; 655  : 	lpMsg->h.c = 0xC1;

  01cf1	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01cf7	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H

; 656  : 	lpMsg->h.headcode = 0x46;

  01cfa	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01d00	c6 40 02 46	 mov	 BYTE PTR [eax+2], 70	; 00000046H

; 657  : 	lpMsg->h.size = PacketSize;

  01d04	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _lpMsg$[ebp]
  01d0a	8a 8d f4 fe ff
	ff		 mov	 cl, BYTE PTR _PacketSize$[ebp]
  01d10	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 658  : 
; 659  : 	this->SendImperialPlayers((LPBYTE)Buff, PacketSize);

  01d13	0f bf 85 f4 fe
	ff ff		 movsx	 eax, WORD PTR _PacketSize$[ebp]
  01d1a	50		 push	 eax
  01d1b	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  01d21	51		 push	 ecx
  01d22	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01d25	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 660  : }

  01d2a	5f		 pop	 edi
  01d2b	5e		 pop	 esi
  01d2c	5b		 pop	 ebx
  01d2d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01d30	33 cd		 xor	 ecx, ebp
  01d32	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01d37	8b e5		 mov	 esp, ebp
  01d39	5d		 pop	 ebp
  01d3a	c2 04 00	 ret	 4
?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ENDP	; CImperialBattleOfGaion::SetMapAttr
_TEXT	ENDS
EXTRN	?FindGroupMemberObjectIndex@TMonsterAIGroup@@SAHHH@Z:PROC ; TMonsterAIGroup::FindGroupMemberObjectIndex
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_i$221247 = -12						; size = 4
_alivecount$ = -8					; size = 2
_this$ = -4						; size = 4
?MonsterProc@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::MonsterProc
; _this$ = ecx

; 663  : {

  01d40	55		 push	 ebp
  01d41	8b ec		 mov	 ebp, esp
  01d43	83 ec 4c	 sub	 esp, 76			; 0000004cH
  01d46	53		 push	 ebx
  01d47	56		 push	 esi
  01d48	57		 push	 edi
  01d49	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 664  : 	short alivecount = 0;

  01d4c	33 c0		 xor	 eax, eax
  01d4e	66 89 45 f8	 mov	 WORD PTR _alivecount$[ebp], ax

; 665  : 	for(int i=0;i<TMonsterAIGroup::s_iMonsterAIGroupMemberCount[this->m_BattleData.CurrentAIGroup];++i)

  01d52	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _i$221247[ebp], 0
  01d59	eb 09		 jmp	 SHORT $LN4@MonsterPro
$LN3@MonsterPro:
  01d5b	8b 45 f4	 mov	 eax, DWORD PTR _i$221247[ebp]
  01d5e	83 c0 01	 add	 eax, 1
  01d61	89 45 f4	 mov	 DWORD PTR _i$221247[ebp], eax
$LN4@MonsterPro:
  01d64	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01d67	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  01d6a	8b 55 f4	 mov	 edx, DWORD PTR _i$221247[ebp]
  01d6d	3b 14 8d 00 00
	00 00		 cmp	 edx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA[ecx*4]
  01d74	7d 37		 jge	 SHORT $LN2@MonsterPro

; 666  : 	{
; 667  : 		if(gObj[TMonsterAIGroup::FindGroupMemberObjectIndex(this->m_BattleData.CurrentAIGroup, i)].Live == true)

  01d76	8b 45 f4	 mov	 eax, DWORD PTR _i$221247[ebp]
  01d79	50		 push	 eax
  01d7a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01d7d	8b 51 40	 mov	 edx, DWORD PTR [ecx+64]
  01d80	52		 push	 edx
  01d81	e8 00 00 00 00	 call	 ?FindGroupMemberObjectIndex@TMonsterAIGroup@@SAHHH@Z ; TMonsterAIGroup::FindGroupMemberObjectIndex
  01d86	83 c4 08	 add	 esp, 8
  01d89	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  01d8f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  01d95	0f b6 54 01 6a	 movzx	 edx, BYTE PTR [ecx+eax+106]
  01d9a	83 fa 01	 cmp	 edx, 1
  01d9d	75 0c		 jne	 SHORT $LN1@MonsterPro

; 668  : 		{
; 669  : 			++alivecount;

  01d9f	66 8b 45 f8	 mov	 ax, WORD PTR _alivecount$[ebp]
  01da3	66 83 c0 01	 add	 ax, 1
  01da7	66 89 45 f8	 mov	 WORD PTR _alivecount$[ebp], ax
$LN1@MonsterPro:

; 670  : 		}
; 671  : 	}

  01dab	eb ae		 jmp	 SHORT $LN3@MonsterPro
$LN2@MonsterPro:

; 672  : 	this->m_BattleData.MonsterCount = alivecount;

  01dad	0f bf 45 f8	 movsx	 eax, WORD PTR _alivecount$[ebp]
  01db1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01db4	89 41 3c	 mov	 DWORD PTR [ecx+60], eax

; 673  : }

  01db7	5f		 pop	 edi
  01db8	5e		 pop	 esi
  01db9	5b		 pop	 ebx
  01dba	8b e5		 mov	 esp, ebp
  01dbc	5d		 pop	 ebp
  01dbd	c3		 ret	 0
?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::MonsterProc
_TEXT	ENDS
PUBLIC	?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z ; CImperialBattleOfGaion::OperatePortalGate
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_Block$ = 8						; size = 1
_ForAll$ = 12						; size = 1
_aIndex$ = 16						; size = 4
?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z PROC ; CImperialBattleOfGaion::OperatePortalGate
; _this$ = ecx

; 676  : {

  01dc0	55		 push	 ebp
  01dc1	8b ec		 mov	 ebp, esp
  01dc3	83 ec 44	 sub	 esp, 68			; 00000044H
  01dc6	53		 push	 ebx
  01dc7	56		 push	 esi
  01dc8	57		 push	 edi
  01dc9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 677  : 	return;
; 678  : }

  01dcc	5f		 pop	 edi
  01dcd	5e		 pop	 esi
  01dce	5b		 pop	 ebx
  01dcf	8b e5		 mov	 esp, ebp
  01dd1	5d		 pop	 ebp
  01dd2	c2 0c 00	 ret	 12			; 0000000cH
?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z ENDP ; CImperialBattleOfGaion::OperatePortalGate
_TEXT	ENDS
PUBLIC	?SetNextState@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetNextState
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_iNextState$ = -8					; size = 4
_this$ = -4						; size = 4
?SetNextState@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetNextState
; _this$ = ecx

; 681  : {

  01de0	55		 push	 ebp
  01de1	8b ec		 mov	 ebp, esp
  01de3	83 ec 48	 sub	 esp, 72			; 00000048H
  01de6	53		 push	 ebx
  01de7	56		 push	 esi
  01de8	57		 push	 edi
  01de9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 682  : 	int iNextState = this->m_BattleData.CurrentState + 1;

  01dec	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01def	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  01df2	83 c1 01	 add	 ecx, 1
  01df5	89 4d f8	 mov	 DWORD PTR _iNextState$[ebp], ecx

; 683  : 
; 684  : 	if ( iNextState >= BATTLEOFGAION_STATE_END )

  01df8	83 7d f8 09	 cmp	 DWORD PTR _iNextState$[ebp], 9
  01dfc	7c 07		 jl	 SHORT $LN1@SetNextSta

; 685  : 	{
; 686  : 		iNextState = BATTLEOFGAION_STATE_NONE;

  01dfe	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _iNextState$[ebp], 0
$LN1@SetNextSta:

; 687  : 	}
; 688  : 
; 689  : 	this->SetState(iNextState);

  01e05	8b 45 f8	 mov	 eax, DWORD PTR _iNextState$[ebp]
  01e08	50		 push	 eax
  01e09	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01e0c	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState

; 690  : }

  01e11	5f		 pop	 edi
  01e12	5e		 pop	 esi
  01e13	5b		 pop	 ebx
  01e14	8b e5		 mov	 esp, ebp
  01e16	5d		 pop	 ebp
  01e17	c3		 ret	 0
?SetNextState@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetNextState
_TEXT	ENDS
PUBLIC	?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfGaion::EnterPortal
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z PROC ; CImperialBattleOfGaion::EnterPortal
; _this$ = ecx

; 693  : {

  01e20	55		 push	 ebp
  01e21	8b ec		 mov	 ebp, esp
  01e23	83 ec 44	 sub	 esp, 68			; 00000044H
  01e26	53		 push	 ebx
  01e27	56		 push	 esi
  01e28	57		 push	 edi
  01e29	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 694  : 	if(this->m_BattleData.MonsterCount > 0)

  01e2c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01e2f	83 78 3c 00	 cmp	 DWORD PTR [eax+60], 0
  01e33	7e 04		 jle	 SHORT $LN2@EnterPorta

; 695  : 		return false;

  01e35	32 c0		 xor	 al, al
  01e37	eb 1c		 jmp	 SHORT $LN3@EnterPorta
$LN2@EnterPorta:

; 696  : 	
; 697  : 	//if(this->m_BattleData.PhazeStep != 4)	//DeBug
; 698  : 	//	return false;
; 699  : 
; 700  : 	if(!this->PortalSetState)

  01e39	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01e3c	0f b6 48 50	 movzx	 ecx, BYTE PTR [eax+80]
  01e40	85 c9		 test	 ecx, ecx
  01e42	75 0f		 jne	 SHORT $LN1@EnterPorta

; 701  : 	{
; 702  : 		this->SetNextState();

  01e44	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  01e47	e8 00 00 00 00	 call	 ?SetNextState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetNextState

; 703  : 		this->PortalSetState = true;

  01e4c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  01e4f	c6 40 50 01	 mov	 BYTE PTR [eax+80], 1
$LN1@EnterPorta:

; 704  : 	}
; 705  : 
; 706  : 	return true;

  01e53	b0 01		 mov	 al, 1
$LN3@EnterPorta:

; 707  : }

  01e55	5f		 pop	 edi
  01e56	5e		 pop	 esi
  01e57	5b		 pop	 ebx
  01e58	8b e5		 mov	 esp, ebp
  01e5a	5d		 pop	 ebp
  01e5b	c2 04 00	 ret	 4
?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z ENDP ; CImperialBattleOfGaion::EnterPortal
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_State$ = -24						; size = 4
_pMsg$ = -20						; size = 12
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
?SendEventState@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SendEventState
; _this$ = ecx

; 710  : {

  01e60	55		 push	 ebp
  01e61	8b ec		 mov	 ebp, esp
  01e63	83 ec 58	 sub	 esp, 88			; 00000058H
  01e66	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  01e6b	33 c5		 xor	 eax, ebp
  01e6d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01e70	53		 push	 ebx
  01e71	56		 push	 esi
  01e72	57		 push	 edi
  01e73	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 711  : 	PMSG_FORT_ENTER_RESULT pMsg;
; 712  : 
; 713  : 	PHeadSubSetB((LPBYTE)&pMsg, 0xF7, 0x02, sizeof(pMsg));

  01e76	6a 0c		 push	 12			; 0000000cH
  01e78	6a 02		 push	 2
  01e7a	68 f7 00 00 00	 push	 247			; 000000f7H
  01e7f	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  01e82	50		 push	 eax
  01e83	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  01e88	83 c4 10	 add	 esp, 16			; 00000010H

; 714  : 
; 715  : 	pMsg.EntryTime = 0;

  01e8b	33 c0		 xor	 eax, eax
  01e8d	66 89 45 f6	 mov	 WORD PTR _pMsg$[ebp+10], ax

; 716  : 	pMsg.Day = 7;

  01e91	c6 45 f1 07	 mov	 BYTE PTR _pMsg$[ebp+5], 7

; 717  : 	pMsg.Result = 0;

  01e95	c6 45 f0 00	 mov	 BYTE PTR _pMsg$[ebp+4], 0

; 718  : 	
; 719  : 	int State;
; 720  : 
; 721  : 	if(this->m_BattleData.CurrentState == 1 || this->m_BattleData.CurrentState == 2)

  01e99	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01e9c	83 78 38 01	 cmp	 DWORD PTR [eax+56], 1
  01ea0	74 09		 je	 SHORT $LN9@SendEventS
  01ea2	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01ea5	83 78 38 02	 cmp	 DWORD PTR [eax+56], 2
  01ea9	75 09		 jne	 SHORT $LN10@SendEventS
$LN9@SendEventS:

; 722  : 	{
; 723  : 		State = 1;

  01eab	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _State$[ebp], 1
  01eb2	eb 46		 jmp	 SHORT $LN8@SendEventS
$LN10@SendEventS:

; 724  : 	}
; 725  : 	else if(this->m_BattleData.CurrentState == 3 || this->m_BattleData.CurrentState == 4)

  01eb4	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01eb7	83 78 38 03	 cmp	 DWORD PTR [eax+56], 3
  01ebb	74 09		 je	 SHORT $LN6@SendEventS
  01ebd	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01ec0	83 78 38 04	 cmp	 DWORD PTR [eax+56], 4
  01ec4	75 09		 jne	 SHORT $LN7@SendEventS
$LN6@SendEventS:

; 726  : 	{
; 727  : 		State = 2;

  01ec6	c7 45 e8 02 00
	00 00		 mov	 DWORD PTR _State$[ebp], 2
  01ecd	eb 2b		 jmp	 SHORT $LN8@SendEventS
$LN7@SendEventS:

; 728  : 	}
; 729  : 	else if(this->m_BattleData.CurrentState == 5 || this->m_BattleData.CurrentState == 6)

  01ecf	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01ed2	83 78 38 05	 cmp	 DWORD PTR [eax+56], 5
  01ed6	74 09		 je	 SHORT $LN3@SendEventS
  01ed8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01edb	83 78 38 06	 cmp	 DWORD PTR [eax+56], 6
  01edf	75 09		 jne	 SHORT $LN4@SendEventS
$LN3@SendEventS:

; 730  : 	{
; 731  : 		State = 3;

  01ee1	c7 45 e8 03 00
	00 00		 mov	 DWORD PTR _State$[ebp], 3
  01ee8	eb 10		 jmp	 SHORT $LN8@SendEventS
$LN4@SendEventS:

; 732  : 	}
; 733  : 	else if(this->m_BattleData.CurrentState == 7)

  01eea	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01eed	83 78 38 07	 cmp	 DWORD PTR [eax+56], 7
  01ef1	75 07		 jne	 SHORT $LN8@SendEventS

; 734  : 	{
; 735  : 		State = 4;

  01ef3	c7 45 e8 04 00
	00 00		 mov	 DWORD PTR _State$[ebp], 4
$LN8@SendEventS:

; 736  : 	}
; 737  : 
; 738  : 	pMsg.State = State;

  01efa	8a 45 e8	 mov	 al, BYTE PTR _State$[ebp]
  01efd	88 45 f2	 mov	 BYTE PTR _pMsg$[ebp+6], al

; 739  : 	pMsg.Unk = 3;

  01f00	c6 45 f3 03	 mov	 BYTE PTR _pMsg$[ebp+7], 3

; 740  : 
; 741  : 	this->SendImperialPlayers((LPBYTE)&pMsg, pMsg.h.size);

  01f04	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  01f08	50		 push	 eax
  01f09	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  01f0c	51		 push	 ecx
  01f0d	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01f10	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 742  : }

  01f15	5f		 pop	 edi
  01f16	5e		 pop	 esi
  01f17	5b		 pop	 ebx
  01f18	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01f1b	33 cd		 xor	 ecx, ebp
  01f1d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01f22	8b e5		 mov	 esp, ebp
  01f24	5d		 pop	 ebp
  01f25	c3		 ret	 0
?SendEventState@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SendEventState
_TEXT	ENDS
END
