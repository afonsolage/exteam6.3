; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\ItemSystemFor380.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_7CItemSystemFor380@@6B@			; CItemSystemFor380::`vftable'
PUBLIC	??0CItemSystemFor380@@QAE@XZ			; CItemSystemFor380::CItemSystemFor380
PUBLIC	??_R4CItemSystemFor380@@6B@			; CItemSystemFor380::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCItemSystemFor380@@@8			; CItemSystemFor380 `RTTI Type Descriptor'
PUBLIC	??_R3CItemSystemFor380@@8			; CItemSystemFor380::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CItemSystemFor380@@8			; CItemSystemFor380::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CItemSystemFor380@@8		; CItemSystemFor380::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	_memset:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECItemSystemFor380@@UAEPAXI@Z:PROC		; CItemSystemFor380::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CItemSystemFor380@@8
; File d:\projects\exteam6.3\source\gameserver\gameserver\itemsystemfor380.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CItemSystemFor380@@8 DD FLAT:??_R0?AVCItemSystemFor380@@@8 ; CItemSystemFor380::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CItemSystemFor380@@8
rdata$r	ENDS
;	COMDAT ??_R2CItemSystemFor380@@8
rdata$r	SEGMENT
??_R2CItemSystemFor380@@8 DD FLAT:??_R1A@?0A@EA@CItemSystemFor380@@8 ; CItemSystemFor380::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CItemSystemFor380@@8
rdata$r	SEGMENT
??_R3CItemSystemFor380@@8 DD 00H			; CItemSystemFor380::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CItemSystemFor380@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCItemSystemFor380@@@8
_DATA	SEGMENT
??_R0?AVCItemSystemFor380@@@8 DD FLAT:??_7type_info@@6B@ ; CItemSystemFor380 `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCItemSystemFor380@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CItemSystemFor380@@6B@
rdata$r	SEGMENT
??_R4CItemSystemFor380@@6B@ DD 00H			; CItemSystemFor380::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCItemSystemFor380@@@8
	DD	FLAT:??_R3CItemSystemFor380@@8
rdata$r	ENDS
;	COMDAT ??_7CItemSystemFor380@@6B@
CONST	SEGMENT
??_7CItemSystemFor380@@6B@ DD FLAT:??_R4CItemSystemFor380@@6B@ ; CItemSystemFor380::`vftable'
	DD	FLAT:??_ECItemSystemFor380@@UAEPAXI@Z
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CItemSystemFor380@@QAE@XZ PROC			; CItemSystemFor380::CItemSystemFor380
; _this$ = ecx

; 21   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CItemSystemFor380@@6B@

; 22   : 	memset(this->m_itemOption, 0, sizeof(this->m_itemOption));

  00015	68 00 00 02 00	 push	 131072			; 00020000H
  0001a	6a 00		 push	 0
  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	83 c0 04	 add	 eax, 4
  00022	50		 push	 eax
  00023	e8 00 00 00 00	 call	 _memset
  00028	83 c4 0c	 add	 esp, 12			; 0000000cH

; 23   : }

  0002b	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002e	5f		 pop	 edi
  0002f	5e		 pop	 esi
  00030	5b		 pop	 ebx
  00031	8b e5		 mov	 esp, ebp
  00033	5d		 pop	 ebp
  00034	c3		 ret	 0
??0CItemSystemFor380@@QAE@XZ ENDP			; CItemSystemFor380::CItemSystemFor380
_TEXT	ENDS
PUBLIC	??1CItemSystemFor380@@UAE@XZ			; CItemSystemFor380::~CItemSystemFor380
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Odtp /ZI
;	COMDAT ??_GCItemSystemFor380@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCItemSystemFor380@@UAEPAXI@Z PROC			; CItemSystemFor380::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000f	e8 00 00 00 00	 call	 ??1CItemSystemFor380@@UAE@XZ ; CItemSystemFor380::~CItemSystemFor380
  00014	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00017	83 e0 01	 and	 eax, 1
  0001a	74 0c		 je	 SHORT $LN1@scalar
  0001c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001f	50		 push	 eax
  00020	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00025	83 c4 04	 add	 esp, 4
$LN1@scalar:
  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	5f		 pop	 edi
  0002c	5e		 pop	 esi
  0002d	5b		 pop	 ebx
  0002e	8b e5		 mov	 esp, ebp
  00030	5d		 pop	 ebp
  00031	c2 04 00	 ret	 4
??_GCItemSystemFor380@@UAEPAXI@Z ENDP			; CItemSystemFor380::`scalar deleting destructor'
; Function compile flags: /Odtp /ZI
_TEXT	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CItemSystemFor380@@UAE@XZ PROC			; CItemSystemFor380::~CItemSystemFor380
; _this$ = ecx

; 26   : {

  00040	55		 push	 ebp
  00041	8b ec		 mov	 ebp, esp
  00043	83 ec 44	 sub	 esp, 68			; 00000044H
  00046	53		 push	 ebx
  00047	56		 push	 esi
  00048	57		 push	 edi
  00049	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0004c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0004f	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CItemSystemFor380@@6B@

; 27   : 	return;
; 28   : }

  00055	5f		 pop	 edi
  00056	5e		 pop	 esi
  00057	5b		 pop	 ebx
  00058	8b e5		 mov	 esp, ebp
  0005a	5d		 pop	 ebp
  0005b	c3		 ret	 0
??1CItemSystemFor380@@UAE@XZ ENDP			; CItemSystemFor380::~CItemSystemFor380
_TEXT	ENDS
PUBLIC	??_C@_0BB@NEOEMLNM@MixRateForGrade3?$AA@	; `string'
PUBLIC	??_C@_0BB@MNPPPKJN@MixRateForGrade2?$AA@	; `string'
PUBLIC	??_C@_0BB@OGNCKJFO@MixRateForGrade1?$AA@	; `string'
PUBLIC	??_C@_0O@OBABOJH@NeedZenForMix?$AA@		; `string'
PUBLIC	??_C@_0BL@NIODIINL@CountOfSuhoOfHarmonyForMix?$AA@ ; `string'
PUBLIC	??_C@_0BM@LEJPEKJC@CountOfJewelOfHarmonyForMix?$AA@ ; `string'
PUBLIC	??_C@_0P@EMJDPFDH@GameServerInfo?$AA@		; `string'
PUBLIC	??_C@_0BE@IOGDNNHO@System380ItemSystem?$AA@	; `string'
PUBLIC	??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@	; `string'
PUBLIC	?_InitOption@CItemSystemFor380@@QAEXXZ		; CItemSystemFor380::_InitOption
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	?GetNewPath@CDirPath@@QAEPADPAD@Z:PROC		; CDirPath::GetNewPath
EXTRN	?gDirPath@@3VCDirPath@@A:BYTE			; gDirPath
;	COMDAT ??_C@_0BB@NEOEMLNM@MixRateForGrade3?$AA@
CONST	SEGMENT
??_C@_0BB@NEOEMLNM@MixRateForGrade3?$AA@ DB 'MixRateForGrade3', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@MNPPPKJN@MixRateForGrade2?$AA@
CONST	SEGMENT
??_C@_0BB@MNPPPKJN@MixRateForGrade2?$AA@ DB 'MixRateForGrade2', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@OGNCKJFO@MixRateForGrade1?$AA@
CONST	SEGMENT
??_C@_0BB@OGNCKJFO@MixRateForGrade1?$AA@ DB 'MixRateForGrade1', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@OBABOJH@NeedZenForMix?$AA@
CONST	SEGMENT
??_C@_0O@OBABOJH@NeedZenForMix?$AA@ DB 'NeedZenForMix', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@NIODIINL@CountOfSuhoOfHarmonyForMix?$AA@
CONST	SEGMENT
??_C@_0BL@NIODIINL@CountOfSuhoOfHarmonyForMix?$AA@ DB 'CountOfSuhoOfHarmo'
	DB	'nyForMix', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@LEJPEKJC@CountOfJewelOfHarmonyForMix?$AA@
CONST	SEGMENT
??_C@_0BM@LEJPEKJC@CountOfJewelOfHarmonyForMix?$AA@ DB 'CountOfJewelOfHar'
	DB	'monyForMix', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
CONST	SEGMENT
??_C@_0P@EMJDPFDH@GameServerInfo?$AA@ DB 'GameServerInfo', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@IOGDNNHO@System380ItemSystem?$AA@
CONST	SEGMENT
??_C@_0BE@IOGDNNHO@System380ItemSystem?$AA@ DB 'System380ItemSystem', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
CONST	SEGMENT
??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@ DB 'commonserver.cfg', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
?_InitOption@CItemSystemFor380@@QAEXXZ PROC		; CItemSystemFor380::_InitOption
; _this$ = ecx

; 32   : {

  00060	55		 push	 ebp
  00061	8b ec		 mov	 ebp, esp
  00063	83 ec 44	 sub	 esp, 68			; 00000044H
  00066	53		 push	 ebx
  00067	56		 push	 esi
  00068	57		 push	 edi
  00069	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 33   : 	memset(this->m_itemOption, 0, sizeof(this->m_itemOption));

  0006c	68 00 00 02 00	 push	 131072			; 00020000H
  00071	6a 00		 push	 0
  00073	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00076	83 c0 04	 add	 eax, 4
  00079	50		 push	 eax
  0007a	e8 00 00 00 00	 call	 _memset
  0007f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 34   : 
; 35   : 	this->m_iNeedJewelOfHarmonyCount = 1;

  00082	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00085	c7 80 08 00 02
	00 01 00 00 00	 mov	 DWORD PTR [eax+131080], 1

; 36   : 	this->m_iNeedJewelOfSuhoCount = 1;

  0008f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00092	c7 80 0c 00 02
	00 01 00 00 00	 mov	 DWORD PTR [eax+131084], 1

; 37   : 	this->m_iNeedZenFor380Option = 10000000;

  0009c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0009f	c7 80 10 00 02
	00 80 96 98 00	 mov	 DWORD PTR [eax+131088], 10000000 ; 00989680H

; 38   : 	this->m_iRateSuccessRateForMix1 = 50;

  000a9	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000ac	c7 80 14 00 02
	00 32 00 00 00	 mov	 DWORD PTR [eax+131092], 50 ; 00000032H

; 39   : 	this->m_iRateSuccessRateForMix2 = 60;

  000b6	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000b9	c7 80 18 00 02
	00 3c 00 00 00	 mov	 DWORD PTR [eax+131096], 60 ; 0000003cH

; 40   : 	this->m_iRateSuccessRateForMix3 = 100;

  000c3	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  000c6	c7 80 1c 00 02
	00 64 00 00 00	 mov	 DWORD PTR [eax+131100], 100 ; 00000064H

; 41   : 
; 42   : 	this->m_bSystemFor380ItemOption = GetPrivateProfileInt("GameServerInfo", "System380ItemSystem", 0, gDirPath.GetNewPath("commonserver.cfg"));

  000d0	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  000d5	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  000da	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  000df	50		 push	 eax
  000e0	6a 00		 push	 0
  000e2	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@IOGDNNHO@System380ItemSystem?$AA@
  000e7	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  000ec	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  000f2	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000f5	89 81 04 00 02
	00		 mov	 DWORD PTR [ecx+131076], eax

; 43   : 	this->m_iNeedJewelOfHarmonyCount = GetPrivateProfileInt("GameServerInfo", "CountOfJewelOfHarmonyForMix", 1, gDirPath.GetNewPath("commonserver.cfg"));

  000fb	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  00100	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  00105	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  0010a	50		 push	 eax
  0010b	6a 01		 push	 1
  0010d	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@LEJPEKJC@CountOfJewelOfHarmonyForMix?$AA@
  00112	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  00117	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  0011d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00120	89 81 08 00 02
	00		 mov	 DWORD PTR [ecx+131080], eax

; 44   : 	this->m_iNeedJewelOfSuhoCount = GetPrivateProfileInt("GameServerInfo", "CountOfSuhoOfHarmonyForMix", 1, gDirPath.GetNewPath("commonserver.cfg"));

  00126	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  0012b	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  00130	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  00135	50		 push	 eax
  00136	6a 01		 push	 1
  00138	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@NIODIINL@CountOfSuhoOfHarmonyForMix?$AA@
  0013d	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  00142	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  00148	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0014b	89 81 0c 00 02
	00		 mov	 DWORD PTR [ecx+131084], eax

; 45   : 	this->m_iNeedZenFor380Option = GetPrivateProfileInt("GameServerInfo", "NeedZenForMix", 10000000, gDirPath.GetNewPath("commonserver.cfg"));

  00151	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  00156	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  0015b	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  00160	50		 push	 eax
  00161	68 80 96 98 00	 push	 10000000		; 00989680H
  00166	68 00 00 00 00	 push	 OFFSET ??_C@_0O@OBABOJH@NeedZenForMix?$AA@
  0016b	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  00170	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  00176	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00179	89 81 10 00 02
	00		 mov	 DWORD PTR [ecx+131088], eax

; 46   : 	this->m_iRateSuccessRateForMix1 = GetPrivateProfileInt("GameServerInfo", "MixRateForGrade1", 50, gDirPath.GetNewPath("commonserver.cfg"));

  0017f	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  00184	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  00189	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  0018e	50		 push	 eax
  0018f	6a 32		 push	 50			; 00000032H
  00191	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@OGNCKJFO@MixRateForGrade1?$AA@
  00196	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  0019b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  001a1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  001a4	89 81 14 00 02
	00		 mov	 DWORD PTR [ecx+131092], eax

; 47   : 	this->m_iRateSuccessRateForMix2 = GetPrivateProfileInt("GameServerInfo", "MixRateForGrade2", 60, gDirPath.GetNewPath("commonserver.cfg"));

  001aa	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  001af	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  001b4	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  001b9	50		 push	 eax
  001ba	6a 3c		 push	 60			; 0000003cH
  001bc	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@MNPPPKJN@MixRateForGrade2?$AA@
  001c1	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  001c6	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  001cc	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  001cf	89 81 18 00 02
	00		 mov	 DWORD PTR [ecx+131096], eax

; 48   : 	this->m_iRateSuccessRateForMix3 = GetPrivateProfileInt("GameServerInfo", "MixRateForGrade3", 60, gDirPath.GetNewPath("commonserver.cfg"));

  001d5	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@IGLHFEOF@commonserver?4cfg?$AA@
  001da	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  001df	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  001e4	50		 push	 eax
  001e5	6a 3c		 push	 60			; 0000003cH
  001e7	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@NEOEMLNM@MixRateForGrade3?$AA@
  001ec	68 00 00 00 00	 push	 OFFSET ??_C@_0P@EMJDPFDH@GameServerInfo?$AA@
  001f1	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileIntA@16
  001f7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  001fa	89 81 1c 00 02
	00		 mov	 DWORD PTR [ecx+131100], eax

; 49   : }

  00200	5f		 pop	 edi
  00201	5e		 pop	 esi
  00202	5b		 pop	 ebx
  00203	8b e5		 mov	 esp, ebp
  00205	5d		 pop	 ebp
  00206	c3		 ret	 0
?_InitOption@CItemSystemFor380@@QAEXXZ ENDP		; CItemSystemFor380::_InitOption
_TEXT	ENDS
PUBLIC	??_C@_03JBJLGPFL@end?$AA@			; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	?Load380ItemOptionInfo@CItemSystemFor380@@QAEHPAD@Z ; CItemSystemFor380::Load380ItemOptionInfo
EXTRN	_fclose:PROC
EXTRN	_strcmp:PROC
EXTRN	_fopen:PROC
EXTRN	__ftol2_sse:PROC
_BSS	SEGMENT
_TokenString DB	064H DUP (?)
_TokenNumber DD	01H DUP (?)
_SMDFile DD	01H DUP (?)
_BSS	ENDS
;	COMDAT ??_C@_03JBJLGPFL@end?$AA@
CONST	SEGMENT
??_C@_03JBJLGPFL@end?$AA@ DB 'end', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv208 = -104						; size = 4
tv198 = -104						; size = 4
tv188 = -104						; size = 4
tv178 = -104						; size = 4
tv206 = -100						; size = 4
tv196 = -100						; size = 4
tv186 = -100						; size = 4
tv176 = -100						; size = 4
tv203 = -94						; size = 2
tv193 = -94						; size = 2
tv183 = -94						; size = 2
tv173 = -94						; size = 2
_iTime$227516 = -28					; size = 4
_p$227506 = -24						; size = 4
__index$227504 = -20					; size = 4
__type$227498 = -16					; size = 4
_Index$227491 = -12					; size = 4
_Token$ = -8						; size = 4
_this$ = -4						; size = 4
_filename$ = 8						; size = 4
?Load380ItemOptionInfo@CItemSystemFor380@@QAEHPAD@Z PROC ; CItemSystemFor380::Load380ItemOptionInfo
; _this$ = ecx

; 55   : {

  00210	55		 push	 ebp
  00211	8b ec		 mov	 ebp, esp
  00213	83 ec 68	 sub	 esp, 104		; 00000068H
  00216	53		 push	 ebx
  00217	56		 push	 esi
  00218	57		 push	 edi
  00219	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 56   : 	enum SMDToken Token;
; 57   : 	SMDFile = fopen(filename, "r");

  0021c	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  00221	8b 45 08	 mov	 eax, DWORD PTR _filename$[ebp]
  00224	50		 push	 eax
  00225	e8 00 00 00 00	 call	 _fopen
  0022a	83 c4 08	 add	 esp, 8
  0022d	a3 00 00 00 00	 mov	 DWORD PTR _SMDFile, eax

; 58   : 
; 59   : 	if ( SMDFile == NULL )

  00232	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR _SMDFile, 0
  00239	75 07		 jne	 SHORT $LN10@Load380Ite

; 60   : 		return FALSE;

  0023b	33 c0		 xor	 eax, eax
  0023d	e9 cd 01 00 00	 jmp	 $LN11@Load380Ite
$LN10@Load380Ite:

; 61   : 
; 62   : 	this->_InitOption();

  00242	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00245	e8 00 00 00 00	 call	 ?_InitOption@CItemSystemFor380@@QAEXXZ ; CItemSystemFor380::_InitOption
$LN9@Load380Ite:

; 63   : 
; 64   : 
; 65   : 	while ( true )

  0024a	b8 01 00 00 00	 mov	 eax, 1
  0024f	85 c0		 test	 eax, eax
  00251	0f 84 a5 01 00
	00		 je	 $LN8@Load380Ite

; 66   : 	{
; 67   : 		Token = (SMDToken)GetToken();

  00257	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0025c	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 68   : 
; 69   : 		if ( Token == END )

  0025f	83 7d f8 02	 cmp	 DWORD PTR _Token$[ebp], 2
  00263	75 05		 jne	 SHORT $LN7@Load380Ite

; 70   : 			break;

  00265	e9 92 01 00 00	 jmp	 $LN8@Load380Ite
$LN7@Load380Ite:

; 71   : 
; 72   : 		if ( Token == NUMBER )

  0026a	83 7d f8 01	 cmp	 DWORD PTR _Token$[ebp], 1
  0026e	0f 85 83 01 00
	00		 jne	 $LN4@Load380Ite

; 73   : 		{
; 74   : 			int Index = (int)TokenNumber;

  00274	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  0027a	e8 00 00 00 00	 call	 __ftol2_sse
  0027f	89 45 f4	 mov	 DWORD PTR _Index$227491[ebp], eax
$LN5@Load380Ite:

; 75   : 
; 76   : 			while ( true )

  00282	b8 01 00 00 00	 mov	 eax, 1
  00287	85 c0		 test	 eax, eax
  00289	0f 84 68 01 00
	00		 je	 $LN4@Load380Ite

; 77   : 			{
; 78   : 				if ( Index == 0 )

  0028f	83 7d f4 00	 cmp	 DWORD PTR _Index$227491[ebp], 0
  00293	0f 85 59 01 00
	00		 jne	 $LN3@Load380Ite

; 79   : 				{
; 80   : 					Token = (SMDToken)GetToken();

  00299	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  0029e	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 81   : 					int _type = (int)TokenNumber;

  002a1	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  002a7	e8 00 00 00 00	 call	 __ftol2_sse
  002ac	89 45 f0	 mov	 DWORD PTR __type$227498[ebp], eax

; 82   : 
; 83   : 					if ( Token == NAME )

  002af	83 7d f8 00	 cmp	 DWORD PTR _Token$[ebp], 0
  002b3	75 20		 jne	 SHORT $LN1@Load380Ite

; 84   : 					{
; 85   : 						if ( !strcmp("end", TokenString))

  002b5	68 00 00 00 00	 push	 OFFSET _TokenString
  002ba	68 00 00 00 00	 push	 OFFSET ??_C@_03JBJLGPFL@end?$AA@
  002bf	e8 00 00 00 00	 call	 _strcmp
  002c4	83 c4 08	 add	 esp, 8
  002c7	85 c0		 test	 eax, eax
  002c9	75 0a		 jne	 SHORT $LN1@Load380Ite

; 86   : 						{
; 87   : 							return TRUE;

  002cb	b8 01 00 00 00	 mov	 eax, 1
  002d0	e9 3a 01 00 00	 jmp	 $LN11@Load380Ite
$LN1@Load380Ite:

; 88   : 						}
; 89   : 					}
; 90   : 
; 91   : 					Token = (SMDToken)GetToken();

  002d5	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  002da	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 92   : 					int _index = (int)TokenNumber;

  002dd	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  002e3	e8 00 00 00 00	 call	 __ftol2_sse
  002e8	89 45 ec	 mov	 DWORD PTR __index$227504[ebp], eax

; 93   : 
; 94   : 					ITEMOPTION_FOR380ITEM * p = &this->m_itemOption[ITEMGET(_type, _index)];

  002eb	8b 45 f0	 mov	 eax, DWORD PTR __type$227498[ebp]
  002ee	c1 e0 09	 shl	 eax, 9
  002f1	03 45 ec	 add	 eax, DWORD PTR __index$227504[ebp]
  002f4	c1 e0 04	 shl	 eax, 4
  002f7	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  002fa	8d 54 01 04	 lea	 edx, DWORD PTR [ecx+eax+4]
  002fe	89 55 e8	 mov	 DWORD PTR _p$227506[ebp], edx

; 95   : 					p->IsLoad = TRUE;

  00301	8b 45 e8	 mov	 eax, DWORD PTR _p$227506[ebp]
  00304	c7 00 01 00 00
	00		 mov	 DWORD PTR [eax], 1

; 96   : 					p->m_Type = _type;

  0030a	8b 45 e8	 mov	 eax, DWORD PTR _p$227506[ebp]
  0030d	8a 4d f0	 mov	 cl, BYTE PTR __type$227498[ebp]
  00310	88 48 04	 mov	 BYTE PTR [eax+4], cl

; 97   : 					p->m_Index = _index;

  00313	8b 45 e8	 mov	 eax, DWORD PTR _p$227506[ebp]
  00316	8a 4d ec	 mov	 cl, BYTE PTR __index$227504[ebp]
  00319	88 48 05	 mov	 BYTE PTR [eax+5], cl

; 98   : 
; 99   : 					Token = (SMDToken)GetToken();

  0031c	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00321	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 100  : 					p->m_Option1 = (BYTE)TokenNumber;

  00324	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  0032a	d9 7d a2	 fnstcw	 WORD PTR tv173[ebp]
  0032d	0f b7 45 a2	 movzx	 eax, WORD PTR tv173[ebp]
  00331	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  00336	89 45 9c	 mov	 DWORD PTR tv176[ebp], eax
  00339	d9 6d 9c	 fldcw	 WORD PTR tv176[ebp]
  0033c	db 5d 98	 fistp	 DWORD PTR tv178[ebp]
  0033f	d9 6d a2	 fldcw	 WORD PTR tv173[ebp]
  00342	8a 45 98	 mov	 al, BYTE PTR tv178[ebp]
  00345	8b 4d e8	 mov	 ecx, DWORD PTR _p$227506[ebp]
  00348	88 41 06	 mov	 BYTE PTR [ecx+6], al

; 101  : 
; 102  : 					Token = (SMDToken)GetToken();

  0034b	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00350	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 103  : 					p->m_Value1 = (WORD)TokenNumber;

  00353	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  00359	d9 7d a2	 fnstcw	 WORD PTR tv183[ebp]
  0035c	0f b7 45 a2	 movzx	 eax, WORD PTR tv183[ebp]
  00360	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  00365	89 45 9c	 mov	 DWORD PTR tv186[ebp], eax
  00368	d9 6d 9c	 fldcw	 WORD PTR tv186[ebp]
  0036b	db 5d 98	 fistp	 DWORD PTR tv188[ebp]
  0036e	d9 6d a2	 fldcw	 WORD PTR tv183[ebp]
  00371	66 8b 45 98	 mov	 ax, WORD PTR tv188[ebp]
  00375	8b 4d e8	 mov	 ecx, DWORD PTR _p$227506[ebp]
  00378	66 89 41 08	 mov	 WORD PTR [ecx+8], ax

; 104  : 
; 105  : 					Token = (SMDToken)GetToken();

  0037c	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  00381	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 106  : 					p->m_Option2 = (BYTE)TokenNumber;

  00384	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  0038a	d9 7d a2	 fnstcw	 WORD PTR tv193[ebp]
  0038d	0f b7 45 a2	 movzx	 eax, WORD PTR tv193[ebp]
  00391	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  00396	89 45 9c	 mov	 DWORD PTR tv196[ebp], eax
  00399	d9 6d 9c	 fldcw	 WORD PTR tv196[ebp]
  0039c	db 5d 98	 fistp	 DWORD PTR tv198[ebp]
  0039f	d9 6d a2	 fldcw	 WORD PTR tv193[ebp]
  003a2	8a 45 98	 mov	 al, BYTE PTR tv198[ebp]
  003a5	8b 4d e8	 mov	 ecx, DWORD PTR _p$227506[ebp]
  003a8	88 41 0a	 mov	 BYTE PTR [ecx+10], al

; 107  : 
; 108  : 					Token = (SMDToken)GetToken();

  003ab	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  003b0	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 109  : 					p->m_Value2 = (WORD)TokenNumber;

  003b3	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  003b9	d9 7d a2	 fnstcw	 WORD PTR tv203[ebp]
  003bc	0f b7 45 a2	 movzx	 eax, WORD PTR tv203[ebp]
  003c0	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  003c5	89 45 9c	 mov	 DWORD PTR tv206[ebp], eax
  003c8	d9 6d 9c	 fldcw	 WORD PTR tv206[ebp]
  003cb	db 5d 98	 fistp	 DWORD PTR tv208[ebp]
  003ce	d9 6d a2	 fldcw	 WORD PTR tv203[ebp]
  003d1	66 8b 45 98	 mov	 ax, WORD PTR tv208[ebp]
  003d5	8b 4d e8	 mov	 ecx, DWORD PTR _p$227506[ebp]
  003d8	66 89 41 0c	 mov	 WORD PTR [ecx+12], ax

; 110  : 
; 111  : 					Token = (SMDToken)GetToken();

  003dc	e8 00 00 00 00	 call	 ?GetToken@@YA?AW4SMDToken@@XZ ; GetToken
  003e1	89 45 f8	 mov	 DWORD PTR _Token$[ebp], eax

; 112  : 					int iTime = (int)TokenNumber;

  003e4	d9 05 00 00 00
	00		 fld	 DWORD PTR _TokenNumber
  003ea	e8 00 00 00 00	 call	 __ftol2_sse
  003ef	89 45 e4	 mov	 DWORD PTR _iTime$227516[ebp], eax
$LN3@Load380Ite:

; 113  : 				}
; 114  : 			}

  003f2	e9 8b fe ff ff	 jmp	 $LN5@Load380Ite
$LN4@Load380Ite:

; 115  : 		}
; 116  : 	}

  003f7	e9 4e fe ff ff	 jmp	 $LN9@Load380Ite
$LN8@Load380Ite:

; 117  : 
; 118  : 	fclose(SMDFile);

  003fc	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  00401	50		 push	 eax
  00402	e8 00 00 00 00	 call	 _fclose
  00407	83 c4 04	 add	 esp, 4

; 119  : 
; 120  : 	return TRUE;

  0040a	b8 01 00 00 00	 mov	 eax, 1
$LN11@Load380Ite:

; 121  : }

  0040f	5f		 pop	 edi
  00410	5e		 pop	 esi
  00411	5b		 pop	 ebx
  00412	8b e5		 mov	 esp, ebp
  00414	5d		 pop	 ebp
  00415	c2 04 00	 ret	 4
?Load380ItemOptionInfo@CItemSystemFor380@@QAEHPAD@Z ENDP ; CItemSystemFor380::Load380ItemOptionInfo
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	_isalnum:PROC
EXTRN	_isalpha:PROC
EXTRN	_atof:PROC
EXTRN	_isdigit:PROC
EXTRN	_getc:PROC
EXTRN	_ungetc:PROC
EXTRN	_isspace:PROC
EXTRN	_fgetc:PROC
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
EXTRN	@__security_check_cookie@4:PROC
_BSS	SEGMENT
_CurrentToken DD 01H DUP (?)
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\include\readscript.h
_BSS	ENDS
_TEXT	SEGMENT
tv90 = -180						; size = 4
_TempString$ = -112					; size = 100
_p$ = -12						; size = 4
_ch$ = -5						; size = 1
__$ArrayPad$ = -4					; size = 4
?GetToken@@YA?AW4SMDToken@@XZ PROC			; GetToken

; 24   : {

  00420	55		 push	 ebp
  00421	8b ec		 mov	 ebp, esp
  00423	81 ec b4 00 00
	00		 sub	 esp, 180		; 000000b4H
  00429	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0042e	33 c5		 xor	 eax, ebp
  00430	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00433	53		 push	 ebx
  00434	56		 push	 esi
  00435	57		 push	 edi

; 25   : 	char ch;
; 26   : 	char* p;
; 27   : 	char TempString[100];
; 28   : 
; 29   : 	TokenString[0]=0;

  00436	c6 05 00 00 00
	00 00		 mov	 BYTE PTR _TokenString, 0
$LN31@GetToken:

; 30   : 
; 31   : 	do
; 32   : 	{
; 33   : 		if ((ch=fgetc(SMDFile)) == -1)

  0043d	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  00442	50		 push	 eax
  00443	e8 00 00 00 00	 call	 _fgetc
  00448	83 c4 04	 add	 esp, 4
  0044b	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  0044e	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  00452	83 f9 ff	 cmp	 ecx, -1
  00455	75 0c		 jne	 SHORT $LN28@GetToken

; 34   : 		{
; 35   : 			return END;	// End of FILE (EOF)

  00457	b8 02 00 00 00	 mov	 eax, 2
  0045c	e9 f7 02 00 00	 jmp	 $LN32@GetToken

; 36   : 		}
; 37   : 		else

  00461	eb 5b		 jmp	 SHORT $LN22@GetToken
$LN28@GetToken:

; 38   : 		{	
; 39   : 			if (ch=='/')		// this is /

  00463	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  00467	83 f8 2f	 cmp	 eax, 47			; 0000002fH
  0046a	75 52		 jne	 SHORT $LN22@GetToken

; 40   : 			{
; 41   : 				if((ch=fgetc(SMDFile)) == '/')

  0046c	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  00471	50		 push	 eax
  00472	e8 00 00 00 00	 call	 _fgetc
  00477	83 c4 04	 add	 esp, 4
  0047a	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  0047d	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  00481	83 f9 2f	 cmp	 ecx, 47			; 0000002fH
  00484	75 38		 jne	 SHORT $LN22@GetToken
$LN24@GetToken:

; 42   : 				{
; 43   : 					while ((ch != '\n') && (ch != -1))	// End of Line (EOL)

  00486	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  0048a	83 f8 0a	 cmp	 eax, 10			; 0000000aH
  0048d	74 1c		 je	 SHORT $LN23@GetToken
  0048f	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  00493	83 f8 ff	 cmp	 eax, -1
  00496	74 13		 je	 SHORT $LN23@GetToken

; 44   : 					{
; 45   : 						ch=fgetc(SMDFile);

  00498	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  0049d	50		 push	 eax
  0049e	e8 00 00 00 00	 call	 _fgetc
  004a3	83 c4 04	 add	 esp, 4
  004a6	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al

; 46   : 					}

  004a9	eb db		 jmp	 SHORT $LN24@GetToken
$LN23@GetToken:

; 47   : 	
; 48   : 					if (ch == -1)

  004ab	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  004af	83 f8 ff	 cmp	 eax, -1
  004b2	75 0a		 jne	 SHORT $LN22@GetToken

; 49   : 					{
; 50   : 						return END;	// End of FILE

  004b4	b8 02 00 00 00	 mov	 eax, 2
  004b9	e9 9a 02 00 00	 jmp	 $LN32@GetToken
$LN22@GetToken:

; 51   : 					}
; 52   : 				}
; 53   : 			}
; 54   : 		}
; 55   : 	}
; 56   : 	while (isspace(ch) != 0);

  004be	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  004c2	50		 push	 eax
  004c3	e8 00 00 00 00	 call	 _isspace
  004c8	83 c4 04	 add	 esp, 4
  004cb	85 c0		 test	 eax, eax
  004cd	0f 85 6a ff ff
	ff		 jne	 $LN31@GetToken

; 57   : 
; 58   : 	
; 59   : 	switch(ch)

  004d3	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  004d7	89 85 4c ff ff
	ff		 mov	 DWORD PTR tv90[ebp], eax
  004dd	8b 8d 4c ff ff
	ff		 mov	 ecx, DWORD PTR tv90[ebp]
  004e3	83 e9 22	 sub	 ecx, 34			; 00000022H
  004e6	89 8d 4c ff ff
	ff		 mov	 DWORD PTR tv90[ebp], ecx
  004ec	83 bd 4c ff ff
	ff 5b		 cmp	 DWORD PTR tv90[ebp], 91	; 0000005bH
  004f3	0f 87 a3 01 00
	00		 ja	 $LN6@GetToken
  004f9	8b 95 4c ff ff
	ff		 mov	 edx, DWORD PTR tv90[ebp]
  004ff	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR $LN34@GetToken[edx]
  00506	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN35@GetToken[eax*4]
$LN19@GetToken:

; 60   : 	{
; 61   : 
; 62   : 	case 0x23:	// #
; 63   : 		return CurrentToken=COMMAND;

  0050d	c7 05 00 00 00
	00 23 00 00 00	 mov	 DWORD PTR _CurrentToken, 35 ; 00000023H
  00517	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  0051c	e9 37 02 00 00	 jmp	 $LN32@GetToken

; 64   : 		break;

  00521	e9 30 02 00 00	 jmp	 $LN20@GetToken
$LN18@GetToken:

; 65   : 	
; 66   : 	case 0x3B:	// ;
; 67   : 		return CurrentToken=SEMICOLON;

  00526	c7 05 00 00 00
	00 3b 00 00 00	 mov	 DWORD PTR _CurrentToken, 59 ; 0000003bH
  00530	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  00535	e9 1e 02 00 00	 jmp	 $LN32@GetToken

; 68   : 		break;

  0053a	e9 17 02 00 00	 jmp	 $LN20@GetToken
$LN17@GetToken:

; 69   : 	
; 70   : 	case 0x2C:	// ,
; 71   : 
; 72   : 		return CurrentToken=COMMA;

  0053f	c7 05 00 00 00
	00 2c 00 00 00	 mov	 DWORD PTR _CurrentToken, 44 ; 0000002cH
  00549	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  0054e	e9 05 02 00 00	 jmp	 $LN32@GetToken

; 73   : 		break;

  00553	e9 fe 01 00 00	 jmp	 $LN20@GetToken
$LN16@GetToken:

; 74   : 	
; 75   : 	case 0x7B:	// {
; 76   : 		return CurrentToken = LP;

  00558	c7 05 00 00 00
	00 7b 00 00 00	 mov	 DWORD PTR _CurrentToken, 123 ; 0000007bH
  00562	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  00567	e9 ec 01 00 00	 jmp	 $LN32@GetToken

; 77   : 		break;

  0056c	e9 e5 01 00 00	 jmp	 $LN20@GetToken
$LN15@GetToken:

; 78   : 
; 79   : 	case 0x7D:	// }
; 80   : 		return CurrentToken = RP;

  00571	c7 05 00 00 00
	00 7d 00 00 00	 mov	 DWORD PTR _CurrentToken, 125 ; 0000007dH
  0057b	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  00580	e9 d3 01 00 00	 jmp	 $LN32@GetToken

; 81   : 		break;

  00585	e9 cc 01 00 00	 jmp	 $LN20@GetToken
$LN14@GetToken:

; 82   : 	// Nice Index Table :)	by Deathway
; 83   : 	// Numbers Case
; 84   : 	case 0x2D:	//-
; 85   : 	case 0x2E:	//.
; 86   : 	case '0':	//0
; 87   : 	case '1':	//1
; 88   : 	case '2':	//2
; 89   : 	case '3':	//3
; 90   : 	case '4':	//4		
; 91   : 	case '5':	//5
; 92   : 	case '6':	//6
; 93   : 	case '7':	//7
; 94   : 	case '8':	//8
; 95   : 	case '9':	//9
; 96   : 		ungetc(ch, SMDFile);

  0058a	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  0058f	50		 push	 eax
  00590	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  00594	51		 push	 ecx
  00595	e8 00 00 00 00	 call	 _ungetc
  0059a	83 c4 08	 add	 esp, 8

; 97   : 		p = TempString;

  0059d	8d 45 90	 lea	 eax, DWORD PTR _TempString$[ebp]
  005a0	89 45 f4	 mov	 DWORD PTR _p$[ebp], eax
$LN13@GetToken:

; 98   : 		
; 99   : 		while (((ch=getc(SMDFile)) != -1) && ((ch == 0x2E) || (isdigit(ch) != 0) || (ch == 0x2D)))  // 2e '.'  2D '-'

  005a3	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  005a8	50		 push	 eax
  005a9	e8 00 00 00 00	 call	 _getc
  005ae	83 c4 04	 add	 esp, 4
  005b1	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  005b4	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  005b8	83 f9 ff	 cmp	 ecx, -1
  005bb	74 36		 je	 SHORT $LN12@GetToken
  005bd	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  005c1	83 f8 2e	 cmp	 eax, 46			; 0000002eH
  005c4	74 1a		 je	 SHORT $LN11@GetToken
  005c6	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  005ca	50		 push	 eax
  005cb	e8 00 00 00 00	 call	 _isdigit
  005d0	83 c4 04	 add	 esp, 4
  005d3	85 c0		 test	 eax, eax
  005d5	75 09		 jne	 SHORT $LN11@GetToken
  005d7	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  005db	83 f8 2d	 cmp	 eax, 45			; 0000002dH
  005de	75 13		 jne	 SHORT $LN12@GetToken
$LN11@GetToken:

; 100  : 		{
; 101  : 			*p = ch;	// Construct a String

  005e0	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  005e3	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  005e6	88 08		 mov	 BYTE PTR [eax], cl

; 102  : 			p++;

  005e8	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  005eb	83 c0 01	 add	 eax, 1
  005ee	89 45 f4	 mov	 DWORD PTR _p$[ebp], eax

; 103  : 		}		

  005f1	eb b0		 jmp	 SHORT $LN13@GetToken
$LN12@GetToken:

; 104  : 		*p = 0;

  005f3	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  005f6	c6 00 00	 mov	 BYTE PTR [eax], 0

; 105  : 		TokenNumber = atof( TempString);	// Select the first Byte as Main ID

  005f9	8d 45 90	 lea	 eax, DWORD PTR _TempString$[ebp]
  005fc	50		 push	 eax
  005fd	e8 00 00 00 00	 call	 _atof
  00602	83 c4 04	 add	 esp, 4
  00605	d9 1d 00 00 00
	00		 fstp	 DWORD PTR _TokenNumber

; 106  : 		return CurrentToken  = NUMBER ;

  0060b	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR _CurrentToken, 1
  00615	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  0061a	e9 39 01 00 00	 jmp	 $LN32@GetToken

; 107  : 		break;

  0061f	e9 32 01 00 00	 jmp	 $LN20@GetToken
$LN10@GetToken:

; 108  : 
; 109  : 	case '\"':	// "	String Case
; 110  : 		p=&TokenString[0];

  00624	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _p$[ebp], OFFSET _TokenString
$LN9@GetToken:

; 111  : 		
; 112  : 		while (((ch=getc(SMDFile)) != -1 ) && (ch != 0x22))	// nice

  0062b	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  00630	50		 push	 eax
  00631	e8 00 00 00 00	 call	 _getc
  00636	83 c4 04	 add	 esp, 4
  00639	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  0063c	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  00640	83 f9 ff	 cmp	 ecx, -1
  00643	74 1c		 je	 SHORT $LN8@GetToken
  00645	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  00649	83 f8 22	 cmp	 eax, 34			; 00000022H
  0064c	74 13		 je	 SHORT $LN8@GetToken

; 113  : 		{
; 114  : 			*p = ch;

  0064e	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00651	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  00654	88 08		 mov	 BYTE PTR [eax], cl

; 115  : 			p++;

  00656	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00659	83 c0 01	 add	 eax, 1
  0065c	89 45 f4	 mov	 DWORD PTR _p$[ebp], eax

; 116  : 		}

  0065f	eb ca		 jmp	 SHORT $LN9@GetToken
$LN8@GetToken:

; 117  : 		if (ch != 0x22 )

  00661	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  00665	83 f8 22	 cmp	 eax, 34			; 00000022H
  00668	74 13		 je	 SHORT $LN7@GetToken

; 118  : 		{
; 119  : 			ungetc(ch, SMDFile);

  0066a	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  0066f	50		 push	 eax
  00670	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  00674	51		 push	 ecx
  00675	e8 00 00 00 00	 call	 _ungetc
  0067a	83 c4 08	 add	 esp, 8
$LN7@GetToken:

; 120  : 		}
; 121  : 		*p = 0;

  0067d	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00680	c6 00 00	 mov	 BYTE PTR [eax], 0

; 122  : 		return CurrentToken = NAME;

  00683	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR _CurrentToken, 0
  0068d	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  00692	e9 c1 00 00 00	 jmp	 $LN32@GetToken

; 123  : 		break;

  00697	e9 ba 00 00 00	 jmp	 $LN20@GetToken
$LN6@GetToken:

; 124  : 
; 125  : 	default:	// Others
; 126  : 		if (isalpha(ch))

  0069c	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  006a0	50		 push	 eax
  006a1	e8 00 00 00 00	 call	 _isalpha
  006a6	83 c4 04	 add	 esp, 4
  006a9	85 c0		 test	 eax, eax
  006ab	0f 84 94 00 00
	00		 je	 $LN5@GetToken

; 127  : 		{
; 128  : 			p=&TokenString[0];

  006b1	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _p$[ebp], OFFSET _TokenString

; 129  : 			*p=ch;

  006b8	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  006bb	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  006be	88 08		 mov	 BYTE PTR [eax], cl

; 130  : 			p++;

  006c0	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  006c3	83 c0 01	 add	 eax, 1
  006c6	89 45 f4	 mov	 DWORD PTR _p$[ebp], eax
$LN4@GetToken:

; 131  : 
; 132  : 			while ( ((ch=getc(SMDFile)) != -1) && ( (ch == 0x2E) || (ch == 0x5F) || (isalnum(ch) != 0) ) )

  006c9	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  006ce	50		 push	 eax
  006cf	e8 00 00 00 00	 call	 _getc
  006d4	83 c4 04	 add	 esp, 4
  006d7	88 45 fb	 mov	 BYTE PTR _ch$[ebp], al
  006da	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  006de	83 f9 ff	 cmp	 ecx, -1
  006e1	74 36		 je	 SHORT $LN3@GetToken
  006e3	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  006e7	83 f8 2e	 cmp	 eax, 46			; 0000002eH
  006ea	74 1a		 je	 SHORT $LN2@GetToken
  006ec	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  006f0	83 f8 5f	 cmp	 eax, 95			; 0000005fH
  006f3	74 11		 je	 SHORT $LN2@GetToken
  006f5	0f be 45 fb	 movsx	 eax, BYTE PTR _ch$[ebp]
  006f9	50		 push	 eax
  006fa	e8 00 00 00 00	 call	 _isalnum
  006ff	83 c4 04	 add	 esp, 4
  00702	85 c0		 test	 eax, eax
  00704	74 13		 je	 SHORT $LN3@GetToken
$LN2@GetToken:

; 133  : 			{
; 134  : 				*p=ch;

  00706	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00709	8a 4d fb	 mov	 cl, BYTE PTR _ch$[ebp]
  0070c	88 08		 mov	 BYTE PTR [eax], cl

; 135  : 				p++;

  0070e	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  00711	83 c0 01	 add	 eax, 1
  00714	89 45 f4	 mov	 DWORD PTR _p$[ebp], eax

; 136  : 				
; 137  : 			}

  00717	eb b0		 jmp	 SHORT $LN4@GetToken
$LN3@GetToken:

; 138  : 
; 139  : 			ungetc(ch, SMDFile);

  00719	a1 00 00 00 00	 mov	 eax, DWORD PTR _SMDFile
  0071e	50		 push	 eax
  0071f	0f be 4d fb	 movsx	 ecx, BYTE PTR _ch$[ebp]
  00723	51		 push	 ecx
  00724	e8 00 00 00 00	 call	 _ungetc
  00729	83 c4 08	 add	 esp, 8

; 140  : 			*p=0;

  0072c	8b 45 f4	 mov	 eax, DWORD PTR _p$[ebp]
  0072f	c6 00 00	 mov	 BYTE PTR [eax], 0

; 141  : 			CurrentToken=NAME;

  00732	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR _CurrentToken, 0

; 142  : 			return CurrentToken;

  0073c	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  00741	eb 15		 jmp	 SHORT $LN32@GetToken

; 143  : 		}
; 144  : 		else

  00743	eb 11		 jmp	 SHORT $LN1@GetToken
$LN5@GetToken:

; 145  : 		{
; 146  : 			return CurrentToken = SMD_ERROR; // '<'

  00745	c7 05 00 00 00
	00 3c 00 00 00	 mov	 DWORD PTR _CurrentToken, 60 ; 0000003cH
  0074f	a1 00 00 00 00	 mov	 eax, DWORD PTR _CurrentToken
  00754	eb 02		 jmp	 SHORT $LN32@GetToken
$LN1@GetToken:
$LN20@GetToken:

; 147  : 		}
; 148  : 		break;
; 149  : 
; 150  : 	}
; 151  : 
; 152  : 	return NAME;

  00756	33 c0		 xor	 eax, eax
$LN32@GetToken:

; 153  : }

  00758	5f		 pop	 edi
  00759	5e		 pop	 esi
  0075a	5b		 pop	 ebx
  0075b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0075e	33 cd		 xor	 ecx, ebp
  00760	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00765	8b e5		 mov	 esp, ebp
  00767	5d		 pop	 ebp
  00768	c3		 ret	 0
  00769	8d 49 00	 npad	 3
$LN35@GetToken:
  0076c	00 00 00 00	 DD	 $LN10@GetToken
  00770	00 00 00 00	 DD	 $LN19@GetToken
  00774	00 00 00 00	 DD	 $LN17@GetToken
  00778	00 00 00 00	 DD	 $LN14@GetToken
  0077c	00 00 00 00	 DD	 $LN18@GetToken
  00780	00 00 00 00	 DD	 $LN16@GetToken
  00784	00 00 00 00	 DD	 $LN15@GetToken
  00788	00 00 00 00	 DD	 $LN6@GetToken
$LN34@GetToken:
  0078c	00		 DB	 0
  0078d	01		 DB	 1
  0078e	07		 DB	 7
  0078f	07		 DB	 7
  00790	07		 DB	 7
  00791	07		 DB	 7
  00792	07		 DB	 7
  00793	07		 DB	 7
  00794	07		 DB	 7
  00795	07		 DB	 7
  00796	02		 DB	 2
  00797	03		 DB	 3
  00798	03		 DB	 3
  00799	07		 DB	 7
  0079a	03		 DB	 3
  0079b	03		 DB	 3
  0079c	03		 DB	 3
  0079d	03		 DB	 3
  0079e	03		 DB	 3
  0079f	03		 DB	 3
  007a0	03		 DB	 3
  007a1	03		 DB	 3
  007a2	03		 DB	 3
  007a3	03		 DB	 3
  007a4	07		 DB	 7
  007a5	04		 DB	 4
  007a6	07		 DB	 7
  007a7	07		 DB	 7
  007a8	07		 DB	 7
  007a9	07		 DB	 7
  007aa	07		 DB	 7
  007ab	07		 DB	 7
  007ac	07		 DB	 7
  007ad	07		 DB	 7
  007ae	07		 DB	 7
  007af	07		 DB	 7
  007b0	07		 DB	 7
  007b1	07		 DB	 7
  007b2	07		 DB	 7
  007b3	07		 DB	 7
  007b4	07		 DB	 7
  007b5	07		 DB	 7
  007b6	07		 DB	 7
  007b7	07		 DB	 7
  007b8	07		 DB	 7
  007b9	07		 DB	 7
  007ba	07		 DB	 7
  007bb	07		 DB	 7
  007bc	07		 DB	 7
  007bd	07		 DB	 7
  007be	07		 DB	 7
  007bf	07		 DB	 7
  007c0	07		 DB	 7
  007c1	07		 DB	 7
  007c2	07		 DB	 7
  007c3	07		 DB	 7
  007c4	07		 DB	 7
  007c5	07		 DB	 7
  007c6	07		 DB	 7
  007c7	07		 DB	 7
  007c8	07		 DB	 7
  007c9	07		 DB	 7
  007ca	07		 DB	 7
  007cb	07		 DB	 7
  007cc	07		 DB	 7
  007cd	07		 DB	 7
  007ce	07		 DB	 7
  007cf	07		 DB	 7
  007d0	07		 DB	 7
  007d1	07		 DB	 7
  007d2	07		 DB	 7
  007d3	07		 DB	 7
  007d4	07		 DB	 7
  007d5	07		 DB	 7
  007d6	07		 DB	 7
  007d7	07		 DB	 7
  007d8	07		 DB	 7
  007d9	07		 DB	 7
  007da	07		 DB	 7
  007db	07		 DB	 7
  007dc	07		 DB	 7
  007dd	07		 DB	 7
  007de	07		 DB	 7
  007df	07		 DB	 7
  007e0	07		 DB	 7
  007e1	07		 DB	 7
  007e2	07		 DB	 7
  007e3	07		 DB	 7
  007e4	07		 DB	 7
  007e5	05		 DB	 5
  007e6	07		 DB	 7
  007e7	06		 DB	 6
?GetToken@@YA?AW4SMDToken@@XZ ENDP			; GetToken
_TEXT	ENDS
PUBLIC	??_C@_0DA@DNNIILED@?$FL380Item?$FN?5OptionItem?5Check?5error@ ; `string'
PUBLIC	?Is380Item@CItemSystemFor380@@QAEHPBVCItem@@@Z	; CItemSystemFor380::Is380Item
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
;	COMDAT ??_C@_0DA@DNNIILED@?$FL380Item?$FN?5OptionItem?5Check?5error@
; File d:\projects\exteam6.3\source\gameserver\gameserver\itemsystemfor380.cpp
CONST	SEGMENT
??_C@_0DA@DNNIILED@?$FL380Item?$FN?5OptionItem?5Check?5error@ DB '[380Ite'
	DB	'm] OptionItem Check error: (iItemNum:%d)', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4						; size = 4
_pItem$ = 8						; size = 4
?Is380Item@CItemSystemFor380@@QAEHPBVCItem@@@Z PROC	; CItemSystemFor380::Is380Item
; _this$ = ecx

; 129  : {

  007f0	55		 push	 ebp
  007f1	8b ec		 mov	 ebp, esp
  007f3	83 ec 44	 sub	 esp, 68			; 00000044H
  007f6	53		 push	 ebx
  007f7	56		 push	 esi
  007f8	57		 push	 edi
  007f9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 130  : 	if ( pItem->m_Type < 0 || pItem->m_Type > MAX_ITEMS-1 )

  007fc	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  007ff	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00803	85 c9		 test	 ecx, ecx
  00805	7c 0f		 jl	 SHORT $LN2@Is380Item
  00807	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  0080a	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  0080e	81 f9 ff 1f 00
	00		 cmp	 ecx, 8191		; 00001fffH
  00814	7e 1a		 jle	 SHORT $LN3@Is380Item
$LN2@Is380Item:

; 131  : 	{
; 132  : 		LogAdd("[380Item] OptionItem Check error: (iItemNum:%d)", pItem->m_Type);

  00816	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  00819	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  0081d	51		 push	 ecx
  0081e	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@DNNIILED@?$FL380Item?$FN?5OptionItem?5Check?5error@
  00823	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00829	83 c4 08	 add	 esp, 8

; 133  : 		return FALSE;

  0082c	33 c0		 xor	 eax, eax
  0082e	eb 1d		 jmp	 SHORT $LN4@Is380Item
$LN3@Is380Item:

; 134  : 	}
; 135  : 
; 136  : 	if ( this->m_itemOption[pItem->m_Type ].IsLoad == FALSE )

  00830	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  00833	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00837	c1 e1 04	 shl	 ecx, 4
  0083a	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  0083d	83 7c 0a 04 00	 cmp	 DWORD PTR [edx+ecx+4], 0
  00842	75 04		 jne	 SHORT $LN1@Is380Item

; 137  : 		return FALSE;

  00844	33 c0		 xor	 eax, eax
  00846	eb 05		 jmp	 SHORT $LN4@Is380Item
$LN1@Is380Item:

; 138  : 
; 139  : 	return TRUE;

  00848	b8 01 00 00 00	 mov	 eax, 1
$LN4@Is380Item:

; 140  : }

  0084d	5f		 pop	 edi
  0084e	5e		 pop	 esi
  0084f	5b		 pop	 ebx
  00850	8b e5		 mov	 esp, ebp
  00852	5d		 pop	 ebp
  00853	c2 04 00	 ret	 4
?Is380Item@CItemSystemFor380@@QAEHPBVCItem@@@Z ENDP	; CItemSystemFor380::Is380Item
_TEXT	ENDS
PUBLIC	?Is380OptionItem@CItemSystemFor380@@QAEHPBVCItem@@@Z ; CItemSystemFor380::Is380OptionItem
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_bResult$ = -5						; size = 1
_this$ = -4						; size = 4
_pItem$ = 8						; size = 4
?Is380OptionItem@CItemSystemFor380@@QAEHPBVCItem@@@Z PROC ; CItemSystemFor380::Is380OptionItem
; _this$ = ecx

; 144  : {

  00860	55		 push	 ebp
  00861	8b ec		 mov	 ebp, esp
  00863	83 ec 48	 sub	 esp, 72			; 00000048H
  00866	53		 push	 ebx
  00867	56		 push	 esi
  00868	57		 push	 edi
  00869	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 145  : 	if ( this->Is380Item(pItem) == FALSE )

  0086c	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  0086f	50		 push	 eax
  00870	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00873	e8 00 00 00 00	 call	 ?Is380Item@CItemSystemFor380@@QAEHPBVCItem@@@Z ; CItemSystemFor380::Is380Item
  00878	85 c0		 test	 eax, eax
  0087a	75 04		 jne	 SHORT $LN2@Is380Optio

; 146  : 		return FALSE;

  0087c	33 c0		 xor	 eax, eax
  0087e	eb 28		 jmp	 SHORT $LN3@Is380Optio
$LN2@Is380Optio:

; 147  : 
; 148  : 	BYTE bResult = (pItem->m_ItemOptionEx & 0x80) >> 7;

  00880	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  00883	0f b6 88 ca 00
	00 00		 movzx	 ecx, BYTE PTR [eax+202]
  0088a	81 e1 80 00 00
	00		 and	 ecx, 128		; 00000080H
  00890	c1 f9 07	 sar	 ecx, 7
  00893	88 4d fb	 mov	 BYTE PTR _bResult$[ebp], cl

; 149  : 
; 150  : 	if ( bResult != 1 )

  00896	0f b6 45 fb	 movzx	 eax, BYTE PTR _bResult$[ebp]
  0089a	83 f8 01	 cmp	 eax, 1
  0089d	74 04		 je	 SHORT $LN1@Is380Optio

; 151  : 		return FALSE;

  0089f	33 c0		 xor	 eax, eax
  008a1	eb 05		 jmp	 SHORT $LN3@Is380Optio
$LN1@Is380Optio:

; 152  : 
; 153  : 	return TRUE;

  008a3	b8 01 00 00 00	 mov	 eax, 1
$LN3@Is380Optio:

; 154  : }

  008a8	5f		 pop	 edi
  008a9	5e		 pop	 esi
  008aa	5b		 pop	 ebx
  008ab	8b e5		 mov	 esp, ebp
  008ad	5d		 pop	 ebp
  008ae	c2 04 00	 ret	 4
?Is380OptionItem@CItemSystemFor380@@QAEHPBVCItem@@@Z ENDP ; CItemSystemFor380::Is380OptionItem
_TEXT	ENDS
PUBLIC	?InitEffectValue@CItemSystemFor380@@QAEXPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ; CItemSystemFor380::InitEffectValue
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_pItemEffect$ = 8					; size = 4
?InitEffectValue@CItemSystemFor380@@QAEXPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z PROC ; CItemSystemFor380::InitEffectValue
; _this$ = ecx

; 158  : {

  008c0	55		 push	 ebp
  008c1	8b ec		 mov	 ebp, esp
  008c3	83 ec 44	 sub	 esp, 68			; 00000044H
  008c6	53		 push	 ebx
  008c7	56		 push	 esi
  008c8	57		 push	 edi
  008c9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 159  : 	pItemEffect->OpAddAttackSuccessRatePVP = 0;

  008cc	33 c0		 xor	 eax, eax
  008ce	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  008d1	66 89 01	 mov	 WORD PTR [ecx], ax

; 160  : 	pItemEffect->OpAddDamage = 0;

  008d4	33 c0		 xor	 eax, eax
  008d6	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  008d9	66 89 41 02	 mov	 WORD PTR [ecx+2], ax

; 161  : 	pItemEffect->OpAddDefenseSuccessRatePvP = 0;

  008dd	33 c0		 xor	 eax, eax
  008df	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  008e2	66 89 41 04	 mov	 WORD PTR [ecx+4], ax

; 162  : 	pItemEffect->OpAddDefense = 0;

  008e6	33 c0		 xor	 eax, eax
  008e8	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  008eb	66 89 41 06	 mov	 WORD PTR [ecx+6], ax

; 163  : 	pItemEffect->OpAddMaxHP = 0;

  008ef	33 c0		 xor	 eax, eax
  008f1	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  008f4	66 89 41 08	 mov	 WORD PTR [ecx+8], ax

; 164  : 	pItemEffect->OpAddMaxSD = 0;

  008f8	33 c0		 xor	 eax, eax
  008fa	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  008fd	66 89 41 0a	 mov	 WORD PTR [ecx+10], ax

; 165  : 	pItemEffect->OpRefillOn  = 0;

  00901	33 c0		 xor	 eax, eax
  00903	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  00906	66 89 41 0c	 mov	 WORD PTR [ecx+12], ax

; 166  : 	pItemEffect->OpAddRefillSD = 0;

  0090a	33 c0		 xor	 eax, eax
  0090c	8b 4d 08	 mov	 ecx, DWORD PTR _pItemEffect$[ebp]
  0090f	66 89 41 0e	 mov	 WORD PTR [ecx+14], ax

; 167  : }

  00913	5f		 pop	 edi
  00914	5e		 pop	 esi
  00915	5b		 pop	 ebx
  00916	8b e5		 mov	 esp, ebp
  00918	5d		 pop	 ebp
  00919	c2 04 00	 ret	 4
?InitEffectValue@CItemSystemFor380@@QAEXPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ENDP ; CItemSystemFor380::InitEffectValue
_TEXT	ENDS
PUBLIC	?_CalcItemEffectValue@CItemSystemFor380@@QAEHHHPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ; CItemSystemFor380::_CalcItemEffectValue
PUBLIC	?ApplyFor380Option@CItemSystemFor380@@QAEHPAUOBJECTSTRUCT@@@Z ; CItemSystemFor380::ApplyFor380Option
EXTRN	?IsItem@CItem@@QAEHXZ:PROC			; CItem::IsItem
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_bResult$227552 = -32					; size = 4
_iValue2$227551 = -28					; size = 2
_iValue1$227550 = -24					; size = 2
_iOption2$227549 = -18					; size = 1
_iOption1$227548 = -17					; size = 1
_pItem$227546 = -16					; size = 4
_iItemIndex$ = -12					; size = 4
_pItemEffect$ = -8					; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?ApplyFor380Option@CItemSystemFor380@@QAEHPAUOBJECTSTRUCT@@@Z PROC ; CItemSystemFor380::ApplyFor380Option
; _this$ = ecx

; 172  : {

  00920	55		 push	 ebp
  00921	8b ec		 mov	 ebp, esp
  00923	83 ec 60	 sub	 esp, 96			; 00000060H
  00926	53		 push	 ebx
  00927	56		 push	 esi
  00928	57		 push	 edi
  00929	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 173  : 	ITEMOPTION_FOR380ITEM_EFFECT * pItemEffect = &lpObj->m_ItemOptionExFor380;

  0092c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0092f	05 fe 1f 00 00	 add	 eax, 8190		; 00001ffeH
  00934	89 45 f8	 mov	 DWORD PTR _pItemEffect$[ebp], eax

; 174  : 	this->InitEffectValue(pItemEffect);

  00937	8b 45 f8	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  0093a	50		 push	 eax
  0093b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0093e	e8 00 00 00 00	 call	 ?InitEffectValue@CItemSystemFor380@@QAEXPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ; CItemSystemFor380::InitEffectValue

; 175  : 	int iItemIndex = 0;

  00943	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _iItemIndex$[ebp], 0

; 176  : 
; 177  : 	for ( iItemIndex = 0; iItemIndex < INVETORY_WEAR_SIZE ; iItemIndex++)

  0094a	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _iItemIndex$[ebp], 0
  00951	eb 09		 jmp	 SHORT $LN4@ApplyFor38
$LN3@ApplyFor38:
  00953	8b 45 f4	 mov	 eax, DWORD PTR _iItemIndex$[ebp]
  00956	83 c0 01	 add	 eax, 1
  00959	89 45 f4	 mov	 DWORD PTR _iItemIndex$[ebp], eax
$LN4@ApplyFor38:
  0095c	83 7d f4 0c	 cmp	 DWORD PTR _iItemIndex$[ebp], 12 ; 0000000cH
  00960	0f 8d e1 00 00
	00		 jge	 $LN2@ApplyFor38

; 178  : 	{
; 179  : 		CItem * pItem = &lpObj->pInventory[iItemIndex];

  00966	8b 45 f4	 mov	 eax, DWORD PTR _iItemIndex$[ebp]
  00969	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  0096f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00972	03 81 24 0e 00
	00		 add	 eax, DWORD PTR [ecx+3620]
  00978	89 45 f0	 mov	 DWORD PTR _pItem$227546[ebp], eax

; 180  : 
; 181  : 		if ( pItem->IsItem() &&
; 182  : 			 pItem->m_IsValidItem &&
; 183  : 			 this->Is380OptionItem(pItem) == TRUE )

  0097b	8b 4d f0	 mov	 ecx, DWORD PTR _pItem$227546[ebp]
  0097e	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00983	85 c0		 test	 eax, eax
  00985	0f 84 b7 00 00
	00		 je	 $LN1@ApplyFor38
  0098b	8b 45 f0	 mov	 eax, DWORD PTR _pItem$227546[ebp]
  0098e	0f b6 88 b0 00
	00 00		 movzx	 ecx, BYTE PTR [eax+176]
  00995	85 c9		 test	 ecx, ecx
  00997	0f 84 a5 00 00
	00		 je	 $LN1@ApplyFor38
  0099d	8b 45 f0	 mov	 eax, DWORD PTR _pItem$227546[ebp]
  009a0	50		 push	 eax
  009a1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  009a4	e8 00 00 00 00	 call	 ?Is380OptionItem@CItemSystemFor380@@QAEHPBVCItem@@@Z ; CItemSystemFor380::Is380OptionItem
  009a9	83 f8 01	 cmp	 eax, 1
  009ac	0f 85 90 00 00
	00		 jne	 $LN1@ApplyFor38

; 184  : 		{
; 185  : 			BYTE iOption1, iOption2;
; 186  : 			WORD iValue1, iValue2;
; 187  : 
; 188  : 			iOption1 = this->m_itemOption[pItem->m_Type ].m_Option1;

  009b2	8b 45 f0	 mov	 eax, DWORD PTR _pItem$227546[ebp]
  009b5	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  009b9	c1 e1 04	 shl	 ecx, 4
  009bc	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  009bf	8a 44 0a 0a	 mov	 al, BYTE PTR [edx+ecx+10]
  009c3	88 45 ef	 mov	 BYTE PTR _iOption1$227548[ebp], al

; 189  : 			iValue1 = this->m_itemOption[pItem->m_Type ].m_Value1;

  009c6	8b 45 f0	 mov	 eax, DWORD PTR _pItem$227546[ebp]
  009c9	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  009cd	c1 e1 04	 shl	 ecx, 4
  009d0	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  009d3	66 8b 44 0a 0c	 mov	 ax, WORD PTR [edx+ecx+12]
  009d8	66 89 45 e8	 mov	 WORD PTR _iValue1$227550[ebp], ax

; 190  : 			iOption2 = this->m_itemOption[pItem->m_Type ].m_Option2;

  009dc	8b 45 f0	 mov	 eax, DWORD PTR _pItem$227546[ebp]
  009df	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  009e3	c1 e1 04	 shl	 ecx, 4
  009e6	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  009e9	8a 44 0a 0e	 mov	 al, BYTE PTR [edx+ecx+14]
  009ed	88 45 ee	 mov	 BYTE PTR _iOption2$227549[ebp], al

; 191  : 			iValue2 = this->m_itemOption[pItem->m_Type ].m_Value2;

  009f0	8b 45 f0	 mov	 eax, DWORD PTR _pItem$227546[ebp]
  009f3	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  009f7	c1 e1 04	 shl	 ecx, 4
  009fa	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  009fd	66 8b 44 0a 10	 mov	 ax, WORD PTR [edx+ecx+16]
  00a02	66 89 45 e4	 mov	 WORD PTR _iValue2$227551[ebp], ax

; 192  : 			BOOL bResult = FALSE;

  00a06	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _bResult$227552[ebp], 0

; 193  : 			bResult = this->_CalcItemEffectValue(iOption1, iValue1, pItemEffect);

  00a0d	8b 45 f8	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00a10	50		 push	 eax
  00a11	0f b7 4d e8	 movzx	 ecx, WORD PTR _iValue1$227550[ebp]
  00a15	51		 push	 ecx
  00a16	0f b6 55 ef	 movzx	 edx, BYTE PTR _iOption1$227548[ebp]
  00a1a	52		 push	 edx
  00a1b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00a1e	e8 00 00 00 00	 call	 ?_CalcItemEffectValue@CItemSystemFor380@@QAEHHHPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ; CItemSystemFor380::_CalcItemEffectValue
  00a23	89 45 e0	 mov	 DWORD PTR _bResult$227552[ebp], eax

; 194  : 			bResult |= this->_CalcItemEffectValue(iOption2, iValue2, pItemEffect);

  00a26	8b 45 f8	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00a29	50		 push	 eax
  00a2a	0f b7 4d e4	 movzx	 ecx, WORD PTR _iValue2$227551[ebp]
  00a2e	51		 push	 ecx
  00a2f	0f b6 55 ee	 movzx	 edx, BYTE PTR _iOption2$227549[ebp]
  00a33	52		 push	 edx
  00a34	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00a37	e8 00 00 00 00	 call	 ?_CalcItemEffectValue@CItemSystemFor380@@QAEHHHPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ; CItemSystemFor380::_CalcItemEffectValue
  00a3c	0b 45 e0	 or	 eax, DWORD PTR _bResult$227552[ebp]
  00a3f	89 45 e0	 mov	 DWORD PTR _bResult$227552[ebp], eax
$LN1@ApplyFor38:

; 195  : 		}
; 196  : 	}

  00a42	e9 0c ff ff ff	 jmp	 $LN3@ApplyFor38
$LN2@ApplyFor38:

; 197  : 
; 198  : 	lpObj->AddLife += pItemEffect->OpAddMaxHP;

  00a47	8b 45 f8	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00a4a	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00a4e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00a51	03 8a 4c 01 00
	00		 add	 ecx, DWORD PTR [edx+332]
  00a57	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00a5a	89 88 4c 01 00
	00		 mov	 DWORD PTR [eax+332], ecx

; 199  : 	lpObj->iAddShield += pItemEffect->OpAddMaxSD;

  00a60	8b 45 f8	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00a63	0f bf 48 0a	 movsx	 ecx, WORD PTR [eax+10]
  00a67	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00a6a	03 8a 5c 01 00
	00		 add	 ecx, DWORD PTR [edx+348]
  00a70	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00a73	89 88 5c 01 00
	00		 mov	 DWORD PTR [eax+348], ecx

; 200  : 
; 201  : 	return TRUE;

  00a79	b8 01 00 00 00	 mov	 eax, 1

; 202  : }

  00a7e	5f		 pop	 edi
  00a7f	5e		 pop	 esi
  00a80	5b		 pop	 ebx
  00a81	8b e5		 mov	 esp, ebp
  00a83	5d		 pop	 ebp
  00a84	c2 04 00	 ret	 4
?ApplyFor380Option@CItemSystemFor380@@QAEHPAUOBJECTSTRUCT@@@Z ENDP ; CItemSystemFor380::ApplyFor380Option
; Function compile flags: /Odtp /ZI
tv65 = -76						; size = 4
_bResult$ = -8						; size = 4
_this$ = -4						; size = 4
_iItemOptionType$ = 8					; size = 4
_iItemEffectValue$ = 12					; size = 4
_pItemEffect$ = 16					; size = 4
?_CalcItemEffectValue@CItemSystemFor380@@QAEHHHPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z PROC ; CItemSystemFor380::_CalcItemEffectValue
; _this$ = ecx

; 206  : {

  00a90	55		 push	 ebp
  00a91	8b ec		 mov	 ebp, esp
  00a93	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00a96	53		 push	 ebx
  00a97	56		 push	 esi
  00a98	57		 push	 edi
  00a99	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 207  : 	if ( iItemOptionType == 0 )

  00a9c	83 7d 08 00	 cmp	 DWORD PTR _iItemOptionType$[ebp], 0
  00aa0	75 07		 jne	 SHORT $LN12@CalcItemEf

; 208  : 		return FALSE;

  00aa2	33 c0		 xor	 eax, eax
  00aa4	e9 cd 00 00 00	 jmp	 $LN13@CalcItemEf
$LN12@CalcItemEf:

; 209  : 
; 210  : 	BOOL bResult = TRUE;

  00aa9	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _bResult$[ebp], 1

; 211  : 
; 212  : 	switch ( iItemOptionType )

  00ab0	8b 45 08	 mov	 eax, DWORD PTR _iItemOptionType$[ebp]
  00ab3	89 45 b4	 mov	 DWORD PTR tv65[ebp], eax
  00ab6	8b 4d b4	 mov	 ecx, DWORD PTR tv65[ebp]
  00ab9	83 e9 01	 sub	 ecx, 1
  00abc	89 4d b4	 mov	 DWORD PTR tv65[ebp], ecx
  00abf	83 7d b4 07	 cmp	 DWORD PTR tv65[ebp], 7
  00ac3	0f 87 a3 00 00
	00		 ja	 $LN1@CalcItemEf
  00ac9	8b 55 b4	 mov	 edx, DWORD PTR tv65[ebp]
  00acc	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN15@CalcItemEf[edx*4]
$LN9@CalcItemEf:

; 213  : 	{
; 214  : 		//case ITEMOPTION_FOR380ITEM_EFFECT_NONE:
; 215  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDATTACKSUCCESSRATEPVP:
; 216  : 			pItemEffect->OpAddAttackSuccessRatePVP += iItemEffectValue;

  00ad3	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00ad6	0f bf 08	 movsx	 ecx, WORD PTR [eax]
  00ad9	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00adc	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00adf	66 89 0a	 mov	 WORD PTR [edx], cx

; 217  : 			//DebugLog("380 :  %d\n", iItemEffectValue);
; 218  : 			break;

  00ae2	e9 8c 00 00 00	 jmp	 $LN10@CalcItemEf
$LN8@CalcItemEf:

; 219  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDDAMAGE:
; 220  : 			pItemEffect->OpAddDamage += iItemEffectValue;

  00ae7	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00aea	0f bf 48 02	 movsx	 ecx, WORD PTR [eax+2]
  00aee	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00af1	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00af4	66 89 4a 02	 mov	 WORD PTR [edx+2], cx

; 221  : 			//DebugLog("380 :   %d\n", iItemEffectValue);
; 222  : 			break;

  00af8	eb 79		 jmp	 SHORT $LN10@CalcItemEf
$LN7@CalcItemEf:

; 223  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDDEFENSESUCCESSRATEPVP:
; 224  : 			pItemEffect->OpAddDefenseSuccessRatePvP += iItemEffectValue;

  00afa	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00afd	0f bf 48 04	 movsx	 ecx, WORD PTR [eax+4]
  00b01	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00b04	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00b07	66 89 4a 04	 mov	 WORD PTR [edx+4], cx

; 225  : 			//DebugLog("380 :  %d\n", iItemEffectValue);
; 226  : 			break;

  00b0b	eb 66		 jmp	 SHORT $LN10@CalcItemEf
$LN6@CalcItemEf:

; 227  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDDEFENSE:
; 228  : 			pItemEffect->OpAddDefense += iItemEffectValue;

  00b0d	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00b10	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  00b14	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00b17	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00b1a	66 89 4a 06	 mov	 WORD PTR [edx+6], cx

; 229  : 			//DebugLog("380 :   %d\n", iItemEffectValue);
; 230  : 			break;

  00b1e	eb 53		 jmp	 SHORT $LN10@CalcItemEf
$LN5@CalcItemEf:

; 231  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDMAXHP:
; 232  : 			pItemEffect->OpAddMaxHP += iItemEffectValue;

  00b20	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00b23	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00b27	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00b2a	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00b2d	66 89 4a 08	 mov	 WORD PTR [edx+8], cx

; 233  : 			//DebugLog("380 :  HP  %d\n", iItemEffectValue);
; 234  : 			break;

  00b31	eb 40		 jmp	 SHORT $LN10@CalcItemEf
$LN4@CalcItemEf:

; 235  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDMAXSD:
; 236  : 			pItemEffect->OpAddMaxSD += iItemEffectValue;

  00b33	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00b36	0f bf 48 0a	 movsx	 ecx, WORD PTR [eax+10]
  00b3a	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00b3d	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00b40	66 89 4a 0a	 mov	 WORD PTR [edx+10], cx

; 237  : 			//DebugLog("380 :  SD  %d\n", iItemEffectValue);
; 238  : 			break;

  00b44	eb 2d		 jmp	 SHORT $LN10@CalcItemEf
$LN3@CalcItemEf:

; 239  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPREFILLON:
; 240  : 			pItemEffect->OpRefillOn += 1;

  00b46	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00b49	0f bf 48 0c	 movsx	 ecx, WORD PTR [eax+12]
  00b4d	83 c1 01	 add	 ecx, 1
  00b50	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00b53	66 89 4a 0c	 mov	 WORD PTR [edx+12], cx

; 241  : 			//DebugLog("380 : SD   %d\n", iItemEffectValue);
; 242  : 			break;

  00b57	eb 1a		 jmp	 SHORT $LN10@CalcItemEf
$LN2@CalcItemEf:

; 243  : 		case ITEMOPTION_FOR380ITEM_EFFECT_OPADDREFILLSD:
; 244  : 			pItemEffect->OpAddRefillSD += iItemEffectValue;

  00b59	8b 45 10	 mov	 eax, DWORD PTR _pItemEffect$[ebp]
  00b5c	0f bf 48 0e	 movsx	 ecx, WORD PTR [eax+14]
  00b60	03 4d 0c	 add	 ecx, DWORD PTR _iItemEffectValue$[ebp]
  00b63	8b 55 10	 mov	 edx, DWORD PTR _pItemEffect$[ebp]
  00b66	66 89 4a 0e	 mov	 WORD PTR [edx+14], cx

; 245  : 			//DebugLog("380 : SD  %d\n", iItemEffectValue);
; 246  : 			break;

  00b6a	eb 07		 jmp	 SHORT $LN10@CalcItemEf
$LN1@CalcItemEf:

; 247  : 		default:
; 248  : 			bResult = FALSE;

  00b6c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _bResult$[ebp], 0
$LN10@CalcItemEf:

; 249  : 			break;
; 250  : 	}
; 251  : 
; 252  : 	return bResult;

  00b73	8b 45 f8	 mov	 eax, DWORD PTR _bResult$[ebp]
$LN13@CalcItemEf:

; 253  : }

  00b76	5f		 pop	 edi
  00b77	5e		 pop	 esi
  00b78	5b		 pop	 ebx
  00b79	8b e5		 mov	 esp, ebp
  00b7b	5d		 pop	 ebp
  00b7c	c2 0c 00	 ret	 12			; 0000000cH
  00b7f	90		 npad	 1
$LN15@CalcItemEf:
  00b80	00 00 00 00	 DD	 $LN9@CalcItemEf
  00b84	00 00 00 00	 DD	 $LN8@CalcItemEf
  00b88	00 00 00 00	 DD	 $LN7@CalcItemEf
  00b8c	00 00 00 00	 DD	 $LN6@CalcItemEf
  00b90	00 00 00 00	 DD	 $LN5@CalcItemEf
  00b94	00 00 00 00	 DD	 $LN4@CalcItemEf
  00b98	00 00 00 00	 DD	 $LN3@CalcItemEf
  00b9c	00 00 00 00	 DD	 $LN2@CalcItemEf
?_CalcItemEffectValue@CItemSystemFor380@@QAEHHHPAUITEMOPTION_FOR380ITEM_EFFECT@@@Z ENDP ; CItemSystemFor380::_CalcItemEffectValue
_TEXT	ENDS
PUBLIC	?_SetOption@CItemSystemFor380@@QAEHPAVCItem@@H@Z ; CItemSystemFor380::_SetOption
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_pItem$ = 8						; size = 4
_bOption$ = 12						; size = 4
?_SetOption@CItemSystemFor380@@QAEHPAVCItem@@H@Z PROC	; CItemSystemFor380::_SetOption
; _this$ = ecx

; 267  : {

  00ba0	55		 push	 ebp
  00ba1	8b ec		 mov	 ebp, esp
  00ba3	83 ec 44	 sub	 esp, 68			; 00000044H
  00ba6	53		 push	 ebx
  00ba7	56		 push	 esi
  00ba8	57		 push	 edi
  00ba9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 268  : 	if ( !this->Is380Item(pItem) )

  00bac	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  00baf	50		 push	 eax
  00bb0	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00bb3	e8 00 00 00 00	 call	 ?Is380Item@CItemSystemFor380@@QAEHPBVCItem@@@Z ; CItemSystemFor380::Is380Item
  00bb8	85 c0		 test	 eax, eax
  00bba	75 04		 jne	 SHORT $LN3@SetOption

; 269  : 		return FALSE;

  00bbc	33 c0		 xor	 eax, eax
  00bbe	eb 3f		 jmp	 SHORT $LN4@SetOption
$LN3@SetOption:

; 270  : 
; 271  : 	if ( bOption  == TRUE )

  00bc0	83 7d 0c 01	 cmp	 DWORD PTR _bOption$[ebp], 1
  00bc4	75 1b		 jne	 SHORT $LN2@SetOption

; 272  : 		pItem->m_ItemOptionEx |= 0x80;

  00bc6	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  00bc9	0f b6 88 ca 00
	00 00		 movzx	 ecx, BYTE PTR [eax+202]
  00bd0	81 c9 80 00 00
	00		 or	 ecx, 128		; 00000080H
  00bd6	8b 55 08	 mov	 edx, DWORD PTR _pItem$[ebp]
  00bd9	88 8a ca 00 00
	00		 mov	 BYTE PTR [edx+202], cl

; 273  : 	else

  00bdf	eb 19		 jmp	 SHORT $LN1@SetOption
$LN2@SetOption:

; 274  : 		pItem->m_ItemOptionEx &= ~0x80;

  00be1	8b 45 08	 mov	 eax, DWORD PTR _pItem$[ebp]
  00be4	0f b6 88 ca 00
	00 00		 movzx	 ecx, BYTE PTR [eax+202]
  00beb	81 e1 7f ff ff
	ff		 and	 ecx, -129		; ffffff7fH
  00bf1	8b 55 08	 mov	 edx, DWORD PTR _pItem$[ebp]
  00bf4	88 8a ca 00 00
	00		 mov	 BYTE PTR [edx+202], cl
$LN1@SetOption:

; 275  : 
; 276  : 	return TRUE;

  00bfa	b8 01 00 00 00	 mov	 eax, 1
$LN4@SetOption:

; 277  : }

  00bff	5f		 pop	 edi
  00c00	5e		 pop	 esi
  00c01	5b		 pop	 ebx
  00c02	8b e5		 mov	 esp, ebp
  00c04	5d		 pop	 ebp
  00c05	c2 08 00	 ret	 8
?_SetOption@CItemSystemFor380@@QAEHPAVCItem@@H@Z ENDP	; CItemSystemFor380::_SetOption
_TEXT	ENDS
PUBLIC	?SetOptionItemByMacro@CItemSystemFor380@@QAEXPAUOBJECTSTRUCT@@EH@Z ; CItemSystemFor380::SetOptionItemByMacro
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pItem$ = -8						; size = 4
_this$ = -4						; size = 4
_lpObj$ = 8						; size = 4
_invenrotyTargetPos$ = 12				; size = 1
_bOption$ = 16						; size = 4
?SetOptionItemByMacro@CItemSystemFor380@@QAEXPAUOBJECTSTRUCT@@EH@Z PROC ; CItemSystemFor380::SetOptionItemByMacro
; _this$ = ecx

; 282  : {

  00c10	55		 push	 ebp
  00c11	8b ec		 mov	 ebp, esp
  00c13	83 ec 48	 sub	 esp, 72			; 00000048H
  00c16	53		 push	 ebx
  00c17	56		 push	 esi
  00c18	57		 push	 edi
  00c19	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 283  : 	// HERE GOES A MACRO
; 284  : 	return;

  00c1c	eb 07		 jmp	 SHORT $LN1@SetOptionI

; 285  : 	CItem * pItem=NULL;

  00c1e	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _pItem$[ebp], 0
$LN1@SetOptionI:

; 286  : }

  00c25	5f		 pop	 edi
  00c26	5e		 pop	 esi
  00c27	5b		 pop	 ebx
  00c28	8b e5		 mov	 esp, ebp
  00c2a	5d		 pop	 ebp
  00c2b	c2 0c 00	 ret	 12			; 0000000cH
?SetOptionItemByMacro@CItemSystemFor380@@QAEXPAUOBJECTSTRUCT@@EH@Z ENDP ; CItemSystemFor380::SetOptionItemByMacro
_TEXT	ENDS
PUBLIC	??_C@_0DP@LHPKHLIF@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Fail?5?$FL?$CFs?$FN@ ; `string'
PUBLIC	??_C@_0GD@FNEHGIAM@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Success?5?$FL@ ; `string'
PUBLIC	??_C@_0CA@CBDBEMLE@?$FL380Item?$FN?$FLItem?5Mix?$FN?5?9?5Mix?5Start?$AA@ ; `string'
PUBLIC	??_C@_0BC@IFIOIDM@380Item?$FN?$FLItem?5Mix?$AA@	; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?ChaosMix380ItemOption@CItemSystemFor380@@QAEHPAUOBJECTSTRUCT@@@Z ; CItemSystemFor380::ChaosMix380ItemOption
EXTRN	?GCUserChaosBoxSend@@YAXPAUOBJECTSTRUCT@@H@Z:PROC ; GCUserChaosBoxSend
EXTRN	?Clear@CItem@@QAEXXZ:PROC			; CItem::Clear
EXTRN	_rand:PROC
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?LogChaosItem@CMixSystem@@QAEXPAUOBJECTSTRUCT@@PAD@Z:PROC ; CMixSystem::LogChaosItem
EXTRN	?g_MixSystem@@3VCMixSystem@@A:BYTE		; g_MixSystem
EXTRN	?GCMoneySend@@YAXHK@Z:PROC			; GCMoneySend
EXTRN	?AddTributeMoney@CCastleSiegeSync@@QAEXH@Z:PROC	; CCastleSiegeSync::AddTributeMoney
EXTRN	?GetTaxRateChaos@CCastleSiegeSync@@QAEHH@Z:PROC	; CCastleSiegeSync::GetTaxRateChaos
EXTRN	?g_CastleSiegeSync@@3VCCastleSiegeSync@@A:BYTE	; g_CastleSiegeSync
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?IsJewelOfHarmonyPurity@CJewelOfHarmonySystem@@QAEHF@Z:PROC ; CJewelOfHarmonySystem::IsJewelOfHarmonyPurity
EXTRN	?g_kJewelOfHarmonySystem@@3VCJewelOfHarmonySystem@@A:BYTE ; g_kJewelOfHarmonySystem
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
;	COMDAT ??_C@_0DP@LHPKHLIF@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Fail?5?$FL?$CFs?$FN@
CONST	SEGMENT
??_C@_0DP@LHPKHLIF@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Fail?5?$FL?$CFs?$FN@ DB '['
	DB	'380Item][ItemMix] Mix Fail [%s][%s], Money(%d-%d) Rate(%d/%d)'
	DB	00H						; `string'
CONST	ENDS
;	COMDAT ??_C@_0GD@FNEHGIAM@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Success?5?$FL@
CONST	SEGMENT
??_C@_0GD@FNEHGIAM@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Success?5?$FL@ DB '['
	DB	'380Item][ItemMix] Mix Success [%s][%s], Money(%d-%d) Rate(%d/'
	DB	'%d) Option(%d,%d) OptionValue(%d,%d)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@CBDBEMLE@?$FL380Item?$FN?$FLItem?5Mix?$FN?5?9?5Mix?5Start?$AA@
CONST	SEGMENT
??_C@_0CA@CBDBEMLE@?$FL380Item?$FN?$FLItem?5Mix?$FN?5?9?5Mix?5Start?$AA@ DB '['
	DB	'380Item][Item Mix] - Mix Start', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@IFIOIDM@380Item?$FN?$FLItem?5Mix?$AA@
CONST	SEGMENT
??_C@_0BC@IFIOIDM@380Item?$FN?$FLItem?5Mix?$AA@ DB '380Item][Item Mix', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_iRateSuccess$ = -76					; size = 4
_iRate$ = -72						; size = 4
_iChaosTaxMoney$ = -68					; size = 4
_n$227605 = -64						; size = 4
_iPosOfJewelOfSuho$ = -60				; size = 4
_iPosOfJewelOfHarmony$ = -56				; size = 4
_pTargetItem$ = -52					; size = 4
_pMsg$ = -48						; size = 16
_iCharmOfLuckCount$ = -32				; size = 4
_iMixPrice$ = -28					; size = 4
_iInvalidItemCount$ = -24				; size = 4
_iJewelOfSuho$ = -20					; size = 4
_iJewelOfHarmony$ = -16					; size = 4
_iValidItemCount$ = -12					; size = 4
_this$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?ChaosMix380ItemOption@CItemSystemFor380@@QAEHPAUOBJECTSTRUCT@@@Z PROC ; CItemSystemFor380::ChaosMix380ItemOption
; _this$ = ecx

; 289  : {

  00c30	55		 push	 ebp
  00c31	8b ec		 mov	 ebp, esp
  00c33	81 ec 8c 00 00
	00		 sub	 esp, 140		; 0000008cH
  00c39	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00c3e	33 c5		 xor	 eax, ebp
  00c40	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00c43	53		 push	 ebx
  00c44	56		 push	 esi
  00c45	57		 push	 edi
  00c46	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 290  : 	if ( this->m_bSystemFor380ItemOption != TRUE )

  00c49	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00c4c	83 b8 04 00 02
	00 01		 cmp	 DWORD PTR [eax+131076], 1
  00c53	74 31		 je	 SHORT $LN25@ChaosMix38

; 291  : 	{
; 292  : 		GCServerMsgStringSend(lMsg.Get(MSGGET(13,55)), lpObj->m_Index, 1);

  00c55	6a 01		 push	 1
  00c57	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00c5a	8b 08		 mov	 ecx, DWORD PTR [eax]
  00c5c	51		 push	 ecx
  00c5d	68 37 0d 00 00	 push	 3383			; 00000d37H
  00c62	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00c67	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00c6c	50		 push	 eax
  00c6d	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  00c72	83 c4 0c	 add	 esp, 12			; 0000000cH

; 293  : 		lpObj->bIsChaosMixCompleted = false;

  00c75	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00c78	c6 80 79 12 00
	00 00		 mov	 BYTE PTR [eax+4729], 0

; 294  : 
; 295  : 		return FALSE;

  00c7f	33 c0		 xor	 eax, eax
  00c81	e9 07 05 00 00	 jmp	 $LN26@ChaosMix38
$LN25@ChaosMix38:

; 296  : 	}
; 297  : 
; 298  : 	lpObj->ChaosLock = TRUE;

  00c86	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00c89	c7 80 88 0e 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+3720], 1

; 299  : 
; 300  : 	int iValidItemCount = 0;

  00c93	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _iValidItemCount$[ebp], 0

; 301  : 	int iJewelOfHarmony = 0;

  00c9a	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _iJewelOfHarmony$[ebp], 0

; 302  : 	int iJewelOfSuho = 0;

  00ca1	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _iJewelOfSuho$[ebp], 0

; 303  : 	int iInvalidItemCount = 0;

  00ca8	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _iInvalidItemCount$[ebp], 0

; 304  : 	int iMixPrice = 0;

  00caf	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _iMixPrice$[ebp], 0

; 305  : 	int iCharmOfLuckCount = 0;

  00cb6	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _iCharmOfLuckCount$[ebp], 0

; 306  : 
; 307  : 	PMSG_CHAOSMIXRESULT pMsg;
; 308  : 
; 309  : 	PHeadSetB((LPBYTE)&pMsg, 0x86, sizeof(pMsg));

  00cbd	6a 10		 push	 16			; 00000010H
  00cbf	68 86 00 00 00	 push	 134			; 00000086H
  00cc4	8d 45 d0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00cc7	50		 push	 eax
  00cc8	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  00ccd	83 c4 0c	 add	 esp, 12			; 0000000cH

; 310  : 	pMsg.Result = 0;

  00cd0	c6 45 d3 00	 mov	 BYTE PTR _pMsg$[ebp+3], 0

; 311  : 	CItem * pTargetItem = NULL;

  00cd4	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _pTargetItem$[ebp], 0

; 312  : 	int iPosOfJewelOfHarmony= -1;

  00cdb	c7 45 c8 ff ff
	ff ff		 mov	 DWORD PTR _iPosOfJewelOfHarmony$[ebp], -1

; 313  : 	int iPosOfJewelOfSuho= -1;

  00ce2	c7 45 c4 ff ff
	ff ff		 mov	 DWORD PTR _iPosOfJewelOfSuho$[ebp], -1

; 314  : 
; 315  : 	for ( int n=0;n<CHAOS_BOX_SIZE;n++)

  00ce9	c7 45 c0 00 00
	00 00		 mov	 DWORD PTR _n$227605[ebp], 0
  00cf0	eb 09		 jmp	 SHORT $LN24@ChaosMix38
$LN23@ChaosMix38:
  00cf2	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00cf5	83 c0 01	 add	 eax, 1
  00cf8	89 45 c0	 mov	 DWORD PTR _n$227605[ebp], eax
$LN24@ChaosMix38:
  00cfb	83 7d c0 20	 cmp	 DWORD PTR _n$227605[ebp], 32 ; 00000020H
  00cff	0f 8d 7a 01 00
	00		 jge	 $LN22@ChaosMix38

; 316  : 	{
; 317  : 	if ( lpObj->pChaosBox[n].IsItem() == TRUE )

  00d05	8b 4d c0	 mov	 ecx, DWORD PTR _n$227605[ebp]
  00d08	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  00d0e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d11	03 88 78 0e 00
	00		 add	 ecx, DWORD PTR [eax+3704]
  00d17	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  00d1c	83 f8 01	 cmp	 eax, 1
  00d1f	0f 85 55 01 00
	00		 jne	 $LN13@ChaosMix38

; 318  : 	{
; 319  : 		if ( this->Is380Item(&lpObj->pChaosBox[n]) == TRUE &&
; 320  : 			this->Is380OptionItem(&lpObj->pChaosBox[n]) == FALSE &&
; 321  : 			 lpObj->pChaosBox[n].m_Level > 3 &&
; 322  : 			 (lpObj->pChaosBox[n].m_Option3<<2) > 3)

  00d25	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00d28	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00d2e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00d31	03 81 78 0e 00
	00		 add	 eax, DWORD PTR [ecx+3704]
  00d37	50		 push	 eax
  00d38	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00d3b	e8 00 00 00 00	 call	 ?Is380Item@CItemSystemFor380@@QAEHPBVCItem@@@Z ; CItemSystemFor380::Is380Item
  00d40	83 f8 01	 cmp	 eax, 1
  00d43	0f 85 80 00 00
	00		 jne	 $LN20@ChaosMix38
  00d49	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00d4c	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00d52	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00d55	03 81 78 0e 00
	00		 add	 eax, DWORD PTR [ecx+3704]
  00d5b	50		 push	 eax
  00d5c	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00d5f	e8 00 00 00 00	 call	 ?Is380OptionItem@CItemSystemFor380@@QAEHPBVCItem@@@Z ; CItemSystemFor380::Is380OptionItem
  00d64	85 c0		 test	 eax, eax
  00d66	75 61		 jne	 SHORT $LN20@ChaosMix38
  00d68	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00d6b	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00d71	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00d74	8b 91 78 0e 00
	00		 mov	 edx, DWORD PTR [ecx+3704]
  00d7a	0f bf 44 02 08	 movsx	 eax, WORD PTR [edx+eax+8]
  00d7f	83 f8 03	 cmp	 eax, 3
  00d82	7e 45		 jle	 SHORT $LN20@ChaosMix38
  00d84	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00d87	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00d8d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00d90	8b 91 78 0e 00
	00		 mov	 edx, DWORD PTR [ecx+3704]
  00d96	0f b6 84 02 96
	00 00 00	 movzx	 eax, BYTE PTR [edx+eax+150]
  00d9e	c1 e0 02	 shl	 eax, 2
  00da1	83 f8 03	 cmp	 eax, 3
  00da4	7e 23		 jle	 SHORT $LN20@ChaosMix38

; 323  : 		{
; 324  : 			iValidItemCount++;

  00da6	8b 45 f4	 mov	 eax, DWORD PTR _iValidItemCount$[ebp]
  00da9	83 c0 01	 add	 eax, 1
  00dac	89 45 f4	 mov	 DWORD PTR _iValidItemCount$[ebp], eax

; 325  : 			pTargetItem = &lpObj->pChaosBox[n];

  00daf	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00db2	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00db8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00dbb	03 81 78 0e 00
	00		 add	 eax, DWORD PTR [ecx+3704]
  00dc1	89 45 cc	 mov	 DWORD PTR _pTargetItem$[ebp], eax
  00dc4	e9 b1 00 00 00	 jmp	 $LN13@ChaosMix38
$LN20@ChaosMix38:

; 326  : 		}
; 327  : 		else if ( g_kJewelOfHarmonySystem.IsJewelOfHarmonyPurity(lpObj->pChaosBox[n].m_Type) == TRUE )

  00dc9	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00dcc	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00dd2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00dd5	8b 91 78 0e 00
	00		 mov	 edx, DWORD PTR [ecx+3704]
  00ddb	0f b7 44 02 06	 movzx	 eax, WORD PTR [edx+eax+6]
  00de0	50		 push	 eax
  00de1	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_kJewelOfHarmonySystem@@3VCJewelOfHarmonySystem@@A ; g_kJewelOfHarmonySystem
  00de6	e8 00 00 00 00	 call	 ?IsJewelOfHarmonyPurity@CJewelOfHarmonySystem@@QAEHF@Z ; CJewelOfHarmonySystem::IsJewelOfHarmonyPurity
  00deb	83 f8 01	 cmp	 eax, 1
  00dee	75 11		 jne	 SHORT $LN18@ChaosMix38

; 328  : 		{
; 329  : 			iJewelOfHarmony++;

  00df0	8b 45 f0	 mov	 eax, DWORD PTR _iJewelOfHarmony$[ebp]
  00df3	83 c0 01	 add	 eax, 1
  00df6	89 45 f0	 mov	 DWORD PTR _iJewelOfHarmony$[ebp], eax

; 330  : 			iPosOfJewelOfHarmony = n;

  00df9	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00dfc	89 45 c8	 mov	 DWORD PTR _iPosOfJewelOfHarmony$[ebp], eax
  00dff	eb 79		 jmp	 SHORT $LN13@ChaosMix38
$LN18@ChaosMix38:

; 331  : 		}
; 332  : 		else if ( lpObj->pChaosBox[n].m_Type == ITEMGET(14, 31) )

  00e01	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00e04	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00e0a	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00e0d	8b 91 78 0e 00
	00		 mov	 edx, DWORD PTR [ecx+3704]
  00e13	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  00e18	3d 1f 1c 00 00	 cmp	 eax, 7199		; 00001c1fH
  00e1d	75 11		 jne	 SHORT $LN16@ChaosMix38

; 333  : 		{
; 334  : 			iJewelOfSuho++;

  00e1f	8b 45 ec	 mov	 eax, DWORD PTR _iJewelOfSuho$[ebp]
  00e22	83 c0 01	 add	 eax, 1
  00e25	89 45 ec	 mov	 DWORD PTR _iJewelOfSuho$[ebp], eax

; 335  : 			iPosOfJewelOfSuho = n;

  00e28	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00e2b	89 45 c4	 mov	 DWORD PTR _iPosOfJewelOfSuho$[ebp], eax
  00e2e	eb 4a		 jmp	 SHORT $LN13@ChaosMix38
$LN16@ChaosMix38:

; 336  : 		}
; 337  : 		else if ( lpObj->pChaosBox[n].m_Type == ITEMGET(14,53) )

  00e30	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00e33	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00e39	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00e3c	8b 91 78 0e 00
	00		 mov	 edx, DWORD PTR [ecx+3704]
  00e42	0f bf 44 02 06	 movsx	 eax, WORD PTR [edx+eax+6]
  00e47	3d 35 1c 00 00	 cmp	 eax, 7221		; 00001c35H
  00e4c	75 23		 jne	 SHORT $LN14@ChaosMix38

; 338  : 		{
; 339  : 			iCharmOfLuckCount += (int)lpObj->pChaosBox[n].m_Durability;

  00e4e	8b 45 c0	 mov	 eax, DWORD PTR _n$227605[ebp]
  00e51	69 c0 d4 00 00
	00		 imul	 eax, 212		; 000000d4H
  00e57	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00e5a	8b 91 78 0e 00
	00		 mov	 edx, DWORD PTR [ecx+3704]
  00e60	d9 44 02 24	 fld	 DWORD PTR [edx+eax+36]
  00e64	e8 00 00 00 00	 call	 __ftol2_sse
  00e69	03 45 e0	 add	 eax, DWORD PTR _iCharmOfLuckCount$[ebp]
  00e6c	89 45 e0	 mov	 DWORD PTR _iCharmOfLuckCount$[ebp], eax

; 340  : 		}
; 341  : 		else

  00e6f	eb 09		 jmp	 SHORT $LN13@ChaosMix38
$LN14@ChaosMix38:

; 342  : 		{
; 343  : 			iInvalidItemCount++;

  00e71	8b 45 e8	 mov	 eax, DWORD PTR _iInvalidItemCount$[ebp]
  00e74	83 c0 01	 add	 eax, 1
  00e77	89 45 e8	 mov	 DWORD PTR _iInvalidItemCount$[ebp], eax
$LN13@ChaosMix38:

; 344  : 		}
; 345  : 	}
; 346  : 	}

  00e7a	e9 73 fe ff ff	 jmp	 $LN23@ChaosMix38
$LN22@ChaosMix38:

; 347  : 
; 348  : 	if ( iInvalidItemCount ||
; 349  : 		 iValidItemCount != 1 ||
; 350  : 		 iJewelOfHarmony != 1 ||
; 351  : 		 iJewelOfSuho != 1 ||
; 352  : 		 pTargetItem == NULL ||		
; 353  : 		 iPosOfJewelOfHarmony == -1 ||
; 354  : 		 iPosOfJewelOfSuho == -1 ||
; 355  : 		 iCharmOfLuckCount > 10 )

  00e7f	83 7d e8 00	 cmp	 DWORD PTR _iInvalidItemCount$[ebp], 0
  00e83	75 2a		 jne	 SHORT $LN11@ChaosMix38
  00e85	83 7d f4 01	 cmp	 DWORD PTR _iValidItemCount$[ebp], 1
  00e89	75 24		 jne	 SHORT $LN11@ChaosMix38
  00e8b	83 7d f0 01	 cmp	 DWORD PTR _iJewelOfHarmony$[ebp], 1
  00e8f	75 1e		 jne	 SHORT $LN11@ChaosMix38
  00e91	83 7d ec 01	 cmp	 DWORD PTR _iJewelOfSuho$[ebp], 1
  00e95	75 18		 jne	 SHORT $LN11@ChaosMix38
  00e97	83 7d cc 00	 cmp	 DWORD PTR _pTargetItem$[ebp], 0
  00e9b	74 12		 je	 SHORT $LN11@ChaosMix38
  00e9d	83 7d c8 ff	 cmp	 DWORD PTR _iPosOfJewelOfHarmony$[ebp], -1
  00ea1	74 0c		 je	 SHORT $LN11@ChaosMix38
  00ea3	83 7d c4 ff	 cmp	 DWORD PTR _iPosOfJewelOfSuho$[ebp], -1
  00ea7	74 06		 je	 SHORT $LN11@ChaosMix38
  00ea9	83 7d e0 0a	 cmp	 DWORD PTR _iCharmOfLuckCount$[ebp], 10 ; 0000000aH
  00ead	7e 2b		 jle	 SHORT $LN12@ChaosMix38
$LN11@ChaosMix38:

; 356  : 	{
; 357  : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00eaf	0f b6 45 d1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00eb3	50		 push	 eax
  00eb4	8d 4d d0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00eb7	51		 push	 ecx
  00eb8	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00ebb	8b 02		 mov	 eax, DWORD PTR [edx]
  00ebd	50		 push	 eax
  00ebe	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00ec3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 358  : 		lpObj->ChaosLock = FALSE;

  00ec6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00ec9	c7 80 88 0e 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3720], 0

; 359  : 
; 360  : 		return FALSE;

  00ed3	33 c0		 xor	 eax, eax
  00ed5	e9 b3 02 00 00	 jmp	 $LN26@ChaosMix38
$LN12@ChaosMix38:

; 361  : 	}
; 362  : 
; 363  : 	iMixPrice = this->m_iNeedZenFor380Option;

  00eda	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00edd	8b 88 10 00 02
	00		 mov	 ecx, DWORD PTR [eax+131088]
  00ee3	89 4d e4	 mov	 DWORD PTR _iMixPrice$[ebp], ecx

; 364  : 	int iChaosTaxMoney =  iMixPrice * g_CastleSiegeSync.GetTaxRateChaos(lpObj->m_Index) / 100;

  00ee6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00ee9	8b 08		 mov	 ecx, DWORD PTR [eax]
  00eeb	51		 push	 ecx
  00eec	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CastleSiegeSync@@3VCCastleSiegeSync@@A ; g_CastleSiegeSync
  00ef1	e8 00 00 00 00	 call	 ?GetTaxRateChaos@CCastleSiegeSync@@QAEHH@Z ; CCastleSiegeSync::GetTaxRateChaos
  00ef6	0f af 45 e4	 imul	 eax, DWORD PTR _iMixPrice$[ebp]
  00efa	99		 cdq
  00efb	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00f00	f7 f9		 idiv	 ecx
  00f02	89 45 bc	 mov	 DWORD PTR _iChaosTaxMoney$[ebp], eax

; 365  : 
; 366  : 	if ( iChaosTaxMoney < 0 )

  00f05	83 7d bc 00	 cmp	 DWORD PTR _iChaosTaxMoney$[ebp], 0
  00f09	7d 07		 jge	 SHORT $LN10@ChaosMix38

; 367  : 		iChaosTaxMoney = 0;

  00f0b	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR _iChaosTaxMoney$[ebp], 0
$LN10@ChaosMix38:

; 368  : 
; 369  : 	iMixPrice += iChaosTaxMoney;

  00f12	8b 45 e4	 mov	 eax, DWORD PTR _iMixPrice$[ebp]
  00f15	03 45 bc	 add	 eax, DWORD PTR _iChaosTaxMoney$[ebp]
  00f18	89 45 e4	 mov	 DWORD PTR _iMixPrice$[ebp], eax

; 370  : 
; 371  : 	if ( iMixPrice < 0 )

  00f1b	79 07		 jns	 SHORT $LN9@ChaosMix38

; 372  : 		iMixPrice = 0;

  00f1d	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _iMixPrice$[ebp], 0
$LN9@ChaosMix38:

; 373  : 
; 374  : 	if ( lpObj->Money < iMixPrice )

  00f24	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f27	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  00f2d	3b 4d e4	 cmp	 ecx, DWORD PTR _iMixPrice$[ebp]
  00f30	7d 2f		 jge	 SHORT $LN8@ChaosMix38

; 375  : 	{
; 376  : 		pMsg.Result = 2;

  00f32	c6 45 d3 02	 mov	 BYTE PTR _pMsg$[ebp+3], 2

; 377  : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  00f36	0f b6 45 d1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00f3a	50		 push	 eax
  00f3b	8d 4d d0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00f3e	51		 push	 ecx
  00f3f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00f42	8b 02		 mov	 eax, DWORD PTR [edx]
  00f44	50		 push	 eax
  00f45	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00f4a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 378  : 		lpObj->ChaosLock = FALSE;

  00f4d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f50	c7 80 88 0e 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3720], 0

; 379  : 
; 380  : 		return FALSE;

  00f5a	33 c0		 xor	 eax, eax
  00f5c	e9 2c 02 00 00	 jmp	 $LN26@ChaosMix38
$LN8@ChaosMix38:

; 381  : 	}
; 382  : 
; 383  : 	lpObj->Money -= iMixPrice;

  00f61	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f64	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  00f6a	2b 4d e4	 sub	 ecx, DWORD PTR _iMixPrice$[ebp]
  00f6d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00f70	89 8a f0 00 00
	00		 mov	 DWORD PTR [edx+240], ecx

; 384  : 	g_CastleSiegeSync.AddTributeMoney(iChaosTaxMoney);

  00f76	8b 45 bc	 mov	 eax, DWORD PTR _iChaosTaxMoney$[ebp]
  00f79	50		 push	 eax
  00f7a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CastleSiegeSync@@3VCCastleSiegeSync@@A ; g_CastleSiegeSync
  00f7f	e8 00 00 00 00	 call	 ?AddTributeMoney@CCastleSiegeSync@@QAEXH@Z ; CCastleSiegeSync::AddTributeMoney

; 385  : 	
; 386  : 	GCMoneySend(lpObj->m_Index, lpObj->Money);

  00f84	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00f87	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  00f8d	51		 push	 ecx
  00f8e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00f91	8b 02		 mov	 eax, DWORD PTR [edx]
  00f93	50		 push	 eax
  00f94	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  00f99	83 c4 08	 add	 esp, 8

; 387  : 	g_MixSystem.LogChaosItem(lpObj, "380Item][Item Mix"); //LogChaosItem(lpObj, "380Item][Item Mix");

  00f9c	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@IFIOIDM@380Item?$FN?$FLItem?5Mix?$AA@
  00fa1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00fa4	50		 push	 eax
  00fa5	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_MixSystem@@3VCMixSystem@@A ; g_MixSystem
  00faa	e8 00 00 00 00	 call	 ?LogChaosItem@CMixSystem@@QAEXPAUOBJECTSTRUCT@@PAD@Z ; CMixSystem::LogChaosItem

; 388  : 	LogAddTD("[380Item][Item Mix] - Mix Start");

  00faf	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@CBDBEMLE@?$FL380Item?$FN?$FLItem?5Mix?$FN?5?9?5Mix?5Start?$AA@
  00fb4	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00fba	83 c4 04	 add	 esp, 4

; 389  : 
; 390  : 	int iRate =	rand() % 100;

  00fbd	e8 00 00 00 00	 call	 _rand
  00fc2	99		 cdq
  00fc3	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00fc8	f7 f9		 idiv	 ecx
  00fca	89 55 b8	 mov	 DWORD PTR _iRate$[ebp], edx

; 391  : 	int iRateSuccess = this->m_iRateSuccessRateForMix1;

  00fcd	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00fd0	8b 88 14 00 02
	00		 mov	 ecx, DWORD PTR [eax+131092]
  00fd6	89 4d b4	 mov	 DWORD PTR _iRateSuccess$[ebp], ecx

; 392  : 
; 393  : 	if ( pTargetItem->m_Level < 7 )

  00fd9	8b 45 cc	 mov	 eax, DWORD PTR _pTargetItem$[ebp]
  00fdc	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00fe0	83 f9 07	 cmp	 ecx, 7
  00fe3	7d 0e		 jge	 SHORT $LN7@ChaosMix38

; 394  : 		iRateSuccess = this->m_iRateSuccessRateForMix1;

  00fe5	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00fe8	8b 88 14 00 02
	00		 mov	 ecx, DWORD PTR [eax+131092]
  00fee	89 4d b4	 mov	 DWORD PTR _iRateSuccess$[ebp], ecx
  00ff1	eb 32		 jmp	 SHORT $LN3@ChaosMix38
$LN7@ChaosMix38:

; 395  : 	else if ( pTargetItem->m_Level < 10 )

  00ff3	8b 45 cc	 mov	 eax, DWORD PTR _pTargetItem$[ebp]
  00ff6	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  00ffa	83 f9 0a	 cmp	 ecx, 10			; 0000000aH
  00ffd	7d 0e		 jge	 SHORT $LN5@ChaosMix38

; 396  : 		iRateSuccess = this->m_iRateSuccessRateForMix2;

  00fff	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  01002	8b 88 18 00 02
	00		 mov	 ecx, DWORD PTR [eax+131096]
  01008	89 4d b4	 mov	 DWORD PTR _iRateSuccess$[ebp], ecx
  0100b	eb 18		 jmp	 SHORT $LN3@ChaosMix38
$LN5@ChaosMix38:

; 397  : 	else if ( pTargetItem->m_Level < 14 )

  0100d	8b 45 cc	 mov	 eax, DWORD PTR _pTargetItem$[ebp]
  01010	0f bf 48 08	 movsx	 ecx, WORD PTR [eax+8]
  01014	83 f9 0e	 cmp	 ecx, 14			; 0000000eH
  01017	7d 0c		 jge	 SHORT $LN3@ChaosMix38

; 398  : 		iRateSuccess = this->m_iRateSuccessRateForMix3;

  01019	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0101c	8b 88 1c 00 02
	00		 mov	 ecx, DWORD PTR [eax+131100]
  01022	89 4d b4	 mov	 DWORD PTR _iRateSuccess$[ebp], ecx
$LN3@ChaosMix38:

; 399  : 
; 400  : 	iRateSuccess += iCharmOfLuckCount;

  01025	8b 45 b4	 mov	 eax, DWORD PTR _iRateSuccess$[ebp]
  01028	03 45 e0	 add	 eax, DWORD PTR _iCharmOfLuckCount$[ebp]
  0102b	89 45 b4	 mov	 DWORD PTR _iRateSuccess$[ebp], eax

; 401  : 
; 402  : 	lpObj->pChaosBox[iPosOfJewelOfHarmony].Clear();

  0102e	8b 4d c8	 mov	 ecx, DWORD PTR _iPosOfJewelOfHarmony$[ebp]
  01031	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  01037	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0103a	03 88 78 0e 00
	00		 add	 ecx, DWORD PTR [eax+3704]
  01040	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear

; 403  : 	lpObj->pChaosBoxMap[iPosOfJewelOfHarmony] = -1;

  01045	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01048	8b 88 7c 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3708]
  0104e	8b 55 c8	 mov	 edx, DWORD PTR _iPosOfJewelOfHarmony$[ebp]
  01051	c6 04 11 ff	 mov	 BYTE PTR [ecx+edx], 255	; 000000ffH

; 404  : 	lpObj->pChaosBox[iPosOfJewelOfSuho].Clear();

  01055	8b 4d c4	 mov	 ecx, DWORD PTR _iPosOfJewelOfSuho$[ebp]
  01058	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  0105e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01061	03 88 78 0e 00
	00		 add	 ecx, DWORD PTR [eax+3704]
  01067	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear

; 405  : 	lpObj->pChaosBoxMap[iPosOfJewelOfSuho] = -1;

  0106c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0106f	8b 88 7c 0e 00
	00		 mov	 ecx, DWORD PTR [eax+3708]
  01075	8b 55 c4	 mov	 edx, DWORD PTR _iPosOfJewelOfSuho$[ebp]
  01078	c6 04 11 ff	 mov	 BYTE PTR [ecx+edx], 255	; 000000ffH

; 406  : 
; 407  : 	if ( iRate < iRateSuccess )

  0107c	8b 45 b8	 mov	 eax, DWORD PTR _iRate$[ebp]
  0107f	3b 45 b4	 cmp	 eax, DWORD PTR _iRateSuccess$[ebp]
  01082	0f 8d 9c 00 00
	00		 jge	 $LN2@ChaosMix38

; 408  : 	{
; 409  : 		this->_SetOption(pTargetItem, TRUE);

  01088	6a 01		 push	 1
  0108a	8b 45 cc	 mov	 eax, DWORD PTR _pTargetItem$[ebp]
  0108d	50		 push	 eax
  0108e	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  01091	e8 00 00 00 00	 call	 ?_SetOption@CItemSystemFor380@@QAEHPAVCItem@@H@Z ; CItemSystemFor380::_SetOption

; 410  : 		GCUserChaosBoxSend(lpObj, 0);

  01096	6a 00		 push	 0
  01098	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0109b	50		 push	 eax
  0109c	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAUOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  010a1	83 c4 08	 add	 esp, 8

; 411  : 
; 412  : 		LogAddTD("[380Item][ItemMix] Mix Success [%s][%s], Money(%d-%d) Rate(%d/%d) Option(%d,%d) OptionValue(%d,%d)",
; 413  : 			lpObj->AccountID, lpObj->Name, lpObj->Money,
; 414  : 			iMixPrice, iRate, iRateSuccess,
; 415  : 			this->m_itemOption[(pTargetItem->m_Type )].m_Option1,
; 416  : 			this->m_itemOption[(pTargetItem->m_Type )].m_Option2,
; 417  : 			this->m_itemOption[(pTargetItem->m_Type )].m_Value1,
; 418  : 			this->m_itemOption[(pTargetItem->m_Type )].m_Value2);

  010a4	8b 45 cc	 mov	 eax, DWORD PTR _pTargetItem$[ebp]
  010a7	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  010ab	c1 e1 04	 shl	 ecx, 4
  010ae	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  010b1	0f b7 44 0a 10	 movzx	 eax, WORD PTR [edx+ecx+16]
  010b6	50		 push	 eax
  010b7	8b 4d cc	 mov	 ecx, DWORD PTR _pTargetItem$[ebp]
  010ba	0f bf 51 06	 movsx	 edx, WORD PTR [ecx+6]
  010be	c1 e2 04	 shl	 edx, 4
  010c1	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  010c4	0f b7 4c 10 0c	 movzx	 ecx, WORD PTR [eax+edx+12]
  010c9	51		 push	 ecx
  010ca	8b 55 cc	 mov	 edx, DWORD PTR _pTargetItem$[ebp]
  010cd	0f bf 42 06	 movsx	 eax, WORD PTR [edx+6]
  010d1	c1 e0 04	 shl	 eax, 4
  010d4	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  010d7	0f b6 54 01 0e	 movzx	 edx, BYTE PTR [ecx+eax+14]
  010dc	52		 push	 edx
  010dd	8b 45 cc	 mov	 eax, DWORD PTR _pTargetItem$[ebp]
  010e0	0f bf 48 06	 movsx	 ecx, WORD PTR [eax+6]
  010e4	c1 e1 04	 shl	 ecx, 4
  010e7	8b 55 f8	 mov	 edx, DWORD PTR _this$[ebp]
  010ea	0f b6 44 0a 0a	 movzx	 eax, BYTE PTR [edx+ecx+10]
  010ef	50		 push	 eax
  010f0	8b 4d b4	 mov	 ecx, DWORD PTR _iRateSuccess$[ebp]
  010f3	51		 push	 ecx
  010f4	8b 55 b8	 mov	 edx, DWORD PTR _iRate$[ebp]
  010f7	52		 push	 edx
  010f8	8b 45 e4	 mov	 eax, DWORD PTR _iMixPrice$[ebp]
  010fb	50		 push	 eax
  010fc	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  010ff	8b 91 f0 00 00
	00		 mov	 edx, DWORD PTR [ecx+240]
  01105	52		 push	 edx
  01106	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01109	83 c0 77	 add	 eax, 119		; 00000077H
  0110c	50		 push	 eax
  0110d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01110	83 c1 6c	 add	 ecx, 108		; 0000006cH
  01113	51		 push	 ecx
  01114	68 00 00 00 00	 push	 OFFSET ??_C@_0GD@FNEHGIAM@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Success?5?$FL@
  01119	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0111f	83 c4 2c	 add	 esp, 44			; 0000002cH

; 419  : 	}
; 420  : 	else

  01122	eb 57		 jmp	 SHORT $LN1@ChaosMix38
$LN2@ChaosMix38:

; 421  : 	{
; 422  : 		GCUserChaosBoxSend(lpObj, 0);

  01124	6a 00		 push	 0
  01126	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01129	50		 push	 eax
  0112a	e8 00 00 00 00	 call	 ?GCUserChaosBoxSend@@YAXPAUOBJECTSTRUCT@@H@Z ; GCUserChaosBoxSend
  0112f	83 c4 08	 add	 esp, 8

; 423  : 		DataSend(lpObj->m_Index, (LPBYTE)&pMsg, pMsg.h.size);

  01132	0f b6 45 d1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  01136	50		 push	 eax
  01137	8d 4d d0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0113a	51		 push	 ecx
  0113b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0113e	8b 02		 mov	 eax, DWORD PTR [edx]
  01140	50		 push	 eax
  01141	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  01146	83 c4 0c	 add	 esp, 12			; 0000000cH

; 424  : 
; 425  : 		LogAddTD("[380Item][ItemMix] Mix Fail [%s][%s], Money(%d-%d) Rate(%d/%d)",
; 426  : 			lpObj->AccountID, lpObj->Name, lpObj->Money,
; 427  : 			iMixPrice, iRate, iRateSuccess);

  01149	8b 45 b4	 mov	 eax, DWORD PTR _iRateSuccess$[ebp]
  0114c	50		 push	 eax
  0114d	8b 4d b8	 mov	 ecx, DWORD PTR _iRate$[ebp]
  01150	51		 push	 ecx
  01151	8b 55 e4	 mov	 edx, DWORD PTR _iMixPrice$[ebp]
  01154	52		 push	 edx
  01155	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01158	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  0115e	51		 push	 ecx
  0115f	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01162	83 c2 77	 add	 edx, 119		; 00000077H
  01165	52		 push	 edx
  01166	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01169	83 c0 6c	 add	 eax, 108		; 0000006cH
  0116c	50		 push	 eax
  0116d	68 00 00 00 00	 push	 OFFSET ??_C@_0DP@LHPKHLIF@?$FL380Item?$FN?$FLItemMix?$FN?5Mix?5Fail?5?$FL?$CFs?$FN@
  01172	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  01178	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN1@ChaosMix38:

; 428  : 
; 429  : 	}
; 430  : 
; 431  : 	lpObj->ChaosLock = FALSE;

  0117b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0117e	c7 80 88 0e 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+3720], 0

; 432  : 	return TRUE;

  01188	b8 01 00 00 00	 mov	 eax, 1
$LN26@ChaosMix38:

; 433  : }

  0118d	5f		 pop	 edi
  0118e	5e		 pop	 esi
  0118f	5b		 pop	 ebx
  01190	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01193	33 cd		 xor	 ecx, ebp
  01195	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0119a	8b e5		 mov	 esp, ebp
  0119c	5d		 pop	 ebp
  0119d	c2 04 00	 ret	 4
?ChaosMix380ItemOption@CItemSystemFor380@@QAEHPAUOBJECTSTRUCT@@@Z ENDP ; CItemSystemFor380::ChaosMix380ItemOption
_TEXT	ENDS
EXTRN	_atexit:PROC
; Function compile flags: /Odtp /ZI
;	COMDAT ??__Eg_kItemSystemFor380@@YAXXZ
text$yc	SEGMENT
??__Eg_kItemSystemFor380@@YAXXZ PROC			; `dynamic initializer for 'g_kItemSystemFor380'', COMDAT

; 15   : CItemSystemFor380 g_kItemSystemFor380;

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_kItemSystemFor380@@3VCItemSystemFor380@@A ; g_kItemSystemFor380
  0000e	e8 00 00 00 00	 call	 ??0CItemSystemFor380@@QAE@XZ ; CItemSystemFor380::CItemSystemFor380
  00013	68 00 00 00 00	 push	 OFFSET ??__Fg_kItemSystemFor380@@YAXXZ ; `dynamic atexit destructor for 'g_kItemSystemFor380''
  00018	e8 00 00 00 00	 call	 _atexit
  0001d	83 c4 04	 add	 esp, 4
  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
??__Eg_kItemSystemFor380@@YAXXZ ENDP			; `dynamic initializer for 'g_kItemSystemFor380''
; Function compile flags: /Odtp /ZI
text$yc	ENDS
;	COMDAT ??__Fg_kItemSystemFor380@@YAXXZ
text$yd	SEGMENT
??__Fg_kItemSystemFor380@@YAXXZ PROC			; `dynamic atexit destructor for 'g_kItemSystemFor380'', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_kItemSystemFor380@@3VCItemSystemFor380@@A ; g_kItemSystemFor380
  0000e	e8 00 00 00 00	 call	 ??1CItemSystemFor380@@UAE@XZ ; CItemSystemFor380::~CItemSystemFor380
  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
??__Fg_kItemSystemFor380@@YAXXZ ENDP			; `dynamic atexit destructor for 'g_kItemSystemFor380''
text$yd	ENDS
PUBLIC	?g_kItemSystemFor380@@3VCItemSystemFor380@@A	; g_kItemSystemFor380
_BSS	SEGMENT
?g_kItemSystemFor380@@3VCItemSystemFor380@@A DB 020020H DUP (?) ; g_kItemSystemFor380
_BSS	ENDS
CRT$XCU	SEGMENT
_g_kItemSystemFor380$initializer$ DD FLAT:??__Eg_kItemSystemFor380@@YAXXZ
CRT$XCU	ENDS
END
