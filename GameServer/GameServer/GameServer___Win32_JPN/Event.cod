; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\Event.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?pEventObj@@3PAUOBJECTSTRUCT@@A			; pEventObj
PUBLIC	?g_sz2ANV_GIFT_NAME@@3PAY0EA@DA			; g_sz2ANV_GIFT_NAME
PUBLIC	?g_bRingEventItemTextLoad@@3HA			; g_bRingEventItemTextLoad
_BSS	SEGMENT
?pEventObj@@3PAUOBJECTSTRUCT@@A DD 01H DUP (?)		; pEventObj
?g_sz2ANV_GIFT_NAME@@3PAY0EA@DA DB 0c80H DUP (?)	; g_sz2ANV_GIFT_NAME
?g_bRingEventItemTextLoad@@3HA DD 01H DUP (?)		; g_bRingEventItemTextLoad
_BSS	ENDS
CONST	SEGMENT
_g_szRingEventOfflineGift DB '100', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH
	DB	0c1H, 0f6H, 00H
	ORG $+19
	DB	'10', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH, 0c1H, 0f6H
	DB	00H
	ORG $+20
	DB	'5', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH, 0c1H, 0f6H, 00H
	ORG $+21
	DB	'2', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH, 0c1H, 0f6H, 00H
	ORG $+21
CONST	ENDS
_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemPositionResult
PUBLIC	?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemResult
PUBLIC	?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasSetPayItemResult
PUBLIC	?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasGetPayItemResult
PUBLIC	?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z ; EGAnsRegHTOfflineGift
PUBLIC	?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z ; EGAnsRegDLOfflineGift
PUBLIC	?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z ; EGAnsRegCCOfflineGift
PUBLIC	?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z ; EGRecvRegRingGift
PUBLIC	?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z ; EGRecv2AnvRegSerial
PUBLIC	?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeStones
PUBLIC	?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z ; EGRecvDeleteStone
PUBLIC	?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z ; EGRecvRegStone
PUBLIC	?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z ; EGRecvStoneInfo
PUBLIC	?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeRena
PUBLIC	?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z ; EGRecvRegMutoNum
PUBLIC	?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z ; EGResultRegEventChip
PUBLIC	?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z ; EGRecvEventChipInfo
PUBLIC	?EventChipEventProtocolCore@@YAXEPAEH@Z		; EventChipEventProtocolCore
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\event.cpp
_TEXT	SEGMENT
tv65 = -68						; size = 4
_protoNum$ = 8						; size = 1
_aRecv$ = 12						; size = 4
_aLen$ = 16						; size = 4
?EventChipEventProtocolCore@@YAXEPAEH@Z PROC		; EventChipEventProtocolCore

; 18   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 19   : 	switch ( protoNum )

  00009	0f b6 45 08	 movzx	 eax, BYTE PTR _protoNum$[ebp]
  0000d	89 45 bc	 mov	 DWORD PTR tv65[ebp], eax
  00010	8b 4d bc	 mov	 ecx, DWORD PTR tv65[ebp]
  00013	83 e9 01	 sub	 ecx, 1
  00016	89 4d bc	 mov	 DWORD PTR tv65[ebp], ecx
  00019	83 7d bc 33	 cmp	 DWORD PTR tv65[ebp], 51	; 00000033H
  0001d	0f 87 1d 01 00
	00		 ja	 $LN24@EventChipE
  00023	8b 55 bc	 mov	 edx, DWORD PTR tv65[ebp]
  00026	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR $LN26@EventChipE[edx]
  0002d	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN27@EventChipE[eax*4]
$LN21@EventChipE:

; 20   : 	{
; 21   : 		case 0x01:
; 22   : 			EGRecvEventChipInfo((PMSG_ANS_VIEW_EC_MN *)aRecv);

  00034	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00037	50		 push	 eax
  00038	e8 00 00 00 00	 call	 ?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z ; EGRecvEventChipInfo
  0003d	83 c4 04	 add	 esp, 4

; 23   : 			break;

  00040	e9 fb 00 00 00	 jmp	 $LN24@EventChipE
$LN20@EventChipE:

; 24   : 		case 0x02:
; 25   : 			EGResultRegEventChip((PMSG_ANS_REGISTER_EVENTCHIP *)aRecv);

  00045	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00048	50		 push	 eax
  00049	e8 00 00 00 00	 call	 ?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z ; EGResultRegEventChip
  0004e	83 c4 04	 add	 esp, 4

; 26   : 			break;

  00051	e9 ea 00 00 00	 jmp	 $LN24@EventChipE
$LN19@EventChipE:

; 27   : 		case 0x03:
; 28   : 			EGRecvRegMutoNum((PMSG_ANS_REGISTER_MUTONUM *)aRecv);

  00056	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00059	50		 push	 eax
  0005a	e8 00 00 00 00	 call	 ?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z ; EGRecvRegMutoNum
  0005f	83 c4 04	 add	 esp, 4

; 29   : 			break;

  00062	e9 d9 00 00 00	 jmp	 $LN24@EventChipE
$LN18@EventChipE:

; 30   : 		case 0x04:
; 31   : 			EGRecvChangeRena((PMSG_ANS_RESET_EVENTCHIP *)aRecv);

  00067	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0006a	50		 push	 eax
  0006b	e8 00 00 00 00	 call	 ?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeRena
  00070	83 c4 04	 add	 esp, 4

; 32   : 			break;

  00073	e9 c8 00 00 00	 jmp	 $LN24@EventChipE
$LN17@EventChipE:

; 33   : 		case 0x05:
; 34   : 			EGRecvStoneInfo((PMSG_ANS_VIEW_STONES *)aRecv);

  00078	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0007b	50		 push	 eax
  0007c	e8 00 00 00 00	 call	 ?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z ; EGRecvStoneInfo
  00081	83 c4 04	 add	 esp, 4

; 35   : 			break;

  00084	e9 b7 00 00 00	 jmp	 $LN24@EventChipE
$LN16@EventChipE:

; 36   : 		case 0x06:
; 37   : 			EGRecvRegStone((PMSG_ANS_REGISTER_STONES *)aRecv);

  00089	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0008c	50		 push	 eax
  0008d	e8 00 00 00 00	 call	 ?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z ; EGRecvRegStone
  00092	83 c4 04	 add	 esp, 4

; 38   : 			break;

  00095	e9 a6 00 00 00	 jmp	 $LN24@EventChipE
$LN15@EventChipE:

; 39   : 		case 0x07:
; 40   : 			EGRecvDeleteStone((PMSG_ANS_DELETE_STONES *)aRecv);

  0009a	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0009d	50		 push	 eax
  0009e	e8 00 00 00 00	 call	 ?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z ; EGRecvDeleteStone
  000a3	83 c4 04	 add	 esp, 4

; 41   : 			break;

  000a6	e9 95 00 00 00	 jmp	 $LN24@EventChipE
$LN14@EventChipE:

; 42   : 		case 0x09:
; 43   : 			EGRecvChangeStones((PMSG_ANS_RESET_EVENTCHIP *)aRecv);

  000ab	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000ae	50		 push	 eax
  000af	e8 00 00 00 00	 call	 ?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeStones
  000b4	83 c4 04	 add	 esp, 4

; 44   : 			break;

  000b7	e9 84 00 00 00	 jmp	 $LN24@EventChipE
$LN13@EventChipE:

; 45   : 		case 0x08:
; 46   : 			EGRecv2AnvRegSerial((PMSG_ANS_2ANIV_SERIAL *)aRecv);

  000bc	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000bf	50		 push	 eax
  000c0	e8 00 00 00 00	 call	 ?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z ; EGRecv2AnvRegSerial
  000c5	83 c4 04	 add	 esp, 4

; 47   : 			break;

  000c8	eb 76		 jmp	 SHORT $LN24@EventChipE
$LN12@EventChipE:

; 48   : 		case 0x10:
; 49   : 			EGRecvRegRingGift((PMSG_ANS_REG_RINGGIFT *)aRecv);

  000ca	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000cd	50		 push	 eax
  000ce	e8 00 00 00 00	 call	 ?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z ; EGRecvRegRingGift
  000d3	83 c4 04	 add	 esp, 4

; 50   : 			break;

  000d6	eb 68		 jmp	 SHORT $LN24@EventChipE
$LN11@EventChipE:

; 51   : 		case 0x15:
; 52   : 			EGAnsRegCCOfflineGift((PMSG_ANS_REG_CC_OFFLINE_GIFT *)aRecv);

  000d8	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000db	50		 push	 eax
  000dc	e8 00 00 00 00	 call	 ?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z ; EGAnsRegCCOfflineGift
  000e1	83 c4 04	 add	 esp, 4

; 53   : 			break;

  000e4	eb 5a		 jmp	 SHORT $LN24@EventChipE
$LN10@EventChipE:

; 54   : 		case 0x16:
; 55   : 			EGAnsRegDLOfflineGift((PMSG_ANS_REG_DL_OFFLINE_GIFT *)aRecv);

  000e6	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000e9	50		 push	 eax
  000ea	e8 00 00 00 00	 call	 ?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z ; EGAnsRegDLOfflineGift
  000ef	83 c4 04	 add	 esp, 4

; 56   : 			break;

  000f2	eb 4c		 jmp	 SHORT $LN24@EventChipE
$LN9@EventChipE:

; 57   : 		case 0x17:
; 58   : 			EGAnsRegHTOfflineGift((PMSG_ANS_REG_HT_OFFLINE_GIFT *)aRecv);

  000f4	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000f7	50		 push	 eax
  000f8	e8 00 00 00 00	 call	 ?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z ; EGAnsRegHTOfflineGift
  000fd	83 c4 04	 add	 esp, 4

; 59   : 			break;

  00100	eb 3e		 jmp	 SHORT $LN24@EventChipE

; 60   : 		case 0x23: //season4.5 add-on start
; 61   : #if(PC_BANG_POINT_SYSTEM==1)
; 62   : 			g_PCBangPointSystem.EGAnsPcBangPointInfo((PMSG_ANS_REG_PC_POINT *)aRecv);
; 63   : #endif
; 64   : 			break;

  00102	eb 3c		 jmp	 SHORT $LN24@EventChipE

; 65   : 		case 0x24:
; 66   : #if(PC_BANG_POINT_SYSTEM==1)
; 67   : 			g_PCBangPointSystem.EGAnsUserFirstPcBangUpdatePoint((PMSG_ANS_REG_PC_POINT *)aRecv);
; 68   : #endif
; 69   : 			break;

  00104	eb 3a		 jmp	 SHORT $LN24@EventChipE

; 70   : 		case 0x29:
; 71   : #if(PC_BANG_POINT_SYSTEM==1)
; 72   : 			g_PCBangPointSystem.EGAnsUpdatePcBangResetPointInfo((PMSG_ANS_REG_PC_POINT *)aRecv);
; 73   : #endif
; 74   : 			break;

  00106	eb 38		 jmp	 SHORT $LN24@EventChipE

; 75   : 		case 0x30:
; 76   : #if(PC_BANG_POINT_SYSTEM==1)
; 77   : 			g_PCBangPointSystem.EGAnsUserPcBangUpdatePoint((PMSG_ANS_REG_PC_POINT *)aRecv);
; 78   : #endif
; 79   : 			break;

  00108	eb 36		 jmp	 SHORT $LN24@EventChipE
$LN4@EventChipE:

; 80   : 		case 0x31:
; 81   : 			EGAnsRegXMasGetPayItemResult((PMSG_XMAS_PAY_ITEM_RESULT *)aRecv);

  0010a	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0010d	50		 push	 eax
  0010e	e8 00 00 00 00	 call	 ?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasGetPayItemResult
  00113	83 c4 04	 add	 esp, 4

; 82   : 			break;

  00116	eb 28		 jmp	 SHORT $LN24@EventChipE
$LN3@EventChipE:

; 83   : 		case 0x32:
; 84   : 			EGAnsRegXMasSetPayItemResult((PMSG_XMAS_PAY_ITEM_RESULT *)aRecv);

  00118	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0011b	50		 push	 eax
  0011c	e8 00 00 00 00	 call	 ?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasSetPayItemResult
  00121	83 c4 04	 add	 esp, 4

; 85   : 			break;

  00124	eb 1a		 jmp	 SHORT $LN24@EventChipE
$LN2@EventChipE:

; 86   : 		case 0x33:
; 87   : 			EGAnsRegLuckyCoinItemResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00126	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00129	50		 push	 eax
  0012a	e8 00 00 00 00	 call	 ?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemResult
  0012f	83 c4 04	 add	 esp, 4

; 88   : 			break;

  00132	eb 0c		 jmp	 SHORT $LN24@EventChipE
$LN1@EventChipE:

; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00134	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00137	50		 push	 eax
  00138	e8 00 00 00 00	 call	 ?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemPositionResult
  0013d	83 c4 04	 add	 esp, 4
$LN24@EventChipE:

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  00140	5f		 pop	 edi
  00141	5e		 pop	 esi
  00142	5b		 pop	 ebx
  00143	8b e5		 mov	 esp, ebp
  00145	5d		 pop	 ebp
  00146	c3		 ret	 0
  00147	90		 npad	 1
$LN27@EventChipE:
  00148	00 00 00 00	 DD	 $LN21@EventChipE
  0014c	00 00 00 00	 DD	 $LN20@EventChipE
  00150	00 00 00 00	 DD	 $LN19@EventChipE
  00154	00 00 00 00	 DD	 $LN18@EventChipE
  00158	00 00 00 00	 DD	 $LN17@EventChipE
  0015c	00 00 00 00	 DD	 $LN16@EventChipE
  00160	00 00 00 00	 DD	 $LN15@EventChipE
  00164	00 00 00 00	 DD	 $LN13@EventChipE
  00168	00 00 00 00	 DD	 $LN14@EventChipE
  0016c	00 00 00 00	 DD	 $LN12@EventChipE
  00170	00 00 00 00	 DD	 $LN11@EventChipE
  00174	00 00 00 00	 DD	 $LN10@EventChipE
  00178	00 00 00 00	 DD	 $LN9@EventChipE
  0017c	00 00 00 00	 DD	 $LN4@EventChipE
  00180	00 00 00 00	 DD	 $LN3@EventChipE
  00184	00 00 00 00	 DD	 $LN2@EventChipE
  00188	00 00 00 00	 DD	 $LN1@EventChipE
  0018c	00 00 00 00	 DD	 $LN24@EventChipE
$LN26@EventChipE:
  00190	00		 DB	 0
  00191	01		 DB	 1
  00192	02		 DB	 2
  00193	03		 DB	 3
  00194	04		 DB	 4
  00195	05		 DB	 5
  00196	06		 DB	 6
  00197	07		 DB	 7
  00198	08		 DB	 8
  00199	11		 DB	 17			; 00000011H
  0019a	11		 DB	 17			; 00000011H
  0019b	11		 DB	 17			; 00000011H
  0019c	11		 DB	 17			; 00000011H
  0019d	11		 DB	 17			; 00000011H
  0019e	11		 DB	 17			; 00000011H
  0019f	09		 DB	 9
  001a0	11		 DB	 17			; 00000011H
  001a1	11		 DB	 17			; 00000011H
  001a2	11		 DB	 17			; 00000011H
  001a3	11		 DB	 17			; 00000011H
  001a4	0a		 DB	 10			; 0000000aH
  001a5	0b		 DB	 11			; 0000000bH
  001a6	0c		 DB	 12			; 0000000cH
  001a7	11		 DB	 17			; 00000011H
  001a8	11		 DB	 17			; 00000011H
  001a9	11		 DB	 17			; 00000011H
  001aa	11		 DB	 17			; 00000011H
  001ab	11		 DB	 17			; 00000011H
  001ac	11		 DB	 17			; 00000011H
  001ad	11		 DB	 17			; 00000011H
  001ae	11		 DB	 17			; 00000011H
  001af	11		 DB	 17			; 00000011H
  001b0	11		 DB	 17			; 00000011H
  001b1	11		 DB	 17			; 00000011H
  001b2	11		 DB	 17			; 00000011H
  001b3	11		 DB	 17			; 00000011H
  001b4	11		 DB	 17			; 00000011H
  001b5	11		 DB	 17			; 00000011H
  001b6	11		 DB	 17			; 00000011H
  001b7	11		 DB	 17			; 00000011H
  001b8	11		 DB	 17			; 00000011H
  001b9	11		 DB	 17			; 00000011H
  001ba	11		 DB	 17			; 00000011H
  001bb	11		 DB	 17			; 00000011H
  001bc	11		 DB	 17			; 00000011H
  001bd	11		 DB	 17			; 00000011H
  001be	11		 DB	 17			; 00000011H
  001bf	11		 DB	 17			; 00000011H
  001c0	0d		 DB	 13			; 0000000dH
  001c1	0e		 DB	 14			; 0000000eH
  001c2	0f		 DB	 15			; 0000000fH
  001c3	10		 DB	 16			; 00000010H
?EventChipEventProtocolCore@@YAXEPAEH@Z ENDP		; EventChipEventProtocolCore
_TEXT	ENDS
PUBLIC	??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@ ; `string'
PUBLIC	?DataSendEventChip@@YAXPADH@Z			; DataSendEventChip
EXTRN	?DataSend@wsJoinServerCli@@QAEHPADH@Z:PROC	; wsJoinServerCli::DataSend
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?GMEventChipServerConnect@@YAHPADK@Z:PROC	; GMEventChipServerConnect
EXTRN	?gEventChipServerIp@@3PADA:BYTE			; gEventChipServerIp
EXTRN	?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z:PROC ; MyWinsockBase::CreateSocket
EXTRN	?ghWnd@@3PAUHWND__@@A:DWORD			; ghWnd
EXTRN	?Close@MyWinsockBase@@QAEHXZ:PROC		; MyWinsockBase::Close
EXTRN	?wsEvenChipServerCli@@3VwsJoinServerCli@@A:BYTE	; wsEvenChipServerCli
EXTRN	?EventChipServerConnect@@3HA:DWORD		; EventChipServerConnect
EXTRN	?IsEventChipServerConnected@@3HA:DWORD		; IsEventChipServerConnected
;	COMDAT ??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@
CONST	SEGMENT
??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@ DB 'Can not conn'
	DB	'ect EventChip Server', 00H			; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pMsg$ = 8						; size = 4
_size$ = 12						; size = 4
?DataSendEventChip@@YAXPADH@Z PROC			; DataSendEventChip

; 96   : {

  001d0	55		 push	 ebp
  001d1	8b ec		 mov	 ebp, esp
  001d3	83 ec 40	 sub	 esp, 64			; 00000040H
  001d6	53		 push	 ebx
  001d7	56		 push	 esi
  001d8	57		 push	 edi

; 97   : 	if ( IsEventChipServerConnected == FALSE && ::EventChipServerConnect != FALSE )

  001d9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?IsEventChipServerConnected@@3HA, 0 ; IsEventChipServerConnected
  001e0	75 5d		 jne	 SHORT $LN3@DataSendEv
  001e2	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?EventChipServerConnect@@3HA, 0 ; EventChipServerConnect
  001e9	74 54		 je	 SHORT $LN3@DataSendEv

; 98   : 	{
; 99   : 		wsEvenChipServerCli.Close();

  001eb	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsEvenChipServerCli@@3VwsJoinServerCli@@A+4
  001f0	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close

; 100  : 		wsEvenChipServerCli.CreateSocket(ghWnd);

  001f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ghWnd@@3PAUHWND__@@A ; ghWnd
  001fa	50		 push	 eax
  001fb	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsEvenChipServerCli@@3VwsJoinServerCli@@A+4
  00200	e8 00 00 00 00	 call	 ?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z ; MyWinsockBase::CreateSocket

; 101  : 		if ( GMEventChipServerConnect(::gEventChipServerIp, WM_GM_EVENTCHIP_CLIENT_MSG_PROC) == FALSE )

  00205	68 0d 04 00 00	 push	 1037			; 0000040dH
  0020a	68 00 00 00 00	 push	 OFFSET ?gEventChipServerIp@@3PADA ; gEventChipServerIp
  0020f	e8 00 00 00 00	 call	 ?GMEventChipServerConnect@@YAHPADK@Z ; GMEventChipServerConnect
  00214	83 c4 08	 add	 esp, 8
  00217	85 c0		 test	 eax, eax
  00219	75 1a		 jne	 SHORT $LN2@DataSendEv

; 102  : 		{
; 103  : 			IsEventChipServerConnected = FALSE;

  0021b	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?IsEventChipServerConnected@@3HA, 0 ; IsEventChipServerConnected

; 104  : 			LogAddTD("Can not connect EventChip Server");

  00225	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@
  0022a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00230	83 c4 04	 add	 esp, 4

; 105  : 
; 106  : 			return;

  00233	eb 2e		 jmp	 SHORT $LN4@DataSendEv
$LN2@DataSendEv:

; 107  : 		}
; 108  : 
; 109  : 		::IsEventChipServerConnected = TRUE;

  00235	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?IsEventChipServerConnected@@3HA, 1 ; IsEventChipServerConnected
$LN3@DataSendEv:

; 110  : 
; 111  : 	}
; 112  : 
; 113  : 	if ( ::IsEventChipServerConnected != FALSE && ::EventChipServerConnect != FALSE )

  0023f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?IsEventChipServerConnected@@3HA, 0 ; IsEventChipServerConnected
  00246	74 1b		 je	 SHORT $LN4@DataSendEv
  00248	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?EventChipServerConnect@@3HA, 0 ; EventChipServerConnect
  0024f	74 12		 je	 SHORT $LN4@DataSendEv

; 114  : 	{
; 115  : 		::wsEvenChipServerCli.DataSend((char *)pMsg, size);

  00251	8b 45 0c	 mov	 eax, DWORD PTR _size$[ebp]
  00254	50		 push	 eax
  00255	8b 4d 08	 mov	 ecx, DWORD PTR _pMsg$[ebp]
  00258	51		 push	 ecx
  00259	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsEvenChipServerCli@@3VwsJoinServerCli@@A ; wsEvenChipServerCli
  0025e	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN4@DataSendEv:

; 116  : 	}
; 117  : }

  00263	5f		 pop	 edi
  00264	5e		 pop	 esi
  00265	5b		 pop	 ebx
  00266	8b e5		 mov	 esp, ebp
  00268	5d		 pop	 ebp
  00269	c3		 ret	 0
?DataSendEventChip@@YAXPADH@Z ENDP			; DataSendEventChip
_TEXT	ENDS
PUBLIC	?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z ; EledoradoBoxOpenEven
EXTRN	?DropItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC	; CProbabilityItemBag::DropItem
EXTRN	?KanturItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; KanturItemBag
EXTRN	?DevilLizardKingItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; DevilLizardKingItemBag
EXTRN	?GoldDerconItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GoldDerconItemBag
EXTRN	?TitanItemBag@@3PAVCProbabilityItemBag@@A:DWORD	; TitanItemBag
EXTRN	?GoldGoblenItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GoldGoblenItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv64 = -72						; size = 4
_EledoradoBox$ = -4					; size = 4
_lpObj$ = 8						; size = 4
_boxtype$ = 12						; size = 4
_addlevel$ = 16						; size = 4
_money$ = 20						; size = 4
?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z PROC	; EledoradoBoxOpenEven

; 120  : {

  00270	55		 push	 ebp
  00271	8b ec		 mov	 ebp, esp
  00273	83 ec 48	 sub	 esp, 72			; 00000048H
  00276	53		 push	 ebx
  00277	56		 push	 esi
  00278	57		 push	 edi

; 121  : 	CProbabilityItemBag * EledoradoBox = NULL;

  00279	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _EledoradoBox$[ebp], 0

; 122  : 
; 123  : 	switch ( boxtype )

  00280	8b 45 0c	 mov	 eax, DWORD PTR _boxtype$[ebp]
  00283	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  00286	8b 4d b8	 mov	 ecx, DWORD PTR tv64[ebp]
  00289	83 e9 08	 sub	 ecx, 8
  0028c	89 4d b8	 mov	 DWORD PTR tv64[ebp], ecx
  0028f	83 7d b8 04	 cmp	 DWORD PTR tv64[ebp], 4
  00293	77 3a		 ja	 SHORT $LN7@EledoradoB
  00295	8b 55 b8	 mov	 edx, DWORD PTR tv64[ebp]
  00298	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN11@EledoradoB[edx*4]
$LN6@EledoradoB:

; 124  : 	{
; 125  : 		case 8:
; 126  : 			EledoradoBox = ::GoldGoblenItemBag;

  0029f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GoldGoblenItemBag@@3PAVCProbabilityItemBag@@A ; GoldGoblenItemBag
  002a4	89 45 fc	 mov	 DWORD PTR _EledoradoBox$[ebp], eax

; 127  : 			break;

  002a7	eb 26		 jmp	 SHORT $LN7@EledoradoB
$LN5@EledoradoB:

; 128  : 		case 9:
; 129  : 			EledoradoBox = ::TitanItemBag;

  002a9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?TitanItemBag@@3PAVCProbabilityItemBag@@A ; TitanItemBag
  002ae	89 45 fc	 mov	 DWORD PTR _EledoradoBox$[ebp], eax

; 130  : 			break;

  002b1	eb 1c		 jmp	 SHORT $LN7@EledoradoB
$LN4@EledoradoB:

; 131  : 		case 10:
; 132  : 			EledoradoBox = ::GoldDerconItemBag;

  002b3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GoldDerconItemBag@@3PAVCProbabilityItemBag@@A ; GoldDerconItemBag
  002b8	89 45 fc	 mov	 DWORD PTR _EledoradoBox$[ebp], eax

; 133  : 			break;

  002bb	eb 12		 jmp	 SHORT $LN7@EledoradoB
$LN3@EledoradoB:

; 134  : 		case 11:
; 135  : 			EledoradoBox = ::DevilLizardKingItemBag;

  002bd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DevilLizardKingItemBag@@3PAVCProbabilityItemBag@@A ; DevilLizardKingItemBag
  002c2	89 45 fc	 mov	 DWORD PTR _EledoradoBox$[ebp], eax

; 136  : 			break;

  002c5	eb 08		 jmp	 SHORT $LN7@EledoradoB
$LN2@EledoradoB:

; 137  : 		case 12:
; 138  : 			EledoradoBox = ::KanturItemBag;

  002c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?KanturItemBag@@3PAVCProbabilityItemBag@@A ; KanturItemBag
  002cc	89 45 fc	 mov	 DWORD PTR _EledoradoBox$[ebp], eax
$LN7@EledoradoB:

; 139  : 			break;
; 140  : 	}
; 141  : 
; 142  : 	if ( EledoradoBox == NULL )

  002cf	83 7d fc 00	 cmp	 DWORD PTR _EledoradoBox$[ebp], 0
  002d3	75 02		 jne	 SHORT $LN1@EledoradoB

; 143  : 	{
; 144  : 		return;

  002d5	eb 2f		 jmp	 SHORT $LN9@EledoradoB
$LN1@EledoradoB:

; 145  : 	}
; 146  : 
; 147  : 	EledoradoBox->DropItem(lpObj->m_Index,lpObj->MapNumber,lpObj->X, lpObj->Y);

  002d7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002da	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  002e1	51		 push	 ecx
  002e2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  002e5	0f b6 82 44 01
	00 00		 movzx	 eax, BYTE PTR [edx+324]
  002ec	50		 push	 eax
  002ed	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  002f0	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  002f7	52		 push	 edx
  002f8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  002fb	8b 08		 mov	 ecx, DWORD PTR [eax]
  002fd	51		 push	 ecx
  002fe	8b 4d fc	 mov	 ecx, DWORD PTR _EledoradoBox$[ebp]
  00301	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem
$LN9@EledoradoB:

; 148  : }

  00306	5f		 pop	 edi
  00307	5e		 pop	 esi
  00308	5b		 pop	 ebx
  00309	8b e5		 mov	 esp, ebp
  0030b	5d		 pop	 ebp
  0030c	c3		 ret	 0
  0030d	8d 49 00	 npad	 3
$LN11@EledoradoB:
  00310	00 00 00 00	 DD	 $LN6@EledoradoB
  00314	00 00 00 00	 DD	 $LN5@EledoradoB
  00318	00 00 00 00	 DD	 $LN4@EledoradoB
  0031c	00 00 00 00	 DD	 $LN3@EledoradoB
  00320	00 00 00 00	 DD	 $LN2@EledoradoB
?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z ENDP	; EledoradoBoxOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@ ; `string'
PUBLIC	__real@00000000
PUBLIC	?GetBagCount@CItemBag@@QAEHXZ			; CItemBag::GetBagCount
PUBLIC	??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@ ; `string'
PUBLIC	__real@437f0000
PUBLIC	__$ArrayPad$
PUBLIC	?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; EventChipOpenEven
EXTRN	?MoneyItemDrop@MapClass@@QAEHHHH@Z:PROC		; MapClass::MoneyItemDrop
EXTRN	?MapC@@3PAVMapClass@@A:BYTE			; MapC
EXTRN	?GetName@CItem@@QAEPADXZ:PROC			; CItem::GetName
EXTRN	?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z:PROC	; CItem::Convert
EXTRN	??0CItem@@QAE@XZ:PROC				; CItem::CItem
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z:PROC	; MsgSendV2
EXTRN	?PHeadSubSetB@@YAXPAEEEH@Z:PROC			; PHeadSubSetB
EXTRN	?g_ItemDropRateForBoxOfGold@@3HA:DWORD		; g_ItemDropRateForBoxOfGold
EXTRN	?LuckboxItemBag@@3PAVCItemBag@@A:DWORD		; LuckboxItemBag
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z:PROC	; ItemSerialCreateSend
EXTRN	?ItemGetNumberMake@@YAHHH@Z:PROC		; ItemGetNumberMake
EXTRN	?g_EventChipDropRateForBoxOfGold@@3HA:DWORD	; g_EventChipDropRateForBoxOfGold
EXTRN	_rand:PROC
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@
CONST	SEGMENT
??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Event Chip] : (%d)(X:%d/Y:%d) It'
	DB	'em:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
CONST	ENDS
;	COMDAT __real@00000000
CONST	SEGMENT
__real@00000000 DD 000000000r			; 0
CONST	ENDS
;	COMDAT ??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@
CONST	SEGMENT
??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@ DB 'EventChip Ev'
	DB	'ent ItemDrop Rena', 00H			; `string'
CONST	ENDS
;	COMDAT __real@437f0000
CONST	SEGMENT
__real@437f0000 DD 0437f0000r			; 255
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv387 = -340						; size = 4
tv307 = -340						; size = 4
tv385 = -336						; size = 4
tv305 = -336						; size = 4
tv382 = -330						; size = 2
tv302 = -330						; size = 2
_NewItem$233298 = -264					; size = 212
_pMsg$233294 = -52					; size = 7
_ExOption$ = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC		; EventChipOpenEven

; 151  : {

  00330	55		 push	 ebp
  00331	8b ec		 mov	 ebp, esp
  00333	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  00339	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0033e	33 c5		 xor	 eax, ebp
  00340	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00343	53		 push	 ebx
  00344	56		 push	 esi
  00345	57		 push	 edi

; 152  : 	float dur;
; 153  : 	int type;
; 154  : 	int level;
; 155  : 	int x;
; 156  : 	int y;
; 157  : 	int Option1 = 0;

  00346	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 158  : 	int Option2 = 0;

  0034d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 159  : 	int Option3 = 0;

  00354	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 160  : 	int DropItemNum;
; 161  : 	int ExOption = 0;

  0035b	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0

; 162  : 
; 163  : 	if ( (rand()%100) < ::g_EventChipDropRateForBoxOfGold )

  00362	e8 00 00 00 00	 call	 _rand
  00367	99		 cdq
  00368	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0036d	f7 f9		 idiv	 ecx
  0036f	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_EventChipDropRateForBoxOfGold@@3HA ; g_EventChipDropRateForBoxOfGold
  00375	0f 8d c6 00 00
	00		 jge	 $LN14@EventChipO

; 164  : 	{
; 165  : 		dur = 255.0f;

  0037b	d9 05 00 00 00
	00		 fld	 DWORD PTR __real@437f0000
  00381	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 166  : 		x = lpObj->X;

  00384	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00387	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  0038e	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 167  : 		y = lpObj->Y;

  00391	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00394	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  0039b	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 168  : 		level = 0;

  0039e	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0

; 169  : 		type = ItemGetNumberMake(14, 21);

  003a5	6a 15		 push	 21			; 00000015H
  003a7	6a 0e		 push	 14			; 0000000eH
  003a9	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  003ae	83 c4 08	 add	 esp, 8
  003b1	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 170  : 		::ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  003b4	6a 00		 push	 0
  003b6	6a 00		 push	 0
  003b8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  003bb	8b 08		 mov	 ecx, DWORD PTR [eax]
  003bd	51		 push	 ecx
  003be	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  003c2	52		 push	 edx
  003c3	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  003c7	50		 push	 eax
  003c8	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  003cc	51		 push	 ecx
  003cd	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  003d0	d9 bd b6 fe ff
	ff		 fnstcw	 WORD PTR tv302[ebp]
  003d6	0f b7 85 b6 fe
	ff ff		 movzx	 eax, WORD PTR tv302[ebp]
  003dd	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  003e2	89 85 b0 fe ff
	ff		 mov	 DWORD PTR tv305[ebp], eax
  003e8	d9 ad b0 fe ff
	ff		 fldcw	 WORD PTR tv305[ebp]
  003ee	db 9d ac fe ff
	ff		 fistp	 DWORD PTR tv307[ebp]
  003f4	d9 ad b6 fe ff
	ff		 fldcw	 WORD PTR tv302[ebp]
  003fa	0f b6 95 ac fe
	ff ff		 movzx	 edx, BYTE PTR tv307[ebp]
  00401	52		 push	 edx
  00402	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  00406	50		 push	 eax
  00407	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  0040a	51		 push	 ecx
  0040b	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  0040f	52		 push	 edx
  00410	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  00414	50		 push	 eax
  00415	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00418	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  0041f	52		 push	 edx
  00420	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00423	8b 08		 mov	 ecx, DWORD PTR [eax]
  00425	51		 push	 ecx
  00426	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  0042b	83 c4 34	 add	 esp, 52			; 00000034H

; 171  : 		LogAdd("EventChip Event ItemDrop Rena");

  0042e	68 00 00 00 00	 push	 OFFSET ??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@
  00433	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00439	83 c4 04	 add	 esp, 4

; 172  : 
; 173  : 		return;

  0043c	e9 ab 04 00 00	 jmp	 $LN15@EventChipO
$LN14@EventChipO:

; 174  : 	}
; 175  : 
; 176  : 	if ( LuckboxItemBag == NULL )

  00441	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A, 0 ; LuckboxItemBag
  00448	75 05		 jne	 SHORT $LN13@EventChipO

; 177  : 	{
; 178  : 		return;

  0044a	e9 9d 04 00 00	 jmp	 $LN15@EventChipO
$LN13@EventChipO:

; 179  : 	}
; 180  : 
; 181  : 	if ( LuckboxItemBag->GetBagCount() > 0 )

  0044f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00455	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  0045a	85 c0		 test	 eax, eax
  0045c	0f 8e 48 04 00
	00		 jle	 $LN11@EventChipO

; 182  : 	{
; 183  : 		if ( (rand()%20) < ::g_ItemDropRateForBoxOfGold )

  00462	e8 00 00 00 00	 call	 _rand
  00467	99		 cdq
  00468	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  0046d	f7 f9		 idiv	 ecx
  0046f	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForBoxOfGold@@3HA ; g_ItemDropRateForBoxOfGold
  00475	0f 8d 2f 04 00
	00		 jge	 $LN11@EventChipO

; 184  : 		{
; 185  : 			DropItemNum = rand() % LuckboxItemBag->GetBagCount();

  0047b	e8 00 00 00 00	 call	 _rand
  00480	8b f0		 mov	 esi, eax
  00482	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00488	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  0048d	8b c8		 mov	 ecx, eax
  0048f	8b c6		 mov	 eax, esi
  00491	99		 cdq
  00492	f7 f9		 idiv	 ecx
  00494	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 186  : 			dur = 0;

  00497	d9 ee		 fldz
  00499	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 187  : 			x = lpObj->X;

  0049c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0049f	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  004a6	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 188  : 			y = lpObj->Y;

  004a9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  004ac	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  004b3	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 189  : 			level = LuckboxItemBag->GetLevel(DropItemNum) + rand() % 2;

  004b6	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  004b9	50		 push	 eax
  004ba	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  004c0	8b 11		 mov	 edx, DWORD PTR [ecx]
  004c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  004c8	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  004cb	ff d0		 call	 eax
  004cd	0f b6 f0	 movzx	 esi, al
  004d0	e8 00 00 00 00	 call	 _rand
  004d5	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  004da	79 05		 jns	 SHORT $LN17@EventChipO
  004dc	48		 dec	 eax
  004dd	83 c8 fe	 or	 eax, -2			; fffffffeH
  004e0	40		 inc	 eax
$LN17@EventChipO:
  004e1	03 f0		 add	 esi, eax
  004e3	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 190  : 
; 191  : 			type = ItemGetNumberMake(LuckboxItemBag->GetType(DropItemNum), LuckboxItemBag->GetIndex(DropItemNum));

  004e6	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  004e9	50		 push	 eax
  004ea	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  004f0	8b 11		 mov	 edx, DWORD PTR [ecx]
  004f2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  004f8	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  004fb	ff d0		 call	 eax
  004fd	0f b6 c8	 movzx	 ecx, al
  00500	51		 push	 ecx
  00501	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00504	52		 push	 edx
  00505	a1 00 00 00 00	 mov	 eax, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0050a	8b 10		 mov	 edx, DWORD PTR [eax]
  0050c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00512	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00515	ff d0		 call	 eax
  00517	0f b6 c8	 movzx	 ecx, al
  0051a	51		 push	 ecx
  0051b	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00520	83 c4 08	 add	 esp, 8
  00523	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 192  : 
; 193  : 			Option1 = rand() % 2;

  00526	e8 00 00 00 00	 call	 _rand
  0052b	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00530	79 05		 jns	 SHORT $LN18@EventChipO
  00532	48		 dec	 eax
  00533	83 c8 fe	 or	 eax, -2			; fffffffeH
  00536	40		 inc	 eax
$LN18@EventChipO:
  00537	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 194  : 			Option2 = rand() % 2;

  0053a	e8 00 00 00 00	 call	 _rand
  0053f	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00544	79 05		 jns	 SHORT $LN19@EventChipO
  00546	48		 dec	 eax
  00547	83 c8 fe	 or	 eax, -2			; fffffffeH
  0054a	40		 inc	 eax
$LN19@EventChipO:
  0054b	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 195  : 
; 196  : 			if ( Option2 == 0 || Option1  == 0 )

  0054e	83 7d e0 00	 cmp	 DWORD PTR _Option2$[ebp], 0
  00552	74 06		 je	 SHORT $LN9@EventChipO
  00554	83 7d e4 00	 cmp	 DWORD PTR _Option1$[ebp], 0
  00558	75 2b		 jne	 SHORT $LN7@EventChipO
$LN9@EventChipO:

; 197  : 			{
; 198  : 				if ( (rand() % 5 ) < 1 )

  0055a	e8 00 00 00 00	 call	 _rand
  0055f	99		 cdq
  00560	b9 05 00 00 00	 mov	 ecx, 5
  00565	f7 f9		 idiv	 ecx
  00567	83 fa 01	 cmp	 edx, 1
  0056a	7d 09		 jge	 SHORT $LN8@EventChipO

; 199  : 				{
; 200  : 					Option3 = 3;

  0056c	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 201  : 				}
; 202  : 				else

  00573	eb 10		 jmp	 SHORT $LN7@EventChipO
$LN8@EventChipO:

; 203  : 				{
; 204  : 					Option3 = rand() % 3;

  00575	e8 00 00 00 00	 call	 _rand
  0057a	99		 cdq
  0057b	b9 03 00 00 00	 mov	 ecx, 3
  00580	f7 f9		 idiv	 ecx
  00582	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@EventChipO:

; 205  : 				}
; 206  : 			}
; 207  : 
; 208  : 			if ( type == ITEMGET(12,15) ||
; 209  : 				 type == ITEMGET(14,13) ||
; 210  : 				 type == ITEMGET(14,14) ||
; 211  : 				 type == ITEMGET(14,14) ||
; 212  : 				 type == ITEMGET(14,16)	||
; 213  : 				 type == ITEMGET(14,22)	||
; 214  : 				 type == ITEMGET(14,31)	||
; 215  : 				 type == ITEMGET(14,41)	||
; 216  : 				 type == ITEMGET(14,42)	||
; 217  : 				 type == ITEMGET(14,180)||
; 218  : 				 type == ITEMGET(14,181)||
; 219  : 				 type == ITEMGET(14,182)||
; 220  : 				 type == ITEMGET(14,183)||
; 221  : 				 type == ITEMGET(14,184)||
; 222  : 				 type == ITEMGET(14,185)||
; 223  : 				 type == ITEMGET(14,186)||
; 224  : 				 type == ITEMGET(14,187)||
; 225  : 				 type == ITEMGET(14,190)||
; 226  : 				 type == ITEMGET(14,43) ||
; 227  : 				 type == ITEMGET(14,44) )

  00585	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  0058c	0f 84 bb 00 00
	00		 je	 $LN5@EventChipO
  00592	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  00599	0f 84 ae 00 00
	00		 je	 $LN5@EventChipO
  0059f	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  005a6	0f 84 a1 00 00
	00		 je	 $LN5@EventChipO
  005ac	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  005b3	0f 84 94 00 00
	00		 je	 $LN5@EventChipO
  005b9	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  005c0	0f 84 87 00 00
	00		 je	 $LN5@EventChipO
  005c6	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  005cd	74 7e		 je	 SHORT $LN5@EventChipO
  005cf	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  005d6	74 75		 je	 SHORT $LN5@EventChipO
  005d8	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  005df	74 6c		 je	 SHORT $LN5@EventChipO
  005e1	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  005e8	74 63		 je	 SHORT $LN5@EventChipO
  005ea	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  005f1	74 5a		 je	 SHORT $LN5@EventChipO
  005f3	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  005fa	74 51		 je	 SHORT $LN5@EventChipO
  005fc	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  00603	74 48		 je	 SHORT $LN5@EventChipO
  00605	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  0060c	74 3f		 je	 SHORT $LN5@EventChipO
  0060e	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  00615	74 36		 je	 SHORT $LN5@EventChipO
  00617	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  0061e	74 2d		 je	 SHORT $LN5@EventChipO
  00620	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  00627	74 24		 je	 SHORT $LN5@EventChipO
  00629	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  00630	74 1b		 je	 SHORT $LN5@EventChipO
  00632	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  00639	74 12		 je	 SHORT $LN5@EventChipO
  0063b	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  00642	74 09		 je	 SHORT $LN5@EventChipO
  00644	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  0064b	75 23		 jne	 SHORT $LN6@EventChipO
$LN5@EventChipO:

; 228  : 			{
; 229  : 				Option1 = 0;

  0064d	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 230  : 				Option2 = 0;

  00654	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 231  : 				Option3 = 0;

  0065b	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 232  : 				level = 0;

  00662	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0

; 233  : 				ExOption = 0;

  00669	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0
$LN6@EventChipO:

; 234  : 			}
; 235  : 
; 236  : 			if ( type == ITEMGET(12,30)	||
; 237  : 				 type == ITEMGET(12,31)	||
; 238  : 				 type == ITEMGET(12,136)||
; 239  : 				 type == ITEMGET(12,137)||
; 240  : 				 type == ITEMGET(12,138)||
; 241  : 				 type == ITEMGET(12,139)||
; 242  : 				 type == ITEMGET(12,140)||
; 243  : 				 type == ITEMGET(12,141)||
; 244  : 				 type == ITEMGET(12,142)||
; 245  : 				 type == ITEMGET(12,143))

  00670	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  00677	74 51		 je	 SHORT $LN3@EventChipO
  00679	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  00680	74 48		 je	 SHORT $LN3@EventChipO
  00682	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  00689	74 3f		 je	 SHORT $LN3@EventChipO
  0068b	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  00692	74 36		 je	 SHORT $LN3@EventChipO
  00694	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  0069b	74 2d		 je	 SHORT $LN3@EventChipO
  0069d	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  006a4	74 24		 je	 SHORT $LN3@EventChipO
  006a6	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  006ad	74 1b		 je	 SHORT $LN3@EventChipO
  006af	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  006b6	74 12		 je	 SHORT $LN3@EventChipO
  006b8	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  006bf	74 09		 je	 SHORT $LN3@EventChipO
  006c1	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  006c8	75 39		 jne	 SHORT $LN4@EventChipO
$LN3@EventChipO:

; 246  : 			{
; 247  : 				Option1 = 0;

  006ca	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 248  : 				Option2 = 0;

  006d1	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 249  : 				Option3 = 0;

  006d8	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 250  : 				level = LuckboxItemBag->GetLevel(DropItemNum);

  006df	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  006e2	50		 push	 eax
  006e3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  006e9	8b 11		 mov	 edx, DWORD PTR [ecx]
  006eb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  006f1	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  006f4	ff d0		 call	 eax
  006f6	0f b6 c8	 movzx	 ecx, al
  006f9	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx

; 251  : 				ExOption = 0;

  006fc	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0
$LN4@EventChipO:

; 252  : 			}
; 253  : 
; 254  : 			if ( type == ITEMGET(13,0) ||
; 255  : 				 type == ITEMGET(13,1) ||
; 256  : 				 type == ITEMGET(13,2) ||
; 257  : 				 type == ITEMGET(13,8) ||
; 258  : 				 type == ITEMGET(13,9) ||
; 259  : 				 type == ITEMGET(13,12) ||
; 260  : 				 type == ITEMGET(13,13) )

  00703	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  0070a	74 36		 je	 SHORT $LN1@EventChipO
  0070c	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  00713	74 2d		 je	 SHORT $LN1@EventChipO
  00715	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  0071c	74 24		 je	 SHORT $LN1@EventChipO
  0071e	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  00725	74 1b		 je	 SHORT $LN1@EventChipO
  00727	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  0072e	74 12		 je	 SHORT $LN1@EventChipO
  00730	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  00737	74 09		 je	 SHORT $LN1@EventChipO
  00739	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  00740	75 07		 jne	 SHORT $LN2@EventChipO
$LN1@EventChipO:

; 261  : 			{
; 262  : 				level = 0;

  00742	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@EventChipO:

; 263  : 			}
; 264  : 
; 265  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y,
; 266  : 				type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, (BYTE)ExOption, 0);

  00749	6a 00		 push	 0
  0074b	0f b6 45 d4	 movzx	 eax, BYTE PTR _ExOption$[ebp]
  0074f	50		 push	 eax
  00750	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00753	8b 11		 mov	 edx, DWORD PTR [ecx]
  00755	52		 push	 edx
  00756	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  0075a	50		 push	 eax
  0075b	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  0075f	51		 push	 ecx
  00760	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  00764	52		 push	 edx
  00765	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  00768	d9 bd b6 fe ff
	ff		 fnstcw	 WORD PTR tv382[ebp]
  0076e	0f b7 85 b6 fe
	ff ff		 movzx	 eax, WORD PTR tv382[ebp]
  00775	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  0077a	89 85 b0 fe ff
	ff		 mov	 DWORD PTR tv385[ebp], eax
  00780	d9 ad b0 fe ff
	ff		 fldcw	 WORD PTR tv385[ebp]
  00786	db 9d ac fe ff
	ff		 fistp	 DWORD PTR tv387[ebp]
  0078c	d9 ad b6 fe ff
	ff		 fldcw	 WORD PTR tv382[ebp]
  00792	0f b6 85 ac fe
	ff ff		 movzx	 eax, BYTE PTR tv387[ebp]
  00799	50		 push	 eax
  0079a	0f b6 4d f0	 movzx	 ecx, BYTE PTR _level$[ebp]
  0079e	51		 push	 ecx
  0079f	8b 55 f4	 mov	 edx, DWORD PTR _type$[ebp]
  007a2	52		 push	 edx
  007a3	0f b6 45 e8	 movzx	 eax, BYTE PTR _y$[ebp]
  007a7	50		 push	 eax
  007a8	0f b6 4d ec	 movzx	 ecx, BYTE PTR _x$[ebp]
  007ac	51		 push	 ecx
  007ad	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  007b0	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  007b7	50		 push	 eax
  007b8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  007bb	8b 11		 mov	 edx, DWORD PTR [ecx]
  007bd	52		 push	 edx
  007be	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  007c3	83 c4 34	 add	 esp, 52			; 00000034H

; 267  : 
; 268  : 			PMSG_SERVERCMD pMsg;
; 269  : 
; 270  : 			PHeadSubSetB((LPBYTE)&pMsg, 0xF3, 0x40, sizeof(pMsg));

  007c6	6a 07		 push	 7
  007c8	6a 40		 push	 64			; 00000040H
  007ca	68 f3 00 00 00	 push	 243			; 000000f3H
  007cf	8d 45 cc	 lea	 eax, DWORD PTR _pMsg$233294[ebp]
  007d2	50		 push	 eax
  007d3	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  007d8	83 c4 10	 add	 esp, 16			; 00000010H

; 271  : 			pMsg.CmdType = 2;

  007db	c6 45 d0 02	 mov	 BYTE PTR _pMsg$233294[ebp+4], 2

; 272  : 			pMsg.X = x;

  007df	8a 45 ec	 mov	 al, BYTE PTR _x$[ebp]
  007e2	88 45 d1	 mov	 BYTE PTR _pMsg$233294[ebp+5], al

; 273  : 			pMsg.Y = y;

  007e5	8a 45 e8	 mov	 al, BYTE PTR _y$[ebp]
  007e8	88 45 d2	 mov	 BYTE PTR _pMsg$233294[ebp+6], al

; 274  : 
; 275  : 			MsgSendV2(lpObj, (LPBYTE)&pMsg, sizeof(pMsg));

  007eb	6a 07		 push	 7
  007ed	8d 45 cc	 lea	 eax, DWORD PTR _pMsg$233294[ebp]
  007f0	50		 push	 eax
  007f1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  007f4	51		 push	 ecx
  007f5	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  007fa	83 c4 0c	 add	 esp, 12			; 0000000cH

; 276  : 			DataSend(lpObj->m_Index, (LPBYTE)&pMsg, sizeof(pMsg));

  007fd	6a 07		 push	 7
  007ff	8d 45 cc	 lea	 eax, DWORD PTR _pMsg$233294[ebp]
  00802	50		 push	 eax
  00803	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00806	8b 11		 mov	 edx, DWORD PTR [ecx]
  00808	52		 push	 edx
  00809	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0080e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 277  : 
; 278  : 			CItem NewItem;

  00811	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _NewItem$233298[ebp]
  00817	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 279  : 			NewItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, CURRENT_DB_VERSION);

  0081c	6a 03		 push	 3
  0081e	6a 00		 push	 0
  00820	68 ff 00 00 00	 push	 255			; 000000ffH
  00825	6a 00		 push	 0
  00827	6a 00		 push	 0
  00829	6a 01		 push	 1
  0082b	6a 00		 push	 0
  0082d	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  00831	50		 push	 eax
  00832	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  00836	51		 push	 ecx
  00837	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  0083b	52		 push	 edx
  0083c	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  0083f	50		 push	 eax
  00840	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _NewItem$233298[ebp]
  00846	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 280  : 
; 281  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Event Chip] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 282  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, NewItem.GetName(),
; 283  : 				type, level, Option1, Option2, Option3);

  0084b	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  0084e	50		 push	 eax
  0084f	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  00852	51		 push	 ecx
  00853	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  00856	52		 push	 edx
  00857	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  0085a	50		 push	 eax
  0085b	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  0085e	51		 push	 ecx
  0085f	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _NewItem$233298[ebp]
  00865	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  0086a	50		 push	 eax
  0086b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0086e	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  00875	50		 push	 eax
  00876	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00879	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  00880	52		 push	 edx
  00881	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00884	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0088b	51		 push	 ecx
  0088c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0088f	83 c2 77	 add	 edx, 119		; 00000077H
  00892	52		 push	 edx
  00893	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00896	83 c0 6c	 add	 eax, 108		; 0000006cH
  00899	50		 push	 eax
  0089a	68 00 00 00 00	 push	 OFFSET ??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@
  0089f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  008a5	83 c4 30	 add	 esp, 48			; 00000030H

; 284  : 
; 285  : 			return;

  008a8	eb 42		 jmp	 SHORT $LN15@EventChipO
$LN11@EventChipO:

; 286  : 
; 287  : 
; 288  : 		}
; 289  : 	}
; 290  : 
; 291  : 	x = lpObj->X;

  008aa	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008ad	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  008b4	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 292  : 	y = lpObj->Y;

  008b7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  008ba	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  008c1	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 293  : 	MapC[lpObj->MapNumber].MoneyItemDrop(1000, x, y);

  008c4	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  008c7	50		 push	 eax
  008c8	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  008cb	51		 push	 ecx
  008cc	68 e8 03 00 00	 push	 1000			; 000003e8H
  008d1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  008d4	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  008db	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  008e1	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  008e7	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN15@EventChipO:

; 294  : }

  008ec	5f		 pop	 edi
  008ed	5e		 pop	 esi
  008ee	5b		 pop	 ebx
  008ef	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  008f2	33 cd		 xor	 ecx, ebp
  008f4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  008f9	8b e5		 mov	 esp, ebp
  008fb	5d		 pop	 ebp
  008fc	c3		 ret	 0
?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; EventChipOpenEven
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\itembag.h
_TEXT	ENDS
;	COMDAT ?GetBagCount@CItemBag@@QAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetBagCount@CItemBag@@QAEHXZ PROC			; CItemBag::GetBagCount, COMDAT
; _this$ = ecx

; 47   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 48   : 		return this->BagObjectCount;

  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	8b 80 88 03 00
	00		 mov	 eax, DWORD PTR [eax+904]

; 49   : 	};	// line : 64

  00015	5f		 pop	 edi
  00016	5e		 pop	 esi
  00017	5b		 pop	 ebx
  00018	8b e5		 mov	 esp, ebp
  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
?GetBagCount@CItemBag@@QAEHXZ ENDP			; CItemBag::GetBagCount
_TEXT	ENDS
PUBLIC	??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; GoldMedalOpenEven
EXTRN	?g_ItemDropRateForGoldMedal@@3HA:DWORD		; g_ItemDropRateForGoldMedal
EXTRN	?GoldMedalItemBag@@3PAVCItemBag@@A:DWORD	; GoldMedalItemBag
;	COMDAT ??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@
; File d:\projects\exteam6.3\source\gameserver\gameserver\event.cpp
CONST	SEGMENT
??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Gold Medal] : (%d)(X:%d/Y:%d) It'
	DB	'em:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv322 = -340						; size = 4
tv320 = -336						; size = 4
tv317 = -330						; size = 2
_EventItem$233339 = -264				; size = 212
_ServerCmd$233335 = -52					; size = 7
_ExOption$ = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC		; GoldMedalOpenEven

; 297  : {

  00900	55		 push	 ebp
  00901	8b ec		 mov	 ebp, esp
  00903	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  00909	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0090e	33 c5		 xor	 eax, ebp
  00910	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00913	53		 push	 ebx
  00914	56		 push	 esi
  00915	57		 push	 edi

; 298  : 	float dur;
; 299  : 	int type;
; 300  : 	int level;
; 301  : 	int x;
; 302  : 	int y;
; 303  : 	int Option1=0;

  00916	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 304  : 	int Option2=0;

  0091d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 305  : 	int Option3=0;

  00924	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 306  : 	int DropItemNum;
; 307  : 	int ExOption=0;

  0092b	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0

; 308  : 
; 309  : 	if ( !GoldMedalItemBag )

  00932	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A, 0 ; GoldMedalItemBag
  00939	75 05		 jne	 SHORT $LN13@GoldMedalO

; 310  : 		return;

  0093b	e9 9d 04 00 00	 jmp	 $LN14@GoldMedalO
$LN13@GoldMedalO:

; 311  : 
; 312  : 	if ( GoldMedalItemBag->GetBagCount() > 0 )

  00940	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00946	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  0094b	85 c0		 test	 eax, eax
  0094d	0f 8e 48 04 00
	00		 jle	 $LN11@GoldMedalO

; 313  : 	{
; 314  : 		if ( (rand()%20) < g_ItemDropRateForGoldMedal )

  00953	e8 00 00 00 00	 call	 _rand
  00958	99		 cdq
  00959	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  0095e	f7 f9		 idiv	 ecx
  00960	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForGoldMedal@@3HA ; g_ItemDropRateForGoldMedal
  00966	0f 8d 2f 04 00
	00		 jge	 $LN11@GoldMedalO

; 315  : 		{
; 316  : 			DropItemNum = rand()%GoldMedalItemBag->GetBagCount();

  0096c	e8 00 00 00 00	 call	 _rand
  00971	8b f0		 mov	 esi, eax
  00973	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00979	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  0097e	8b c8		 mov	 ecx, eax
  00980	8b c6		 mov	 eax, esi
  00982	99		 cdq
  00983	f7 f9		 idiv	 ecx
  00985	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 317  : 			dur=0;

  00988	d9 ee		 fldz
  0098a	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 318  : 			x = lpObj->X;

  0098d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00990	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00997	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 319  : 			y = lpObj->Y;

  0099a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0099d	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  009a4	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 320  : 			level = GoldMedalItemBag->GetLevel(DropItemNum) + rand()%4;

  009a7	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  009aa	50		 push	 eax
  009ab	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  009b1	8b 11		 mov	 edx, DWORD PTR [ecx]
  009b3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  009b9	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  009bc	ff d0		 call	 eax
  009be	0f b6 f0	 movzx	 esi, al
  009c1	e8 00 00 00 00	 call	 _rand
  009c6	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  009cb	79 05		 jns	 SHORT $LN16@GoldMedalO
  009cd	48		 dec	 eax
  009ce	83 c8 fc	 or	 eax, -4			; fffffffcH
  009d1	40		 inc	 eax
$LN16@GoldMedalO:
  009d2	03 f0		 add	 esi, eax
  009d4	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 321  : 			type = ItemGetNumberMake(GoldMedalItemBag->GetType(DropItemNum), GoldMedalItemBag->GetIndex(DropItemNum));

  009d7	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  009da	50		 push	 eax
  009db	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  009e1	8b 11		 mov	 edx, DWORD PTR [ecx]
  009e3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  009e9	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  009ec	ff d0		 call	 eax
  009ee	0f b6 c8	 movzx	 ecx, al
  009f1	51		 push	 ecx
  009f2	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  009f5	52		 push	 edx
  009f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  009fb	8b 10		 mov	 edx, DWORD PTR [eax]
  009fd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00a03	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00a06	ff d0		 call	 eax
  00a08	0f b6 c8	 movzx	 ecx, al
  00a0b	51		 push	 ecx
  00a0c	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00a11	83 c4 08	 add	 esp, 8
  00a14	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 322  : 			Option1 = rand()%2;

  00a17	e8 00 00 00 00	 call	 _rand
  00a1c	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00a21	79 05		 jns	 SHORT $LN17@GoldMedalO
  00a23	48		 dec	 eax
  00a24	83 c8 fe	 or	 eax, -2			; fffffffeH
  00a27	40		 inc	 eax
$LN17@GoldMedalO:
  00a28	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 323  : 			Option2 = rand()%2;

  00a2b	e8 00 00 00 00	 call	 _rand
  00a30	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00a35	79 05		 jns	 SHORT $LN18@GoldMedalO
  00a37	48		 dec	 eax
  00a38	83 c8 fe	 or	 eax, -2			; fffffffeH
  00a3b	40		 inc	 eax
$LN18@GoldMedalO:
  00a3c	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 324  : 
; 325  : 			if ( !Option2 || !Option1 )

  00a3f	83 7d e0 00	 cmp	 DWORD PTR _Option2$[ebp], 0
  00a43	74 06		 je	 SHORT $LN9@GoldMedalO
  00a45	83 7d e4 00	 cmp	 DWORD PTR _Option1$[ebp], 0
  00a49	75 2b		 jne	 SHORT $LN7@GoldMedalO
$LN9@GoldMedalO:

; 326  : 			{
; 327  : 				if ( (rand()%5) <1 )

  00a4b	e8 00 00 00 00	 call	 _rand
  00a50	99		 cdq
  00a51	b9 05 00 00 00	 mov	 ecx, 5
  00a56	f7 f9		 idiv	 ecx
  00a58	83 fa 01	 cmp	 edx, 1
  00a5b	7d 09		 jge	 SHORT $LN8@GoldMedalO

; 328  : 					Option3 = 3;

  00a5d	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 329  : 				else

  00a64	eb 10		 jmp	 SHORT $LN7@GoldMedalO
$LN8@GoldMedalO:

; 330  : 					Option3 = rand()%3;

  00a66	e8 00 00 00 00	 call	 _rand
  00a6b	99		 cdq
  00a6c	b9 03 00 00 00	 mov	 ecx, 3
  00a71	f7 f9		 idiv	 ecx
  00a73	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@GoldMedalO:

; 331  : 			}
; 332  : 
; 333  : 			if ( type == ITEMGET(12,15) ||
; 334  : 				 type == ITEMGET(14,13) ||
; 335  : 				 type == ITEMGET(14,14) ||
; 336  : 				 type == ITEMGET(14,14) ||
; 337  : 				 type == ITEMGET(14,16)	||
; 338  : 				 type == ITEMGET(14,22)	||
; 339  : 				 type == ITEMGET(14,31)	||
; 340  : 				 type == ITEMGET(14,41)	||
; 341  : 				 type == ITEMGET(14,42)	||
; 342  : 				 type == ITEMGET(14,180)||
; 343  : 				 type == ITEMGET(14,181)||
; 344  : 				 type == ITEMGET(14,182)||
; 345  : 				 type == ITEMGET(14,183)||
; 346  : 				 type == ITEMGET(14,184)||
; 347  : 				 type == ITEMGET(14,185)||
; 348  : 				 type == ITEMGET(14,186)||
; 349  : 				 type == ITEMGET(14,187)||
; 350  : 				 type == ITEMGET(14,190)||
; 351  : 				 type == ITEMGET(14,43) ||
; 352  : 				 type == ITEMGET(14,44) )

  00a76	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  00a7d	0f 84 bb 00 00
	00		 je	 $LN5@GoldMedalO
  00a83	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  00a8a	0f 84 ae 00 00
	00		 je	 $LN5@GoldMedalO
  00a90	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  00a97	0f 84 a1 00 00
	00		 je	 $LN5@GoldMedalO
  00a9d	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  00aa4	0f 84 94 00 00
	00		 je	 $LN5@GoldMedalO
  00aaa	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  00ab1	0f 84 87 00 00
	00		 je	 $LN5@GoldMedalO
  00ab7	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  00abe	74 7e		 je	 SHORT $LN5@GoldMedalO
  00ac0	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  00ac7	74 75		 je	 SHORT $LN5@GoldMedalO
  00ac9	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  00ad0	74 6c		 je	 SHORT $LN5@GoldMedalO
  00ad2	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  00ad9	74 63		 je	 SHORT $LN5@GoldMedalO
  00adb	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  00ae2	74 5a		 je	 SHORT $LN5@GoldMedalO
  00ae4	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  00aeb	74 51		 je	 SHORT $LN5@GoldMedalO
  00aed	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  00af4	74 48		 je	 SHORT $LN5@GoldMedalO
  00af6	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  00afd	74 3f		 je	 SHORT $LN5@GoldMedalO
  00aff	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  00b06	74 36		 je	 SHORT $LN5@GoldMedalO
  00b08	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  00b0f	74 2d		 je	 SHORT $LN5@GoldMedalO
  00b11	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  00b18	74 24		 je	 SHORT $LN5@GoldMedalO
  00b1a	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  00b21	74 1b		 je	 SHORT $LN5@GoldMedalO
  00b23	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  00b2a	74 12		 je	 SHORT $LN5@GoldMedalO
  00b2c	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  00b33	74 09		 je	 SHORT $LN5@GoldMedalO
  00b35	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  00b3c	75 23		 jne	 SHORT $LN6@GoldMedalO
$LN5@GoldMedalO:

; 353  : 			{
; 354  : 				Option1 = 0;

  00b3e	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 355  : 				Option2 = 0;

  00b45	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 356  : 				Option3 = 0;

  00b4c	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 357  : 				level = 0;

  00b53	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0

; 358  : 				ExOption = 0;

  00b5a	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0
$LN6@GoldMedalO:

; 359  : 			}
; 360  : 
; 361  : 			if ( type == ITEMGET(12,30)	||
; 362  : 				 type == ITEMGET(12,31)	||
; 363  : 				 type == ITEMGET(12,136)||
; 364  : 				 type == ITEMGET(12,137)||
; 365  : 				 type == ITEMGET(12,138)||
; 366  : 				 type == ITEMGET(12,139)||
; 367  : 				 type == ITEMGET(12,140)||
; 368  : 				 type == ITEMGET(12,141)||
; 369  : 				 type == ITEMGET(12,142)||
; 370  : 				 type == ITEMGET(12,143))

  00b61	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  00b68	74 51		 je	 SHORT $LN3@GoldMedalO
  00b6a	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  00b71	74 48		 je	 SHORT $LN3@GoldMedalO
  00b73	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  00b7a	74 3f		 je	 SHORT $LN3@GoldMedalO
  00b7c	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  00b83	74 36		 je	 SHORT $LN3@GoldMedalO
  00b85	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  00b8c	74 2d		 je	 SHORT $LN3@GoldMedalO
  00b8e	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  00b95	74 24		 je	 SHORT $LN3@GoldMedalO
  00b97	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  00b9e	74 1b		 je	 SHORT $LN3@GoldMedalO
  00ba0	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  00ba7	74 12		 je	 SHORT $LN3@GoldMedalO
  00ba9	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  00bb0	74 09		 je	 SHORT $LN3@GoldMedalO
  00bb2	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  00bb9	75 39		 jne	 SHORT $LN4@GoldMedalO
$LN3@GoldMedalO:

; 371  : 			{
; 372  : 				Option1 = 0;

  00bbb	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 373  : 				Option2 = 0;

  00bc2	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 374  : 				Option3 = 0;

  00bc9	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 375  : 				level = GoldMedalItemBag->GetLevel(DropItemNum);

  00bd0	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00bd3	50		 push	 eax
  00bd4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00bda	8b 11		 mov	 edx, DWORD PTR [ecx]
  00bdc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00be2	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  00be5	ff d0		 call	 eax
  00be7	0f b6 c8	 movzx	 ecx, al
  00bea	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx

; 376  : 				ExOption = 0;

  00bed	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0
$LN4@GoldMedalO:

; 377  : 			}
; 378  : 
; 379  : 			if ( type == ITEMGET(13,0) ||
; 380  : 				 type == ITEMGET(13,1) ||
; 381  : 				 type == ITEMGET(13,2) ||
; 382  : 				 type == ITEMGET(13,8) ||
; 383  : 				 type == ITEMGET(13,9) ||
; 384  : 				 type == ITEMGET(13,12) ||
; 385  : 				 type == ITEMGET(13,13) )

  00bf4	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  00bfb	74 36		 je	 SHORT $LN1@GoldMedalO
  00bfd	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  00c04	74 2d		 je	 SHORT $LN1@GoldMedalO
  00c06	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  00c0d	74 24		 je	 SHORT $LN1@GoldMedalO
  00c0f	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  00c16	74 1b		 je	 SHORT $LN1@GoldMedalO
  00c18	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  00c1f	74 12		 je	 SHORT $LN1@GoldMedalO
  00c21	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  00c28	74 09		 je	 SHORT $LN1@GoldMedalO
  00c2a	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  00c31	75 07		 jne	 SHORT $LN2@GoldMedalO
$LN1@GoldMedalO:

; 386  : 			{
; 387  : 				level = 0;

  00c33	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@GoldMedalO:

; 388  : 			}
; 389  : 
; 390  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 391  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, (BYTE)ExOption, 0);

  00c3a	6a 00		 push	 0
  00c3c	0f b6 45 d4	 movzx	 eax, BYTE PTR _ExOption$[ebp]
  00c40	50		 push	 eax
  00c41	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00c44	8b 11		 mov	 edx, DWORD PTR [ecx]
  00c46	52		 push	 edx
  00c47	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  00c4b	50		 push	 eax
  00c4c	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  00c50	51		 push	 ecx
  00c51	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  00c55	52		 push	 edx
  00c56	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  00c59	d9 bd b6 fe ff
	ff		 fnstcw	 WORD PTR tv317[ebp]
  00c5f	0f b7 85 b6 fe
	ff ff		 movzx	 eax, WORD PTR tv317[ebp]
  00c66	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  00c6b	89 85 b0 fe ff
	ff		 mov	 DWORD PTR tv320[ebp], eax
  00c71	d9 ad b0 fe ff
	ff		 fldcw	 WORD PTR tv320[ebp]
  00c77	db 9d ac fe ff
	ff		 fistp	 DWORD PTR tv322[ebp]
  00c7d	d9 ad b6 fe ff
	ff		 fldcw	 WORD PTR tv317[ebp]
  00c83	0f b6 85 ac fe
	ff ff		 movzx	 eax, BYTE PTR tv322[ebp]
  00c8a	50		 push	 eax
  00c8b	0f b6 4d f0	 movzx	 ecx, BYTE PTR _level$[ebp]
  00c8f	51		 push	 ecx
  00c90	8b 55 f4	 mov	 edx, DWORD PTR _type$[ebp]
  00c93	52		 push	 edx
  00c94	0f b6 45 e8	 movzx	 eax, BYTE PTR _y$[ebp]
  00c98	50		 push	 eax
  00c99	0f b6 4d ec	 movzx	 ecx, BYTE PTR _x$[ebp]
  00c9d	51		 push	 ecx
  00c9e	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00ca1	0f b6 82 49 01
	00 00		 movzx	 eax, BYTE PTR [edx+329]
  00ca8	50		 push	 eax
  00ca9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00cac	8b 11		 mov	 edx, DWORD PTR [ecx]
  00cae	52		 push	 edx
  00caf	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  00cb4	83 c4 34	 add	 esp, 52			; 00000034H

; 392  : 
; 393  : 			PMSG_SERVERCMD ServerCmd;
; 394  : 
; 395  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  00cb7	6a 07		 push	 7
  00cb9	6a 40		 push	 64			; 00000040H
  00cbb	68 f3 00 00 00	 push	 243			; 000000f3H
  00cc0	8d 45 cc	 lea	 eax, DWORD PTR _ServerCmd$233335[ebp]
  00cc3	50		 push	 eax
  00cc4	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  00cc9	83 c4 10	 add	 esp, 16			; 00000010H

; 396  : 			ServerCmd.CmdType = 2;

  00ccc	c6 45 d0 02	 mov	 BYTE PTR _ServerCmd$233335[ebp+4], 2

; 397  : 			ServerCmd.X = x;

  00cd0	8a 45 ec	 mov	 al, BYTE PTR _x$[ebp]
  00cd3	88 45 d1	 mov	 BYTE PTR _ServerCmd$233335[ebp+5], al

; 398  : 			ServerCmd.Y = y;

  00cd6	8a 45 e8	 mov	 al, BYTE PTR _y$[ebp]
  00cd9	88 45 d2	 mov	 BYTE PTR _ServerCmd$233335[ebp+6], al

; 399  : 
; 400  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00cdc	6a 07		 push	 7
  00cde	8d 45 cc	 lea	 eax, DWORD PTR _ServerCmd$233335[ebp]
  00ce1	50		 push	 eax
  00ce2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00ce5	51		 push	 ecx
  00ce6	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  00ceb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 401  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00cee	6a 07		 push	 7
  00cf0	8d 45 cc	 lea	 eax, DWORD PTR _ServerCmd$233335[ebp]
  00cf3	50		 push	 eax
  00cf4	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00cf7	8b 11		 mov	 edx, DWORD PTR [ecx]
  00cf9	52		 push	 edx
  00cfa	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00cff	83 c4 0c	 add	 esp, 12			; 0000000cH

; 402  : 
; 403  : 			CItem EventItem;

  00d02	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233339[ebp]
  00d08	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 404  : 
; 405  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  00d0d	6a 03		 push	 3
  00d0f	6a 00		 push	 0
  00d11	68 ff 00 00 00	 push	 255			; 000000ffH
  00d16	6a 00		 push	 0
  00d18	6a 00		 push	 0
  00d1a	6a 01		 push	 1
  00d1c	6a 00		 push	 0
  00d1e	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  00d22	50		 push	 eax
  00d23	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  00d27	51		 push	 ecx
  00d28	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  00d2c	52		 push	 edx
  00d2d	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  00d30	50		 push	 eax
  00d31	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233339[ebp]
  00d37	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 406  : 
; 407  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Gold Medal] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 408  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 409  : 				type, level, Option1, Option2, Option3);

  00d3c	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  00d3f	50		 push	 eax
  00d40	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  00d43	51		 push	 ecx
  00d44	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  00d47	52		 push	 edx
  00d48	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  00d4b	50		 push	 eax
  00d4c	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  00d4f	51		 push	 ecx
  00d50	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233339[ebp]
  00d56	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00d5b	50		 push	 eax
  00d5c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00d5f	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  00d66	50		 push	 eax
  00d67	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00d6a	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  00d71	52		 push	 edx
  00d72	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d75	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  00d7c	51		 push	 ecx
  00d7d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00d80	83 c2 77	 add	 edx, 119		; 00000077H
  00d83	52		 push	 edx
  00d84	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d87	83 c0 6c	 add	 eax, 108		; 0000006cH
  00d8a	50		 push	 eax
  00d8b	68 00 00 00 00	 push	 OFFSET ??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@
  00d90	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00d96	83 c4 30	 add	 esp, 48			; 00000030H

; 410  : 
; 411  : 			return;

  00d99	eb 42		 jmp	 SHORT $LN14@GoldMedalO
$LN11@GoldMedalO:

; 412  : 		}
; 413  : 	}
; 414  : 
; 415  : 	x = lpObj->X;

  00d9b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00d9e	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00da5	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 416  : 	y = lpObj->Y;

  00da8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00dab	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  00db2	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 417  : 	MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  00db5	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  00db8	50		 push	 eax
  00db9	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  00dbc	51		 push	 ecx
  00dbd	68 a0 86 01 00	 push	 100000			; 000186a0H
  00dc2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00dc5	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  00dcc	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  00dd2	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00dd8	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN14@GoldMedalO:

; 418  : }

  00ddd	5f		 pop	 edi
  00dde	5e		 pop	 esi
  00ddf	5b		 pop	 ebx
  00de0	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00de3	33 cd		 xor	 ecx, ebp
  00de5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00dea	8b e5		 mov	 esp, ebp
  00dec	5d		 pop	 ebp
  00ded	c3		 ret	 0
?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; GoldMedalOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; SilverMedalOpenEven
EXTRN	?g_ItemDropRateForSilverMedal@@3HA:DWORD	; g_ItemDropRateForSilverMedal
EXTRN	?SilverMedalItemBag@@3PAVCItemBag@@A:DWORD	; SilverMedalItemBag
;	COMDAT ??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@
CONST	SEGMENT
??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Silver Medal] : (%d)(X:%d/Y:%d) '
	DB	'Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv322 = -340						; size = 4
tv320 = -336						; size = 4
tv317 = -330						; size = 2
_EventItem$233379 = -264				; size = 212
_ServerCmd$233375 = -52					; size = 7
_ExOption$ = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; SilverMedalOpenEven

; 421  : {

  00df0	55		 push	 ebp
  00df1	8b ec		 mov	 ebp, esp
  00df3	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  00df9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00dfe	33 c5		 xor	 eax, ebp
  00e00	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00e03	53		 push	 ebx
  00e04	56		 push	 esi
  00e05	57		 push	 edi

; 422  : 	float dur;
; 423  : 	int type;
; 424  : 	int level;
; 425  : 	int x;
; 426  : 	int y;
; 427  : 	int Option1=0;

  00e06	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 428  : 	int Option2=0;

  00e0d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 429  : 	int Option3=0;

  00e14	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 430  : 	int DropItemNum;
; 431  : 	int ExOption=0;

  00e1b	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0

; 432  : 
; 433  : 	if ( !SilverMedalItemBag )

  00e22	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A, 0 ; SilverMedalItemBag
  00e29	75 05		 jne	 SHORT $LN13@SilverMeda

; 434  : 		return;

  00e2b	e9 9a 04 00 00	 jmp	 $LN14@SilverMeda
$LN13@SilverMeda:

; 435  : 
; 436  : 	if ( SilverMedalItemBag->GetBagCount() > 0 )

  00e30	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00e36	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  00e3b	85 c0		 test	 eax, eax
  00e3d	0f 8e 45 04 00
	00		 jle	 $LN11@SilverMeda

; 437  : 	{
; 438  : 		if ( (rand()%20) < g_ItemDropRateForSilverMedal )

  00e43	e8 00 00 00 00	 call	 _rand
  00e48	99		 cdq
  00e49	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00e4e	f7 f9		 idiv	 ecx
  00e50	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForSilverMedal@@3HA ; g_ItemDropRateForSilverMedal
  00e56	0f 8d 2c 04 00
	00		 jge	 $LN11@SilverMeda

; 439  : 		{
; 440  : 			DropItemNum = rand()%SilverMedalItemBag->GetBagCount();

  00e5c	e8 00 00 00 00	 call	 _rand
  00e61	8b f0		 mov	 esi, eax
  00e63	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00e69	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  00e6e	8b c8		 mov	 ecx, eax
  00e70	8b c6		 mov	 eax, esi
  00e72	99		 cdq
  00e73	f7 f9		 idiv	 ecx
  00e75	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 441  : 			dur=0;

  00e78	d9 ee		 fldz
  00e7a	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 442  : 			x = lpObj->X;

  00e7d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00e80	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00e87	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 443  : 			y = lpObj->Y;

  00e8a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00e8d	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  00e94	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 444  : 			level = SilverMedalItemBag->GetLevel(DropItemNum) + rand()%4;

  00e97	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00e9a	50		 push	 eax
  00e9b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00ea1	8b 11		 mov	 edx, DWORD PTR [ecx]
  00ea3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00ea9	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  00eac	ff d0		 call	 eax
  00eae	0f b6 f0	 movzx	 esi, al
  00eb1	e8 00 00 00 00	 call	 _rand
  00eb6	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  00ebb	79 05		 jns	 SHORT $LN16@SilverMeda
  00ebd	48		 dec	 eax
  00ebe	83 c8 fc	 or	 eax, -4			; fffffffcH
  00ec1	40		 inc	 eax
$LN16@SilverMeda:
  00ec2	03 f0		 add	 esi, eax
  00ec4	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 445  : 			type = ItemGetNumberMake(SilverMedalItemBag->GetType(DropItemNum), SilverMedalItemBag->GetIndex(DropItemNum));

  00ec7	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  00eca	50		 push	 eax
  00ecb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00ed1	8b 11		 mov	 edx, DWORD PTR [ecx]
  00ed3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00ed9	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  00edc	ff d0		 call	 eax
  00ede	0f b6 c8	 movzx	 ecx, al
  00ee1	51		 push	 ecx
  00ee2	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00ee5	52		 push	 edx
  00ee6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00eeb	8b 10		 mov	 edx, DWORD PTR [eax]
  00eed	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00ef3	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00ef6	ff d0		 call	 eax
  00ef8	0f b6 c8	 movzx	 ecx, al
  00efb	51		 push	 ecx
  00efc	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00f01	83 c4 08	 add	 esp, 8
  00f04	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 446  : 			Option1 = rand()%2;

  00f07	e8 00 00 00 00	 call	 _rand
  00f0c	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00f11	79 05		 jns	 SHORT $LN17@SilverMeda
  00f13	48		 dec	 eax
  00f14	83 c8 fe	 or	 eax, -2			; fffffffeH
  00f17	40		 inc	 eax
$LN17@SilverMeda:
  00f18	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 447  : 			Option2 = rand()%2;

  00f1b	e8 00 00 00 00	 call	 _rand
  00f20	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00f25	79 05		 jns	 SHORT $LN18@SilverMeda
  00f27	48		 dec	 eax
  00f28	83 c8 fe	 or	 eax, -2			; fffffffeH
  00f2b	40		 inc	 eax
$LN18@SilverMeda:
  00f2c	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 448  : 
; 449  : 			if ( !Option2 || !Option1 )

  00f2f	83 7d e0 00	 cmp	 DWORD PTR _Option2$[ebp], 0
  00f33	74 06		 je	 SHORT $LN9@SilverMeda
  00f35	83 7d e4 00	 cmp	 DWORD PTR _Option1$[ebp], 0
  00f39	75 2b		 jne	 SHORT $LN7@SilverMeda
$LN9@SilverMeda:

; 450  : 			{
; 451  : 				if ( (rand()%5) <1 )

  00f3b	e8 00 00 00 00	 call	 _rand
  00f40	99		 cdq
  00f41	b9 05 00 00 00	 mov	 ecx, 5
  00f46	f7 f9		 idiv	 ecx
  00f48	83 fa 01	 cmp	 edx, 1
  00f4b	7d 09		 jge	 SHORT $LN8@SilverMeda

; 452  : 					Option3 = 3;

  00f4d	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 453  : 				else

  00f54	eb 10		 jmp	 SHORT $LN7@SilverMeda
$LN8@SilverMeda:

; 454  : 					Option3 = rand()%3;

  00f56	e8 00 00 00 00	 call	 _rand
  00f5b	99		 cdq
  00f5c	b9 03 00 00 00	 mov	 ecx, 3
  00f61	f7 f9		 idiv	 ecx
  00f63	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@SilverMeda:

; 455  : 			}
; 456  : 
; 457  : 			if ( type == ITEMGET(12,15) ||
; 458  : 				 type == ITEMGET(14,13) ||
; 459  : 				 type == ITEMGET(14,14) ||
; 460  : 				 type == ITEMGET(14,14) ||
; 461  : 				 type == ITEMGET(14,16)	||
; 462  : 				 type == ITEMGET(14,22)	||
; 463  : 				 type == ITEMGET(14,31)	||
; 464  : 				 type == ITEMGET(14,41)	||
; 465  : 				 type == ITEMGET(14,42)	||
; 466  : 				 type == ITEMGET(14,180)||
; 467  : 				 type == ITEMGET(14,181)||
; 468  : 				 type == ITEMGET(14,182)||
; 469  : 				 type == ITEMGET(14,183)||
; 470  : 				 type == ITEMGET(14,184)||
; 471  : 				 type == ITEMGET(14,185)||
; 472  : 				 type == ITEMGET(14,186)||
; 473  : 				 type == ITEMGET(14,187)||
; 474  : 				 type == ITEMGET(14,190)||
; 475  : 				 type == ITEMGET(14,43) ||
; 476  : 				 type == ITEMGET(14,44) )

  00f66	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  00f6d	0f 84 bb 00 00
	00		 je	 $LN5@SilverMeda
  00f73	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  00f7a	0f 84 ae 00 00
	00		 je	 $LN5@SilverMeda
  00f80	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  00f87	0f 84 a1 00 00
	00		 je	 $LN5@SilverMeda
  00f8d	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  00f94	0f 84 94 00 00
	00		 je	 $LN5@SilverMeda
  00f9a	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  00fa1	0f 84 87 00 00
	00		 je	 $LN5@SilverMeda
  00fa7	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  00fae	74 7e		 je	 SHORT $LN5@SilverMeda
  00fb0	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  00fb7	74 75		 je	 SHORT $LN5@SilverMeda
  00fb9	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  00fc0	74 6c		 je	 SHORT $LN5@SilverMeda
  00fc2	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  00fc9	74 63		 je	 SHORT $LN5@SilverMeda
  00fcb	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  00fd2	74 5a		 je	 SHORT $LN5@SilverMeda
  00fd4	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  00fdb	74 51		 je	 SHORT $LN5@SilverMeda
  00fdd	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  00fe4	74 48		 je	 SHORT $LN5@SilverMeda
  00fe6	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  00fed	74 3f		 je	 SHORT $LN5@SilverMeda
  00fef	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  00ff6	74 36		 je	 SHORT $LN5@SilverMeda
  00ff8	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  00fff	74 2d		 je	 SHORT $LN5@SilverMeda
  01001	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  01008	74 24		 je	 SHORT $LN5@SilverMeda
  0100a	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  01011	74 1b		 je	 SHORT $LN5@SilverMeda
  01013	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  0101a	74 12		 je	 SHORT $LN5@SilverMeda
  0101c	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  01023	74 09		 je	 SHORT $LN5@SilverMeda
  01025	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  0102c	75 23		 jne	 SHORT $LN6@SilverMeda
$LN5@SilverMeda:

; 477  : 			{
; 478  : 				Option1 = 0;

  0102e	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 479  : 				Option2 = 0;

  01035	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 480  : 				Option3 = 0;

  0103c	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 481  : 				level = 0;

  01043	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0

; 482  : 				ExOption = 0;

  0104a	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0
$LN6@SilverMeda:

; 483  : 			}
; 484  : 
; 485  : 			if ( type == ITEMGET(12,30)	||
; 486  : 				 type == ITEMGET(12,31)	||
; 487  : 				 type == ITEMGET(12,136)||
; 488  : 				 type == ITEMGET(12,137)||
; 489  : 				 type == ITEMGET(12,138)||
; 490  : 				 type == ITEMGET(12,139)||
; 491  : 				 type == ITEMGET(12,140)||
; 492  : 				 type == ITEMGET(12,141)||
; 493  : 				 type == ITEMGET(12,142)||
; 494  : 				 type == ITEMGET(12,143))

  01051	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  01058	74 51		 je	 SHORT $LN3@SilverMeda
  0105a	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  01061	74 48		 je	 SHORT $LN3@SilverMeda
  01063	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  0106a	74 3f		 je	 SHORT $LN3@SilverMeda
  0106c	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  01073	74 36		 je	 SHORT $LN3@SilverMeda
  01075	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  0107c	74 2d		 je	 SHORT $LN3@SilverMeda
  0107e	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  01085	74 24		 je	 SHORT $LN3@SilverMeda
  01087	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  0108e	74 1b		 je	 SHORT $LN3@SilverMeda
  01090	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  01097	74 12		 je	 SHORT $LN3@SilverMeda
  01099	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  010a0	74 09		 je	 SHORT $LN3@SilverMeda
  010a2	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  010a9	75 39		 jne	 SHORT $LN4@SilverMeda
$LN3@SilverMeda:

; 495  : 			{
; 496  : 				Option1 = 0;

  010ab	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 497  : 				Option2 = 0;

  010b2	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 498  : 				Option3 = 0;

  010b9	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 499  : 				level = SilverMedalItemBag->GetLevel(DropItemNum);

  010c0	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  010c3	50		 push	 eax
  010c4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  010ca	8b 11		 mov	 edx, DWORD PTR [ecx]
  010cc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  010d2	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  010d5	ff d0		 call	 eax
  010d7	0f b6 c8	 movzx	 ecx, al
  010da	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx

; 500  : 				ExOption = 0;

  010dd	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _ExOption$[ebp], 0
$LN4@SilverMeda:

; 501  : 			}
; 502  : 
; 503  : 			if ( type == ITEMGET(13,0) ||
; 504  : 				 type == ITEMGET(13,1) ||
; 505  : 				 type == ITEMGET(13,2) ||
; 506  : 				 type == ITEMGET(13,8) ||
; 507  : 				 type == ITEMGET(13,9) ||
; 508  : 				 type == ITEMGET(13,12) ||
; 509  : 				 type == ITEMGET(13,13) )

  010e4	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  010eb	74 36		 je	 SHORT $LN1@SilverMeda
  010ed	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  010f4	74 2d		 je	 SHORT $LN1@SilverMeda
  010f6	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  010fd	74 24		 je	 SHORT $LN1@SilverMeda
  010ff	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  01106	74 1b		 je	 SHORT $LN1@SilverMeda
  01108	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  0110f	74 12		 je	 SHORT $LN1@SilverMeda
  01111	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  01118	74 09		 je	 SHORT $LN1@SilverMeda
  0111a	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  01121	75 07		 jne	 SHORT $LN2@SilverMeda
$LN1@SilverMeda:

; 510  : 			{
; 511  : 				level = 0;

  01123	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@SilverMeda:

; 512  : 			}
; 513  : 
; 514  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 515  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0112a	6a 00		 push	 0
  0112c	6a 00		 push	 0
  0112e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01131	8b 08		 mov	 ecx, DWORD PTR [eax]
  01133	51		 push	 ecx
  01134	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  01138	52		 push	 edx
  01139	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  0113d	50		 push	 eax
  0113e	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  01142	51		 push	 ecx
  01143	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  01146	d9 bd b6 fe ff
	ff		 fnstcw	 WORD PTR tv317[ebp]
  0114c	0f b7 85 b6 fe
	ff ff		 movzx	 eax, WORD PTR tv317[ebp]
  01153	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  01158	89 85 b0 fe ff
	ff		 mov	 DWORD PTR tv320[ebp], eax
  0115e	d9 ad b0 fe ff
	ff		 fldcw	 WORD PTR tv320[ebp]
  01164	db 9d ac fe ff
	ff		 fistp	 DWORD PTR tv322[ebp]
  0116a	d9 ad b6 fe ff
	ff		 fldcw	 WORD PTR tv317[ebp]
  01170	0f b6 95 ac fe
	ff ff		 movzx	 edx, BYTE PTR tv322[ebp]
  01177	52		 push	 edx
  01178	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  0117c	50		 push	 eax
  0117d	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  01180	51		 push	 ecx
  01181	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  01185	52		 push	 edx
  01186	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  0118a	50		 push	 eax
  0118b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0118e	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  01195	52		 push	 edx
  01196	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01199	8b 08		 mov	 ecx, DWORD PTR [eax]
  0119b	51		 push	 ecx
  0119c	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  011a1	83 c4 34	 add	 esp, 52			; 00000034H

; 516  : 
; 517  : 			PMSG_SERVERCMD ServerCmd;
; 518  : 
; 519  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  011a4	6a 07		 push	 7
  011a6	6a 40		 push	 64			; 00000040H
  011a8	68 f3 00 00 00	 push	 243			; 000000f3H
  011ad	8d 45 cc	 lea	 eax, DWORD PTR _ServerCmd$233375[ebp]
  011b0	50		 push	 eax
  011b1	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  011b6	83 c4 10	 add	 esp, 16			; 00000010H

; 520  : 			ServerCmd.CmdType = 2;

  011b9	c6 45 d0 02	 mov	 BYTE PTR _ServerCmd$233375[ebp+4], 2

; 521  : 			ServerCmd.X = x;

  011bd	8a 45 ec	 mov	 al, BYTE PTR _x$[ebp]
  011c0	88 45 d1	 mov	 BYTE PTR _ServerCmd$233375[ebp+5], al

; 522  : 			ServerCmd.Y = y;

  011c3	8a 45 e8	 mov	 al, BYTE PTR _y$[ebp]
  011c6	88 45 d2	 mov	 BYTE PTR _ServerCmd$233375[ebp+6], al

; 523  : 
; 524  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  011c9	6a 07		 push	 7
  011cb	8d 45 cc	 lea	 eax, DWORD PTR _ServerCmd$233375[ebp]
  011ce	50		 push	 eax
  011cf	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  011d2	51		 push	 ecx
  011d3	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  011d8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 525  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  011db	6a 07		 push	 7
  011dd	8d 45 cc	 lea	 eax, DWORD PTR _ServerCmd$233375[ebp]
  011e0	50		 push	 eax
  011e1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  011e4	8b 11		 mov	 edx, DWORD PTR [ecx]
  011e6	52		 push	 edx
  011e7	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  011ec	83 c4 0c	 add	 esp, 12			; 0000000cH

; 526  : 
; 527  : 			CItem EventItem;

  011ef	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233379[ebp]
  011f5	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 528  : 
; 529  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  011fa	6a 03		 push	 3
  011fc	6a 00		 push	 0
  011fe	68 ff 00 00 00	 push	 255			; 000000ffH
  01203	6a 00		 push	 0
  01205	6a 00		 push	 0
  01207	6a 01		 push	 1
  01209	6a 00		 push	 0
  0120b	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  0120f	50		 push	 eax
  01210	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  01214	51		 push	 ecx
  01215	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  01219	52		 push	 edx
  0121a	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  0121d	50		 push	 eax
  0121e	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233379[ebp]
  01224	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 530  : 
; 531  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Silver Medal] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 532  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 533  : 				type, level, Option1, Option2, Option3);

  01229	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  0122c	50		 push	 eax
  0122d	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  01230	51		 push	 ecx
  01231	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  01234	52		 push	 edx
  01235	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  01238	50		 push	 eax
  01239	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  0123c	51		 push	 ecx
  0123d	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233379[ebp]
  01243	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  01248	50		 push	 eax
  01249	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0124c	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  01253	50		 push	 eax
  01254	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01257	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  0125e	52		 push	 edx
  0125f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01262	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  01269	51		 push	 ecx
  0126a	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0126d	83 c2 77	 add	 edx, 119		; 00000077H
  01270	52		 push	 edx
  01271	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01274	83 c0 6c	 add	 eax, 108		; 0000006cH
  01277	50		 push	 eax
  01278	68 00 00 00 00	 push	 OFFSET ??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@
  0127d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  01283	83 c4 30	 add	 esp, 48			; 00000030H

; 534  : 
; 535  : 			return;

  01286	eb 42		 jmp	 SHORT $LN14@SilverMeda
$LN11@SilverMeda:

; 536  : 		}
; 537  : 	}
; 538  : 
; 539  : 	x = lpObj->X;

  01288	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0128b	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  01292	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 540  : 	y = lpObj->Y;

  01295	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01298	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  0129f	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 541  : 	MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  012a2	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  012a5	50		 push	 eax
  012a6	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  012a9	51		 push	 ecx
  012aa	68 a0 86 01 00	 push	 100000			; 000186a0H
  012af	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  012b2	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  012b9	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  012bf	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  012c5	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN14@SilverMeda:

; 542  : }

  012ca	5f		 pop	 edi
  012cb	5e		 pop	 esi
  012cc	5b		 pop	 ebx
  012cd	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  012d0	33 cd		 xor	 ecx, ebp
  012d2	e8 00 00 00 00	 call	 @__security_check_cookie@4
  012d7	8b e5		 mov	 esp, ebp
  012d9	5d		 pop	 ebp
  012da	c3		 ret	 0
?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; SilverMedalOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; HeartOfLoveOpenEven
EXTRN	?gLanguage@@3HA:DWORD				; gLanguage
EXTRN	?g_ItemDropRateForgHeartOfLove@@3HA:DWORD	; g_ItemDropRateForgHeartOfLove
EXTRN	?HeartOfLoveItemBag@@3PAVCItemBag@@A:DWORD	; HeartOfLoveItemBag
;	COMDAT ??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@
CONST	SEGMENT
??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Heart Of Love] : (%d)(X:%d/Y:%d)'
	DB	' Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv343 = -336						; size = 4
tv341 = -332						; size = 4
tv338 = -326						; size = 2
_EventItem$233420 = -260				; size = 212
_ServerCmd$233416 = -48					; size = 7
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; HeartOfLoveOpenEven

; 548  : {

  012e0	55		 push	 ebp
  012e1	8b ec		 mov	 ebp, esp
  012e3	81 ec 50 01 00
	00		 sub	 esp, 336		; 00000150H
  012e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  012ee	33 c5		 xor	 eax, ebp
  012f0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  012f3	53		 push	 ebx
  012f4	56		 push	 esi
  012f5	57		 push	 edi

; 549  : 	float dur;
; 550  : 	int type;
; 551  : 	int level;
; 552  : 	int x;
; 553  : 	int y;
; 554  : 	int Option1=0;

  012f6	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 555  : 	int Option2=0;

  012fd	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 556  : 	int Option3=0;

  01304	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 557  : 	int DropItemNum;
; 558  : 
; 559  : 	if ( !HeartOfLoveItemBag )

  0130b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A, 0 ; HeartOfLoveItemBag
  01312	75 05		 jne	 SHORT $LN15@HeartOfLov

; 560  : 		return;

  01314	e9 c3 04 00 00	 jmp	 $LN16@HeartOfLov
$LN15@HeartOfLov:

; 561  : 
; 562  : 	if ( HeartOfLoveItemBag->GetBagCount() > 0 )

  01319	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  0131f	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  01324	85 c0		 test	 eax, eax
  01326	0f 8e 6e 04 00
	00		 jle	 $LN13@HeartOfLov

; 563  : 	{
; 564  : 		if ( (rand()%20) < g_ItemDropRateForgHeartOfLove )

  0132c	e8 00 00 00 00	 call	 _rand
  01331	99		 cdq
  01332	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  01337	f7 f9		 idiv	 ecx
  01339	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForgHeartOfLove@@3HA ; g_ItemDropRateForgHeartOfLove
  0133f	0f 8d 55 04 00
	00		 jge	 $LN13@HeartOfLov

; 565  : 		{
; 566  : 			DropItemNum = rand()%HeartOfLoveItemBag->GetBagCount();

  01345	e8 00 00 00 00	 call	 _rand
  0134a	8b f0		 mov	 esi, eax
  0134c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  01352	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  01357	8b c8		 mov	 ecx, eax
  01359	8b c6		 mov	 eax, esi
  0135b	99		 cdq
  0135c	f7 f9		 idiv	 ecx
  0135e	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 567  : 			dur=0;

  01361	d9 ee		 fldz
  01363	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 568  : 			x = lpObj->X;

  01366	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01369	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  01370	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 569  : 			y = lpObj->Y;

  01373	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01376	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  0137d	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 570  : 
; 571  : 			if ( gLanguage == 0 )

  01380	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  01387	75 32		 jne	 SHORT $LN12@HeartOfLov

; 572  : 			{
; 573  : 				level = HeartOfLoveItemBag->GetLevel(DropItemNum) + rand()%2;

  01389	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0138c	50		 push	 eax
  0138d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  01393	8b 11		 mov	 edx, DWORD PTR [ecx]
  01395	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  0139b	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  0139e	ff d0		 call	 eax
  013a0	0f b6 f0	 movzx	 esi, al
  013a3	e8 00 00 00 00	 call	 _rand
  013a8	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  013ad	79 05		 jns	 SHORT $LN18@HeartOfLov
  013af	48		 dec	 eax
  013b0	83 c8 fe	 or	 eax, -2			; fffffffeH
  013b3	40		 inc	 eax
$LN18@HeartOfLov:
  013b4	03 f0		 add	 esi, eax
  013b6	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 574  : 			}
; 575  : 			else

  013b9	eb 2c		 jmp	 SHORT $LN11@HeartOfLov
$LN12@HeartOfLov:

; 576  : 			{
; 577  : 				level = HeartOfLoveItemBag->GetLevel(DropItemNum) + rand()%5;

  013bb	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  013be	50		 push	 eax
  013bf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  013c5	8b 11		 mov	 edx, DWORD PTR [ecx]
  013c7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  013cd	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  013d0	ff d0		 call	 eax
  013d2	0f b6 f0	 movzx	 esi, al
  013d5	e8 00 00 00 00	 call	 _rand
  013da	99		 cdq
  013db	b9 05 00 00 00	 mov	 ecx, 5
  013e0	f7 f9		 idiv	 ecx
  013e2	03 f2		 add	 esi, edx
  013e4	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi
$LN11@HeartOfLov:

; 578  : 			}
; 579  : 
; 580  : 			type = ItemGetNumberMake(HeartOfLoveItemBag->GetType(DropItemNum), HeartOfLoveItemBag->GetIndex(DropItemNum));

  013e7	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  013ea	50		 push	 eax
  013eb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  013f1	8b 11		 mov	 edx, DWORD PTR [ecx]
  013f3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  013f9	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  013fc	ff d0		 call	 eax
  013fe	0f b6 c8	 movzx	 ecx, al
  01401	51		 push	 ecx
  01402	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  01405	52		 push	 edx
  01406	a1 00 00 00 00	 mov	 eax, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  0140b	8b 10		 mov	 edx, DWORD PTR [eax]
  0140d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  01413	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  01416	ff d0		 call	 eax
  01418	0f b6 c8	 movzx	 ecx, al
  0141b	51		 push	 ecx
  0141c	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  01421	83 c4 08	 add	 esp, 8
  01424	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 581  : 			Option1 = rand()%2;

  01427	e8 00 00 00 00	 call	 _rand
  0142c	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  01431	79 05		 jns	 SHORT $LN19@HeartOfLov
  01433	48		 dec	 eax
  01434	83 c8 fe	 or	 eax, -2			; fffffffeH
  01437	40		 inc	 eax
$LN19@HeartOfLov:
  01438	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 582  : 			Option2 = rand()%2;

  0143b	e8 00 00 00 00	 call	 _rand
  01440	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  01445	79 05		 jns	 SHORT $LN20@HeartOfLov
  01447	48		 dec	 eax
  01448	83 c8 fe	 or	 eax, -2			; fffffffeH
  0144b	40		 inc	 eax
$LN20@HeartOfLov:
  0144c	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 583  : 
; 584  : 			if ( !Option2 || !Option1 )

  0144f	83 7d e0 00	 cmp	 DWORD PTR _Option2$[ebp], 0
  01453	74 06		 je	 SHORT $LN9@HeartOfLov
  01455	83 7d e4 00	 cmp	 DWORD PTR _Option1$[ebp], 0
  01459	75 2b		 jne	 SHORT $LN7@HeartOfLov
$LN9@HeartOfLov:

; 585  : 			{
; 586  : 				if ( (rand()%5) <1 )

  0145b	e8 00 00 00 00	 call	 _rand
  01460	99		 cdq
  01461	b9 05 00 00 00	 mov	 ecx, 5
  01466	f7 f9		 idiv	 ecx
  01468	83 fa 01	 cmp	 edx, 1
  0146b	7d 09		 jge	 SHORT $LN8@HeartOfLov

; 587  : 					Option3 = 3;

  0146d	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 588  : 				else

  01474	eb 10		 jmp	 SHORT $LN7@HeartOfLov
$LN8@HeartOfLov:

; 589  : 					Option3 = rand()%3;

  01476	e8 00 00 00 00	 call	 _rand
  0147b	99		 cdq
  0147c	b9 03 00 00 00	 mov	 ecx, 3
  01481	f7 f9		 idiv	 ecx
  01483	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@HeartOfLov:

; 590  : 			}
; 591  : 
; 592  : 			if ( type == ITEMGET(12,15) ||
; 593  : 				 type == ITEMGET(14,13) ||
; 594  : 				 type == ITEMGET(14,14) ||
; 595  : 				 type == ITEMGET(14,14) ||
; 596  : 				 type == ITEMGET(14,16)	||
; 597  : 				 type == ITEMGET(14,22)	||
; 598  : 				 type == ITEMGET(14,31)	||
; 599  : 				 type == ITEMGET(14,41)	||
; 600  : 				 type == ITEMGET(14,42)	||
; 601  : 				 type == ITEMGET(14,180)||
; 602  : 				 type == ITEMGET(14,181)||
; 603  : 				 type == ITEMGET(14,182)||
; 604  : 				 type == ITEMGET(14,183)||
; 605  : 				 type == ITEMGET(14,184)||
; 606  : 				 type == ITEMGET(14,185)||
; 607  : 				 type == ITEMGET(14,186)||
; 608  : 				 type == ITEMGET(14,187)||
; 609  : 				 type == ITEMGET(14,190)||
; 610  : 				 type == ITEMGET(14,43) ||
; 611  : 				 type == ITEMGET(14,44) )

  01486	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  0148d	0f 84 bb 00 00
	00		 je	 $LN5@HeartOfLov
  01493	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  0149a	0f 84 ae 00 00
	00		 je	 $LN5@HeartOfLov
  014a0	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  014a7	0f 84 a1 00 00
	00		 je	 $LN5@HeartOfLov
  014ad	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  014b4	0f 84 94 00 00
	00		 je	 $LN5@HeartOfLov
  014ba	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  014c1	0f 84 87 00 00
	00		 je	 $LN5@HeartOfLov
  014c7	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  014ce	74 7e		 je	 SHORT $LN5@HeartOfLov
  014d0	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  014d7	74 75		 je	 SHORT $LN5@HeartOfLov
  014d9	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  014e0	74 6c		 je	 SHORT $LN5@HeartOfLov
  014e2	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  014e9	74 63		 je	 SHORT $LN5@HeartOfLov
  014eb	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  014f2	74 5a		 je	 SHORT $LN5@HeartOfLov
  014f4	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  014fb	74 51		 je	 SHORT $LN5@HeartOfLov
  014fd	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  01504	74 48		 je	 SHORT $LN5@HeartOfLov
  01506	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  0150d	74 3f		 je	 SHORT $LN5@HeartOfLov
  0150f	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  01516	74 36		 je	 SHORT $LN5@HeartOfLov
  01518	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  0151f	74 2d		 je	 SHORT $LN5@HeartOfLov
  01521	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  01528	74 24		 je	 SHORT $LN5@HeartOfLov
  0152a	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  01531	74 1b		 je	 SHORT $LN5@HeartOfLov
  01533	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  0153a	74 12		 je	 SHORT $LN5@HeartOfLov
  0153c	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  01543	74 09		 je	 SHORT $LN5@HeartOfLov
  01545	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  0154c	75 1c		 jne	 SHORT $LN6@HeartOfLov
$LN5@HeartOfLov:

; 612  : 			{
; 613  : 				Option1 = 0;

  0154e	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 614  : 				Option2 = 0;

  01555	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 615  : 				Option3 = 0;

  0155c	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 616  : 				level = 0;

  01563	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN6@HeartOfLov:

; 617  : 			}
; 618  : 
; 619  : 			if ( type == ITEMGET(12,30)	||
; 620  : 				 type == ITEMGET(12,31)	||
; 621  : 				 type == ITEMGET(12,136)||
; 622  : 				 type == ITEMGET(12,137)||
; 623  : 				 type == ITEMGET(12,138)||
; 624  : 				 type == ITEMGET(12,139)||
; 625  : 				 type == ITEMGET(12,140)||
; 626  : 				 type == ITEMGET(12,141)||
; 627  : 				 type == ITEMGET(12,142)||
; 628  : 				 type == ITEMGET(12,143))

  0156a	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  01571	74 51		 je	 SHORT $LN3@HeartOfLov
  01573	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  0157a	74 48		 je	 SHORT $LN3@HeartOfLov
  0157c	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  01583	74 3f		 je	 SHORT $LN3@HeartOfLov
  01585	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  0158c	74 36		 je	 SHORT $LN3@HeartOfLov
  0158e	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  01595	74 2d		 je	 SHORT $LN3@HeartOfLov
  01597	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  0159e	74 24		 je	 SHORT $LN3@HeartOfLov
  015a0	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  015a7	74 1b		 je	 SHORT $LN3@HeartOfLov
  015a9	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  015b0	74 12		 je	 SHORT $LN3@HeartOfLov
  015b2	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  015b9	74 09		 je	 SHORT $LN3@HeartOfLov
  015bb	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  015c2	75 32		 jne	 SHORT $LN4@HeartOfLov
$LN3@HeartOfLov:

; 629  : 			{
; 630  : 				Option1 = 0;

  015c4	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 631  : 				Option2 = 0;

  015cb	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 632  : 				Option3 = 0;

  015d2	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 633  : 				level = HeartOfLoveItemBag->GetLevel(DropItemNum);

  015d9	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  015dc	50		 push	 eax
  015dd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  015e3	8b 11		 mov	 edx, DWORD PTR [ecx]
  015e5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  015eb	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  015ee	ff d0		 call	 eax
  015f0	0f b6 c8	 movzx	 ecx, al
  015f3	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN4@HeartOfLov:

; 634  : 			}
; 635  : 
; 636  : 			if ( type == ITEMGET(13,0) ||
; 637  : 				 type == ITEMGET(13,1) ||
; 638  : 				 type == ITEMGET(13,2) ||
; 639  : 				 type == ITEMGET(13,8) ||
; 640  : 				 type == ITEMGET(13,9) ||
; 641  : 				 type == ITEMGET(13,12) ||
; 642  : 				 type == ITEMGET(13,13) )

  015f6	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  015fd	74 36		 je	 SHORT $LN1@HeartOfLov
  015ff	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  01606	74 2d		 je	 SHORT $LN1@HeartOfLov
  01608	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  0160f	74 24		 je	 SHORT $LN1@HeartOfLov
  01611	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  01618	74 1b		 je	 SHORT $LN1@HeartOfLov
  0161a	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  01621	74 12		 je	 SHORT $LN1@HeartOfLov
  01623	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  0162a	74 09		 je	 SHORT $LN1@HeartOfLov
  0162c	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  01633	75 07		 jne	 SHORT $LN2@HeartOfLov
$LN1@HeartOfLov:

; 643  : 			{
; 644  : 				level = 0;

  01635	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@HeartOfLov:

; 645  : 			}
; 646  : 
; 647  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 648  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0163c	6a 00		 push	 0
  0163e	6a 00		 push	 0
  01640	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01643	8b 08		 mov	 ecx, DWORD PTR [eax]
  01645	51		 push	 ecx
  01646	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  0164a	52		 push	 edx
  0164b	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  0164f	50		 push	 eax
  01650	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  01654	51		 push	 ecx
  01655	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  01658	d9 bd ba fe ff
	ff		 fnstcw	 WORD PTR tv338[ebp]
  0165e	0f b7 85 ba fe
	ff ff		 movzx	 eax, WORD PTR tv338[ebp]
  01665	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  0166a	89 85 b4 fe ff
	ff		 mov	 DWORD PTR tv341[ebp], eax
  01670	d9 ad b4 fe ff
	ff		 fldcw	 WORD PTR tv341[ebp]
  01676	db 9d b0 fe ff
	ff		 fistp	 DWORD PTR tv343[ebp]
  0167c	d9 ad ba fe ff
	ff		 fldcw	 WORD PTR tv338[ebp]
  01682	0f b6 95 b0 fe
	ff ff		 movzx	 edx, BYTE PTR tv343[ebp]
  01689	52		 push	 edx
  0168a	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  0168e	50		 push	 eax
  0168f	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  01692	51		 push	 ecx
  01693	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  01697	52		 push	 edx
  01698	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  0169c	50		 push	 eax
  0169d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  016a0	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  016a7	52		 push	 edx
  016a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  016ab	8b 08		 mov	 ecx, DWORD PTR [eax]
  016ad	51		 push	 ecx
  016ae	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  016b3	83 c4 34	 add	 esp, 52			; 00000034H

; 649  : 
; 650  : 			PMSG_SERVERCMD ServerCmd;
; 651  : 
; 652  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  016b6	6a 07		 push	 7
  016b8	6a 40		 push	 64			; 00000040H
  016ba	68 f3 00 00 00	 push	 243			; 000000f3H
  016bf	8d 45 d0	 lea	 eax, DWORD PTR _ServerCmd$233416[ebp]
  016c2	50		 push	 eax
  016c3	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  016c8	83 c4 10	 add	 esp, 16			; 00000010H

; 653  : 			ServerCmd.CmdType = 0;

  016cb	c6 45 d4 00	 mov	 BYTE PTR _ServerCmd$233416[ebp+4], 0

; 654  : 			ServerCmd.X = x;

  016cf	8a 45 ec	 mov	 al, BYTE PTR _x$[ebp]
  016d2	88 45 d5	 mov	 BYTE PTR _ServerCmd$233416[ebp+5], al

; 655  : 			ServerCmd.Y = y;

  016d5	8a 45 e8	 mov	 al, BYTE PTR _y$[ebp]
  016d8	88 45 d6	 mov	 BYTE PTR _ServerCmd$233416[ebp+6], al

; 656  : 
; 657  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  016db	6a 07		 push	 7
  016dd	8d 45 d0	 lea	 eax, DWORD PTR _ServerCmd$233416[ebp]
  016e0	50		 push	 eax
  016e1	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  016e4	51		 push	 ecx
  016e5	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  016ea	83 c4 0c	 add	 esp, 12			; 0000000cH

; 658  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  016ed	6a 07		 push	 7
  016ef	8d 45 d0	 lea	 eax, DWORD PTR _ServerCmd$233416[ebp]
  016f2	50		 push	 eax
  016f3	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  016f6	8b 11		 mov	 edx, DWORD PTR [ecx]
  016f8	52		 push	 edx
  016f9	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  016fe	83 c4 0c	 add	 esp, 12			; 0000000cH

; 659  : 
; 660  : 			CItem EventItem;

  01701	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233420[ebp]
  01707	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 661  : 
; 662  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  0170c	6a 03		 push	 3
  0170e	6a 00		 push	 0
  01710	68 ff 00 00 00	 push	 255			; 000000ffH
  01715	6a 00		 push	 0
  01717	6a 00		 push	 0
  01719	6a 01		 push	 1
  0171b	6a 00		 push	 0
  0171d	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  01721	50		 push	 eax
  01722	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  01726	51		 push	 ecx
  01727	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  0172b	52		 push	 edx
  0172c	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  0172f	50		 push	 eax
  01730	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233420[ebp]
  01736	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 663  : 
; 664  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Heart Of Love] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 665  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 666  : 				type, level, Option1, Option2, Option3);

  0173b	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  0173e	50		 push	 eax
  0173f	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  01742	51		 push	 ecx
  01743	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  01746	52		 push	 edx
  01747	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  0174a	50		 push	 eax
  0174b	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  0174e	51		 push	 ecx
  0174f	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233420[ebp]
  01755	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  0175a	50		 push	 eax
  0175b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0175e	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  01765	50		 push	 eax
  01766	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01769	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  01770	52		 push	 edx
  01771	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01774	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0177b	51		 push	 ecx
  0177c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0177f	83 c2 77	 add	 edx, 119		; 00000077H
  01782	52		 push	 edx
  01783	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01786	83 c0 6c	 add	 eax, 108		; 0000006cH
  01789	50		 push	 eax
  0178a	68 00 00 00 00	 push	 OFFSET ??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@
  0178f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  01795	83 c4 30	 add	 esp, 48			; 00000030H

; 667  : 
; 668  : 			return;

  01798	eb 42		 jmp	 SHORT $LN16@HeartOfLov
$LN13@HeartOfLov:

; 669  : 		}
; 670  : 	}
; 671  : 
; 672  : 	x = lpObj->X;

  0179a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0179d	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  017a4	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 673  : 	y = lpObj->Y;

  017a7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  017aa	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  017b1	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 674  : 	MapC[lpObj->MapNumber].MoneyItemDrop(1004, x, y);

  017b4	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  017b7	50		 push	 eax
  017b8	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  017bb	51		 push	 ecx
  017bc	68 ec 03 00 00	 push	 1004			; 000003ecH
  017c1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  017c4	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  017cb	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  017d1	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  017d7	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN16@HeartOfLov:

; 675  : }

  017dc	5f		 pop	 edi
  017dd	5e		 pop	 esi
  017de	5b		 pop	 ebx
  017df	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  017e2	33 cd		 xor	 ecx, ebp
  017e4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  017e9	8b e5		 mov	 esp, ebp
  017eb	5d		 pop	 ebp
  017ec	c3		 ret	 0
?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; HeartOfLoveOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; FireCrackerOpenEven
EXTRN	?g_ItemDropRateForgFireCracker@@3HA:DWORD	; g_ItemDropRateForgFireCracker
EXTRN	?FireCrackerItemBag@@3PAVCItemBag@@A:DWORD	; FireCrackerItemBag
EXTRN	?gOnlyFireCrackerEffectUse@@3HA:DWORD		; gOnlyFireCrackerEffectUse
;	COMDAT ??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@
CONST	SEGMENT
??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Fire Cracker] : (%d)(X:%d/Y:%d) '
	DB	'Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv398 = -344						; size = 4
tv396 = -340						; size = 4
tv393 = -334						; size = 2
_EventItem$233466 = -268				; size = 212
_ServerCmd$233462 = -56					; size = 7
_ServerCmd$233435 = -48					; size = 7
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; FireCrackerOpenEven

; 678  : {

  017f0	55		 push	 ebp
  017f1	8b ec		 mov	 ebp, esp
  017f3	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  017f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  017fe	33 c5		 xor	 eax, ebp
  01800	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01803	53		 push	 ebx
  01804	56		 push	 esi
  01805	57		 push	 edi

; 679  : 	float dur;
; 680  : 	int type;
; 681  : 	int level;
; 682  : 	int x;
; 683  : 	int y;
; 684  : 	int Option1=0;

  01806	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 685  : 	int Option2=0;

  0180d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 686  : 	int Option3=0;

  01814	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 687  : 	int DropItemNum;
; 688  : 
; 689  : 	if ( gOnlyFireCrackerEffectUse )

  0181b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gOnlyFireCrackerEffectUse@@3HA, 0 ; gOnlyFireCrackerEffectUse
  01822	74 5c		 je	 SHORT $LN16@FireCracke

; 690  : 	{
; 691  : 		PMSG_SERVERCMD ServerCmd;
; 692  : 
; 693  : 		PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  01824	6a 07		 push	 7
  01826	6a 40		 push	 64			; 00000040H
  01828	68 f3 00 00 00	 push	 243			; 000000f3H
  0182d	8d 45 d0	 lea	 eax, DWORD PTR _ServerCmd$233435[ebp]
  01830	50		 push	 eax
  01831	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  01836	83 c4 10	 add	 esp, 16			; 00000010H

; 694  : 		ServerCmd.CmdType = 0;

  01839	c6 45 d4 00	 mov	 BYTE PTR _ServerCmd$233435[ebp+4], 0

; 695  : 		ServerCmd.X = lpObj->X;

  0183d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01840	8a 88 44 01 00
	00		 mov	 cl, BYTE PTR [eax+324]
  01846	88 4d d5	 mov	 BYTE PTR _ServerCmd$233435[ebp+5], cl

; 696  : 		ServerCmd.Y = lpObj->Y;

  01849	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0184c	8a 88 46 01 00
	00		 mov	 cl, BYTE PTR [eax+326]
  01852	88 4d d6	 mov	 BYTE PTR _ServerCmd$233435[ebp+6], cl

; 697  : 
; 698  : 		MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  01855	6a 07		 push	 7
  01857	8d 45 d0	 lea	 eax, DWORD PTR _ServerCmd$233435[ebp]
  0185a	50		 push	 eax
  0185b	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0185e	51		 push	 ecx
  0185f	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  01864	83 c4 0c	 add	 esp, 12			; 0000000cH

; 699  : 		DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  01867	6a 07		 push	 7
  01869	8d 45 d0	 lea	 eax, DWORD PTR _ServerCmd$233435[ebp]
  0186c	50		 push	 eax
  0186d	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01870	8b 11		 mov	 edx, DWORD PTR [ecx]
  01872	52		 push	 edx
  01873	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  01878	83 c4 0c	 add	 esp, 12			; 0000000cH

; 700  : 
; 701  : 		return;

  0187b	e9 d1 04 00 00	 jmp	 $LN17@FireCracke
$LN16@FireCracke:

; 702  : 	}
; 703  : 
; 704  : 	if ( !FireCrackerItemBag )

  01880	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A, 0 ; FireCrackerItemBag
  01887	75 05		 jne	 SHORT $LN15@FireCracke

; 705  : 		return;

  01889	e9 c3 04 00 00	 jmp	 $LN17@FireCracke
$LN15@FireCracke:

; 706  : 
; 707  : 	if ( FireCrackerItemBag->GetBagCount() > 0 )

  0188e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01894	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  01899	85 c0		 test	 eax, eax
  0189b	0f 8e 6e 04 00
	00		 jle	 $LN13@FireCracke

; 708  : 	{
; 709  : 		if ( (rand()%10) < g_ItemDropRateForgFireCracker )

  018a1	e8 00 00 00 00	 call	 _rand
  018a6	99		 cdq
  018a7	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  018ac	f7 f9		 idiv	 ecx
  018ae	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForgFireCracker@@3HA ; g_ItemDropRateForgFireCracker
  018b4	0f 8d 55 04 00
	00		 jge	 $LN13@FireCracke

; 710  : 		{
; 711  : 			DropItemNum = rand()%FireCrackerItemBag->GetBagCount();

  018ba	e8 00 00 00 00	 call	 _rand
  018bf	8b f0		 mov	 esi, eax
  018c1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  018c7	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  018cc	8b c8		 mov	 ecx, eax
  018ce	8b c6		 mov	 eax, esi
  018d0	99		 cdq
  018d1	f7 f9		 idiv	 ecx
  018d3	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 712  : 			dur=0;

  018d6	d9 ee		 fldz
  018d8	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 713  : 			x = lpObj->X;

  018db	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  018de	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  018e5	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 714  : 			y = lpObj->Y;

  018e8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  018eb	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  018f2	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 715  : 			
; 716  : 			if ( gLanguage == 0 )

  018f5	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  018fc	75 32		 jne	 SHORT $LN12@FireCracke

; 717  : 			{
; 718  : 				level = FireCrackerItemBag->GetLevel(DropItemNum) + rand()%2;

  018fe	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  01901	50		 push	 eax
  01902	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01908	8b 11		 mov	 edx, DWORD PTR [ecx]
  0190a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01910	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  01913	ff d0		 call	 eax
  01915	0f b6 f0	 movzx	 esi, al
  01918	e8 00 00 00 00	 call	 _rand
  0191d	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  01922	79 05		 jns	 SHORT $LN19@FireCracke
  01924	48		 dec	 eax
  01925	83 c8 fe	 or	 eax, -2			; fffffffeH
  01928	40		 inc	 eax
$LN19@FireCracke:
  01929	03 f0		 add	 esi, eax
  0192b	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 719  : 			}
; 720  : 			else

  0192e	eb 2c		 jmp	 SHORT $LN11@FireCracke
$LN12@FireCracke:

; 721  : 			{
; 722  : 				level = FireCrackerItemBag->GetLevel(DropItemNum) + rand()%5;

  01930	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  01933	50		 push	 eax
  01934	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  0193a	8b 11		 mov	 edx, DWORD PTR [ecx]
  0193c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01942	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  01945	ff d0		 call	 eax
  01947	0f b6 f0	 movzx	 esi, al
  0194a	e8 00 00 00 00	 call	 _rand
  0194f	99		 cdq
  01950	b9 05 00 00 00	 mov	 ecx, 5
  01955	f7 f9		 idiv	 ecx
  01957	03 f2		 add	 esi, edx
  01959	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi
$LN11@FireCracke:

; 723  : 			}
; 724  : 			
; 725  : 			type = ItemGetNumberMake(FireCrackerItemBag->GetType(DropItemNum), FireCrackerItemBag->GetIndex(DropItemNum));

  0195c	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0195f	50		 push	 eax
  01960	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01966	8b 11		 mov	 edx, DWORD PTR [ecx]
  01968	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  0196e	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  01971	ff d0		 call	 eax
  01973	0f b6 c8	 movzx	 ecx, al
  01976	51		 push	 ecx
  01977	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  0197a	52		 push	 edx
  0197b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01980	8b 10		 mov	 edx, DWORD PTR [eax]
  01982	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01988	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  0198b	ff d0		 call	 eax
  0198d	0f b6 c8	 movzx	 ecx, al
  01990	51		 push	 ecx
  01991	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  01996	83 c4 08	 add	 esp, 8
  01999	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 726  : 			Option1 = rand()%2;

  0199c	e8 00 00 00 00	 call	 _rand
  019a1	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  019a6	79 05		 jns	 SHORT $LN20@FireCracke
  019a8	48		 dec	 eax
  019a9	83 c8 fe	 or	 eax, -2			; fffffffeH
  019ac	40		 inc	 eax
$LN20@FireCracke:
  019ad	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 727  : 			Option2 = rand()%2;

  019b0	e8 00 00 00 00	 call	 _rand
  019b5	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  019ba	79 05		 jns	 SHORT $LN21@FireCracke
  019bc	48		 dec	 eax
  019bd	83 c8 fe	 or	 eax, -2			; fffffffeH
  019c0	40		 inc	 eax
$LN21@FireCracke:
  019c1	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 728  : 
; 729  : 			if ( !Option2 || !Option1 )

  019c4	83 7d e0 00	 cmp	 DWORD PTR _Option2$[ebp], 0
  019c8	74 06		 je	 SHORT $LN9@FireCracke
  019ca	83 7d e4 00	 cmp	 DWORD PTR _Option1$[ebp], 0
  019ce	75 2b		 jne	 SHORT $LN7@FireCracke
$LN9@FireCracke:

; 730  : 			{
; 731  : 				if ( (rand()%5) <1 )

  019d0	e8 00 00 00 00	 call	 _rand
  019d5	99		 cdq
  019d6	b9 05 00 00 00	 mov	 ecx, 5
  019db	f7 f9		 idiv	 ecx
  019dd	83 fa 01	 cmp	 edx, 1
  019e0	7d 09		 jge	 SHORT $LN8@FireCracke

; 732  : 					Option3 = 3;

  019e2	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 733  : 				else

  019e9	eb 10		 jmp	 SHORT $LN7@FireCracke
$LN8@FireCracke:

; 734  : 					Option3 = rand()%3;

  019eb	e8 00 00 00 00	 call	 _rand
  019f0	99		 cdq
  019f1	b9 03 00 00 00	 mov	 ecx, 3
  019f6	f7 f9		 idiv	 ecx
  019f8	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@FireCracke:

; 735  : 			}
; 736  : 
; 737  : 			if ( type == ITEMGET(12,15) ||
; 738  : 				 type == ITEMGET(14,13) ||
; 739  : 				 type == ITEMGET(14,14) ||
; 740  : 				 type == ITEMGET(14,14) ||
; 741  : 				 type == ITEMGET(14,16)	||
; 742  : 				 type == ITEMGET(14,22)	||
; 743  : 				 type == ITEMGET(14,31)	||
; 744  : 				 type == ITEMGET(14,41)	||
; 745  : 				 type == ITEMGET(14,42)	||
; 746  : 				 type == ITEMGET(14,180)||
; 747  : 				 type == ITEMGET(14,181)||
; 748  : 				 type == ITEMGET(14,182)||
; 749  : 				 type == ITEMGET(14,183)||
; 750  : 				 type == ITEMGET(14,184)||
; 751  : 				 type == ITEMGET(14,185)||
; 752  : 				 type == ITEMGET(14,186)||
; 753  : 				 type == ITEMGET(14,187)||
; 754  : 				 type == ITEMGET(14,190)||
; 755  : 				 type == ITEMGET(14,43) ||
; 756  : 				 type == ITEMGET(14,44) )

  019fb	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  01a02	0f 84 bb 00 00
	00		 je	 $LN5@FireCracke
  01a08	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  01a0f	0f 84 ae 00 00
	00		 je	 $LN5@FireCracke
  01a15	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  01a1c	0f 84 a1 00 00
	00		 je	 $LN5@FireCracke
  01a22	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  01a29	0f 84 94 00 00
	00		 je	 $LN5@FireCracke
  01a2f	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  01a36	0f 84 87 00 00
	00		 je	 $LN5@FireCracke
  01a3c	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  01a43	74 7e		 je	 SHORT $LN5@FireCracke
  01a45	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  01a4c	74 75		 je	 SHORT $LN5@FireCracke
  01a4e	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  01a55	74 6c		 je	 SHORT $LN5@FireCracke
  01a57	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  01a5e	74 63		 je	 SHORT $LN5@FireCracke
  01a60	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  01a67	74 5a		 je	 SHORT $LN5@FireCracke
  01a69	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  01a70	74 51		 je	 SHORT $LN5@FireCracke
  01a72	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  01a79	74 48		 je	 SHORT $LN5@FireCracke
  01a7b	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  01a82	74 3f		 je	 SHORT $LN5@FireCracke
  01a84	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  01a8b	74 36		 je	 SHORT $LN5@FireCracke
  01a8d	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  01a94	74 2d		 je	 SHORT $LN5@FireCracke
  01a96	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  01a9d	74 24		 je	 SHORT $LN5@FireCracke
  01a9f	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  01aa6	74 1b		 je	 SHORT $LN5@FireCracke
  01aa8	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  01aaf	74 12		 je	 SHORT $LN5@FireCracke
  01ab1	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  01ab8	74 09		 je	 SHORT $LN5@FireCracke
  01aba	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  01ac1	75 1c		 jne	 SHORT $LN6@FireCracke
$LN5@FireCracke:

; 757  : 			{
; 758  : 				Option1 = 0;

  01ac3	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 759  : 				Option2 = 0;

  01aca	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 760  : 				Option3 = 0;

  01ad1	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 761  : 				level = 0;

  01ad8	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN6@FireCracke:

; 762  : 			}
; 763  : 
; 764  : 			if ( type == ITEMGET(12,30)	||
; 765  : 				 type == ITEMGET(12,31)	||
; 766  : 				 type == ITEMGET(12,136)||
; 767  : 				 type == ITEMGET(12,137)||
; 768  : 				 type == ITEMGET(12,138)||
; 769  : 				 type == ITEMGET(12,139)||
; 770  : 				 type == ITEMGET(12,140)||
; 771  : 				 type == ITEMGET(12,141)||
; 772  : 				 type == ITEMGET(12,142)||
; 773  : 				 type == ITEMGET(12,143))

  01adf	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  01ae6	74 51		 je	 SHORT $LN3@FireCracke
  01ae8	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  01aef	74 48		 je	 SHORT $LN3@FireCracke
  01af1	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  01af8	74 3f		 je	 SHORT $LN3@FireCracke
  01afa	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  01b01	74 36		 je	 SHORT $LN3@FireCracke
  01b03	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  01b0a	74 2d		 je	 SHORT $LN3@FireCracke
  01b0c	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  01b13	74 24		 je	 SHORT $LN3@FireCracke
  01b15	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  01b1c	74 1b		 je	 SHORT $LN3@FireCracke
  01b1e	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  01b25	74 12		 je	 SHORT $LN3@FireCracke
  01b27	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  01b2e	74 09		 je	 SHORT $LN3@FireCracke
  01b30	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  01b37	75 32		 jne	 SHORT $LN4@FireCracke
$LN3@FireCracke:

; 774  : 			{
; 775  : 				Option1 = 0;

  01b39	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 776  : 				Option2 = 0;

  01b40	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 777  : 				Option3 = 0;

  01b47	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 778  : 				level = FireCrackerItemBag->GetLevel(DropItemNum);

  01b4e	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  01b51	50		 push	 eax
  01b52	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01b58	8b 11		 mov	 edx, DWORD PTR [ecx]
  01b5a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  01b60	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  01b63	ff d0		 call	 eax
  01b65	0f b6 c8	 movzx	 ecx, al
  01b68	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN4@FireCracke:

; 779  : 			}
; 780  : 
; 781  : 			if ( type == ITEMGET(13,0) ||
; 782  : 				 type == ITEMGET(13,1) ||
; 783  : 				 type == ITEMGET(13,2) ||
; 784  : 				 type == ITEMGET(13,8) ||
; 785  : 				 type == ITEMGET(13,9) ||
; 786  : 				 type == ITEMGET(13,12) ||
; 787  : 				 type == ITEMGET(13,13) )

  01b6b	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  01b72	74 36		 je	 SHORT $LN1@FireCracke
  01b74	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  01b7b	74 2d		 je	 SHORT $LN1@FireCracke
  01b7d	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  01b84	74 24		 je	 SHORT $LN1@FireCracke
  01b86	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  01b8d	74 1b		 je	 SHORT $LN1@FireCracke
  01b8f	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  01b96	74 12		 je	 SHORT $LN1@FireCracke
  01b98	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  01b9f	74 09		 je	 SHORT $LN1@FireCracke
  01ba1	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  01ba8	75 07		 jne	 SHORT $LN2@FireCracke
$LN1@FireCracke:

; 788  : 			{
; 789  : 				level = 0;

  01baa	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@FireCracke:

; 790  : 			}
; 791  : 
; 792  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 793  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  01bb1	6a 00		 push	 0
  01bb3	6a 00		 push	 0
  01bb5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01bb8	8b 08		 mov	 ecx, DWORD PTR [eax]
  01bba	51		 push	 ecx
  01bbb	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  01bbf	52		 push	 edx
  01bc0	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  01bc4	50		 push	 eax
  01bc5	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  01bc9	51		 push	 ecx
  01bca	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  01bcd	d9 bd b2 fe ff
	ff		 fnstcw	 WORD PTR tv393[ebp]
  01bd3	0f b7 85 b2 fe
	ff ff		 movzx	 eax, WORD PTR tv393[ebp]
  01bda	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  01bdf	89 85 ac fe ff
	ff		 mov	 DWORD PTR tv396[ebp], eax
  01be5	d9 ad ac fe ff
	ff		 fldcw	 WORD PTR tv396[ebp]
  01beb	db 9d a8 fe ff
	ff		 fistp	 DWORD PTR tv398[ebp]
  01bf1	d9 ad b2 fe ff
	ff		 fldcw	 WORD PTR tv393[ebp]
  01bf7	0f b6 95 a8 fe
	ff ff		 movzx	 edx, BYTE PTR tv398[ebp]
  01bfe	52		 push	 edx
  01bff	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  01c03	50		 push	 eax
  01c04	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  01c07	51		 push	 ecx
  01c08	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  01c0c	52		 push	 edx
  01c0d	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  01c11	50		 push	 eax
  01c12	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01c15	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  01c1c	52		 push	 edx
  01c1d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01c20	8b 08		 mov	 ecx, DWORD PTR [eax]
  01c22	51		 push	 ecx
  01c23	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  01c28	83 c4 34	 add	 esp, 52			; 00000034H

; 794  : 
; 795  : 			PMSG_SERVERCMD ServerCmd;
; 796  : 
; 797  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  01c2b	6a 07		 push	 7
  01c2d	6a 40		 push	 64			; 00000040H
  01c2f	68 f3 00 00 00	 push	 243			; 000000f3H
  01c34	8d 45 c8	 lea	 eax, DWORD PTR _ServerCmd$233462[ebp]
  01c37	50		 push	 eax
  01c38	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  01c3d	83 c4 10	 add	 esp, 16			; 00000010H

; 798  : 			ServerCmd.CmdType = 0;

  01c40	c6 45 cc 00	 mov	 BYTE PTR _ServerCmd$233462[ebp+4], 0

; 799  : 			ServerCmd.X = x;

  01c44	8a 45 ec	 mov	 al, BYTE PTR _x$[ebp]
  01c47	88 45 cd	 mov	 BYTE PTR _ServerCmd$233462[ebp+5], al

; 800  : 			ServerCmd.Y = y;

  01c4a	8a 45 e8	 mov	 al, BYTE PTR _y$[ebp]
  01c4d	88 45 ce	 mov	 BYTE PTR _ServerCmd$233462[ebp+6], al

; 801  : 
; 802  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  01c50	6a 07		 push	 7
  01c52	8d 45 c8	 lea	 eax, DWORD PTR _ServerCmd$233462[ebp]
  01c55	50		 push	 eax
  01c56	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01c59	51		 push	 ecx
  01c5a	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  01c5f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 803  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  01c62	6a 07		 push	 7
  01c64	8d 45 c8	 lea	 eax, DWORD PTR _ServerCmd$233462[ebp]
  01c67	50		 push	 eax
  01c68	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01c6b	8b 11		 mov	 edx, DWORD PTR [ecx]
  01c6d	52		 push	 edx
  01c6e	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  01c73	83 c4 0c	 add	 esp, 12			; 0000000cH

; 804  : 
; 805  : 			CItem EventItem;

  01c76	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233466[ebp]
  01c7c	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 806  : 
; 807  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  01c81	6a 03		 push	 3
  01c83	6a 00		 push	 0
  01c85	68 ff 00 00 00	 push	 255			; 000000ffH
  01c8a	6a 00		 push	 0
  01c8c	6a 00		 push	 0
  01c8e	6a 01		 push	 1
  01c90	6a 00		 push	 0
  01c92	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  01c96	50		 push	 eax
  01c97	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  01c9b	51		 push	 ecx
  01c9c	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  01ca0	52		 push	 edx
  01ca1	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  01ca4	50		 push	 eax
  01ca5	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233466[ebp]
  01cab	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 808  : 
; 809  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Fire Cracker] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 810  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 811  : 				type, level, Option1, Option2, Option3);

  01cb0	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  01cb3	50		 push	 eax
  01cb4	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  01cb7	51		 push	 ecx
  01cb8	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  01cbb	52		 push	 edx
  01cbc	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  01cbf	50		 push	 eax
  01cc0	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  01cc3	51		 push	 ecx
  01cc4	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233466[ebp]
  01cca	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  01ccf	50		 push	 eax
  01cd0	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01cd3	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  01cda	50		 push	 eax
  01cdb	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  01cde	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  01ce5	52		 push	 edx
  01ce6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01ce9	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  01cf0	51		 push	 ecx
  01cf1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01cf4	83 c2 77	 add	 edx, 119		; 00000077H
  01cf7	52		 push	 edx
  01cf8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01cfb	83 c0 6c	 add	 eax, 108		; 0000006cH
  01cfe	50		 push	 eax
  01cff	68 00 00 00 00	 push	 OFFSET ??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@
  01d04	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  01d0a	83 c4 30	 add	 esp, 48			; 00000030H

; 812  : 
; 813  : 			return;

  01d0d	eb 42		 jmp	 SHORT $LN17@FireCracke
$LN13@FireCracke:

; 814  : 		}
; 815  : 	}
; 816  : 
; 817  : 	x = lpObj->X;

  01d0f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01d12	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  01d19	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 818  : 	y = lpObj->Y;

  01d1c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01d1f	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  01d26	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 819  : 	MapC[lpObj->MapNumber].MoneyItemDrop(2004, x, y);

  01d29	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  01d2c	50		 push	 eax
  01d2d	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  01d30	51		 push	 ecx
  01d31	68 d4 07 00 00	 push	 2004			; 000007d4H
  01d36	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  01d39	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  01d40	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  01d46	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  01d4c	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN17@FireCracke:

; 820  : }

  01d51	5f		 pop	 edi
  01d52	5e		 pop	 esi
  01d53	5b		 pop	 ebx
  01d54	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  01d57	33 cd		 xor	 ecx, ebp
  01d59	e8 00 00 00 00	 call	 @__security_check_cookie@4
  01d5e	8b e5		 mov	 esp, ebp
  01d60	5d		 pop	 ebp
  01d61	c3		 ret	 0
?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; FireCrackerOpenEven
_TEXT	ENDS
PUBLIC	?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; StarOfXMasOpenEven
EXTRN	?DropItem@CItemBagEx@@QAEHH@Z:PROC		; CItemBagEx::DropItem
EXTRN	?StarOfXMasItemBag@@3PAVCItemBagEx@@A:DWORD	; StarOfXMasItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; StarOfXMasOpenEven

; 823  : {

  01d70	55		 push	 ebp
  01d71	8b ec		 mov	 ebp, esp
  01d73	83 ec 40	 sub	 esp, 64			; 00000040H
  01d76	53		 push	 ebx
  01d77	56		 push	 esi
  01d78	57		 push	 edi

; 824  : 	StarOfXMasItemBag->DropItem(lpObj->m_Index);

  01d79	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01d7c	8b 08		 mov	 ecx, DWORD PTR [eax]
  01d7e	51		 push	 ecx
  01d7f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?StarOfXMasItemBag@@3PAVCItemBagEx@@A ; StarOfXMasItemBag
  01d85	e8 00 00 00 00	 call	 ?DropItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropItem

; 825  : }

  01d8a	5f		 pop	 edi
  01d8b	5e		 pop	 esi
  01d8c	5b		 pop	 ebx
  01d8d	8b e5		 mov	 esp, ebp
  01d8f	5d		 pop	 ebp
  01d90	c3		 ret	 0
?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; StarOfXMasOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RingEventItemBoxOpen
EXTRN	?RingEventItemBag@@3PAVCItemBag@@A:DWORD	; RingEventItemBag
;	COMDAT ??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@
CONST	SEGMENT
??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@ DB '['
	DB	'%s][%s][Ring Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d '
	DB	'op1:%d op2:%d op3:%d', 00H			; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv300 = -332						; size = 4
tv298 = -328						; size = 4
tv295 = -322						; size = 2
_EventItem$233508 = -256				; size = 212
_rnd$233485 = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; RingEventItemBoxOpen

; 828  : {

  01da0	55		 push	 ebp
  01da1	8b ec		 mov	 ebp, esp
  01da3	81 ec 4c 01 00
	00		 sub	 esp, 332		; 0000014cH
  01da9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  01dae	33 c5		 xor	 eax, ebp
  01db0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  01db3	53		 push	 ebx
  01db4	56		 push	 esi
  01db5	57		 push	 edi

; 829  : 	float dur;
; 830  : 	int type;
; 831  : 	int level;
; 832  : 	int x;
; 833  : 	int y;
; 834  : 	int Option1=0;

  01db6	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 835  : 	int Option2=0;

  01dbd	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 836  : 	int Option3=0;

  01dc4	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 837  : 	int DropItemNum;
; 838  : 
; 839  : 	if ( RingEventItemBag->GetBagCount() > 0 )

  01dcb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  01dd1	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  01dd6	85 c0		 test	 eax, eax
  01dd8	0f 8e e4 03 00
	00		 jle	 $LN15@RingEventI

; 840  : 	{
; 841  : 		if ( (rand()%10) < 9 )

  01dde	e8 00 00 00 00	 call	 _rand
  01de3	99		 cdq
  01de4	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  01de9	f7 f9		 idiv	 ecx
  01deb	83 fa 09	 cmp	 edx, 9
  01dee	0f 8d ce 03 00
	00		 jge	 $LN15@RingEventI

; 842  : 		{
; 843  : 			DropItemNum = rand()%RingEventItemBag->GetBagCount();

  01df4	e8 00 00 00 00	 call	 _rand
  01df9	8b f0		 mov	 esi, eax
  01dfb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  01e01	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  01e06	8b c8		 mov	 ecx, eax
  01e08	8b c6		 mov	 eax, esi
  01e0a	99		 cdq
  01e0b	f7 f9		 idiv	 ecx
  01e0d	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 844  : 			dur=0;

  01e10	d9 ee		 fldz
  01e12	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 845  : 			x = lpObj->X;

  01e15	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01e18	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  01e1f	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 846  : 			y = lpObj->Y;

  01e22	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  01e25	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  01e2c	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 847  : 
; 848  : 			int rnd = rand() % 100;

  01e2f	e8 00 00 00 00	 call	 _rand
  01e34	99		 cdq
  01e35	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  01e3a	f7 f9		 idiv	 ecx
  01e3c	89 55 d4	 mov	 DWORD PTR _rnd$233485[ebp], edx

; 849  : 
; 850  : 			if ( rnd < 5 )

  01e3f	83 7d d4 05	 cmp	 DWORD PTR _rnd$233485[ebp], 5
  01e43	7d 09		 jge	 SHORT $LN14@RingEventI

; 851  : 				level = 9;

  01e45	c7 45 f0 09 00
	00 00		 mov	 DWORD PTR _level$[ebp], 9
  01e4c	eb 25		 jmp	 SHORT $LN9@RingEventI
$LN14@RingEventI:

; 852  : 			else if ( rnd < 20 )

  01e4e	83 7d d4 14	 cmp	 DWORD PTR _rnd$233485[ebp], 20 ; 00000014H
  01e52	7d 09		 jge	 SHORT $LN12@RingEventI

; 853  : 				level = 8;

  01e54	c7 45 f0 08 00
	00 00		 mov	 DWORD PTR _level$[ebp], 8
  01e5b	eb 16		 jmp	 SHORT $LN9@RingEventI
$LN12@RingEventI:

; 854  : 			else if ( rnd < 50 )

  01e5d	83 7d d4 32	 cmp	 DWORD PTR _rnd$233485[ebp], 50 ; 00000032H
  01e61	7d 09		 jge	 SHORT $LN10@RingEventI

; 855  : 				level = 7;

  01e63	c7 45 f0 07 00
	00 00		 mov	 DWORD PTR _level$[ebp], 7

; 856  : 			else 

  01e6a	eb 07		 jmp	 SHORT $LN9@RingEventI
$LN10@RingEventI:

; 857  : 				level = 6;

  01e6c	c7 45 f0 06 00
	00 00		 mov	 DWORD PTR _level$[ebp], 6
$LN9@RingEventI:

; 858  : 
; 859  : 			type = ItemGetNumberMake(RingEventItemBag->GetType(DropItemNum), RingEventItemBag->GetIndex(DropItemNum));

  01e73	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  01e76	50		 push	 eax
  01e77	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  01e7d	8b 11		 mov	 edx, DWORD PTR [ecx]
  01e7f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  01e85	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  01e88	ff d0		 call	 eax
  01e8a	0f b6 c8	 movzx	 ecx, al
  01e8d	51		 push	 ecx
  01e8e	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  01e91	52		 push	 edx
  01e92	a1 00 00 00 00	 mov	 eax, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  01e97	8b 10		 mov	 edx, DWORD PTR [eax]
  01e99	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  01e9f	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  01ea2	ff d0		 call	 eax
  01ea4	0f b6 c8	 movzx	 ecx, al
  01ea7	51		 push	 ecx
  01ea8	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  01ead	83 c4 08	 add	 esp, 8
  01eb0	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 860  : 			Option1 = 1;

  01eb3	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1

; 861  : 			Option2 = rand()%2;

  01eba	e8 00 00 00 00	 call	 _rand
  01ebf	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  01ec4	79 05		 jns	 SHORT $LN19@RingEventI
  01ec6	48		 dec	 eax
  01ec7	83 c8 fe	 or	 eax, -2			; fffffffeH
  01eca	40		 inc	 eax
$LN19@RingEventI:
  01ecb	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 862  : 
; 863  : 			if ( (rand()%5) <1 )

  01ece	e8 00 00 00 00	 call	 _rand
  01ed3	99		 cdq
  01ed4	b9 05 00 00 00	 mov	 ecx, 5
  01ed9	f7 f9		 idiv	 ecx
  01edb	83 fa 01	 cmp	 edx, 1
  01ede	7d 09		 jge	 SHORT $LN8@RingEventI

; 864  : 				Option3 = 3;

  01ee0	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 865  : 			else

  01ee7	eb 10		 jmp	 SHORT $LN7@RingEventI
$LN8@RingEventI:

; 866  : 				Option3 = rand()%3;

  01ee9	e8 00 00 00 00	 call	 _rand
  01eee	99		 cdq
  01eef	b9 03 00 00 00	 mov	 ecx, 3
  01ef4	f7 f9		 idiv	 ecx
  01ef6	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@RingEventI:

; 867  : 
; 868  : 			if ( type == ITEMGET(12,15) ||
; 869  : 				 type == ITEMGET(14,13) ||
; 870  : 				 type == ITEMGET(14,14) ||
; 871  : 				 type == ITEMGET(14,14) ||
; 872  : 				 type == ITEMGET(14,16)	||
; 873  : 				 type == ITEMGET(14,22)	||
; 874  : 				 type == ITEMGET(14,31)	||
; 875  : 				 type == ITEMGET(14,41)	||
; 876  : 				 type == ITEMGET(14,42)	||
; 877  : 				 type == ITEMGET(14,180)||
; 878  : 				 type == ITEMGET(14,181)||
; 879  : 				 type == ITEMGET(14,182)||
; 880  : 				 type == ITEMGET(14,183)||
; 881  : 				 type == ITEMGET(14,184)||
; 882  : 				 type == ITEMGET(14,185)||
; 883  : 				 type == ITEMGET(14,186)||
; 884  : 				 type == ITEMGET(14,187)||
; 885  : 				 type == ITEMGET(14,190)||
; 886  : 				 type == ITEMGET(14,43) ||
; 887  : 				 type == ITEMGET(14,44) )

  01ef9	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  01f00	0f 84 bb 00 00
	00		 je	 $LN5@RingEventI
  01f06	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  01f0d	0f 84 ae 00 00
	00		 je	 $LN5@RingEventI
  01f13	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  01f1a	0f 84 a1 00 00
	00		 je	 $LN5@RingEventI
  01f20	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  01f27	0f 84 94 00 00
	00		 je	 $LN5@RingEventI
  01f2d	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  01f34	0f 84 87 00 00
	00		 je	 $LN5@RingEventI
  01f3a	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  01f41	74 7e		 je	 SHORT $LN5@RingEventI
  01f43	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  01f4a	74 75		 je	 SHORT $LN5@RingEventI
  01f4c	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  01f53	74 6c		 je	 SHORT $LN5@RingEventI
  01f55	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  01f5c	74 63		 je	 SHORT $LN5@RingEventI
  01f5e	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  01f65	74 5a		 je	 SHORT $LN5@RingEventI
  01f67	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  01f6e	74 51		 je	 SHORT $LN5@RingEventI
  01f70	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  01f77	74 48		 je	 SHORT $LN5@RingEventI
  01f79	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  01f80	74 3f		 je	 SHORT $LN5@RingEventI
  01f82	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  01f89	74 36		 je	 SHORT $LN5@RingEventI
  01f8b	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  01f92	74 2d		 je	 SHORT $LN5@RingEventI
  01f94	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  01f9b	74 24		 je	 SHORT $LN5@RingEventI
  01f9d	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  01fa4	74 1b		 je	 SHORT $LN5@RingEventI
  01fa6	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  01fad	74 12		 je	 SHORT $LN5@RingEventI
  01faf	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  01fb6	74 09		 je	 SHORT $LN5@RingEventI
  01fb8	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  01fbf	75 1c		 jne	 SHORT $LN6@RingEventI
$LN5@RingEventI:

; 888  : 			{
; 889  : 				Option1 = 0;

  01fc1	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 890  : 				Option2 = 0;

  01fc8	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 891  : 				Option3 = 0;

  01fcf	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 892  : 				level = 0;

  01fd6	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN6@RingEventI:

; 893  : 			}
; 894  : 
; 895  : 			if ( type == ITEMGET(12,30)	||
; 896  : 				 type == ITEMGET(12,31)	||
; 897  : 				 type == ITEMGET(12,136)||
; 898  : 				 type == ITEMGET(12,137)||
; 899  : 				 type == ITEMGET(12,138)||
; 900  : 				 type == ITEMGET(12,139)||
; 901  : 				 type == ITEMGET(12,140)||
; 902  : 				 type == ITEMGET(12,141)||
; 903  : 				 type == ITEMGET(12,142)||
; 904  : 				 type == ITEMGET(12,143))

  01fdd	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  01fe4	74 51		 je	 SHORT $LN3@RingEventI
  01fe6	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  01fed	74 48		 je	 SHORT $LN3@RingEventI
  01fef	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  01ff6	74 3f		 je	 SHORT $LN3@RingEventI
  01ff8	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  01fff	74 36		 je	 SHORT $LN3@RingEventI
  02001	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  02008	74 2d		 je	 SHORT $LN3@RingEventI
  0200a	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  02011	74 24		 je	 SHORT $LN3@RingEventI
  02013	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  0201a	74 1b		 je	 SHORT $LN3@RingEventI
  0201c	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  02023	74 12		 je	 SHORT $LN3@RingEventI
  02025	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  0202c	74 09		 je	 SHORT $LN3@RingEventI
  0202e	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  02035	75 32		 jne	 SHORT $LN4@RingEventI
$LN3@RingEventI:

; 905  : 			{
; 906  : 				Option1 = 0;

  02037	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 907  : 				Option2 = 0;

  0203e	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 908  : 				Option3 = 0;

  02045	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 909  : 				level = RingEventItemBag->GetLevel(DropItemNum);

  0204c	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0204f	50		 push	 eax
  02050	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  02056	8b 11		 mov	 edx, DWORD PTR [ecx]
  02058	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  0205e	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  02061	ff d0		 call	 eax
  02063	0f b6 c8	 movzx	 ecx, al
  02066	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN4@RingEventI:

; 910  : 			}
; 911  : 
; 912  : 			if ( type == ITEMGET(13,0) ||
; 913  : 				 type == ITEMGET(13,1) ||
; 914  : 				 type == ITEMGET(13,2) ||
; 915  : 				 type == ITEMGET(13,8) ||
; 916  : 				 type == ITEMGET(13,9) ||
; 917  : 				 type == ITEMGET(13,12) ||
; 918  : 				 type == ITEMGET(13,13) )

  02069	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  02070	74 36		 je	 SHORT $LN1@RingEventI
  02072	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  02079	74 2d		 je	 SHORT $LN1@RingEventI
  0207b	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  02082	74 24		 je	 SHORT $LN1@RingEventI
  02084	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  0208b	74 1b		 je	 SHORT $LN1@RingEventI
  0208d	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  02094	74 12		 je	 SHORT $LN1@RingEventI
  02096	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  0209d	74 09		 je	 SHORT $LN1@RingEventI
  0209f	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  020a6	75 07		 jne	 SHORT $LN2@RingEventI
$LN1@RingEventI:

; 919  : 			{
; 920  : 				level = 0;

  020a8	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@RingEventI:

; 921  : 			}
; 922  : 
; 923  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 924  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  020af	6a 00		 push	 0
  020b1	6a 00		 push	 0
  020b3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  020b6	8b 08		 mov	 ecx, DWORD PTR [eax]
  020b8	51		 push	 ecx
  020b9	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  020bd	52		 push	 edx
  020be	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  020c2	50		 push	 eax
  020c3	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  020c7	51		 push	 ecx
  020c8	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  020cb	d9 bd be fe ff
	ff		 fnstcw	 WORD PTR tv295[ebp]
  020d1	0f b7 85 be fe
	ff ff		 movzx	 eax, WORD PTR tv295[ebp]
  020d8	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  020dd	89 85 b8 fe ff
	ff		 mov	 DWORD PTR tv298[ebp], eax
  020e3	d9 ad b8 fe ff
	ff		 fldcw	 WORD PTR tv298[ebp]
  020e9	db 9d b4 fe ff
	ff		 fistp	 DWORD PTR tv300[ebp]
  020ef	d9 ad be fe ff
	ff		 fldcw	 WORD PTR tv295[ebp]
  020f5	0f b6 95 b4 fe
	ff ff		 movzx	 edx, BYTE PTR tv300[ebp]
  020fc	52		 push	 edx
  020fd	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  02101	50		 push	 eax
  02102	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  02105	51		 push	 ecx
  02106	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  0210a	52		 push	 edx
  0210b	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  0210f	50		 push	 eax
  02110	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02113	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  0211a	52		 push	 edx
  0211b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0211e	8b 08		 mov	 ecx, DWORD PTR [eax]
  02120	51		 push	 ecx
  02121	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  02126	83 c4 34	 add	 esp, 52			; 00000034H

; 925  : 
; 926  : 			CItem EventItem;

  02129	8d 8d 00 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233508[ebp]
  0212f	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 927  : 
; 928  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  02134	6a 03		 push	 3
  02136	6a 00		 push	 0
  02138	68 ff 00 00 00	 push	 255			; 000000ffH
  0213d	6a 00		 push	 0
  0213f	6a 00		 push	 0
  02141	6a 01		 push	 1
  02143	6a 00		 push	 0
  02145	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  02149	50		 push	 eax
  0214a	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  0214e	51		 push	 ecx
  0214f	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  02153	52		 push	 edx
  02154	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  02157	50		 push	 eax
  02158	8d 8d 00 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233508[ebp]
  0215e	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 929  : 
; 930  : 			LogAddTD("[%s][%s][Ring Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d op1:%d op2:%d op3:%d",
; 931  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 932  : 				type, level, Option1, Option2, Option3);

  02163	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  02166	50		 push	 eax
  02167	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  0216a	51		 push	 ecx
  0216b	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  0216e	52		 push	 edx
  0216f	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  02172	50		 push	 eax
  02173	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  02176	51		 push	 ecx
  02177	8d 8d 00 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233508[ebp]
  0217d	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  02182	50		 push	 eax
  02183	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02186	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  0218d	50		 push	 eax
  0218e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02191	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  02198	52		 push	 edx
  02199	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0219c	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  021a3	51		 push	 ecx
  021a4	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  021a7	83 c2 77	 add	 edx, 119		; 00000077H
  021aa	52		 push	 edx
  021ab	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  021ae	83 c0 6c	 add	 eax, 108		; 0000006cH
  021b1	50		 push	 eax
  021b2	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@
  021b7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  021bd	83 c4 30	 add	 esp, 48			; 00000030H

; 933  : 
; 934  : 			return;

  021c0	eb 42		 jmp	 SHORT $LN17@RingEventI
$LN15@RingEventI:

; 935  : 		}
; 936  : 	}
; 937  : 
; 938  : 	x = lpObj->X;

  021c2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  021c5	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  021cc	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 939  : 	y = lpObj->Y;

  021cf	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  021d2	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  021d9	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 940  : 	MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  021dc	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  021df	50		 push	 eax
  021e0	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  021e3	51		 push	 ecx
  021e4	68 a0 86 01 00	 push	 100000			; 000186a0H
  021e9	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  021ec	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  021f3	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  021f9	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  021ff	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN17@RingEventI:

; 941  : }

  02204	5f		 pop	 edi
  02205	5e		 pop	 esi
  02206	5b		 pop	 ebx
  02207	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0220a	33 cd		 xor	 ecx, ebp
  0220c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  02211	8b e5		 mov	 esp, ebp
  02213	5d		 pop	 ebp
  02214	c3		 ret	 0
?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; RingEventItemBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; FriendShipItemBoxOpen
EXTRN	?FriendShipItemBag@@3PAVCItemBag@@A:DWORD	; FriendShipItemBag
;	COMDAT ??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@
CONST	SEGMENT
??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@ DB '['
	DB	'%s][%s][FriendShip Ring Event](%d,%d,%d) ItemDrop : Item:%s %'
	DB	'd Level:%d op1:%d op2:%d op3:%d', 00H	; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv290 = -328						; size = 4
tv288 = -324						; size = 4
tv285 = -318						; size = 2
_EventItem$233540 = -252				; size = 212
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; FriendShipItemBoxOpen

; 944  : {

  02220	55		 push	 ebp
  02221	8b ec		 mov	 ebp, esp
  02223	81 ec 48 01 00
	00		 sub	 esp, 328		; 00000148H
  02229	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0222e	33 c5		 xor	 eax, ebp
  02230	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  02233	53		 push	 ebx
  02234	56		 push	 esi
  02235	57		 push	 edi

; 945  : 	float dur;
; 946  : 	int type;
; 947  : 	int level;
; 948  : 	int x;
; 949  : 	int y;
; 950  : 	int Option1=0;

  02236	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 951  : 	int Option2=0;

  0223d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 952  : 	int Option3=0;

  02244	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 953  : 	int DropItemNum;
; 954  : 
; 955  : 	if ( FriendShipItemBag->GetBagCount() > 0 ) //season 3.0 fixed

  0224b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  02251	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  02256	85 c0		 test	 eax, eax
  02258	0f 8e c1 03 00
	00		 jle	 $LN9@FriendShip

; 956  : 	{
; 957  : 		if ( true )

  0225e	b8 01 00 00 00	 mov	 eax, 1
  02263	85 c0		 test	 eax, eax
  02265	0f 84 b4 03 00
	00		 je	 $LN9@FriendShip

; 958  : 		{
; 959  : 			DropItemNum = rand()%FriendShipItemBag->GetBagCount(); //season 3.0 fixed

  0226b	e8 00 00 00 00	 call	 _rand
  02270	8b f0		 mov	 esi, eax
  02272	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  02278	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  0227d	8b c8		 mov	 ecx, eax
  0227f	8b c6		 mov	 eax, esi
  02281	99		 cdq
  02282	f7 f9		 idiv	 ecx
  02284	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 960  : 			dur=0;

  02287	d9 ee		 fldz
  02289	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 961  : 			x = lpObj->X;

  0228c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0228f	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  02296	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 962  : 			y = lpObj->Y;

  02299	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0229c	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  022a3	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 963  : 
; 964  : 			level = FriendShipItemBag->GetLevel(DropItemNum) + rand()%3; //season 3.0 fixed and changed

  022a6	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  022a9	50		 push	 eax
  022aa	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  022b0	8b 11		 mov	 edx, DWORD PTR [ecx]
  022b2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  022b8	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  022bb	ff d0		 call	 eax
  022bd	0f b6 f0	 movzx	 esi, al
  022c0	e8 00 00 00 00	 call	 _rand
  022c5	99		 cdq
  022c6	b9 03 00 00 00	 mov	 ecx, 3
  022cb	f7 f9		 idiv	 ecx
  022cd	03 f2		 add	 esi, edx
  022cf	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 965  : 
; 966  : 			type = ItemGetNumberMake(FriendShipItemBag->GetType(DropItemNum), FriendShipItemBag->GetIndex(DropItemNum)); //season 3.0 fixed

  022d2	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  022d5	50		 push	 eax
  022d6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  022dc	8b 11		 mov	 edx, DWORD PTR [ecx]
  022de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  022e4	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  022e7	ff d0		 call	 eax
  022e9	0f b6 c8	 movzx	 ecx, al
  022ec	51		 push	 ecx
  022ed	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  022f0	52		 push	 edx
  022f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  022f6	8b 10		 mov	 edx, DWORD PTR [eax]
  022f8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  022fe	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  02301	ff d0		 call	 eax
  02303	0f b6 c8	 movzx	 ecx, al
  02306	51		 push	 ecx
  02307	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  0230c	83 c4 08	 add	 esp, 8
  0230f	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 967  : 			Option1 = 1;

  02312	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1

; 968  : 			Option2 = rand()%2;

  02319	e8 00 00 00 00	 call	 _rand
  0231e	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  02323	79 05		 jns	 SHORT $LN13@FriendShip
  02325	48		 dec	 eax
  02326	83 c8 fe	 or	 eax, -2			; fffffffeH
  02329	40		 inc	 eax
$LN13@FriendShip:
  0232a	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 969  : 
; 970  : 			if ( (rand()%5) <1 )

  0232d	e8 00 00 00 00	 call	 _rand
  02332	99		 cdq
  02333	b9 05 00 00 00	 mov	 ecx, 5
  02338	f7 f9		 idiv	 ecx
  0233a	83 fa 01	 cmp	 edx, 1
  0233d	7d 09		 jge	 SHORT $LN8@FriendShip

; 971  : 				Option3 = 3;

  0233f	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 972  : 			else

  02346	eb 10		 jmp	 SHORT $LN7@FriendShip
$LN8@FriendShip:

; 973  : 				Option3 = rand()%3;

  02348	e8 00 00 00 00	 call	 _rand
  0234d	99		 cdq
  0234e	b9 03 00 00 00	 mov	 ecx, 3
  02353	f7 f9		 idiv	 ecx
  02355	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@FriendShip:

; 974  : 
; 975  : 			if ( type == ITEMGET(12,15) ||
; 976  : 				 type == ITEMGET(14,13) ||
; 977  : 				 type == ITEMGET(14,14) ||
; 978  : 				 type == ITEMGET(14,14) ||
; 979  : 				 type == ITEMGET(14,16)	||
; 980  : 				 type == ITEMGET(14,22)	||
; 981  : 				 type == ITEMGET(14,31)	||
; 982  : 				 type == ITEMGET(14,41)	||
; 983  : 				 type == ITEMGET(14,42)	||
; 984  : 				 type == ITEMGET(14,180)||
; 985  : 				 type == ITEMGET(14,181)||
; 986  : 				 type == ITEMGET(14,182)||
; 987  : 				 type == ITEMGET(14,183)||
; 988  : 				 type == ITEMGET(14,184)||
; 989  : 				 type == ITEMGET(14,185)||
; 990  : 				 type == ITEMGET(14,186)||
; 991  : 				 type == ITEMGET(14,187)||
; 992  : 				 type == ITEMGET(14,190)||
; 993  : 				 type == ITEMGET(14,43) ||
; 994  : 				 type == ITEMGET(14,44) )

  02358	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  0235f	0f 84 bb 00 00
	00		 je	 $LN5@FriendShip
  02365	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  0236c	0f 84 ae 00 00
	00		 je	 $LN5@FriendShip
  02372	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  02379	0f 84 a1 00 00
	00		 je	 $LN5@FriendShip
  0237f	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  02386	0f 84 94 00 00
	00		 je	 $LN5@FriendShip
  0238c	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  02393	0f 84 87 00 00
	00		 je	 $LN5@FriendShip
  02399	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  023a0	74 7e		 je	 SHORT $LN5@FriendShip
  023a2	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  023a9	74 75		 je	 SHORT $LN5@FriendShip
  023ab	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  023b2	74 6c		 je	 SHORT $LN5@FriendShip
  023b4	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  023bb	74 63		 je	 SHORT $LN5@FriendShip
  023bd	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  023c4	74 5a		 je	 SHORT $LN5@FriendShip
  023c6	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  023cd	74 51		 je	 SHORT $LN5@FriendShip
  023cf	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  023d6	74 48		 je	 SHORT $LN5@FriendShip
  023d8	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  023df	74 3f		 je	 SHORT $LN5@FriendShip
  023e1	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  023e8	74 36		 je	 SHORT $LN5@FriendShip
  023ea	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  023f1	74 2d		 je	 SHORT $LN5@FriendShip
  023f3	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  023fa	74 24		 je	 SHORT $LN5@FriendShip
  023fc	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  02403	74 1b		 je	 SHORT $LN5@FriendShip
  02405	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  0240c	74 12		 je	 SHORT $LN5@FriendShip
  0240e	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  02415	74 09		 je	 SHORT $LN5@FriendShip
  02417	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  0241e	75 1c		 jne	 SHORT $LN6@FriendShip
$LN5@FriendShip:

; 995  : 			{
; 996  : 				Option1 = 0;

  02420	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 997  : 				Option2 = 0;

  02427	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 998  : 				Option3 = 0;

  0242e	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 999  : 				level = 0;

  02435	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN6@FriendShip:

; 1000 : 			}
; 1001 : 
; 1002 : 			if ( type == ITEMGET(12,30)	||
; 1003 : 				 type == ITEMGET(12,31)	||
; 1004 : 				 type == ITEMGET(12,136)||
; 1005 : 				 type == ITEMGET(12,137)||
; 1006 : 				 type == ITEMGET(12,138)||
; 1007 : 				 type == ITEMGET(12,139)||
; 1008 : 				 type == ITEMGET(12,140)||
; 1009 : 				 type == ITEMGET(12,141)||
; 1010 : 				 type == ITEMGET(12,142)||
; 1011 : 				 type == ITEMGET(12,143))

  0243c	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  02443	74 51		 je	 SHORT $LN3@FriendShip
  02445	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  0244c	74 48		 je	 SHORT $LN3@FriendShip
  0244e	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  02455	74 3f		 je	 SHORT $LN3@FriendShip
  02457	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  0245e	74 36		 je	 SHORT $LN3@FriendShip
  02460	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  02467	74 2d		 je	 SHORT $LN3@FriendShip
  02469	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  02470	74 24		 je	 SHORT $LN3@FriendShip
  02472	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  02479	74 1b		 je	 SHORT $LN3@FriendShip
  0247b	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  02482	74 12		 je	 SHORT $LN3@FriendShip
  02484	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  0248b	74 09		 je	 SHORT $LN3@FriendShip
  0248d	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  02494	75 32		 jne	 SHORT $LN4@FriendShip
$LN3@FriendShip:

; 1012 : 			{
; 1013 : 				Option1 = 0;

  02496	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1014 : 				Option2 = 0;

  0249d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1015 : 				Option3 = 0;

  024a4	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1016 : 				level = FriendShipItemBag->GetLevel(DropItemNum);

  024ab	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  024ae	50		 push	 eax
  024af	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  024b5	8b 11		 mov	 edx, DWORD PTR [ecx]
  024b7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  024bd	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  024c0	ff d0		 call	 eax
  024c2	0f b6 c8	 movzx	 ecx, al
  024c5	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN4@FriendShip:

; 1017 : 			}
; 1018 : 
; 1019 : 			if ( type == ITEMGET(13,0) ||
; 1020 : 				 type == ITEMGET(13,1) ||
; 1021 : 				 type == ITEMGET(13,2) ||
; 1022 : 				 type == ITEMGET(13,8) ||
; 1023 : 				 type == ITEMGET(13,9) ||
; 1024 : 				 type == ITEMGET(13,12) ||
; 1025 : 				 type == ITEMGET(13,13) )

  024c8	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  024cf	74 36		 je	 SHORT $LN1@FriendShip
  024d1	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  024d8	74 2d		 je	 SHORT $LN1@FriendShip
  024da	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  024e1	74 24		 je	 SHORT $LN1@FriendShip
  024e3	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  024ea	74 1b		 je	 SHORT $LN1@FriendShip
  024ec	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  024f3	74 12		 je	 SHORT $LN1@FriendShip
  024f5	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  024fc	74 09		 je	 SHORT $LN1@FriendShip
  024fe	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  02505	75 07		 jne	 SHORT $LN2@FriendShip
$LN1@FriendShip:

; 1026 : 			{
; 1027 : 				level = 0;

  02507	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@FriendShip:

; 1028 : 			}
; 1029 : 
; 1030 : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0250e	6a 00		 push	 0
  02510	6a 00		 push	 0
  02512	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02515	8b 08		 mov	 ecx, DWORD PTR [eax]
  02517	51		 push	 ecx
  02518	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  0251c	52		 push	 edx
  0251d	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  02521	50		 push	 eax
  02522	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  02526	51		 push	 ecx
  02527	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  0252a	d9 bd c2 fe ff
	ff		 fnstcw	 WORD PTR tv285[ebp]
  02530	0f b7 85 c2 fe
	ff ff		 movzx	 eax, WORD PTR tv285[ebp]
  02537	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  0253c	89 85 bc fe ff
	ff		 mov	 DWORD PTR tv288[ebp], eax
  02542	d9 ad bc fe ff
	ff		 fldcw	 WORD PTR tv288[ebp]
  02548	db 9d b8 fe ff
	ff		 fistp	 DWORD PTR tv290[ebp]
  0254e	d9 ad c2 fe ff
	ff		 fldcw	 WORD PTR tv285[ebp]
  02554	0f b6 95 b8 fe
	ff ff		 movzx	 edx, BYTE PTR tv290[ebp]
  0255b	52		 push	 edx
  0255c	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  02560	50		 push	 eax
  02561	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  02564	51		 push	 ecx
  02565	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  02569	52		 push	 edx
  0256a	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  0256e	50		 push	 eax
  0256f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02572	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  02579	52		 push	 edx
  0257a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0257d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0257f	51		 push	 ecx
  02580	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  02585	83 c4 34	 add	 esp, 52			; 00000034H

; 1031 : 
; 1032 : 			CItem EventItem;

  02588	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233540[ebp]
  0258e	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1033 : 
; 1034 : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  02593	6a 03		 push	 3
  02595	6a 00		 push	 0
  02597	68 ff 00 00 00	 push	 255			; 000000ffH
  0259c	6a 00		 push	 0
  0259e	6a 00		 push	 0
  025a0	6a 01		 push	 1
  025a2	6a 00		 push	 0
  025a4	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  025a8	50		 push	 eax
  025a9	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  025ad	51		 push	 ecx
  025ae	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  025b2	52		 push	 edx
  025b3	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  025b6	50		 push	 eax
  025b7	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233540[ebp]
  025bd	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 1035 : 
; 1036 : 			LogAddTD("[%s][%s][FriendShip Ring Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d op1:%d op2:%d op3:%d", lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(), type, level, Option1, Option2, Option3);

  025c2	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  025c5	50		 push	 eax
  025c6	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  025c9	51		 push	 ecx
  025ca	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  025cd	52		 push	 edx
  025ce	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  025d1	50		 push	 eax
  025d2	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  025d5	51		 push	 ecx
  025d6	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233540[ebp]
  025dc	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  025e1	50		 push	 eax
  025e2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  025e5	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  025ec	50		 push	 eax
  025ed	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  025f0	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  025f7	52		 push	 edx
  025f8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  025fb	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02602	51		 push	 ecx
  02603	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02606	83 c2 77	 add	 edx, 119		; 00000077H
  02609	52		 push	 edx
  0260a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0260d	83 c0 6c	 add	 eax, 108		; 0000006cH
  02610	50		 push	 eax
  02611	68 00 00 00 00	 push	 OFFSET ??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@
  02616	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0261c	83 c4 30	 add	 esp, 48			; 00000030H
$LN9@FriendShip:

; 1037 : 			return;
; 1038 : 		}
; 1039 : 	}
; 1040 : }

  0261f	5f		 pop	 edi
  02620	5e		 pop	 esi
  02621	5b		 pop	 ebx
  02622	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  02625	33 cd		 xor	 ecx, ebp
  02627	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0262c	8b e5		 mov	 esp, ebp
  0262e	5d		 pop	 ebp
  0262f	c3		 ret	 0
?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; FriendShipItemBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@ ; `string'
PUBLIC	?EGReqRegDLOfflineGift@@YAXH@Z			; EGReqRegDLOfflineGift
PUBLIC	__$ArrayPad$
PUBLIC	?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; DarkLordHeartItemBoxOpen
EXTRN	?DarkLordHeartItemBag@@3PAVCItemBag@@A:DWORD	; DarkLordHeartItemBag
EXTRN	?g_iDarkLordHeartOffEventRate@@3HA:DWORD	; g_iDarkLordHeartOffEventRate
;	COMDAT ??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@
CONST	SEGMENT
??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Darklord Heart] : (%d)(X:%d/Y:%d'
	DB	') Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv344 = -336						; size = 4
tv342 = -332						; size = 4
tv339 = -326						; size = 2
_EventItem$233582 = -260				; size = 212
_rnd$233561 = -48					; size = 4
_DropItemRate$ = -44					; size = 4
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; DarkLordHeartItemBoxOpen

; 1043 : {

  02630	55		 push	 ebp
  02631	8b ec		 mov	 ebp, esp
  02633	81 ec 50 01 00
	00		 sub	 esp, 336		; 00000150H
  02639	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0263e	33 c5		 xor	 eax, ebp
  02640	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  02643	53		 push	 ebx
  02644	56		 push	 esi
  02645	57		 push	 edi

; 1044 : 	float dur;
; 1045 : 	int type;
; 1046 : 	int level;
; 1047 : 	int x;
; 1048 : 	int y;
; 1049 : 	int Option1=0;

  02646	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1050 : 	int Option2=0;

  0264d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1051 : 	int Option3=0;

  02654	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1052 : 	int DropItemNum;
; 1053 : 	int DropItemRate = 0;

  0265b	c7 45 d4 00 00
	00 00		 mov	 DWORD PTR _DropItemRate$[ebp], 0

; 1054 : 
; 1055 : 	if ( ((DWORD)rand()%60000) < (DWORD)g_iDarkLordHeartOffEventRate )	

  02662	e8 00 00 00 00	 call	 _rand
  02667	33 d2		 xor	 edx, edx
  02669	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  0266e	f7 f1		 div	 ecx
  02670	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_iDarkLordHeartOffEventRate@@3HA ; g_iDarkLordHeartOffEventRate
  02676	73 22		 jae	 SHORT $LN16@DarkLordHe

; 1056 : 	{
; 1057 : 		if ( lpObj->Level > 100 )

  02678	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0267b	0f bf 88 be 00
	00 00		 movsx	 ecx, WORD PTR [eax+190]
  02682	83 f9 64	 cmp	 ecx, 100		; 00000064H
  02685	7e 05		 jle	 SHORT $LN15@DarkLordHe

; 1058 : 		{
; 1059 : 			return;

  02687	e9 7e 04 00 00	 jmp	 $LN17@DarkLordHe
$LN15@DarkLordHe:

; 1060 : 		}
; 1061 : 
; 1062 : 		EGReqRegDLOfflineGift(lpObj->m_Index);

  0268c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0268f	8b 08		 mov	 ecx, DWORD PTR [eax]
  02691	51		 push	 ecx
  02692	e8 00 00 00 00	 call	 ?EGReqRegDLOfflineGift@@YAXH@Z ; EGReqRegDLOfflineGift
  02697	83 c4 04	 add	 esp, 4
$LN16@DarkLordHe:

; 1063 : 	}
; 1064 : 	
; 1065 : 	if ( DarkLordHeartItemBag->GetBagCount() > 0 )

  0269a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  026a0	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  026a5	85 c0		 test	 eax, eax
  026a7	0f 8e 1b 04 00
	00		 jle	 $LN13@DarkLordHe

; 1066 : 	{
; 1067 : 	
; 1068 : 		DropItemNum = rand()%DarkLordHeartItemBag->GetBagCount();

  026ad	e8 00 00 00 00	 call	 _rand
  026b2	8b f0		 mov	 esi, eax
  026b4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  026ba	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  026bf	8b c8		 mov	 ecx, eax
  026c1	8b c6		 mov	 eax, esi
  026c3	99		 cdq
  026c4	f7 f9		 idiv	 ecx
  026c6	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 1069 : 		DropItemRate = DarkLordHeartItemBag->GetOp1(DropItemNum);

  026c9	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  026cc	50		 push	 eax
  026cd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  026d3	8b 11		 mov	 edx, DWORD PTR [ecx]
  026d5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  026db	8b 42 18	 mov	 eax, DWORD PTR [edx+24]
  026de	ff d0		 call	 eax
  026e0	0f b6 c8	 movzx	 ecx, al
  026e3	89 4d d4	 mov	 DWORD PTR _DropItemRate$[ebp], ecx

; 1070 : 
; 1071 : 		if ( (rand()%100) < DropItemRate && lpObj->Level <= 100 )

  026e6	e8 00 00 00 00	 call	 _rand
  026eb	99		 cdq
  026ec	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  026f1	f7 f9		 idiv	 ecx
  026f3	3b 55 d4	 cmp	 edx, DWORD PTR _DropItemRate$[ebp]
  026f6	0f 8d cc 03 00
	00		 jge	 $LN13@DarkLordHe
  026fc	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  026ff	0f bf 88 be 00
	00 00		 movsx	 ecx, WORD PTR [eax+190]
  02706	83 f9 64	 cmp	 ecx, 100		; 00000064H
  02709	0f 8f b9 03 00
	00		 jg	 $LN13@DarkLordHe

; 1072 : 		{
; 1073 : 			level = DarkLordHeartItemBag->GetLevel(DropItemNum);

  0270f	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  02712	50		 push	 eax
  02713	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  02719	8b 11		 mov	 edx, DWORD PTR [ecx]
  0271b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  02721	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  02724	ff d0		 call	 eax
  02726	0f b6 c8	 movzx	 ecx, al
  02729	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx

; 1074 : 			dur=0;

  0272c	d9 ee		 fldz
  0272e	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 1075 : 			x = lpObj->X;

  02731	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02734	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  0273b	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 1076 : 			y = lpObj->Y;

  0273e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02741	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  02748	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 1077 : 			
; 1078 : 			type = ItemGetNumberMake(DarkLordHeartItemBag->GetType(DropItemNum), DarkLordHeartItemBag->GetIndex(DropItemNum));

  0274b	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0274e	50		 push	 eax
  0274f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  02755	8b 11		 mov	 edx, DWORD PTR [ecx]
  02757	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  0275d	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  02760	ff d0		 call	 eax
  02762	0f b6 c8	 movzx	 ecx, al
  02765	51		 push	 ecx
  02766	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  02769	52		 push	 edx
  0276a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  0276f	8b 10		 mov	 edx, DWORD PTR [eax]
  02771	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  02777	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  0277a	ff d0		 call	 eax
  0277c	0f b6 c8	 movzx	 ecx, al
  0277f	51		 push	 ecx
  02780	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  02785	83 c4 08	 add	 esp, 8
  02788	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 1079 : 			Option1 = ((rand()%100)>=70)?0:1;

  0278b	e8 00 00 00 00	 call	 _rand
  02790	99		 cdq
  02791	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02796	f7 f9		 idiv	 ecx
  02798	33 c0		 xor	 eax, eax
  0279a	83 fa 46	 cmp	 edx, 70			; 00000046H
  0279d	0f 9c c0	 setl	 al
  027a0	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 1080 : 			Option2 = ((rand()%100)>=10)?0:1;

  027a3	e8 00 00 00 00	 call	 _rand
  027a8	99		 cdq
  027a9	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  027ae	f7 f9		 idiv	 ecx
  027b0	33 c0		 xor	 eax, eax
  027b2	83 fa 0a	 cmp	 edx, 10			; 0000000aH
  027b5	0f 9c c0	 setl	 al
  027b8	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 1081 : 			int rnd = rand()%20;

  027bb	e8 00 00 00 00	 call	 _rand
  027c0	99		 cdq
  027c1	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  027c6	f7 f9		 idiv	 ecx
  027c8	89 55 d0	 mov	 DWORD PTR _rnd$233561[ebp], edx

; 1082 : 
; 1083 : 			if ( rnd < 1 )

  027cb	83 7d d0 01	 cmp	 DWORD PTR _rnd$233561[ebp], 1
  027cf	7d 09		 jge	 SHORT $LN12@DarkLordHe

; 1084 : 				Option3 = 3;

  027d1	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3
  027d8	eb 25		 jmp	 SHORT $LN7@DarkLordHe
$LN12@DarkLordHe:

; 1085 : 			else if ( rnd < 5 )

  027da	83 7d d0 05	 cmp	 DWORD PTR _rnd$233561[ebp], 5
  027de	7d 09		 jge	 SHORT $LN10@DarkLordHe

; 1086 : 				Option3 = 2;

  027e0	c7 45 dc 02 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 2
  027e7	eb 16		 jmp	 SHORT $LN7@DarkLordHe
$LN10@DarkLordHe:

; 1087 : 			else if ( rnd < 9 )

  027e9	83 7d d0 09	 cmp	 DWORD PTR _rnd$233561[ebp], 9
  027ed	7d 09		 jge	 SHORT $LN8@DarkLordHe

; 1088 : 				Option3 = 1;

  027ef	c7 45 dc 01 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 1

; 1089 : 			else

  027f6	eb 07		 jmp	 SHORT $LN7@DarkLordHe
$LN8@DarkLordHe:

; 1090 : 				Option3 = 0;

  027f8	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0
$LN7@DarkLordHe:

; 1091 : 
; 1092 : 			if ( type == ITEMGET(12,15) ||
; 1093 : 				 type == ITEMGET(14,13) ||
; 1094 : 				 type == ITEMGET(14,14) ||
; 1095 : 				 type == ITEMGET(14,14) ||
; 1096 : 				 type == ITEMGET(14,16)	||
; 1097 : 				 type == ITEMGET(14,22)	||
; 1098 : 				 type == ITEMGET(14,31)	||
; 1099 : 				 type == ITEMGET(14,41)	||
; 1100 : 				 type == ITEMGET(14,42)	||
; 1101 : 				 type == ITEMGET(14,180)||
; 1102 : 				 type == ITEMGET(14,181)||
; 1103 : 				 type == ITEMGET(14,182)||
; 1104 : 				 type == ITEMGET(14,183)||
; 1105 : 				 type == ITEMGET(14,184)||
; 1106 : 				 type == ITEMGET(14,185)||
; 1107 : 				 type == ITEMGET(14,186)||
; 1108 : 				 type == ITEMGET(14,187)||
; 1109 : 				 type == ITEMGET(14,190)||
; 1110 : 				 type == ITEMGET(14,43) ||
; 1111 : 				 type == ITEMGET(14,44) )

  027ff	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  02806	0f 84 bb 00 00
	00		 je	 $LN5@DarkLordHe
  0280c	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  02813	0f 84 ae 00 00
	00		 je	 $LN5@DarkLordHe
  02819	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  02820	0f 84 a1 00 00
	00		 je	 $LN5@DarkLordHe
  02826	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  0282d	0f 84 94 00 00
	00		 je	 $LN5@DarkLordHe
  02833	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  0283a	0f 84 87 00 00
	00		 je	 $LN5@DarkLordHe
  02840	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  02847	74 7e		 je	 SHORT $LN5@DarkLordHe
  02849	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  02850	74 75		 je	 SHORT $LN5@DarkLordHe
  02852	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  02859	74 6c		 je	 SHORT $LN5@DarkLordHe
  0285b	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  02862	74 63		 je	 SHORT $LN5@DarkLordHe
  02864	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  0286b	74 5a		 je	 SHORT $LN5@DarkLordHe
  0286d	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  02874	74 51		 je	 SHORT $LN5@DarkLordHe
  02876	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  0287d	74 48		 je	 SHORT $LN5@DarkLordHe
  0287f	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  02886	74 3f		 je	 SHORT $LN5@DarkLordHe
  02888	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  0288f	74 36		 je	 SHORT $LN5@DarkLordHe
  02891	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  02898	74 2d		 je	 SHORT $LN5@DarkLordHe
  0289a	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  028a1	74 24		 je	 SHORT $LN5@DarkLordHe
  028a3	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  028aa	74 1b		 je	 SHORT $LN5@DarkLordHe
  028ac	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  028b3	74 12		 je	 SHORT $LN5@DarkLordHe
  028b5	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  028bc	74 09		 je	 SHORT $LN5@DarkLordHe
  028be	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  028c5	75 1c		 jne	 SHORT $LN6@DarkLordHe
$LN5@DarkLordHe:

; 1112 : 			{
; 1113 : 				Option1 = 0;

  028c7	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1114 : 				Option2 = 0;

  028ce	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1115 : 				Option3 = 0;

  028d5	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1116 : 				level = 0;

  028dc	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN6@DarkLordHe:

; 1117 : 			}
; 1118 : 
; 1119 : 			if ( type == ITEMGET(12,30)	||
; 1120 : 				 type == ITEMGET(12,31)	||
; 1121 : 				 type == ITEMGET(12,136)||
; 1122 : 				 type == ITEMGET(12,137)||
; 1123 : 				 type == ITEMGET(12,138)||
; 1124 : 				 type == ITEMGET(12,139)||
; 1125 : 				 type == ITEMGET(12,140)||
; 1126 : 				 type == ITEMGET(12,141)||
; 1127 : 				 type == ITEMGET(12,142)||
; 1128 : 				 type == ITEMGET(12,143))

  028e3	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  028ea	74 51		 je	 SHORT $LN3@DarkLordHe
  028ec	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  028f3	74 48		 je	 SHORT $LN3@DarkLordHe
  028f5	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  028fc	74 3f		 je	 SHORT $LN3@DarkLordHe
  028fe	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  02905	74 36		 je	 SHORT $LN3@DarkLordHe
  02907	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  0290e	74 2d		 je	 SHORT $LN3@DarkLordHe
  02910	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  02917	74 24		 je	 SHORT $LN3@DarkLordHe
  02919	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  02920	74 1b		 je	 SHORT $LN3@DarkLordHe
  02922	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  02929	74 12		 je	 SHORT $LN3@DarkLordHe
  0292b	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  02932	74 09		 je	 SHORT $LN3@DarkLordHe
  02934	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  0293b	75 32		 jne	 SHORT $LN4@DarkLordHe
$LN3@DarkLordHe:

; 1129 : 			{
; 1130 : 				Option1 = 0;

  0293d	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1131 : 				Option2 = 0;

  02944	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1132 : 				Option3 = 0;

  0294b	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1133 : 				level = DarkLordHeartItemBag->GetLevel(DropItemNum);

  02952	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  02955	50		 push	 eax
  02956	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  0295c	8b 11		 mov	 edx, DWORD PTR [ecx]
  0295e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  02964	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  02967	ff d0		 call	 eax
  02969	0f b6 c8	 movzx	 ecx, al
  0296c	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN4@DarkLordHe:

; 1134 : 			}
; 1135 : 
; 1136 : 			if ( type == ITEMGET(13,0) ||
; 1137 : 				 type == ITEMGET(13,1) ||
; 1138 : 				 type == ITEMGET(13,2) ||
; 1139 : 				 type == ITEMGET(13,8) ||
; 1140 : 				 type == ITEMGET(13,9) ||
; 1141 : 				 type == ITEMGET(13,12) ||
; 1142 : 				 type == ITEMGET(13,13) )

  0296f	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  02976	74 36		 je	 SHORT $LN1@DarkLordHe
  02978	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  0297f	74 2d		 je	 SHORT $LN1@DarkLordHe
  02981	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  02988	74 24		 je	 SHORT $LN1@DarkLordHe
  0298a	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  02991	74 1b		 je	 SHORT $LN1@DarkLordHe
  02993	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  0299a	74 12		 je	 SHORT $LN1@DarkLordHe
  0299c	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  029a3	74 09		 je	 SHORT $LN1@DarkLordHe
  029a5	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  029ac	75 07		 jne	 SHORT $LN2@DarkLordHe
$LN1@DarkLordHe:

; 1143 : 			{
; 1144 : 				level = 0;

  029ae	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@DarkLordHe:

; 1145 : 			}
; 1146 : 
; 1147 : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1148 : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  029b5	6a 00		 push	 0
  029b7	6a 00		 push	 0
  029b9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  029bc	8b 08		 mov	 ecx, DWORD PTR [eax]
  029be	51		 push	 ecx
  029bf	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  029c3	52		 push	 edx
  029c4	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  029c8	50		 push	 eax
  029c9	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  029cd	51		 push	 ecx
  029ce	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  029d1	d9 bd ba fe ff
	ff		 fnstcw	 WORD PTR tv339[ebp]
  029d7	0f b7 85 ba fe
	ff ff		 movzx	 eax, WORD PTR tv339[ebp]
  029de	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  029e3	89 85 b4 fe ff
	ff		 mov	 DWORD PTR tv342[ebp], eax
  029e9	d9 ad b4 fe ff
	ff		 fldcw	 WORD PTR tv342[ebp]
  029ef	db 9d b0 fe ff
	ff		 fistp	 DWORD PTR tv344[ebp]
  029f5	d9 ad ba fe ff
	ff		 fldcw	 WORD PTR tv339[ebp]
  029fb	0f b6 95 b0 fe
	ff ff		 movzx	 edx, BYTE PTR tv344[ebp]
  02a02	52		 push	 edx
  02a03	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  02a07	50		 push	 eax
  02a08	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  02a0b	51		 push	 ecx
  02a0c	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  02a10	52		 push	 edx
  02a11	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  02a15	50		 push	 eax
  02a16	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02a19	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  02a20	52		 push	 edx
  02a21	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02a24	8b 08		 mov	 ecx, DWORD PTR [eax]
  02a26	51		 push	 ecx
  02a27	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  02a2c	83 c4 34	 add	 esp, 52			; 00000034H

; 1149 : 
; 1150 : 			CItem EventItem;

  02a2f	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233582[ebp]
  02a35	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1151 : 
; 1152 : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  02a3a	6a 03		 push	 3
  02a3c	6a 00		 push	 0
  02a3e	68 ff 00 00 00	 push	 255			; 000000ffH
  02a43	6a 00		 push	 0
  02a45	6a 00		 push	 0
  02a47	6a 01		 push	 1
  02a49	6a 00		 push	 0
  02a4b	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  02a4f	50		 push	 eax
  02a50	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  02a54	51		 push	 ecx
  02a55	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  02a59	52		 push	 edx
  02a5a	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  02a5d	50		 push	 eax
  02a5e	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233582[ebp]
  02a64	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 1153 : 
; 1154 : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Darklord Heart] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 1155 : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 1156 : 				type, level, Option1, Option2, Option3);

  02a69	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  02a6c	50		 push	 eax
  02a6d	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  02a70	51		 push	 ecx
  02a71	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  02a74	52		 push	 edx
  02a75	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  02a78	50		 push	 eax
  02a79	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  02a7c	51		 push	 ecx
  02a7d	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233582[ebp]
  02a83	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  02a88	50		 push	 eax
  02a89	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02a8c	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  02a93	50		 push	 eax
  02a94	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02a97	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  02a9e	52		 push	 edx
  02a9f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02aa2	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  02aa9	51		 push	 ecx
  02aaa	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02aad	83 c2 77	 add	 edx, 119		; 00000077H
  02ab0	52		 push	 edx
  02ab1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ab4	83 c0 6c	 add	 eax, 108		; 0000006cH
  02ab7	50		 push	 eax
  02ab8	68 00 00 00 00	 push	 OFFSET ??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@
  02abd	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  02ac3	83 c4 30	 add	 esp, 48			; 00000030H

; 1157 : 
; 1158 : 			return;

  02ac6	eb 42		 jmp	 SHORT $LN17@DarkLordHe
$LN13@DarkLordHe:

; 1159 : 		}
; 1160 : 	}
; 1161 : 
; 1162 : 	x = lpObj->X;

  02ac8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02acb	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  02ad2	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 1163 : 	y = lpObj->Y;

  02ad5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ad8	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  02adf	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 1164 : 	MapC[lpObj->MapNumber].MoneyItemDrop(10000, x, y);

  02ae2	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  02ae5	50		 push	 eax
  02ae6	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  02ae9	51		 push	 ecx
  02aea	68 10 27 00 00	 push	 10000			; 00002710H
  02aef	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02af2	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  02af9	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  02aff	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  02b05	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN17@DarkLordHe:

; 1165 : }

  02b0a	5f		 pop	 edi
  02b0b	5e		 pop	 esi
  02b0c	5b		 pop	 ebx
  02b0d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  02b10	33 cd		 xor	 ecx, ebp
  02b12	e8 00 00 00 00	 call	 @__security_check_cookie@4
  02b17	8b e5		 mov	 esp, ebp
  02b19	5d		 pop	 ebp
  02b1a	c3		 ret	 0
?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; DarkLordHeartItemBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; HiddenTreasureBoxItemBoxOpen
EXTRN	?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A:BYTE	; ItemAttribute
EXTRN	?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z:PROC	; ItemIsBufExOption
EXTRN	?NewOptionRand@@YAEH@Z:PROC			; NewOptionRand
EXTRN	?GetMinLevel@CItemBagEx@@QAEEH@Z:PROC		; CItemBagEx::GetMinLevel
EXTRN	?PickItem@CItemBagEx@@QAEHAAVCItem@@AAH@Z:PROC	; CItemBagEx::PickItem
EXTRN	?HiddenTreasureBoxItemBag@@3PAVCItemBagEx@@A:DWORD ; HiddenTreasureBoxItemBag
;	COMDAT ??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Event ZenDrop : %d : (%d)('
	DB	'%d/%d)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Event ItemDrop : (%d)(%d/%'
	DB	'd) Item:(%s)%d Level:%d op1:%d op2:%d op3:%d exop:[%d,%d,%d,%'
	DB	'd,%d,%d]', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Item Pick Failed - Data Er'
	DB	'ror', 00H					; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv283 = -312						; size = 4
tv281 = -308						; size = 4
tv278 = -302						; size = 2
_money$233611 = -236					; size = 4
_NewOption$233608 = -232				; size = 8
_iItemSuccessRate$ = -224				; size = 4
_nItemIndex$ = -220					; size = 4
_objTempItem$ = -216					; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC ; HiddenTreasureBoxItemBoxOpen

; 1171 : {

  02b20	55		 push	 ebp
  02b21	8b ec		 mov	 ebp, esp
  02b23	81 ec 38 01 00
	00		 sub	 esp, 312		; 00000138H
  02b29	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  02b2e	33 c5		 xor	 eax, ebp
  02b30	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  02b33	53		 push	 ebx
  02b34	56		 push	 esi
  02b35	57		 push	 edi

; 1172 : 	CItem objTempItem;

  02b36	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _objTempItem$[ebp]
  02b3c	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1173 : 	int nItemIndex;
; 1174 : 
; 1175 : 	if ( HiddenTreasureBoxItemBag->PickItem(objTempItem, nItemIndex) == FALSE )

  02b41	8d 85 24 ff ff
	ff		 lea	 eax, DWORD PTR _nItemIndex$[ebp]
  02b47	50		 push	 eax
  02b48	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _objTempItem$[ebp]
  02b4e	51		 push	 ecx
  02b4f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HiddenTreasureBoxItemBag@@3PAVCItemBagEx@@A ; HiddenTreasureBoxItemBag
  02b55	e8 00 00 00 00	 call	 ?PickItem@CItemBagEx@@QAEHAAVCItem@@AAH@Z ; CItemBagEx::PickItem
  02b5a	85 c0		 test	 eax, eax
  02b5c	75 57		 jne	 SHORT $LN9@HiddenTrea

; 1176 : 	{
; 1177 : 		LogAddTD("[Hidden TreasureBox Event] [%s][%s] Item Pick Failed - Data Error",
; 1178 : 			lpObj->AccountID, lpObj->Name);

  02b5e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02b61	83 c0 77	 add	 eax, 119		; 00000077H
  02b64	50		 push	 eax
  02b65	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02b68	83 c1 6c	 add	 ecx, 108		; 0000006cH
  02b6b	51		 push	 ecx
  02b6c	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  02b71	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  02b77	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1179 : 
; 1180 : 		MapC[lpObj->MapNumber].MoneyItemDrop(200000, lpObj->X, lpObj->Y);

  02b7a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02b7d	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  02b84	51		 push	 ecx
  02b85	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02b88	0f bf 82 44 01
	00 00		 movsx	 eax, WORD PTR [edx+324]
  02b8f	50		 push	 eax
  02b90	68 40 0d 03 00	 push	 200000			; 00030d40H
  02b95	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02b98	0f b6 89 49 01
	00 00		 movzx	 ecx, BYTE PTR [ecx+329]
  02b9f	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  02ba5	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  02bab	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 1181 : 		return;

  02bb0	e9 99 02 00 00	 jmp	 $LN10@HiddenTrea
$LN9@HiddenTrea:

; 1182 : 	}
; 1183 : 
; 1184 : 	int iItemSuccessRate = HiddenTreasureBoxItemBag->GetMinLevel(nItemIndex);

  02bb5	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _nItemIndex$[ebp]
  02bbb	50		 push	 eax
  02bbc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HiddenTreasureBoxItemBag@@3PAVCItemBagEx@@A ; HiddenTreasureBoxItemBag
  02bc2	e8 00 00 00 00	 call	 ?GetMinLevel@CItemBagEx@@QAEEH@Z ; CItemBagEx::GetMinLevel
  02bc7	0f b6 c8	 movzx	 ecx, al
  02bca	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _iItemSuccessRate$[ebp], ecx

; 1185 : 
; 1186 : 	if ( (rand()%100) < iItemSuccessRate )

  02bd0	e8 00 00 00 00	 call	 _rand
  02bd5	99		 cdq
  02bd6	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  02bdb	f7 f9		 idiv	 ecx
  02bdd	3b 95 20 ff ff
	ff		 cmp	 edx, DWORD PTR _iItemSuccessRate$[ebp]
  02be3	0f 8d df 01 00
	00		 jge	 $LN8@HiddenTrea

; 1187 : 	{
; 1188 : 		objTempItem.m_Level = 0;

  02be9	33 c0		 xor	 eax, eax
  02beb	66 89 85 30 ff
	ff ff		 mov	 WORD PTR _objTempItem$[ebp+8], ax

; 1189 : 
; 1190 : 		if ( objTempItem.m_Option1 )

  02bf2	0f b6 45 bc	 movzx	 eax, BYTE PTR _objTempItem$[ebp+148]
  02bf6	85 c0		 test	 eax, eax
  02bf8	74 14		 je	 SHORT $LN7@HiddenTrea

; 1191 : 			objTempItem.m_Option1 = rand()%2;

  02bfa	e8 00 00 00 00	 call	 _rand
  02bff	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  02c04	79 05		 jns	 SHORT $LN12@HiddenTrea
  02c06	48		 dec	 eax
  02c07	83 c8 fe	 or	 eax, -2			; fffffffeH
  02c0a	40		 inc	 eax
$LN12@HiddenTrea:
  02c0b	88 45 bc	 mov	 BYTE PTR _objTempItem$[ebp+148], al
$LN7@HiddenTrea:

; 1192 : 
; 1193 : 		if ( objTempItem.m_Option2 )

  02c0e	0f b6 45 bd	 movzx	 eax, BYTE PTR _objTempItem$[ebp+149]
  02c12	85 c0		 test	 eax, eax
  02c14	74 14		 je	 SHORT $LN6@HiddenTrea

; 1194 : 			objTempItem.m_Option2 = rand()%2;

  02c16	e8 00 00 00 00	 call	 _rand
  02c1b	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  02c20	79 05		 jns	 SHORT $LN13@HiddenTrea
  02c22	48		 dec	 eax
  02c23	83 c8 fe	 or	 eax, -2			; fffffffeH
  02c26	40		 inc	 eax
$LN13@HiddenTrea:
  02c27	88 45 bd	 mov	 BYTE PTR _objTempItem$[ebp+149], al
$LN6@HiddenTrea:

; 1195 : 
; 1196 : 		if ( objTempItem.m_Option3 )

  02c2a	0f b6 45 be	 movzx	 eax, BYTE PTR _objTempItem$[ebp+150]
  02c2e	85 c0		 test	 eax, eax
  02c30	74 28		 je	 SHORT $LN3@HiddenTrea

; 1197 : 			if ( (rand()%5) <1 )

  02c32	e8 00 00 00 00	 call	 _rand
  02c37	99		 cdq
  02c38	b9 05 00 00 00	 mov	 ecx, 5
  02c3d	f7 f9		 idiv	 ecx
  02c3f	83 fa 01	 cmp	 edx, 1
  02c42	7d 06		 jge	 SHORT $LN4@HiddenTrea

; 1198 : 				objTempItem.m_Option3 = 3;

  02c44	c6 45 be 03	 mov	 BYTE PTR _objTempItem$[ebp+150], 3

; 1199 : 			else

  02c48	eb 10		 jmp	 SHORT $LN3@HiddenTrea
$LN4@HiddenTrea:

; 1200 : 				objTempItem.m_Option3 = rand()%3;

  02c4a	e8 00 00 00 00	 call	 _rand
  02c4f	99		 cdq
  02c50	b9 03 00 00 00	 mov	 ecx, 3
  02c55	f7 f9		 idiv	 ecx
  02c57	88 55 be	 mov	 BYTE PTR _objTempItem$[ebp+150], dl
$LN3@HiddenTrea:

; 1201 : 
; 1202 : 		if ( objTempItem.m_NewOption )

  02c5a	0f b6 45 bf	 movzx	 eax, BYTE PTR _objTempItem$[ebp+151]
  02c5e	85 c0		 test	 eax, eax
  02c60	74 1b		 je	 SHORT $LN2@HiddenTrea

; 1203 : 		{
; 1204 : 			objTempItem.m_NewOption = NewOptionRand(objTempItem.m_Level);

  02c62	0f bf 85 30 ff
	ff ff		 movsx	 eax, WORD PTR _objTempItem$[ebp+8]
  02c69	50		 push	 eax
  02c6a	e8 00 00 00 00	 call	 ?NewOptionRand@@YAEH@Z	; NewOptionRand
  02c6f	83 c4 04	 add	 esp, 4
  02c72	88 45 bf	 mov	 BYTE PTR _objTempItem$[ebp+151], al

; 1205 : 			objTempItem.m_Option1 = 1;

  02c75	c6 45 bc 01	 mov	 BYTE PTR _objTempItem$[ebp+148], 1

; 1206 : 			objTempItem.m_Option2 = 0;

  02c79	c6 45 bd 00	 mov	 BYTE PTR _objTempItem$[ebp+149], 0
$LN2@HiddenTrea:

; 1207 : 		}
; 1208 : 
; 1209 : 
; 1210 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)lpObj->X, (BYTE)lpObj->Y, objTempItem.m_Type, (BYTE)objTempItem.m_Level, (BYTE)objTempItem.m_Durability,
; 1211 : 			(BYTE)objTempItem.m_Option1, (BYTE)objTempItem.m_Option2, (BYTE)objTempItem.m_Option3, lpObj->m_Index, (BYTE)objTempItem.m_NewOption, 0);

  02c7d	6a 00		 push	 0
  02c7f	0f b6 45 bf	 movzx	 eax, BYTE PTR _objTempItem$[ebp+151]
  02c83	50		 push	 eax
  02c84	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02c87	8b 11		 mov	 edx, DWORD PTR [ecx]
  02c89	52		 push	 edx
  02c8a	0f b6 45 be	 movzx	 eax, BYTE PTR _objTempItem$[ebp+150]
  02c8e	50		 push	 eax
  02c8f	0f b6 4d bd	 movzx	 ecx, BYTE PTR _objTempItem$[ebp+149]
  02c93	51		 push	 ecx
  02c94	0f b6 55 bc	 movzx	 edx, BYTE PTR _objTempItem$[ebp+148]
  02c98	52		 push	 edx
  02c99	d9 85 4c ff ff
	ff		 fld	 DWORD PTR _objTempItem$[ebp+36]
  02c9f	d9 bd d2 fe ff
	ff		 fnstcw	 WORD PTR tv278[ebp]
  02ca5	0f b7 85 d2 fe
	ff ff		 movzx	 eax, WORD PTR tv278[ebp]
  02cac	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  02cb1	89 85 cc fe ff
	ff		 mov	 DWORD PTR tv281[ebp], eax
  02cb7	d9 ad cc fe ff
	ff		 fldcw	 WORD PTR tv281[ebp]
  02cbd	db 9d c8 fe ff
	ff		 fistp	 DWORD PTR tv283[ebp]
  02cc3	d9 ad d2 fe ff
	ff		 fldcw	 WORD PTR tv278[ebp]
  02cc9	0f b6 85 c8 fe
	ff ff		 movzx	 eax, BYTE PTR tv283[ebp]
  02cd0	50		 push	 eax
  02cd1	0f b6 8d 30 ff
	ff ff		 movzx	 ecx, BYTE PTR _objTempItem$[ebp+8]
  02cd8	51		 push	 ecx
  02cd9	0f bf 95 2e ff
	ff ff		 movsx	 edx, WORD PTR _objTempItem$[ebp+6]
  02ce0	52		 push	 edx
  02ce1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ce4	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  02ceb	51		 push	 ecx
  02cec	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02cef	0f b6 82 44 01
	00 00		 movzx	 eax, BYTE PTR [edx+324]
  02cf6	50		 push	 eax
  02cf7	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02cfa	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  02d01	52		 push	 edx
  02d02	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02d05	8b 08		 mov	 ecx, DWORD PTR [eax]
  02d07	51		 push	 ecx
  02d08	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  02d0d	83 c4 34	 add	 esp, 52			; 00000034H

; 1212 : 
; 1213 : 		BYTE NewOption[MAX_EXOPTION_SIZE];
; 1214 : 		ItemIsBufExOption(NewOption, &objTempItem);

  02d10	8d 85 28 ff ff
	ff		 lea	 eax, DWORD PTR _objTempItem$[ebp]
  02d16	50		 push	 eax
  02d17	8d 8d 18 ff ff
	ff		 lea	 ecx, DWORD PTR _NewOption$233608[ebp]
  02d1d	51		 push	 ecx
  02d1e	e8 00 00 00 00	 call	 ?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z ; ItemIsBufExOption
  02d23	83 c4 08	 add	 esp, 8

; 1215 : 
; 1216 : 		LogAddTD("[Hidden TreasureBox Event] [%s][%s] Event ItemDrop : (%d)(%d/%d) Item:(%s)%d Level:%d op1:%d op2:%d op3:%d exop:[%d,%d,%d,%d,%d,%d]",
; 1217 : 			lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y,
; 1218 : 			ItemAttribute[objTempItem.m_Type].Name, objTempItem.m_Type,
; 1219 : 			objTempItem.m_Level, objTempItem.m_Option1, objTempItem.m_Option2,
; 1220 : 			objTempItem.m_Option3, NewOption[0], NewOption[1], NewOption[2], NewOption[3], NewOption[4], NewOption[5]);

  02d26	0f b6 85 1d ff
	ff ff		 movzx	 eax, BYTE PTR _NewOption$233608[ebp+5]
  02d2d	50		 push	 eax
  02d2e	0f b6 8d 1c ff
	ff ff		 movzx	 ecx, BYTE PTR _NewOption$233608[ebp+4]
  02d35	51		 push	 ecx
  02d36	0f b6 95 1b ff
	ff ff		 movzx	 edx, BYTE PTR _NewOption$233608[ebp+3]
  02d3d	52		 push	 edx
  02d3e	0f b6 85 1a ff
	ff ff		 movzx	 eax, BYTE PTR _NewOption$233608[ebp+2]
  02d45	50		 push	 eax
  02d46	0f b6 8d 19 ff
	ff ff		 movzx	 ecx, BYTE PTR _NewOption$233608[ebp+1]
  02d4d	51		 push	 ecx
  02d4e	0f b6 95 18 ff
	ff ff		 movzx	 edx, BYTE PTR _NewOption$233608[ebp]
  02d55	52		 push	 edx
  02d56	0f b6 45 be	 movzx	 eax, BYTE PTR _objTempItem$[ebp+150]
  02d5a	50		 push	 eax
  02d5b	0f b6 4d bd	 movzx	 ecx, BYTE PTR _objTempItem$[ebp+149]
  02d5f	51		 push	 ecx
  02d60	0f b6 55 bc	 movzx	 edx, BYTE PTR _objTempItem$[ebp+148]
  02d64	52		 push	 edx
  02d65	0f bf 85 30 ff
	ff ff		 movsx	 eax, WORD PTR _objTempItem$[ebp+8]
  02d6c	50		 push	 eax
  02d6d	0f bf 8d 2e ff
	ff ff		 movsx	 ecx, WORD PTR _objTempItem$[ebp+6]
  02d74	51		 push	 ecx
  02d75	0f bf 95 2e ff
	ff ff		 movsx	 edx, WORD PTR _objTempItem$[ebp+6]
  02d7c	6b d2 70	 imul	 edx, 112		; 00000070H
  02d7f	81 c2 00 00 00
	00		 add	 edx, OFFSET ?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A ; ItemAttribute
  02d85	52		 push	 edx
  02d86	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02d89	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  02d90	51		 push	 ecx
  02d91	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02d94	0f bf 82 44 01
	00 00		 movsx	 eax, WORD PTR [edx+324]
  02d9b	50		 push	 eax
  02d9c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02d9f	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  02da6	52		 push	 edx
  02da7	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02daa	83 c0 77	 add	 eax, 119		; 00000077H
  02dad	50		 push	 eax
  02dae	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02db1	83 c1 6c	 add	 ecx, 108		; 0000006cH
  02db4	51		 push	 ecx
  02db5	68 00 00 00 00	 push	 OFFSET ??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  02dba	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  02dc0	83 c4 48	 add	 esp, 72			; 00000048H

; 1221 : 	}
; 1222 : 	else

  02dc3	e9 86 00 00 00	 jmp	 $LN1@HiddenTrea
$LN8@HiddenTrea:

; 1223 : 	{
; 1224 : 		int money = 200000;

  02dc8	c7 85 14 ff ff
	ff 40 0d 03 00	 mov	 DWORD PTR _money$233611[ebp], 200000 ; 00030d40H

; 1225 : 		MapC[lpObj->MapNumber].MoneyItemDrop(money, lpObj->X, lpObj->Y);

  02dd2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02dd5	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  02ddc	51		 push	 ecx
  02ddd	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02de0	0f bf 82 44 01
	00 00		 movsx	 eax, WORD PTR [edx+324]
  02de7	50		 push	 eax
  02de8	8b 8d 14 ff ff
	ff		 mov	 ecx, DWORD PTR _money$233611[ebp]
  02dee	51		 push	 ecx
  02def	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02df2	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  02df9	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  02dff	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  02e05	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 1226 : 
; 1227 : 		LogAddTD("[Hidden TreasureBox Event] [%s][%s] Event ZenDrop : %d : (%d)(%d/%d)",
; 1228 : 			lpObj->AccountID, lpObj->Name, money, lpObj->MapNumber, lpObj->X, lpObj->Y);

  02e0a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02e0d	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  02e14	51		 push	 ecx
  02e15	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02e18	0f bf 82 44 01
	00 00		 movsx	 eax, WORD PTR [edx+324]
  02e1f	50		 push	 eax
  02e20	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02e23	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  02e2a	52		 push	 edx
  02e2b	8b 85 14 ff ff
	ff		 mov	 eax, DWORD PTR _money$233611[ebp]
  02e31	50		 push	 eax
  02e32	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  02e35	83 c1 77	 add	 ecx, 119		; 00000077H
  02e38	51		 push	 ecx
  02e39	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  02e3c	83 c2 6c	 add	 edx, 108		; 0000006cH
  02e3f	52		 push	 edx
  02e40	68 00 00 00 00	 push	 OFFSET ??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  02e45	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  02e4b	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN1@HiddenTrea:
$LN10@HiddenTrea:

; 1229 : 	}
; 1230 : }

  02e4e	5f		 pop	 edi
  02e4f	5e		 pop	 esi
  02e50	5b		 pop	 ebx
  02e51	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  02e54	33 cd		 xor	 ecx, ebp
  02e56	e8 00 00 00 00	 call	 @__security_check_cookie@4
  02e5b	8b e5		 mov	 esp, ebp
  02e5d	5d		 pop	 ebp
  02e5e	c3		 ret	 0
?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP ; HiddenTreasureBoxItemBoxOpen
_TEXT	ENDS
PUBLIC	?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RedRibbonBoxOpen
EXTRN	?DropRedRibbonBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropRedRibbonBoxEventItem
EXTRN	?RedRibbonBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; RedRibbonBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC		; RedRibbonBoxOpen

; 1234 : {

  02e60	55		 push	 ebp
  02e61	8b ec		 mov	 ebp, esp
  02e63	83 ec 40	 sub	 esp, 64			; 00000040H
  02e66	53		 push	 ebx
  02e67	56		 push	 esi
  02e68	57		 push	 edi

; 1235 : 	RedRibbonBoxEventItemBag->DropRedRibbonBoxEventItem(lpObj->m_Index);

  02e69	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02e6c	8b 08		 mov	 ecx, DWORD PTR [eax]
  02e6e	51		 push	 ecx
  02e6f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RedRibbonBoxEventItemBag@@3PAVCItemBagEx@@A ; RedRibbonBoxEventItemBag
  02e75	e8 00 00 00 00	 call	 ?DropRedRibbonBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropRedRibbonBoxEventItem

; 1236 : }

  02e7a	5f		 pop	 edi
  02e7b	5e		 pop	 esi
  02e7c	5b		 pop	 ebx
  02e7d	8b e5		 mov	 esp, ebp
  02e7f	5d		 pop	 ebp
  02e80	c3		 ret	 0
?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; RedRibbonBoxOpen
_TEXT	ENDS
PUBLIC	?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; GreenRibbonBoxOpen
EXTRN	?DropGreenRibbonBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropGreenRibbonBoxEventItem
EXTRN	?GreenRibbonBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; GreenRibbonBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; GreenRibbonBoxOpen

; 1240 : {

  02e90	55		 push	 ebp
  02e91	8b ec		 mov	 ebp, esp
  02e93	83 ec 40	 sub	 esp, 64			; 00000040H
  02e96	53		 push	 ebx
  02e97	56		 push	 esi
  02e98	57		 push	 edi

; 1241 : 	GreenRibbonBoxEventItemBag->DropGreenRibbonBoxEventItem(lpObj->m_Index);

  02e99	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02e9c	8b 08		 mov	 ecx, DWORD PTR [eax]
  02e9e	51		 push	 ecx
  02e9f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GreenRibbonBoxEventItemBag@@3PAVCItemBagEx@@A ; GreenRibbonBoxEventItemBag
  02ea5	e8 00 00 00 00	 call	 ?DropGreenRibbonBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropGreenRibbonBoxEventItem

; 1242 : }

  02eaa	5f		 pop	 edi
  02eab	5e		 pop	 esi
  02eac	5b		 pop	 ebx
  02ead	8b e5		 mov	 esp, ebp
  02eaf	5d		 pop	 ebp
  02eb0	c3		 ret	 0
?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; GreenRibbonBoxOpen
_TEXT	ENDS
PUBLIC	?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; BlueRibbonBoxOpen
EXTRN	?DropBlueRibbonBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropBlueRibbonBoxEventItem
EXTRN	?BlueRibbonBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; BlueRibbonBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC		; BlueRibbonBoxOpen

; 1246 : {

  02ec0	55		 push	 ebp
  02ec1	8b ec		 mov	 ebp, esp
  02ec3	83 ec 40	 sub	 esp, 64			; 00000040H
  02ec6	53		 push	 ebx
  02ec7	56		 push	 esi
  02ec8	57		 push	 edi

; 1247 : 	BlueRibbonBoxEventItemBag->DropBlueRibbonBoxEventItem(lpObj->m_Index);

  02ec9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02ecc	8b 08		 mov	 ecx, DWORD PTR [eax]
  02ece	51		 push	 ecx
  02ecf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlueRibbonBoxEventItemBag@@3PAVCItemBagEx@@A ; BlueRibbonBoxEventItemBag
  02ed5	e8 00 00 00 00	 call	 ?DropBlueRibbonBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropBlueRibbonBoxEventItem

; 1248 : }

  02eda	5f		 pop	 edi
  02edb	5e		 pop	 esi
  02edc	5b		 pop	 ebx
  02edd	8b e5		 mov	 esp, ebp
  02edf	5d		 pop	 ebp
  02ee0	c3		 ret	 0
?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; BlueRibbonBoxOpen
_TEXT	ENDS
PUBLIC	?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; PinkChocolateBoxOpen
EXTRN	?DropPinkChocolateBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropPinkChocolateBoxEventItem
EXTRN	?PinkChocolateBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; PinkChocolateBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; PinkChocolateBoxOpen

; 1252 : {

  02ef0	55		 push	 ebp
  02ef1	8b ec		 mov	 ebp, esp
  02ef3	83 ec 40	 sub	 esp, 64			; 00000040H
  02ef6	53		 push	 ebx
  02ef7	56		 push	 esi
  02ef8	57		 push	 edi

; 1253 : 	PinkChocolateBoxEventItemBag->DropPinkChocolateBoxEventItem(lpObj->m_Index);

  02ef9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02efc	8b 08		 mov	 ecx, DWORD PTR [eax]
  02efe	51		 push	 ecx
  02eff	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PinkChocolateBoxEventItemBag@@3PAVCItemBagEx@@A ; PinkChocolateBoxEventItemBag
  02f05	e8 00 00 00 00	 call	 ?DropPinkChocolateBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropPinkChocolateBoxEventItem

; 1254 : }

  02f0a	5f		 pop	 edi
  02f0b	5e		 pop	 esi
  02f0c	5b		 pop	 ebx
  02f0d	8b e5		 mov	 esp, ebp
  02f0f	5d		 pop	 ebp
  02f10	c3		 ret	 0
?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; PinkChocolateBoxOpen
_TEXT	ENDS
PUBLIC	?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RedChocolateBoxOpen
EXTRN	?DropRedChocolateBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropRedChocolateBoxEventItem
EXTRN	?RedChocolateBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; RedChocolateBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; RedChocolateBoxOpen

; 1258 : {

  02f20	55		 push	 ebp
  02f21	8b ec		 mov	 ebp, esp
  02f23	83 ec 40	 sub	 esp, 64			; 00000040H
  02f26	53		 push	 ebx
  02f27	56		 push	 esi
  02f28	57		 push	 edi

; 1259 : 	RedChocolateBoxEventItemBag->DropRedChocolateBoxEventItem(lpObj->m_Index);

  02f29	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02f2c	8b 08		 mov	 ecx, DWORD PTR [eax]
  02f2e	51		 push	 ecx
  02f2f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RedChocolateBoxEventItemBag@@3PAVCItemBagEx@@A ; RedChocolateBoxEventItemBag
  02f35	e8 00 00 00 00	 call	 ?DropRedChocolateBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropRedChocolateBoxEventItem

; 1260 : }

  02f3a	5f		 pop	 edi
  02f3b	5e		 pop	 esi
  02f3c	5b		 pop	 ebx
  02f3d	8b e5		 mov	 esp, ebp
  02f3f	5d		 pop	 ebp
  02f40	c3		 ret	 0
?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; RedChocolateBoxOpen
_TEXT	ENDS
PUBLIC	?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; BlueChocolateBoxOpen
EXTRN	?DropBlueChocolateBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropBlueChocolateBoxEventItem
EXTRN	?BlueChocolateBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; BlueChocolateBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; BlueChocolateBoxOpen

; 1264 : {

  02f50	55		 push	 ebp
  02f51	8b ec		 mov	 ebp, esp
  02f53	83 ec 40	 sub	 esp, 64			; 00000040H
  02f56	53		 push	 ebx
  02f57	56		 push	 esi
  02f58	57		 push	 edi

; 1265 : 	BlueChocolateBoxEventItemBag->DropBlueChocolateBoxEventItem(lpObj->m_Index);

  02f59	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02f5c	8b 08		 mov	 ecx, DWORD PTR [eax]
  02f5e	51		 push	 ecx
  02f5f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlueChocolateBoxEventItemBag@@3PAVCItemBagEx@@A ; BlueChocolateBoxEventItemBag
  02f65	e8 00 00 00 00	 call	 ?DropBlueChocolateBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropBlueChocolateBoxEventItem

; 1266 : }

  02f6a	5f		 pop	 edi
  02f6b	5e		 pop	 esi
  02f6c	5b		 pop	 ebx
  02f6d	8b e5		 mov	 esp, ebp
  02f6f	5d		 pop	 ebp
  02f70	c3		 ret	 0
?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; BlueChocolateBoxOpen
_TEXT	ENDS
PUBLIC	?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; LightPurpleCandyBoxOpen
EXTRN	?DropLightPurpleCandyBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropLightPurpleCandyBoxEventItem
EXTRN	?LightPurpleCandyBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; LightPurpleCandyBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; LightPurpleCandyBoxOpen

; 1270 : {

  02f80	55		 push	 ebp
  02f81	8b ec		 mov	 ebp, esp
  02f83	83 ec 40	 sub	 esp, 64			; 00000040H
  02f86	53		 push	 ebx
  02f87	56		 push	 esi
  02f88	57		 push	 edi

; 1271 : 	LightPurpleCandyBoxEventItemBag->DropLightPurpleCandyBoxEventItem(lpObj->m_Index);

  02f89	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02f8c	8b 08		 mov	 ecx, DWORD PTR [eax]
  02f8e	51		 push	 ecx
  02f8f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LightPurpleCandyBoxEventItemBag@@3PAVCItemBagEx@@A ; LightPurpleCandyBoxEventItemBag
  02f95	e8 00 00 00 00	 call	 ?DropLightPurpleCandyBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropLightPurpleCandyBoxEventItem

; 1272 : }

  02f9a	5f		 pop	 edi
  02f9b	5e		 pop	 esi
  02f9c	5b		 pop	 ebx
  02f9d	8b e5		 mov	 esp, ebp
  02f9f	5d		 pop	 ebp
  02fa0	c3		 ret	 0
?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; LightPurpleCandyBoxOpen
_TEXT	ENDS
PUBLIC	?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; VermilionCandyBoxOpen
EXTRN	?DropVermilionCandyBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropVermilionCandyBoxEventItem
EXTRN	?VermilionCandyBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; VermilionCandyBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; VermilionCandyBoxOpen

; 1276 : {

  02fb0	55		 push	 ebp
  02fb1	8b ec		 mov	 ebp, esp
  02fb3	83 ec 40	 sub	 esp, 64			; 00000040H
  02fb6	53		 push	 ebx
  02fb7	56		 push	 esi
  02fb8	57		 push	 edi

; 1277 : 	VermilionCandyBoxEventItemBag->DropVermilionCandyBoxEventItem(lpObj->m_Index);

  02fb9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02fbc	8b 08		 mov	 ecx, DWORD PTR [eax]
  02fbe	51		 push	 ecx
  02fbf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?VermilionCandyBoxEventItemBag@@3PAVCItemBagEx@@A ; VermilionCandyBoxEventItemBag
  02fc5	e8 00 00 00 00	 call	 ?DropVermilionCandyBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropVermilionCandyBoxEventItem

; 1278 : }

  02fca	5f		 pop	 edi
  02fcb	5e		 pop	 esi
  02fcc	5b		 pop	 ebx
  02fcd	8b e5		 mov	 esp, ebp
  02fcf	5d		 pop	 ebp
  02fd0	c3		 ret	 0
?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; VermilionCandyBoxOpen
_TEXT	ENDS
PUBLIC	?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; DeepBlueCandyBoxOpen
EXTRN	?DropDeepBlueCandyBoxEventItem@CItemBagEx@@QAEHH@Z:PROC ; CItemBagEx::DropDeepBlueCandyBoxEventItem
EXTRN	?DeepBlueCandyBoxEventItemBag@@3PAVCItemBagEx@@A:DWORD ; DeepBlueCandyBoxEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; DeepBlueCandyBoxOpen

; 1282 : {

  02fe0	55		 push	 ebp
  02fe1	8b ec		 mov	 ebp, esp
  02fe3	83 ec 40	 sub	 esp, 64			; 00000040H
  02fe6	53		 push	 ebx
  02fe7	56		 push	 esi
  02fe8	57		 push	 edi

; 1283 : 	DeepBlueCandyBoxEventItemBag->DropDeepBlueCandyBoxEventItem(lpObj->m_Index);

  02fe9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  02fec	8b 08		 mov	 ecx, DWORD PTR [eax]
  02fee	51		 push	 ecx
  02fef	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DeepBlueCandyBoxEventItemBag@@3PAVCItemBagEx@@A ; DeepBlueCandyBoxEventItemBag
  02ff5	e8 00 00 00 00	 call	 ?DropDeepBlueCandyBoxEventItem@CItemBagEx@@QAEHH@Z ; CItemBagEx::DropDeepBlueCandyBoxEventItem

; 1284 : }

  02ffa	5f		 pop	 edi
  02ffb	5e		 pop	 esi
  02ffc	5b		 pop	 ebx
  02ffd	8b e5		 mov	 esp, ebp
  02fff	5d		 pop	 ebp
  03000	c3		 ret	 0
?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; DeepBlueCandyBoxOpen
_TEXT	ENDS
PUBLIC	?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; KundunEventItemBoxOpen
EXTRN	?DropKundunEventItem@CItemBagEx@@QAEHHEEE@Z:PROC ; CItemBagEx::DropKundunEventItem
EXTRN	?KundunEventItemBag@@3PAVCItemBagEx@@A:DWORD	; KundunEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; KundunEventItemBoxOpen

; 1288 : {

  03010	55		 push	 ebp
  03011	8b ec		 mov	 ebp, esp
  03013	83 ec 40	 sub	 esp, 64			; 00000040H
  03016	53		 push	 ebx
  03017	56		 push	 esi
  03018	57		 push	 edi

; 1289 : 	KundunEventItemBag->DropKundunEventItem(lpObj->m_Index, btMapNumber, cX, cY);

  03019	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0301d	50		 push	 eax
  0301e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03022	51		 push	 ecx
  03023	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03027	52		 push	 edx
  03028	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0302b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0302d	51		 push	 ecx
  0302e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KundunEventItemBag@@3PAVCItemBagEx@@A ; KundunEventItemBag
  03034	e8 00 00 00 00	 call	 ?DropKundunEventItem@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropKundunEventItem

; 1290 : }

  03039	5f		 pop	 edi
  0303a	5e		 pop	 esi
  0303b	5b		 pop	 ebx
  0303c	8b e5		 mov	 esp, ebp
  0303e	5d		 pop	 ebp
  0303f	c3		 ret	 0
?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; KundunEventItemBoxOpen
_TEXT	ENDS
PUBLIC	?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; HallowinDayEventItemBoxOpen
EXTRN	?DropHallowinEventItem@CItemBagEx@@QAEHPAUOBJECTSTRUCT@@@Z:PROC ; CItemBagEx::DropHallowinEventItem
EXTRN	?HallowinDayEventItemBag@@3PAVCItemBagEx@@A:DWORD ; HallowinDayEventItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC ; HallowinDayEventItemBoxOpen

; 1294 : {

  03040	55		 push	 ebp
  03041	8b ec		 mov	 ebp, esp
  03043	83 ec 40	 sub	 esp, 64			; 00000040H
  03046	53		 push	 ebx
  03047	56		 push	 esi
  03048	57		 push	 edi

; 1295 : 	HallowinDayEventItemBag->DropHallowinEventItem(lpObj);

  03049	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0304c	50		 push	 eax
  0304d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HallowinDayEventItemBag@@3PAVCItemBagEx@@A ; HallowinDayEventItemBag
  03053	e8 00 00 00 00	 call	 ?DropHallowinEventItem@CItemBagEx@@QAEHPAUOBJECTSTRUCT@@@Z ; CItemBagEx::DropHallowinEventItem

; 1296 : }

  03058	5f		 pop	 edi
  03059	5e		 pop	 esi
  0305a	5b		 pop	 ebx
  0305b	8b e5		 mov	 esp, ebp
  0305d	5d		 pop	 ebp
  0305e	c3		 ret	 0
?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP ; HallowinDayEventItemBoxOpen
_TEXT	ENDS
PUBLIC	?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z	; ChristmasStarDrop
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_ServerCmd$ = -8					; size = 7
_lpObj$ = 8						; size = 4
?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z PROC		; ChristmasStarDrop

; 1300 : {

  03060	55		 push	 ebp
  03061	8b ec		 mov	 ebp, esp
  03063	83 ec 48	 sub	 esp, 72			; 00000048H
  03066	53		 push	 ebx
  03067	56		 push	 esi
  03068	57		 push	 edi

; 1301 : 	PMSG_SERVERCMD ServerCmd;
; 1302 : 
; 1303 : 	PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  03069	6a 07		 push	 7
  0306b	6a 40		 push	 64			; 00000040H
  0306d	68 f3 00 00 00	 push	 243			; 000000f3H
  03072	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  03075	50		 push	 eax
  03076	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  0307b	83 c4 10	 add	 esp, 16			; 00000010H

; 1304 : 	ServerCmd.CmdType = 0;

  0307e	c6 45 fc 00	 mov	 BYTE PTR _ServerCmd$[ebp+4], 0

; 1305 : 	ServerCmd.X = lpObj->X;

  03082	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03085	8a 88 44 01 00
	00		 mov	 cl, BYTE PTR [eax+324]
  0308b	88 4d fd	 mov	 BYTE PTR _ServerCmd$[ebp+5], cl

; 1306 : 	ServerCmd.Y = lpObj->Y;

  0308e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03091	8a 88 46 01 00
	00		 mov	 cl, BYTE PTR [eax+326]
  03097	88 4d fe	 mov	 BYTE PTR _ServerCmd$[ebp+6], cl

; 1307 : 	MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0309a	6a 07		 push	 7
  0309c	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0309f	50		 push	 eax
  030a0	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  030a3	51		 push	 ecx
  030a4	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  030a9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1308 : 	DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  030ac	6a 07		 push	 7
  030ae	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  030b1	50		 push	 eax
  030b2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  030b5	8b 11		 mov	 edx, DWORD PTR [ecx]
  030b7	52		 push	 edx
  030b8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  030bd	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1309 : }

  030c0	5f		 pop	 edi
  030c1	5e		 pop	 esi
  030c2	5b		 pop	 ebx
  030c3	8b e5		 mov	 esp, ebp
  030c5	5d		 pop	 ebp
  030c6	c3		 ret	 0
?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; ChristmasStarDrop
_TEXT	ENDS
PUBLIC	?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z	; ChristmasFireCrackDrop
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_ServerCmd$ = -8					; size = 7
_lpObj$ = 8						; size = 4
?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z PROC	; ChristmasFireCrackDrop

; 1312 : {

  030d0	55		 push	 ebp
  030d1	8b ec		 mov	 ebp, esp
  030d3	83 ec 48	 sub	 esp, 72			; 00000048H
  030d6	53		 push	 ebx
  030d7	56		 push	 esi
  030d8	57		 push	 edi

; 1313 : 	PMSG_SERVERCMD ServerCmd;
; 1314 : 
; 1315 : 	PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  030d9	6a 07		 push	 7
  030db	6a 40		 push	 64			; 00000040H
  030dd	68 f3 00 00 00	 push	 243			; 000000f3H
  030e2	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  030e5	50		 push	 eax
  030e6	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  030eb	83 c4 10	 add	 esp, 16			; 00000010H

; 1316 : 	ServerCmd.CmdType = 59;

  030ee	c6 45 fc 3b	 mov	 BYTE PTR _ServerCmd$[ebp+4], 59 ; 0000003bH

; 1317 : 	ServerCmd.X = lpObj->X;

  030f2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  030f5	8a 88 44 01 00
	00		 mov	 cl, BYTE PTR [eax+324]
  030fb	88 4d fd	 mov	 BYTE PTR _ServerCmd$[ebp+5], cl

; 1318 : 	ServerCmd.Y = lpObj->Y;

  030fe	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03101	8a 88 46 01 00
	00		 mov	 cl, BYTE PTR [eax+326]
  03107	88 4d fe	 mov	 BYTE PTR _ServerCmd$[ebp+6], cl

; 1319 : 	MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0310a	6a 07		 push	 7
  0310c	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0310f	50		 push	 eax
  03110	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  03113	51		 push	 ecx
  03114	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  03119	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1320 : 	DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0311c	6a 07		 push	 7
  0311e	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  03121	50		 push	 eax
  03122	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  03125	8b 11		 mov	 edx, DWORD PTR [ecx]
  03127	52		 push	 edx
  03128	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0312d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1321 : }

  03130	5f		 pop	 edi
  03131	5e		 pop	 esi
  03132	5b		 pop	 ebx
  03133	8b e5		 mov	 esp, ebp
  03135	5d		 pop	 ebp
  03136	c3		 ret	 0
?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; ChristmasFireCrackDrop
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CherryBlossomEventItemBoxOpen
EXTRN	?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z:PROC ; CProbabilityItemBag::DropItem
EXTRN	?CherryBlossom1@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom1
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_ServerCmd$233670 = -8					; size = 7
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CherryBlossomEventItemBoxOpen

; 1324 : {

  03140	55		 push	 ebp
  03141	8b ec		 mov	 ebp, esp
  03143	83 ec 48	 sub	 esp, 72			; 00000048H
  03146	53		 push	 ebx
  03147	56		 push	 esi
  03148	57		 push	 edi

; 1325 : 	if(CherryBlossom1->DropItem(lpObj->m_Index, btMapNumber, cX, cY, 0) != 0)

  03149	6a 00		 push	 0
  0314b	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0314f	50		 push	 eax
  03150	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03154	51		 push	 ecx
  03155	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03159	52		 push	 edx
  0315a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0315d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0315f	51		 push	 ecx
  03160	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom1@@3PAVCProbabilityItemBag@@A ; CherryBlossom1
  03166	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem
  0316b	85 c0		 test	 eax, eax
  0316d	74 58		 je	 SHORT $LN2@CherryBlos

; 1326 : 	{
; 1327 : 		PMSG_SERVERCMD ServerCmd;
; 1328 : 
; 1329 : 		PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  0316f	6a 07		 push	 7
  03171	6a 40		 push	 64			; 00000040H
  03173	68 f3 00 00 00	 push	 243			; 000000f3H
  03178	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$233670[ebp]
  0317b	50		 push	 eax
  0317c	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  03181	83 c4 10	 add	 esp, 16			; 00000010H

; 1330 : 		ServerCmd.CmdType = 58;

  03184	c6 45 fc 3a	 mov	 BYTE PTR _ServerCmd$233670[ebp+4], 58 ; 0000003aH

; 1331 : 		ServerCmd.X = SET_NUMBERH(lpObj->m_Index);

  03188	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0318b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0318d	c1 e9 08	 shr	 ecx, 8
  03190	88 4d fd	 mov	 BYTE PTR _ServerCmd$233670[ebp+5], cl

; 1332 : 		ServerCmd.Y = SET_NUMBERL(lpObj->m_Index);

  03193	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03196	8b 08		 mov	 ecx, DWORD PTR [eax]
  03198	81 e1 ff 00 00
	00		 and	 ecx, 255		; 000000ffH
  0319e	88 4d fe	 mov	 BYTE PTR _ServerCmd$233670[ebp+6], cl

; 1333 : 		MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  031a1	6a 07		 push	 7
  031a3	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$233670[ebp]
  031a6	50		 push	 eax
  031a7	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  031aa	51		 push	 ecx
  031ab	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  031b0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1334 : 		DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  031b3	6a 07		 push	 7
  031b5	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$233670[ebp]
  031b8	50		 push	 eax
  031b9	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  031bc	8b 11		 mov	 edx, DWORD PTR [ecx]
  031be	52		 push	 edx
  031bf	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  031c4	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@CherryBlos:

; 1335 : 	}
; 1336 : }

  031c7	5f		 pop	 edi
  031c8	5e		 pop	 esi
  031c9	5b		 pop	 ebx
  031ca	8b e5		 mov	 esp, ebp
  031cc	5d		 pop	 ebp
  031cd	c3		 ret	 0
?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CherryBlossomEventItemBoxOpen
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ; CherryBlossomEventItemBoxAOpen
EXTRN	?CherryBlossom2@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom2
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_iDropZen$ = 24						; size = 4
?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z PROC ; CherryBlossomEventItemBoxAOpen

; 1339 : {

  031d0	55		 push	 ebp
  031d1	8b ec		 mov	 ebp, esp
  031d3	83 ec 40	 sub	 esp, 64			; 00000040H
  031d6	53		 push	 ebx
  031d7	56		 push	 esi
  031d8	57		 push	 edi

; 1340 : 	return CherryBlossom2->DropItem(lpObj->m_Index, btMapNumber, cX, cY, iDropZen);

  031d9	8b 45 18	 mov	 eax, DWORD PTR _iDropZen$[ebp]
  031dc	50		 push	 eax
  031dd	0f b6 4d 14	 movzx	 ecx, BYTE PTR _cY$[ebp]
  031e1	51		 push	 ecx
  031e2	0f b6 55 10	 movzx	 edx, BYTE PTR _cX$[ebp]
  031e6	52		 push	 edx
  031e7	0f b6 45 0c	 movzx	 eax, BYTE PTR _btMapNumber$[ebp]
  031eb	50		 push	 eax
  031ec	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  031ef	8b 11		 mov	 edx, DWORD PTR [ecx]
  031f1	52		 push	 edx
  031f2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom2@@3PAVCProbabilityItemBag@@A ; CherryBlossom2
  031f8	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem

; 1341 : }

  031fd	5f		 pop	 edi
  031fe	5e		 pop	 esi
  031ff	5b		 pop	 ebx
  03200	8b e5		 mov	 esp, ebp
  03202	5d		 pop	 ebp
  03203	c3		 ret	 0
?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ENDP ; CherryBlossomEventItemBoxAOpen
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ; CherryBlossomEventItemBoxBOpen
EXTRN	?CherryBlossom3@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom3
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_iDropZen$ = 24						; size = 4
?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z PROC ; CherryBlossomEventItemBoxBOpen

; 1344 : {

  03210	55		 push	 ebp
  03211	8b ec		 mov	 ebp, esp
  03213	83 ec 40	 sub	 esp, 64			; 00000040H
  03216	53		 push	 ebx
  03217	56		 push	 esi
  03218	57		 push	 edi

; 1345 : 	return CherryBlossom3->DropItem(lpObj->m_Index, btMapNumber, cX, cY, iDropZen);

  03219	8b 45 18	 mov	 eax, DWORD PTR _iDropZen$[ebp]
  0321c	50		 push	 eax
  0321d	0f b6 4d 14	 movzx	 ecx, BYTE PTR _cY$[ebp]
  03221	51		 push	 ecx
  03222	0f b6 55 10	 movzx	 edx, BYTE PTR _cX$[ebp]
  03226	52		 push	 edx
  03227	0f b6 45 0c	 movzx	 eax, BYTE PTR _btMapNumber$[ebp]
  0322b	50		 push	 eax
  0322c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0322f	8b 11		 mov	 edx, DWORD PTR [ecx]
  03231	52		 push	 edx
  03232	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom3@@3PAVCProbabilityItemBag@@A ; CherryBlossom3
  03238	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem

; 1346 : }

  0323d	5f		 pop	 edi
  0323e	5e		 pop	 esi
  0323f	5b		 pop	 ebx
  03240	8b e5		 mov	 esp, ebp
  03242	5d		 pop	 ebp
  03243	c3		 ret	 0
?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ENDP ; CherryBlossomEventItemBoxBOpen
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ; CherryBlossomEventItemBoxCOpen
EXTRN	?CherryBlossom4@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom4
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_iDropZen$ = 24						; size = 4
?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z PROC ; CherryBlossomEventItemBoxCOpen

; 1349 : {

  03250	55		 push	 ebp
  03251	8b ec		 mov	 ebp, esp
  03253	83 ec 40	 sub	 esp, 64			; 00000040H
  03256	53		 push	 ebx
  03257	56		 push	 esi
  03258	57		 push	 edi

; 1350 : 	return CherryBlossom4->DropItem(lpObj->m_Index, btMapNumber, cX, cY, iDropZen);

  03259	8b 45 18	 mov	 eax, DWORD PTR _iDropZen$[ebp]
  0325c	50		 push	 eax
  0325d	0f b6 4d 14	 movzx	 ecx, BYTE PTR _cY$[ebp]
  03261	51		 push	 ecx
  03262	0f b6 55 10	 movzx	 edx, BYTE PTR _cX$[ebp]
  03266	52		 push	 edx
  03267	0f b6 45 0c	 movzx	 eax, BYTE PTR _btMapNumber$[ebp]
  0326b	50		 push	 eax
  0326c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0326f	8b 11		 mov	 edx, DWORD PTR [ecx]
  03271	52		 push	 edx
  03272	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom4@@3PAVCProbabilityItemBag@@A ; CherryBlossom4
  03278	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem

; 1351 : }

  0327d	5f		 pop	 edi
  0327e	5e		 pop	 esi
  0327f	5b		 pop	 ebx
  03280	8b e5		 mov	 esp, ebp
  03282	5d		 pop	 ebp
  03283	c3		 ret	 0
?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ENDP ; CherryBlossomEventItemBoxCOpen
_TEXT	ENDS
PUBLIC	?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CastleHuntZoneBossRewardOpen
EXTRN	?DropCastleHuntZoneBossReward@CItemBagEx@@QAEHHEEE@Z:PROC ; CItemBagEx::DropCastleHuntZoneBossReward
EXTRN	?CastleHuntZoneBossItemBag@@3PAVCItemBagEx@@A:DWORD ; CastleHuntZoneBossItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CastleHuntZoneBossRewardOpen

; 1355 : {

  03290	55		 push	 ebp
  03291	8b ec		 mov	 ebp, esp
  03293	83 ec 40	 sub	 esp, 64			; 00000040H
  03296	53		 push	 ebx
  03297	56		 push	 esi
  03298	57		 push	 edi

; 1356 : 	CastleHuntZoneBossItemBag->DropCastleHuntZoneBossReward(lpObj->m_Index, btMapNumber, cX, cY);

  03299	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0329d	50		 push	 eax
  0329e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  032a2	51		 push	 ecx
  032a3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  032a7	52		 push	 edx
  032a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  032ab	8b 08		 mov	 ecx, DWORD PTR [eax]
  032ad	51		 push	 ecx
  032ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CastleHuntZoneBossItemBag@@3PAVCItemBagEx@@A ; CastleHuntZoneBossItemBag
  032b4	e8 00 00 00 00	 call	 ?DropCastleHuntZoneBossReward@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropCastleHuntZoneBossReward

; 1357 : }

  032b9	5f		 pop	 edi
  032ba	5e		 pop	 esi
  032bb	5b		 pop	 ebx
  032bc	8b e5		 mov	 esp, ebp
  032be	5d		 pop	 ebp
  032bf	c3		 ret	 0
?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CastleHuntZoneBossRewardOpen
_TEXT	ENDS
PUBLIC	?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CrywolfDarkElfItemBagOpen
EXTRN	?DropCrywolfDarkElfItem@CItemBagEx@@QAEHHEEE@Z:PROC ; CItemBagEx::DropCrywolfDarkElfItem
EXTRN	?CrywolfDarkElfItemBag@@3PAVCItemBagEx@@A:DWORD	; CrywolfDarkElfItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CrywolfDarkElfItemBagOpen

; 1361 : {

  032c0	55		 push	 ebp
  032c1	8b ec		 mov	 ebp, esp
  032c3	83 ec 40	 sub	 esp, 64			; 00000040H
  032c6	53		 push	 ebx
  032c7	56		 push	 esi
  032c8	57		 push	 edi

; 1362 : 	CrywolfDarkElfItemBag->DropCrywolfDarkElfItem(lpObj->m_Index, btMapNumber, cX, cY);

  032c9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  032cd	50		 push	 eax
  032ce	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  032d2	51		 push	 ecx
  032d3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  032d7	52		 push	 edx
  032d8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  032db	8b 08		 mov	 ecx, DWORD PTR [eax]
  032dd	51		 push	 ecx
  032de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CrywolfDarkElfItemBag@@3PAVCItemBagEx@@A ; CrywolfDarkElfItemBag
  032e4	e8 00 00 00 00	 call	 ?DropCrywolfDarkElfItem@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropCrywolfDarkElfItem

; 1363 : }

  032e9	5f		 pop	 edi
  032ea	5e		 pop	 esi
  032eb	5b		 pop	 ebx
  032ec	8b e5		 mov	 esp, ebp
  032ee	5d		 pop	 ebp
  032ef	c3		 ret	 0
?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CrywolfDarkElfItemBagOpen
_TEXT	ENDS
PUBLIC	?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CrywolfBossMonsterItemBagOpen
EXTRN	?DropCrywolfBossMonsterItem@CItemBagEx@@QAEHHEEE@Z:PROC ; CItemBagEx::DropCrywolfBossMonsterItem
EXTRN	?CrywolfBossMonsterItemBag@@3PAVCItemBagEx@@A:DWORD ; CrywolfBossMonsterItemBag
EXTRN	?CheckUser@CExLicense@@QAE_NH@Z:PROC		; CExLicense::CheckUser
EXTRN	?g_ExLicense@@3VCExLicense@@A:BYTE		; g_ExLicense
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_i$233719 = -4						; size = 4
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CrywolfBossMonsterItemBagOpen

; 1366 : {

  032f0	55		 push	 ebp
  032f1	8b ec		 mov	 ebp, esp
  032f3	83 ec 44	 sub	 esp, 68			; 00000044H
  032f6	53		 push	 ebx
  032f7	56		 push	 esi
  032f8	57		 push	 edi

; 1367 : 	if(g_ExLicense.CheckUser(eExUB::NSGames))

  032f9	6a 51		 push	 81			; 00000051H
  032fb	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ExLicense@@3VCExLicense@@A ; g_ExLicense
  03300	e8 00 00 00 00	 call	 ?CheckUser@CExLicense@@QAE_NH@Z ; CExLicense::CheckUser
  03305	0f b6 c0	 movzx	 eax, al
  03308	85 c0		 test	 eax, eax
  0330a	74 3c		 je	 SHORT $LN5@CrywolfBos

; 1368 : 	{
; 1369 : 		for(int i = 0; i < 3; i++)

  0330c	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _i$233719[ebp], 0
  03313	eb 09		 jmp	 SHORT $LN4@CrywolfBos
$LN3@CrywolfBos:
  03315	8b 45 fc	 mov	 eax, DWORD PTR _i$233719[ebp]
  03318	83 c0 01	 add	 eax, 1
  0331b	89 45 fc	 mov	 DWORD PTR _i$233719[ebp], eax
$LN4@CrywolfBos:
  0331e	83 7d fc 03	 cmp	 DWORD PTR _i$233719[ebp], 3
  03322	7d 22		 jge	 SHORT $LN2@CrywolfBos

; 1370 : 		{
; 1371 : 			CrywolfBossMonsterItemBag->DropCrywolfBossMonsterItem(lpObj->m_Index, btMapNumber, cX, cY);

  03324	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  03328	50		 push	 eax
  03329	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  0332d	51		 push	 ecx
  0332e	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03332	52		 push	 edx
  03333	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03336	8b 08		 mov	 ecx, DWORD PTR [eax]
  03338	51		 push	 ecx
  03339	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CrywolfBossMonsterItemBag@@3PAVCItemBagEx@@A ; CrywolfBossMonsterItemBag
  0333f	e8 00 00 00 00	 call	 ?DropCrywolfBossMonsterItem@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropCrywolfBossMonsterItem

; 1372 : 		}

  03344	eb cf		 jmp	 SHORT $LN3@CrywolfBos
$LN2@CrywolfBos:

; 1373 : 	}
; 1374 : 	else

  03346	eb 20		 jmp	 SHORT $LN6@CrywolfBos
$LN5@CrywolfBos:

; 1375 : 	{
; 1376 : 		CrywolfBossMonsterItemBag->DropCrywolfBossMonsterItem(lpObj->m_Index, btMapNumber, cX, cY);

  03348	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0334c	50		 push	 eax
  0334d	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03351	51		 push	 ecx
  03352	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03356	52		 push	 edx
  03357	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0335a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0335c	51		 push	 ecx
  0335d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CrywolfBossMonsterItemBag@@3PAVCItemBagEx@@A ; CrywolfBossMonsterItemBag
  03363	e8 00 00 00 00	 call	 ?DropCrywolfBossMonsterItem@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropCrywolfBossMonsterItem
$LN6@CrywolfBos:

; 1377 : 	}	
; 1378 : }

  03368	5f		 pop	 edi
  03369	5e		 pop	 esi
  0336a	5b		 pop	 ebx
  0336b	8b e5		 mov	 esp, ebp
  0336d	5d		 pop	 ebp
  0336e	c3		 ret	 0
?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CrywolfBossMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; RaklionBossMonsterItemBagOpen
EXTRN	?DropRaklionSelupanMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropRaklionSelupanMonsterReward
EXTRN	?RaklionSelupanItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; RaklionSelupanItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; RaklionBossMonsterItemBagOpen

; 1382 : {

  03370	55		 push	 ebp
  03371	8b ec		 mov	 ebp, esp
  03373	83 ec 40	 sub	 esp, 64			; 00000040H
  03376	53		 push	 ebx
  03377	56		 push	 esi
  03378	57		 push	 edi

; 1383 : 	RaklionSelupanItemBag->DropRaklionSelupanMonsterReward(lpObj->m_Index, btMapNumber, cX, cY);

  03379	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0337d	50		 push	 eax
  0337e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03382	51		 push	 ecx
  03383	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03387	52		 push	 edx
  03388	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0338b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0338d	51		 push	 ecx
  0338e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RaklionSelupanItemBag@@3PAVCProbabilityItemBag@@A ; RaklionSelupanItemBag
  03394	e8 00 00 00 00	 call	 ?DropRaklionSelupanMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropRaklionSelupanMonsterReward

; 1384 : }

  03399	5f		 pop	 edi
  0339a	5e		 pop	 esi
  0339b	5b		 pop	 ebx
  0339c	8b e5		 mov	 esp, ebp
  0339e	5d		 pop	 ebp
  0339f	c3		 ret	 0
?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; RaklionBossMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; LuckyCoint10ItemBagOpen
EXTRN	?LuckyCoin10@@3PAVCProbabilityItemBag@@A:DWORD	; LuckyCoin10
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; LuckyCoint10ItemBagOpen

; 1388 : {

  033a0	55		 push	 ebp
  033a1	8b ec		 mov	 ebp, esp
  033a3	83 ec 40	 sub	 esp, 64			; 00000040H
  033a6	53		 push	 ebx
  033a7	56		 push	 esi
  033a8	57		 push	 edi

; 1389 : 	LuckyCoin10->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  033a9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  033ad	50		 push	 eax
  033ae	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  033b2	51		 push	 ecx
  033b3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  033b7	52		 push	 edx
  033b8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  033bb	8b 08		 mov	 ecx, DWORD PTR [eax]
  033bd	51		 push	 ecx
  033be	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckyCoin10@@3PAVCProbabilityItemBag@@A ; LuckyCoin10
  033c4	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 1390 : }

  033c9	5f		 pop	 edi
  033ca	5e		 pop	 esi
  033cb	5b		 pop	 ebx
  033cc	8b e5		 mov	 esp, ebp
  033ce	5d		 pop	 ebp
  033cf	c3		 ret	 0
?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; LuckyCoint10ItemBagOpen
_TEXT	ENDS
PUBLIC	?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; LuckyCoint20ItemBagOpen
EXTRN	?LuckyCoin20@@3PAVCProbabilityItemBag@@A:DWORD	; LuckyCoin20
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; LuckyCoint20ItemBagOpen

; 1394 : {

  033d0	55		 push	 ebp
  033d1	8b ec		 mov	 ebp, esp
  033d3	83 ec 40	 sub	 esp, 64			; 00000040H
  033d6	53		 push	 ebx
  033d7	56		 push	 esi
  033d8	57		 push	 edi

; 1395 : 	LuckyCoin20->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  033d9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  033dd	50		 push	 eax
  033de	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  033e2	51		 push	 ecx
  033e3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  033e7	52		 push	 edx
  033e8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  033eb	8b 08		 mov	 ecx, DWORD PTR [eax]
  033ed	51		 push	 ecx
  033ee	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckyCoin20@@3PAVCProbabilityItemBag@@A ; LuckyCoin20
  033f4	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 1396 : }

  033f9	5f		 pop	 edi
  033fa	5e		 pop	 esi
  033fb	5b		 pop	 ebx
  033fc	8b e5		 mov	 esp, ebp
  033fe	5d		 pop	 ebp
  033ff	c3		 ret	 0
?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; LuckyCoint20ItemBagOpen
_TEXT	ENDS
PUBLIC	?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; LuckyCoint30ItemBagOpen
EXTRN	?LuckyCoin30@@3PAVCProbabilityItemBag@@A:DWORD	; LuckyCoin30
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; LuckyCoint30ItemBagOpen

; 1400 : {

  03400	55		 push	 ebp
  03401	8b ec		 mov	 ebp, esp
  03403	83 ec 40	 sub	 esp, 64			; 00000040H
  03406	53		 push	 ebx
  03407	56		 push	 esi
  03408	57		 push	 edi

; 1401 : 	LuckyCoin30->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  03409	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0340d	50		 push	 eax
  0340e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03412	51		 push	 ecx
  03413	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03417	52		 push	 edx
  03418	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0341b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0341d	51		 push	 ecx
  0341e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckyCoin30@@3PAVCProbabilityItemBag@@A ; LuckyCoin30
  03424	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 1402 : }

  03429	5f		 pop	 edi
  0342a	5e		 pop	 esi
  0342b	5b		 pop	 ebx
  0342c	8b e5		 mov	 esp, ebp
  0342e	5d		 pop	 ebp
  0342f	c3		 ret	 0
?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; LuckyCoint30ItemBagOpen
_TEXT	ENDS
PUBLIC	?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; KanturuMayaHandItemBagOpen
EXTRN	?DropKanturuMayaHandItem@CItemBagEx@@QAEHHEEE@Z:PROC ; CItemBagEx::DropKanturuMayaHandItem
EXTRN	?KanturuMayaHandItemBag@@3PAVCItemBagEx@@A:DWORD ; KanturuMayaHandItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; KanturuMayaHandItemBagOpen

; 1406 : {

  03430	55		 push	 ebp
  03431	8b ec		 mov	 ebp, esp
  03433	83 ec 40	 sub	 esp, 64			; 00000040H
  03436	53		 push	 ebx
  03437	56		 push	 esi
  03438	57		 push	 edi

; 1407 : 	KanturuMayaHandItemBag->DropKanturuMayaHandItem(lpObj->m_Index, btMapNumber, cX, cY);

  03439	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0343d	50		 push	 eax
  0343e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03442	51		 push	 ecx
  03443	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03447	52		 push	 edx
  03448	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0344b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0344d	51		 push	 ecx
  0344e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KanturuMayaHandItemBag@@3PAVCItemBagEx@@A ; KanturuMayaHandItemBag
  03454	e8 00 00 00 00	 call	 ?DropKanturuMayaHandItem@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropKanturuMayaHandItem

; 1408 : }

  03459	5f		 pop	 edi
  0345a	5e		 pop	 esi
  0345b	5b		 pop	 ebx
  0345c	8b e5		 mov	 esp, ebp
  0345e	5d		 pop	 ebp
  0345f	c3		 ret	 0
?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; KanturuMayaHandItemBagOpen
_TEXT	ENDS
PUBLIC	?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; KanturuNightmareItemBagOpen
EXTRN	?DropKanturuNightmareItem@CItemBagEx@@QAEHHEEE@Z:PROC ; CItemBagEx::DropKanturuNightmareItem
EXTRN	?KanturuNightmareItemBag@@3PAVCItemBagEx@@A:DWORD ; KanturuNightmareItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; KanturuNightmareItemBagOpen

; 1412 : {

  03460	55		 push	 ebp
  03461	8b ec		 mov	 ebp, esp
  03463	83 ec 40	 sub	 esp, 64			; 00000040H
  03466	53		 push	 ebx
  03467	56		 push	 esi
  03468	57		 push	 edi

; 1413 : 	KanturuNightmareItemBag->DropKanturuNightmareItem(lpObj->m_Index, btMapNumber, cX, cY);

  03469	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0346d	50		 push	 eax
  0346e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  03472	51		 push	 ecx
  03473	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  03477	52		 push	 edx
  03478	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0347b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0347d	51		 push	 ecx
  0347e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KanturuNightmareItemBag@@3PAVCItemBagEx@@A ; KanturuNightmareItemBag
  03484	e8 00 00 00 00	 call	 ?DropKanturuNightmareItem@CItemBagEx@@QAEHHEEE@Z ; CItemBagEx::DropKanturuNightmareItem

; 1414 : }

  03489	5f		 pop	 edi
  0348a	5e		 pop	 esi
  0348b	5b		 pop	 ebx
  0348c	8b e5		 mov	 esp, ebp
  0348e	5d		 pop	 ebp
  0348f	c3		 ret	 0
?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; KanturuNightmareItemBagOpen
_TEXT	ENDS
PUBLIC	??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; LuckyBoxOpenEven
;	COMDAT ??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@
CONST	SEGMENT
??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@ DB '['
	DB	'%s][%s][Lucky Box Item Drop] : (%d)(X:%d/Y:%d) Item:%s(%d) Le'
	DB	'vel:%d Op1:%d Op2:%d Op3:%d', 00H		; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv320 = -332						; size = 4
tv318 = -328						; size = 4
tv315 = -322						; size = 2
_n$233793 = -256					; size = 4
_EventItem$233791 = -252				; size = 212
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC		; LuckyBoxOpenEven

; 1422 : {

  03490	55		 push	 ebp
  03491	8b ec		 mov	 ebp, esp
  03493	81 ec 4c 01 00
	00		 sub	 esp, 332		; 0000014cH
  03499	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0349e	33 c5		 xor	 eax, ebp
  034a0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  034a3	53		 push	 ebx
  034a4	56		 push	 esi
  034a5	57		 push	 edi

; 1423 : 	float dur;
; 1424 : 	int type;
; 1425 : 	int level;
; 1426 : 	int x;
; 1427 : 	int y;
; 1428 : 	int Option1=0;

  034a6	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1429 : 	int Option2=0;

  034ad	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1430 : 	int Option3=0;

  034b4	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1431 : 	int DropItemNum;
; 1432 : 
; 1433 : 
; 1434 : 	if ( !LuckboxItemBag )

  034bb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A, 0 ; LuckboxItemBag
  034c2	75 05		 jne	 SHORT $LN14@LuckyBoxOp

; 1435 : 		return;

  034c4	e9 a4 04 00 00	 jmp	 $LN15@LuckyBoxOp
$LN14@LuckyBoxOp:

; 1436 : 
; 1437 : 	if ( LuckboxItemBag->GetBagCount() > 0 )

  034c9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  034cf	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  034d4	85 c0		 test	 eax, eax
  034d6	0f 8e e7 03 00
	00		 jle	 $LN12@LuckyBoxOp

; 1438 : 	{
; 1439 : 		if ( (rand()%10)<2 )

  034dc	e8 00 00 00 00	 call	 _rand
  034e1	99		 cdq
  034e2	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  034e7	f7 f9		 idiv	 ecx
  034e9	83 fa 02	 cmp	 edx, 2
  034ec	0f 8d d1 03 00
	00		 jge	 $LN12@LuckyBoxOp

; 1440 : 		{
; 1441 : 			DropItemNum = rand()%LuckboxItemBag->GetBagCount();

  034f2	e8 00 00 00 00	 call	 _rand
  034f7	8b f0		 mov	 esi, eax
  034f9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  034ff	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  03504	8b c8		 mov	 ecx, eax
  03506	8b c6		 mov	 eax, esi
  03508	99		 cdq
  03509	f7 f9		 idiv	 ecx
  0350b	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 1442 : 			dur=0;

  0350e	d9 ee		 fldz
  03510	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 1443 : 			x = lpObj->X;

  03513	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03516	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  0351d	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 1444 : 			y = lpObj->Y;

  03520	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03523	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  0352a	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 1445 : 			level = LuckboxItemBag->GetLevel(DropItemNum) + rand()%2;

  0352d	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  03530	50		 push	 eax
  03531	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  03537	8b 11		 mov	 edx, DWORD PTR [ecx]
  03539	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0353f	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  03542	ff d0		 call	 eax
  03544	0f b6 f0	 movzx	 esi, al
  03547	e8 00 00 00 00	 call	 _rand
  0354c	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  03551	79 05		 jns	 SHORT $LN17@LuckyBoxOp
  03553	48		 dec	 eax
  03554	83 c8 fe	 or	 eax, -2			; fffffffeH
  03557	40		 inc	 eax
$LN17@LuckyBoxOp:
  03558	03 f0		 add	 esi, eax
  0355a	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 1446 : 			type = ItemGetNumberMake(LuckboxItemBag->GetType(DropItemNum), LuckboxItemBag->GetIndex(DropItemNum));

  0355d	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  03560	50		 push	 eax
  03561	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  03567	8b 11		 mov	 edx, DWORD PTR [ecx]
  03569	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0356f	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  03572	ff d0		 call	 eax
  03574	0f b6 c8	 movzx	 ecx, al
  03577	51		 push	 ecx
  03578	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  0357b	52		 push	 edx
  0357c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  03581	8b 10		 mov	 edx, DWORD PTR [eax]
  03583	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  03589	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  0358c	ff d0		 call	 eax
  0358e	0f b6 c8	 movzx	 ecx, al
  03591	51		 push	 ecx
  03592	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  03597	83 c4 08	 add	 esp, 8
  0359a	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 1447 : 			Option1 = rand()%2;

  0359d	e8 00 00 00 00	 call	 _rand
  035a2	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  035a7	79 05		 jns	 SHORT $LN18@LuckyBoxOp
  035a9	48		 dec	 eax
  035aa	83 c8 fe	 or	 eax, -2			; fffffffeH
  035ad	40		 inc	 eax
$LN18@LuckyBoxOp:
  035ae	89 45 e4	 mov	 DWORD PTR _Option1$[ebp], eax

; 1448 : 			Option2 = rand()%2;

  035b1	e8 00 00 00 00	 call	 _rand
  035b6	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  035bb	79 05		 jns	 SHORT $LN19@LuckyBoxOp
  035bd	48		 dec	 eax
  035be	83 c8 fe	 or	 eax, -2			; fffffffeH
  035c1	40		 inc	 eax
$LN19@LuckyBoxOp:
  035c2	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 1449 : 
; 1450 : 			if ( (rand()%5) <1 )

  035c5	e8 00 00 00 00	 call	 _rand
  035ca	99		 cdq
  035cb	b9 05 00 00 00	 mov	 ecx, 5
  035d0	f7 f9		 idiv	 ecx
  035d2	83 fa 01	 cmp	 edx, 1
  035d5	7d 09		 jge	 SHORT $LN11@LuckyBoxOp

; 1451 : 				Option3 = 3;

  035d7	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 1452 : 			else

  035de	eb 17		 jmp	 SHORT $LN10@LuckyBoxOp
$LN11@LuckyBoxOp:

; 1453 : 				Option3 = rand()%2+1;

  035e0	e8 00 00 00 00	 call	 _rand
  035e5	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  035ea	79 05		 jns	 SHORT $LN20@LuckyBoxOp
  035ec	48		 dec	 eax
  035ed	83 c8 fe	 or	 eax, -2			; fffffffeH
  035f0	40		 inc	 eax
$LN20@LuckyBoxOp:
  035f1	83 c0 01	 add	 eax, 1
  035f4	89 45 dc	 mov	 DWORD PTR _Option3$[ebp], eax
$LN10@LuckyBoxOp:

; 1454 : 
; 1455 : 			if ( type == ITEMGET(12,15) ||
; 1456 : 				 type == ITEMGET(14,13) ||
; 1457 : 				 type == ITEMGET(14,14) ||
; 1458 : 				 type == ITEMGET(14,14) ||
; 1459 : 				 type == ITEMGET(14,16)	||
; 1460 : 				 type == ITEMGET(14,22)	||
; 1461 : 				 type == ITEMGET(14,31)	||
; 1462 : 				 type == ITEMGET(14,41)	||
; 1463 : 				 type == ITEMGET(14,42)	||
; 1464 : 				 type == ITEMGET(14,180)||
; 1465 : 				 type == ITEMGET(14,181)||
; 1466 : 				 type == ITEMGET(14,182)||
; 1467 : 				 type == ITEMGET(14,183)||
; 1468 : 				 type == ITEMGET(14,184)||
; 1469 : 				 type == ITEMGET(14,185)||
; 1470 : 				 type == ITEMGET(14,186)||
; 1471 : 				 type == ITEMGET(14,187)||
; 1472 : 				 type == ITEMGET(14,190)||
; 1473 : 				 type == ITEMGET(14,43) ||
; 1474 : 				 type == ITEMGET(14,44) )

  035f7	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  035fe	0f 84 bb 00 00
	00		 je	 $LN8@LuckyBoxOp
  03604	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  0360b	0f 84 ae 00 00
	00		 je	 $LN8@LuckyBoxOp
  03611	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  03618	0f 84 a1 00 00
	00		 je	 $LN8@LuckyBoxOp
  0361e	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  03625	0f 84 94 00 00
	00		 je	 $LN8@LuckyBoxOp
  0362b	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  03632	0f 84 87 00 00
	00		 je	 $LN8@LuckyBoxOp
  03638	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  0363f	74 7e		 je	 SHORT $LN8@LuckyBoxOp
  03641	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  03648	74 75		 je	 SHORT $LN8@LuckyBoxOp
  0364a	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  03651	74 6c		 je	 SHORT $LN8@LuckyBoxOp
  03653	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  0365a	74 63		 je	 SHORT $LN8@LuckyBoxOp
  0365c	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  03663	74 5a		 je	 SHORT $LN8@LuckyBoxOp
  03665	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  0366c	74 51		 je	 SHORT $LN8@LuckyBoxOp
  0366e	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  03675	74 48		 je	 SHORT $LN8@LuckyBoxOp
  03677	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  0367e	74 3f		 je	 SHORT $LN8@LuckyBoxOp
  03680	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  03687	74 36		 je	 SHORT $LN8@LuckyBoxOp
  03689	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  03690	74 2d		 je	 SHORT $LN8@LuckyBoxOp
  03692	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  03699	74 24		 je	 SHORT $LN8@LuckyBoxOp
  0369b	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  036a2	74 1b		 je	 SHORT $LN8@LuckyBoxOp
  036a4	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  036ab	74 12		 je	 SHORT $LN8@LuckyBoxOp
  036ad	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  036b4	74 09		 je	 SHORT $LN8@LuckyBoxOp
  036b6	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  036bd	75 1c		 jne	 SHORT $LN9@LuckyBoxOp
$LN8@LuckyBoxOp:

; 1475 : 			{
; 1476 : 				Option1 = 0;

  036bf	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1477 : 				Option2 = 0;

  036c6	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1478 : 				Option3 = 0;

  036cd	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1479 : 				level = 0;

  036d4	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN9@LuckyBoxOp:

; 1480 : 			}
; 1481 : 
; 1482 : 			if ( type == ITEMGET(12,30)	||
; 1483 : 				 type == ITEMGET(12,31)	||
; 1484 : 				 type == ITEMGET(12,136)||
; 1485 : 				 type == ITEMGET(12,137)||
; 1486 : 				 type == ITEMGET(12,138)||
; 1487 : 				 type == ITEMGET(12,139)||
; 1488 : 				 type == ITEMGET(12,140)||
; 1489 : 				 type == ITEMGET(12,141)||
; 1490 : 				 type == ITEMGET(12,142)||
; 1491 : 				 type == ITEMGET(12,143))

  036db	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  036e2	74 51		 je	 SHORT $LN6@LuckyBoxOp
  036e4	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  036eb	74 48		 je	 SHORT $LN6@LuckyBoxOp
  036ed	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  036f4	74 3f		 je	 SHORT $LN6@LuckyBoxOp
  036f6	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  036fd	74 36		 je	 SHORT $LN6@LuckyBoxOp
  036ff	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  03706	74 2d		 je	 SHORT $LN6@LuckyBoxOp
  03708	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  0370f	74 24		 je	 SHORT $LN6@LuckyBoxOp
  03711	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  03718	74 1b		 je	 SHORT $LN6@LuckyBoxOp
  0371a	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  03721	74 12		 je	 SHORT $LN6@LuckyBoxOp
  03723	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  0372a	74 09		 je	 SHORT $LN6@LuckyBoxOp
  0372c	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  03733	75 32		 jne	 SHORT $LN7@LuckyBoxOp
$LN6@LuckyBoxOp:

; 1492 : 			{
; 1493 : 				Option1 = 0;

  03735	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1494 : 				Option2 = 0;

  0373c	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1495 : 				Option3 = 0;

  03743	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1496 : 				level = LuckboxItemBag->GetLevel(DropItemNum);

  0374a	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0374d	50		 push	 eax
  0374e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  03754	8b 11		 mov	 edx, DWORD PTR [ecx]
  03756	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0375c	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  0375f	ff d0		 call	 eax
  03761	0f b6 c8	 movzx	 ecx, al
  03764	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN7@LuckyBoxOp:

; 1497 : 			}
; 1498 : 
; 1499 : 			if ( type == ITEMGET(13,0) ||
; 1500 : 				 type == ITEMGET(13,1) ||
; 1501 : 				 type == ITEMGET(13,2) ||
; 1502 : 				 type == ITEMGET(13,8) ||
; 1503 : 				 type == ITEMGET(13,9) ||
; 1504 : 				 type == ITEMGET(13,12) ||
; 1505 : 				 type == ITEMGET(13,13) )

  03767	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  0376e	74 36		 je	 SHORT $LN4@LuckyBoxOp
  03770	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  03777	74 2d		 je	 SHORT $LN4@LuckyBoxOp
  03779	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  03780	74 24		 je	 SHORT $LN4@LuckyBoxOp
  03782	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  03789	74 1b		 je	 SHORT $LN4@LuckyBoxOp
  0378b	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  03792	74 12		 je	 SHORT $LN4@LuckyBoxOp
  03794	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  0379b	74 09		 je	 SHORT $LN4@LuckyBoxOp
  0379d	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  037a4	75 07		 jne	 SHORT $LN5@LuckyBoxOp
$LN4@LuckyBoxOp:

; 1506 : 			{
; 1507 : 				level = 0;

  037a6	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN5@LuckyBoxOp:

; 1508 : 			}
; 1509 : 
; 1510 : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1511 : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  037ad	6a 00		 push	 0
  037af	6a 00		 push	 0
  037b1	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  037b4	8b 08		 mov	 ecx, DWORD PTR [eax]
  037b6	51		 push	 ecx
  037b7	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  037bb	52		 push	 edx
  037bc	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  037c0	50		 push	 eax
  037c1	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  037c5	51		 push	 ecx
  037c6	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  037c9	d9 bd be fe ff
	ff		 fnstcw	 WORD PTR tv315[ebp]
  037cf	0f b7 85 be fe
	ff ff		 movzx	 eax, WORD PTR tv315[ebp]
  037d6	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  037db	89 85 b8 fe ff
	ff		 mov	 DWORD PTR tv318[ebp], eax
  037e1	d9 ad b8 fe ff
	ff		 fldcw	 WORD PTR tv318[ebp]
  037e7	db 9d b4 fe ff
	ff		 fistp	 DWORD PTR tv320[ebp]
  037ed	d9 ad be fe ff
	ff		 fldcw	 WORD PTR tv315[ebp]
  037f3	0f b6 95 b4 fe
	ff ff		 movzx	 edx, BYTE PTR tv320[ebp]
  037fa	52		 push	 edx
  037fb	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  037ff	50		 push	 eax
  03800	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  03803	51		 push	 ecx
  03804	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  03808	52		 push	 edx
  03809	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  0380d	50		 push	 eax
  0380e	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  03811	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  03818	52		 push	 edx
  03819	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0381c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0381e	51		 push	 ecx
  0381f	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  03824	83 c4 34	 add	 esp, 52			; 00000034H

; 1512 : 
; 1513 : 			CItem EventItem;

  03827	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233791[ebp]
  0382d	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1514 : 
; 1515 : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  03832	6a 03		 push	 3
  03834	6a 00		 push	 0
  03836	68 ff 00 00 00	 push	 255			; 000000ffH
  0383b	6a 00		 push	 0
  0383d	6a 00		 push	 0
  0383f	6a 01		 push	 1
  03841	6a 00		 push	 0
  03843	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  03847	50		 push	 eax
  03848	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  0384c	51		 push	 ecx
  0384d	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  03851	52		 push	 edx
  03852	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  03855	50		 push	 eax
  03856	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233791[ebp]
  0385c	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 1516 : 
; 1517 : 			LogAddTD("[%s][%s][Lucky Box Item Drop] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 1518 : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 1519 : 				type, level, Option1, Option2, Option3);

  03861	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  03864	50		 push	 eax
  03865	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  03868	51		 push	 ecx
  03869	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  0386c	52		 push	 edx
  0386d	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  03870	50		 push	 eax
  03871	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  03874	51		 push	 ecx
  03875	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$233791[ebp]
  0387b	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  03880	50		 push	 eax
  03881	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  03884	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  0388b	50		 push	 eax
  0388c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0388f	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  03896	52		 push	 edx
  03897	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0389a	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  038a1	51		 push	 ecx
  038a2	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  038a5	83 c2 77	 add	 edx, 119		; 00000077H
  038a8	52		 push	 edx
  038a9	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  038ac	83 c0 6c	 add	 eax, 108		; 0000006cH
  038af	50		 push	 eax
  038b0	68 00 00 00 00	 push	 OFFSET ??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@
  038b5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  038bb	83 c4 30	 add	 esp, 48			; 00000030H

; 1520 : 
; 1521 : 			return;

  038be	e9 aa 00 00 00	 jmp	 $LN15@LuckyBoxOp
$LN12@LuckyBoxOp:

; 1522 : 		}	
; 1523 : 	}
; 1524 : 
; 1525 : 	for(int n=0;n<(rand()%4+3);n++)

  038c3	c7 85 00 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _n$233793[ebp], 0
  038cd	eb 0f		 jmp	 SHORT $LN3@LuckyBoxOp
$LN2@LuckyBoxOp:
  038cf	8b 85 00 ff ff
	ff		 mov	 eax, DWORD PTR _n$233793[ebp]
  038d5	83 c0 01	 add	 eax, 1
  038d8	89 85 00 ff ff
	ff		 mov	 DWORD PTR _n$233793[ebp], eax
$LN3@LuckyBoxOp:
  038de	e8 00 00 00 00	 call	 _rand
  038e3	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  038e8	79 05		 jns	 SHORT $LN21@LuckyBoxOp
  038ea	48		 dec	 eax
  038eb	83 c8 fc	 or	 eax, -4			; fffffffcH
  038ee	40		 inc	 eax
$LN21@LuckyBoxOp:
  038ef	83 c0 03	 add	 eax, 3
  038f2	39 85 00 ff ff
	ff		 cmp	 DWORD PTR _n$233793[ebp], eax
  038f8	7d 73		 jge	 SHORT $LN1@LuckyBoxOp

; 1526 : 	{
; 1527 : 		x = lpObj->X-2;

  038fa	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  038fd	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  03904	83 e9 02	 sub	 ecx, 2
  03907	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 1528 : 		y = lpObj->Y-2;

  0390a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0390d	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  03914	83 e9 02	 sub	 ecx, 2
  03917	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 1529 : 		x+= rand()%3;

  0391a	e8 00 00 00 00	 call	 _rand
  0391f	99		 cdq
  03920	b9 03 00 00 00	 mov	 ecx, 3
  03925	f7 f9		 idiv	 ecx
  03927	03 55 ec	 add	 edx, DWORD PTR _x$[ebp]
  0392a	89 55 ec	 mov	 DWORD PTR _x$[ebp], edx

; 1530 : 		y+= rand()%3;

  0392d	e8 00 00 00 00	 call	 _rand
  03932	99		 cdq
  03933	b9 03 00 00 00	 mov	 ecx, 3
  03938	f7 f9		 idiv	 ecx
  0393a	03 55 e8	 add	 edx, DWORD PTR _y$[ebp]
  0393d	89 55 e8	 mov	 DWORD PTR _y$[ebp], edx

; 1531 : 		MapC[lpObj->MapNumber].MoneyItemDrop(1000, x, y);

  03940	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  03943	50		 push	 eax
  03944	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  03947	51		 push	 ecx
  03948	68 e8 03 00 00	 push	 1000			; 000003e8H
  0394d	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  03950	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  03957	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  0395d	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  03963	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 1532 : 	}

  03968	e9 62 ff ff ff	 jmp	 $LN2@LuckyBoxOp
$LN1@LuckyBoxOp:
$LN15@LuckyBoxOp:

; 1533 : }

  0396d	5f		 pop	 edi
  0396e	5e		 pop	 esi
  0396f	5b		 pop	 ebx
  03970	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  03973	33 cd		 xor	 ecx, ebp
  03975	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0397a	8b e5		 mov	 esp, ebp
  0397c	5d		 pop	 ebp
  0397d	c3		 ret	 0
?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; LuckyBoxOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@ ; `string'
PUBLIC	?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z	; AttackEvent53BagOpen
EXTRN	?gObjMonsterTopHitDamageUser@@YAHPAUOBJECTSTRUCT@@@Z:PROC ; gObjMonsterTopHitDamageUser
EXTRN	?Mon53@@3PAVCItemBag@@A:DWORD			; Mon53
;	COMDAT ??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@
CONST	SEGMENT
??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@ DB 'E'
	DB	'vent ItemDrop(53) : Item:%d Level:%d op1:%d op2:%d op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv239 = -124						; size = 4
tv237 = -120						; size = 4
tv139 = -116						; size = 4
tv234 = -114						; size = 2
_iMaxHitIndex$233829 = -48				; size = 4
_rnd2$233814 = -44					; size = 4
_rnd1$233813 = -40					; size = 4
_DropItemNum$ = -36					; size = 4
_Option3$ = -32						; size = 4
_Option2$ = -28						; size = 4
_Option1$ = -24						; size = 4
_y$ = -20						; size = 4
_x$ = -16						; size = 4
_level$ = -12						; size = 4
_type$ = -8						; size = 4
_dur$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z PROC	; AttackEvent53BagOpen

; 1538 : {

  03980	55		 push	 ebp
  03981	8b ec		 mov	 ebp, esp
  03983	83 ec 7c	 sub	 esp, 124		; 0000007cH
  03986	53		 push	 ebx
  03987	56		 push	 esi
  03988	57		 push	 edi

; 1539 : 	float dur;
; 1540 : 	int type;
; 1541 : 	int level;
; 1542 : 	int x;
; 1543 : 	int y;
; 1544 : 	int Option1=0;

  03989	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1545 : 	int Option2=0;

  03990	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1546 : 	int Option3=0;

  03997	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1547 : 	int DropItemNum;
; 1548 : 
; 1549 : 
; 1550 : 	if ( !Mon53 )

  0399e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?Mon53@@3PAVCItemBag@@A, 0 ; Mon53
  039a5	75 07		 jne	 SHORT $LN16@AttackEven

; 1551 : 		return FALSE;

  039a7	33 c0		 xor	 eax, eax
  039a9	e9 5c 02 00 00	 jmp	 $LN17@AttackEven
$LN16@AttackEven:

; 1552 : 
; 1553 : 	if ( Mon53->GetBagCount() > 0 )

  039ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  039b4	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  039b9	85 c0		 test	 eax, eax
  039bb	0f 8e 47 02 00
	00		 jle	 $LN15@AttackEven

; 1554 : 	{
; 1555 : 	
; 1556 : 		DropItemNum = rand()%Mon53->GetBagCount();

  039c1	e8 00 00 00 00	 call	 _rand
  039c6	8b f0		 mov	 esi, eax
  039c8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  039ce	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  039d3	8b c8		 mov	 ecx, eax
  039d5	8b c6		 mov	 eax, esi
  039d7	99		 cdq
  039d8	f7 f9		 idiv	 ecx
  039da	89 55 dc	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 1557 : 		dur=0;

  039dd	d9 ee		 fldz
  039df	d9 5d fc	 fstp	 DWORD PTR _dur$[ebp]

; 1558 : 		x = lpObj->X;

  039e2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  039e5	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  039ec	89 4d f0	 mov	 DWORD PTR _x$[ebp], ecx

; 1559 : 		y = lpObj->Y;

  039ef	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  039f2	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  039f9	89 4d ec	 mov	 DWORD PTR _y$[ebp], ecx

; 1560 : 		level = Mon53->GetLevel(DropItemNum);

  039fc	8b 45 dc	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  039ff	50		 push	 eax
  03a00	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  03a06	8b 11		 mov	 edx, DWORD PTR [ecx]
  03a08	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  03a0e	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  03a11	ff d0		 call	 eax
  03a13	0f b6 c8	 movzx	 ecx, al
  03a16	89 4d f4	 mov	 DWORD PTR _level$[ebp], ecx

; 1561 : 		type = ItemGetNumberMake(Mon53->GetType(DropItemNum), Mon53->GetIndex(DropItemNum));

  03a19	8b 45 dc	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  03a1c	50		 push	 eax
  03a1d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  03a23	8b 11		 mov	 edx, DWORD PTR [ecx]
  03a25	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  03a2b	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  03a2e	ff d0		 call	 eax
  03a30	0f b6 c8	 movzx	 ecx, al
  03a33	51		 push	 ecx
  03a34	8b 55 dc	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  03a37	52		 push	 edx
  03a38	a1 00 00 00 00	 mov	 eax, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  03a3d	8b 10		 mov	 edx, DWORD PTR [eax]
  03a3f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  03a45	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  03a48	ff d0		 call	 eax
  03a4a	0f b6 c8	 movzx	 ecx, al
  03a4d	51		 push	 ecx
  03a4e	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  03a53	83 c4 08	 add	 esp, 8
  03a56	89 45 f8	 mov	 DWORD PTR _type$[ebp], eax

; 1562 : 
; 1563 : 		if ( (rand()%100)<6)

  03a59	e8 00 00 00 00	 call	 _rand
  03a5e	99		 cdq
  03a5f	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03a64	f7 f9		 idiv	 ecx
  03a66	83 fa 06	 cmp	 edx, 6
  03a69	7d 07		 jge	 SHORT $LN14@AttackEven

; 1564 : 			Option1 = 1;

  03a6b	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN14@AttackEven:

; 1565 : 		
; 1566 : 		if ( (rand()%100)<4)

  03a72	e8 00 00 00 00	 call	 _rand
  03a77	99		 cdq
  03a78	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03a7d	f7 f9		 idiv	 ecx
  03a7f	83 fa 04	 cmp	 edx, 4
  03a82	7d 07		 jge	 SHORT $LN13@AttackEven

; 1567 : 			Option2 = 1;

  03a84	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 1
$LN13@AttackEven:

; 1568 : 
; 1569 : 		int rnd1;
; 1570 : 		int rnd2 = rand() % 3;

  03a8b	e8 00 00 00 00	 call	 _rand
  03a90	99		 cdq
  03a91	b9 03 00 00 00	 mov	 ecx, 3
  03a96	f7 f9		 idiv	 ecx
  03a98	89 55 d4	 mov	 DWORD PTR _rnd2$233814[ebp], edx

; 1571 : 		rnd1 = rand() % 100;

  03a9b	e8 00 00 00 00	 call	 _rand
  03aa0	99		 cdq
  03aa1	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03aa6	f7 f9		 idiv	 ecx
  03aa8	89 55 d8	 mov	 DWORD PTR _rnd1$233813[ebp], edx

; 1572 : 
; 1573 : 		switch ( rnd2 )

  03aab	8b 45 d4	 mov	 eax, DWORD PTR _rnd2$233814[ebp]
  03aae	89 45 8c	 mov	 DWORD PTR tv139[ebp], eax
  03ab1	83 7d 8c 00	 cmp	 DWORD PTR tv139[ebp], 0
  03ab5	74 0e		 je	 SHORT $LN10@AttackEven
  03ab7	83 7d 8c 01	 cmp	 DWORD PTR tv139[ebp], 1
  03abb	74 17		 je	 SHORT $LN8@AttackEven
  03abd	83 7d 8c 02	 cmp	 DWORD PTR tv139[ebp], 2
  03ac1	74 20		 je	 SHORT $LN6@AttackEven
  03ac3	eb 2b		 jmp	 SHORT $LN11@AttackEven
$LN10@AttackEven:

; 1574 : 		{
; 1575 : 			case 0:
; 1576 : 				if ( rnd1 < 4 )

  03ac5	83 7d d8 04	 cmp	 DWORD PTR _rnd1$233813[ebp], 4
  03ac9	7d 07		 jge	 SHORT $LN9@AttackEven

; 1577 : 					Option3 = 3;

  03acb	c7 45 e0 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3
$LN9@AttackEven:

; 1578 : 				break;

  03ad2	eb 1c		 jmp	 SHORT $LN11@AttackEven
$LN8@AttackEven:

; 1579 : 			case 1:
; 1580 : 				if ( rnd1 < 8 )

  03ad4	83 7d d8 08	 cmp	 DWORD PTR _rnd1$233813[ebp], 8
  03ad8	7d 07		 jge	 SHORT $LN7@AttackEven

; 1581 : 					Option3 = 2;

  03ada	c7 45 e0 02 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 2
$LN7@AttackEven:

; 1582 : 				break;

  03ae1	eb 0d		 jmp	 SHORT $LN11@AttackEven
$LN6@AttackEven:

; 1583 : 			case 2:
; 1584 : 				if ( rnd1 < 12 )

  03ae3	83 7d d8 0c	 cmp	 DWORD PTR _rnd1$233813[ebp], 12 ; 0000000cH
  03ae7	7d 07		 jge	 SHORT $LN5@AttackEven

; 1585 : 					Option3 = 1;

  03ae9	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 1
$LN5@AttackEven:
$LN11@AttackEven:

; 1586 : 				break;
; 1587 : 		}
; 1588 : 
; 1589 : 		if ( type == ITEMGET(12,15) ||
; 1590 : 			 type == ITEMGET(14,13) ||
; 1591 : 			 type == ITEMGET(14,14) )

  03af0	81 7d f8 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  03af7	74 12		 je	 SHORT $LN3@AttackEven
  03af9	81 7d f8 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  03b00	74 09		 je	 SHORT $LN3@AttackEven
  03b02	81 7d f8 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  03b09	75 1c		 jne	 SHORT $LN4@AttackEven
$LN3@AttackEven:

; 1592 : 		{
; 1593 : 			Option1=0;

  03b0b	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1594 : 			Option2=0;

  03b12	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1595 : 			Option3=0;

  03b19	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1596 : 			level = 0;

  03b20	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN4@AttackEven:

; 1597 : 		}
; 1598 : 
; 1599 : 		if ( type == ITEMGET(13,0) ||
; 1600 : 			 type == ITEMGET(13,1) ||
; 1601 : 			 type == ITEMGET(13,2) ||
; 1602 : 			 type == ITEMGET(13,8) ||
; 1603 : 			 type == ITEMGET(13,9) ||
; 1604 : 			 type == ITEMGET(13,12) ||
; 1605 : 			 type == ITEMGET(13,13) )

  03b27	81 7d f8 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  03b2e	74 36		 je	 SHORT $LN1@AttackEven
  03b30	81 7d f8 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  03b37	74 2d		 je	 SHORT $LN1@AttackEven
  03b39	81 7d f8 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  03b40	74 24		 je	 SHORT $LN1@AttackEven
  03b42	81 7d f8 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  03b49	74 1b		 je	 SHORT $LN1@AttackEven
  03b4b	81 7d f8 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  03b52	74 12		 je	 SHORT $LN1@AttackEven
  03b54	81 7d f8 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  03b5b	74 09		 je	 SHORT $LN1@AttackEven
  03b5d	81 7d f8 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  03b64	75 07		 jne	 SHORT $LN2@AttackEven
$LN1@AttackEven:

; 1606 : 		{
; 1607 : 			level = 0;

  03b66	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@AttackEven:

; 1608 : 		}
; 1609 : 
; 1610 : 		int iMaxHitIndex = gObjMonsterTopHitDamageUser(lpObj);

  03b6d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03b70	50		 push	 eax
  03b71	e8 00 00 00 00	 call	 ?gObjMonsterTopHitDamageUser@@YAHPAUOBJECTSTRUCT@@@Z ; gObjMonsterTopHitDamageUser
  03b76	83 c4 04	 add	 esp, 4
  03b79	89 45 d0	 mov	 DWORD PTR _iMaxHitIndex$233829[ebp], eax

; 1611 : 
; 1612 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1613 : 			(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, iMaxHitIndex, 0, 0);

  03b7c	6a 00		 push	 0
  03b7e	6a 00		 push	 0
  03b80	8b 45 d0	 mov	 eax, DWORD PTR _iMaxHitIndex$233829[ebp]
  03b83	50		 push	 eax
  03b84	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option3$[ebp]
  03b88	51		 push	 ecx
  03b89	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option2$[ebp]
  03b8d	52		 push	 edx
  03b8e	0f b6 45 e8	 movzx	 eax, BYTE PTR _Option1$[ebp]
  03b92	50		 push	 eax
  03b93	d9 45 fc	 fld	 DWORD PTR _dur$[ebp]
  03b96	d9 7d 8e	 fnstcw	 WORD PTR tv234[ebp]
  03b99	0f b7 45 8e	 movzx	 eax, WORD PTR tv234[ebp]
  03b9d	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  03ba2	89 45 88	 mov	 DWORD PTR tv237[ebp], eax
  03ba5	d9 6d 88	 fldcw	 WORD PTR tv237[ebp]
  03ba8	db 5d 84	 fistp	 DWORD PTR tv239[ebp]
  03bab	d9 6d 8e	 fldcw	 WORD PTR tv234[ebp]
  03bae	0f b6 4d 84	 movzx	 ecx, BYTE PTR tv239[ebp]
  03bb2	51		 push	 ecx
  03bb3	0f b6 55 f4	 movzx	 edx, BYTE PTR _level$[ebp]
  03bb7	52		 push	 edx
  03bb8	8b 45 f8	 mov	 eax, DWORD PTR _type$[ebp]
  03bbb	50		 push	 eax
  03bbc	0f b6 4d ec	 movzx	 ecx, BYTE PTR _y$[ebp]
  03bc0	51		 push	 ecx
  03bc1	0f b6 55 f0	 movzx	 edx, BYTE PTR _x$[ebp]
  03bc5	52		 push	 edx
  03bc6	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03bc9	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  03bd0	51		 push	 ecx
  03bd1	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  03bd4	8b 02		 mov	 eax, DWORD PTR [edx]
  03bd6	50		 push	 eax
  03bd7	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  03bdc	83 c4 34	 add	 esp, 52			; 00000034H

; 1614 : 
; 1615 : 		LogAdd("Event ItemDrop(53) : Item:%d Level:%d op1:%d op2:%d op3:%d",
; 1616 : 			type, level, Option1, Option2, Option3);

  03bdf	8b 45 e0	 mov	 eax, DWORD PTR _Option3$[ebp]
  03be2	50		 push	 eax
  03be3	8b 4d e4	 mov	 ecx, DWORD PTR _Option2$[ebp]
  03be6	51		 push	 ecx
  03be7	8b 55 e8	 mov	 edx, DWORD PTR _Option1$[ebp]
  03bea	52		 push	 edx
  03beb	8b 45 f4	 mov	 eax, DWORD PTR _level$[ebp]
  03bee	50		 push	 eax
  03bef	8b 4d f8	 mov	 ecx, DWORD PTR _type$[ebp]
  03bf2	51		 push	 ecx
  03bf3	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@
  03bf8	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  03bfe	83 c4 18	 add	 esp, 24			; 00000018H

; 1617 : 
; 1618 : 		return TRUE;

  03c01	b8 01 00 00 00	 mov	 eax, 1
  03c06	eb 02		 jmp	 SHORT $LN17@AttackEven
$LN15@AttackEven:

; 1619 : 	}
; 1620 : 
; 1621 : 	return FALSE;

  03c08	33 c0		 xor	 eax, eax
$LN17@AttackEven:

; 1622 : }

  03c0a	5f		 pop	 edi
  03c0b	5e		 pop	 esi
  03c0c	5b		 pop	 ebx
  03c0d	8b e5		 mov	 esp, ebp
  03c0f	5d		 pop	 ebp
  03c10	c3		 ret	 0
?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z ENDP	; AttackEvent53BagOpen
_TEXT	ENDS
PUBLIC	??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@ ; `string'
PUBLIC	?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z	; AttackEvent55BagOpen
EXTRN	?Mon55@@3PAVCItemBag@@A:DWORD			; Mon55
;	COMDAT ??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@
CONST	SEGMENT
??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@ DB 'E'
	DB	'vent ItemDrop(55) : Item:%d Level:%d op1:%d op2:%d op3:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv282 = -124						; size = 4
tv280 = -120						; size = 4
tv142 = -116						; size = 4
tv277 = -114						; size = 2
_iMaxHitIndex$233873 = -48				; size = 4
_rnd2$233856 = -44					; size = 4
_rnd1$233855 = -40					; size = 4
_DropItemNum$ = -36					; size = 4
_Option3$ = -32						; size = 4
_Option2$ = -28						; size = 4
_Option1$ = -24						; size = 4
_y$ = -20						; size = 4
_x$ = -16						; size = 4
_level$ = -12						; size = 4
_type$ = -8						; size = 4
_dur$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z PROC	; AttackEvent55BagOpen

; 1627 : {

  03c20	55		 push	 ebp
  03c21	8b ec		 mov	 ebp, esp
  03c23	83 ec 7c	 sub	 esp, 124		; 0000007cH
  03c26	53		 push	 ebx
  03c27	56		 push	 esi
  03c28	57		 push	 edi

; 1628 : 	float dur;
; 1629 : 	int type;
; 1630 : 	int level;
; 1631 : 	int x;
; 1632 : 	int y;
; 1633 : 	int Option1=0;

  03c29	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1634 : 	int Option2=0;

  03c30	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1635 : 	int Option3=0;

  03c37	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1636 : 	int DropItemNum;
; 1637 : 
; 1638 : 
; 1639 : 	if ( !Mon55 )

  03c3e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?Mon55@@3PAVCItemBag@@A, 0 ; Mon55
  03c45	75 07		 jne	 SHORT $LN18@AttackEven@2

; 1640 : 		return FALSE;

  03c47	33 c0		 xor	 eax, eax
  03c49	e9 a8 03 00 00	 jmp	 $LN19@AttackEven@2
$LN18@AttackEven@2:

; 1641 : 
; 1642 : 	if ( Mon55->GetBagCount() > 0 )

  03c4e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03c54	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  03c59	85 c0		 test	 eax, eax
  03c5b	0f 8e 93 03 00
	00		 jle	 $LN17@AttackEven@2

; 1643 : 	{
; 1644 : 	
; 1645 : 		DropItemNum = rand()%Mon55->GetBagCount();

  03c61	e8 00 00 00 00	 call	 _rand
  03c66	8b f0		 mov	 esi, eax
  03c68	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03c6e	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  03c73	8b c8		 mov	 ecx, eax
  03c75	8b c6		 mov	 eax, esi
  03c77	99		 cdq
  03c78	f7 f9		 idiv	 ecx
  03c7a	89 55 dc	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 1646 : 		dur=0;

  03c7d	d9 ee		 fldz
  03c7f	d9 5d fc	 fstp	 DWORD PTR _dur$[ebp]

; 1647 : 		x = lpObj->X;

  03c82	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03c85	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  03c8c	89 4d f0	 mov	 DWORD PTR _x$[ebp], ecx

; 1648 : 		y = lpObj->Y;

  03c8f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03c92	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  03c99	89 4d ec	 mov	 DWORD PTR _y$[ebp], ecx

; 1649 : 		level = Mon55->GetLevel(DropItemNum) + rand() % 2;

  03c9c	8b 45 dc	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  03c9f	50		 push	 eax
  03ca0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03ca6	8b 11		 mov	 edx, DWORD PTR [ecx]
  03ca8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03cae	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  03cb1	ff d0		 call	 eax
  03cb3	0f b6 f0	 movzx	 esi, al
  03cb6	e8 00 00 00 00	 call	 _rand
  03cbb	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  03cc0	79 05		 jns	 SHORT $LN21@AttackEven@2
  03cc2	48		 dec	 eax
  03cc3	83 c8 fe	 or	 eax, -2			; fffffffeH
  03cc6	40		 inc	 eax
$LN21@AttackEven@2:
  03cc7	03 f0		 add	 esi, eax
  03cc9	89 75 f4	 mov	 DWORD PTR _level$[ebp], esi

; 1650 : 		type = ItemGetNumberMake(Mon55->GetType(DropItemNum), Mon55->GetIndex(DropItemNum));

  03ccc	8b 45 dc	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  03ccf	50		 push	 eax
  03cd0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03cd6	8b 11		 mov	 edx, DWORD PTR [ecx]
  03cd8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03cde	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  03ce1	ff d0		 call	 eax
  03ce3	0f b6 c8	 movzx	 ecx, al
  03ce6	51		 push	 ecx
  03ce7	8b 55 dc	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  03cea	52		 push	 edx
  03ceb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03cf0	8b 10		 mov	 edx, DWORD PTR [eax]
  03cf2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03cf8	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  03cfb	ff d0		 call	 eax
  03cfd	0f b6 c8	 movzx	 ecx, al
  03d00	51		 push	 ecx
  03d01	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  03d06	83 c4 08	 add	 esp, 8
  03d09	89 45 f8	 mov	 DWORD PTR _type$[ebp], eax

; 1651 : 
; 1652 : 		if ( (rand()%100)<6)

  03d0c	e8 00 00 00 00	 call	 _rand
  03d11	99		 cdq
  03d12	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03d17	f7 f9		 idiv	 ecx
  03d19	83 fa 06	 cmp	 edx, 6
  03d1c	7d 07		 jge	 SHORT $LN16@AttackEven@2

; 1653 : 			Option1 = 1;

  03d1e	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN16@AttackEven@2:

; 1654 : 		
; 1655 : 		if ( (rand()%100)<4)

  03d25	e8 00 00 00 00	 call	 _rand
  03d2a	99		 cdq
  03d2b	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03d30	f7 f9		 idiv	 ecx
  03d32	83 fa 04	 cmp	 edx, 4
  03d35	7d 07		 jge	 SHORT $LN15@AttackEven@2

; 1656 : 			Option2 = 1;

  03d37	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 1
$LN15@AttackEven@2:

; 1657 : 
; 1658 : 		int rnd1;
; 1659 : 		int rnd2 = rand() % 3;

  03d3e	e8 00 00 00 00	 call	 _rand
  03d43	99		 cdq
  03d44	b9 03 00 00 00	 mov	 ecx, 3
  03d49	f7 f9		 idiv	 ecx
  03d4b	89 55 d4	 mov	 DWORD PTR _rnd2$233856[ebp], edx

; 1660 : 		rnd1 = rand() % 100;

  03d4e	e8 00 00 00 00	 call	 _rand
  03d53	99		 cdq
  03d54	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  03d59	f7 f9		 idiv	 ecx
  03d5b	89 55 d8	 mov	 DWORD PTR _rnd1$233855[ebp], edx

; 1661 : 
; 1662 : 		switch ( rnd2 )

  03d5e	8b 45 d4	 mov	 eax, DWORD PTR _rnd2$233856[ebp]
  03d61	89 45 8c	 mov	 DWORD PTR tv142[ebp], eax
  03d64	83 7d 8c 00	 cmp	 DWORD PTR tv142[ebp], 0
  03d68	74 0e		 je	 SHORT $LN12@AttackEven@2
  03d6a	83 7d 8c 01	 cmp	 DWORD PTR tv142[ebp], 1
  03d6e	74 17		 je	 SHORT $LN10@AttackEven@2
  03d70	83 7d 8c 02	 cmp	 DWORD PTR tv142[ebp], 2
  03d74	74 20		 je	 SHORT $LN8@AttackEven@2
  03d76	eb 2b		 jmp	 SHORT $LN13@AttackEven@2
$LN12@AttackEven@2:

; 1663 : 		{
; 1664 : 			case 0:
; 1665 : 				if ( rnd1 < 4 )

  03d78	83 7d d8 04	 cmp	 DWORD PTR _rnd1$233855[ebp], 4
  03d7c	7d 07		 jge	 SHORT $LN11@AttackEven@2

; 1666 : 					Option3 = 3;

  03d7e	c7 45 e0 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3
$LN11@AttackEven@2:

; 1667 : 				break;

  03d85	eb 1c		 jmp	 SHORT $LN13@AttackEven@2
$LN10@AttackEven@2:

; 1668 : 			case 1:
; 1669 : 				if ( rnd1 < 8 )

  03d87	83 7d d8 08	 cmp	 DWORD PTR _rnd1$233855[ebp], 8
  03d8b	7d 07		 jge	 SHORT $LN9@AttackEven@2

; 1670 : 					Option3 = 2;

  03d8d	c7 45 e0 02 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 2
$LN9@AttackEven@2:

; 1671 : 				break;

  03d94	eb 0d		 jmp	 SHORT $LN13@AttackEven@2
$LN8@AttackEven@2:

; 1672 : 			case 2:
; 1673 : 				if ( rnd1 < 12 )

  03d96	83 7d d8 0c	 cmp	 DWORD PTR _rnd1$233855[ebp], 12 ; 0000000cH
  03d9a	7d 07		 jge	 SHORT $LN7@AttackEven@2

; 1674 : 					Option3 = 1;

  03d9c	c7 45 e0 01 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 1
$LN7@AttackEven@2:
$LN13@AttackEven@2:

; 1675 : 				break;
; 1676 : 		}
; 1677 : 
; 1678 : 		if ( type == ITEMGET(12,15) ||
; 1679 : 				type == ITEMGET(14,13) ||
; 1680 : 				type == ITEMGET(14,14) ||
; 1681 : 				type == ITEMGET(14,14) ||
; 1682 : 				type == ITEMGET(14,16)	||
; 1683 : 				type == ITEMGET(14,22)	||
; 1684 : 				type == ITEMGET(14,31)	||
; 1685 : 				type == ITEMGET(14,41)	||
; 1686 : 				type == ITEMGET(14,42)	||
; 1687 : 				type == ITEMGET(14,180)||
; 1688 : 				type == ITEMGET(14,181)||
; 1689 : 				type == ITEMGET(14,182)||
; 1690 : 				type == ITEMGET(14,183)||
; 1691 : 				type == ITEMGET(14,184)||
; 1692 : 				type == ITEMGET(14,185)||
; 1693 : 				type == ITEMGET(14,186)||
; 1694 : 				type == ITEMGET(14,187)||
; 1695 : 				type == ITEMGET(14,190)||
; 1696 : 				type == ITEMGET(14,43) ||
; 1697 : 				type == ITEMGET(14,44) )

  03da3	81 7d f8 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  03daa	0f 84 bb 00 00
	00		 je	 $LN5@AttackEven@2
  03db0	81 7d f8 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  03db7	0f 84 ae 00 00
	00		 je	 $LN5@AttackEven@2
  03dbd	81 7d f8 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  03dc4	0f 84 a1 00 00
	00		 je	 $LN5@AttackEven@2
  03dca	81 7d f8 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  03dd1	0f 84 94 00 00
	00		 je	 $LN5@AttackEven@2
  03dd7	81 7d f8 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  03dde	0f 84 87 00 00
	00		 je	 $LN5@AttackEven@2
  03de4	81 7d f8 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  03deb	74 7e		 je	 SHORT $LN5@AttackEven@2
  03ded	81 7d f8 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  03df4	74 75		 je	 SHORT $LN5@AttackEven@2
  03df6	81 7d f8 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  03dfd	74 6c		 je	 SHORT $LN5@AttackEven@2
  03dff	81 7d f8 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  03e06	74 63		 je	 SHORT $LN5@AttackEven@2
  03e08	81 7d f8 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  03e0f	74 5a		 je	 SHORT $LN5@AttackEven@2
  03e11	81 7d f8 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  03e18	74 51		 je	 SHORT $LN5@AttackEven@2
  03e1a	81 7d f8 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  03e21	74 48		 je	 SHORT $LN5@AttackEven@2
  03e23	81 7d f8 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  03e2a	74 3f		 je	 SHORT $LN5@AttackEven@2
  03e2c	81 7d f8 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  03e33	74 36		 je	 SHORT $LN5@AttackEven@2
  03e35	81 7d f8 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  03e3c	74 2d		 je	 SHORT $LN5@AttackEven@2
  03e3e	81 7d f8 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  03e45	74 24		 je	 SHORT $LN5@AttackEven@2
  03e47	81 7d f8 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  03e4e	74 1b		 je	 SHORT $LN5@AttackEven@2
  03e50	81 7d f8 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  03e57	74 12		 je	 SHORT $LN5@AttackEven@2
  03e59	81 7d f8 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  03e60	74 09		 je	 SHORT $LN5@AttackEven@2
  03e62	81 7d f8 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  03e69	75 1c		 jne	 SHORT $LN6@AttackEven@2
$LN5@AttackEven@2:

; 1698 : 		{
; 1699 : 			Option1 = 0;

  03e6b	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1700 : 			Option2 = 0;

  03e72	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1701 : 			Option3 = 0;

  03e79	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1702 : 			level = 0;

  03e80	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN6@AttackEven@2:

; 1703 : 		}
; 1704 : 
; 1705 : 		if ( type == ITEMGET(12,30)	||
; 1706 : 				type == ITEMGET(12,31)	||
; 1707 : 				type == ITEMGET(12,136)||
; 1708 : 				type == ITEMGET(12,137)||
; 1709 : 				type == ITEMGET(12,138)||
; 1710 : 				type == ITEMGET(12,139)||
; 1711 : 				type == ITEMGET(12,140)||
; 1712 : 				type == ITEMGET(12,141)||
; 1713 : 				type == ITEMGET(12,142)||
; 1714 : 				type == ITEMGET(12,143))

  03e87	81 7d f8 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  03e8e	74 51		 je	 SHORT $LN3@AttackEven@2
  03e90	81 7d f8 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  03e97	74 48		 je	 SHORT $LN3@AttackEven@2
  03e99	81 7d f8 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  03ea0	74 3f		 je	 SHORT $LN3@AttackEven@2
  03ea2	81 7d f8 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  03ea9	74 36		 je	 SHORT $LN3@AttackEven@2
  03eab	81 7d f8 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  03eb2	74 2d		 je	 SHORT $LN3@AttackEven@2
  03eb4	81 7d f8 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  03ebb	74 24		 je	 SHORT $LN3@AttackEven@2
  03ebd	81 7d f8 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  03ec4	74 1b		 je	 SHORT $LN3@AttackEven@2
  03ec6	81 7d f8 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  03ecd	74 12		 je	 SHORT $LN3@AttackEven@2
  03ecf	81 7d f8 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  03ed6	74 09		 je	 SHORT $LN3@AttackEven@2
  03ed8	81 7d f8 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  03edf	75 32		 jne	 SHORT $LN4@AttackEven@2
$LN3@AttackEven@2:

; 1715 : 		{
; 1716 : 			Option1 = 0;

  03ee1	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 1717 : 			Option2 = 0;

  03ee8	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 1718 : 			Option3 = 0;

  03eef	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 1719 : 			level = Mon55->GetLevel(DropItemNum);

  03ef6	8b 45 dc	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  03ef9	50		 push	 eax
  03efa	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03f00	8b 11		 mov	 edx, DWORD PTR [ecx]
  03f02	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  03f08	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  03f0b	ff d0		 call	 eax
  03f0d	0f b6 c8	 movzx	 ecx, al
  03f10	89 4d f4	 mov	 DWORD PTR _level$[ebp], ecx
$LN4@AttackEven@2:

; 1720 : 		}
; 1721 : 
; 1722 : 		if ( type == ITEMGET(13,0) ||
; 1723 : 			 type == ITEMGET(13,1) ||
; 1724 : 			 type == ITEMGET(13,2) ||
; 1725 : 			 type == ITEMGET(13,8) ||
; 1726 : 			 type == ITEMGET(13,9) ||
; 1727 : 			 type == ITEMGET(13,12) ||
; 1728 : 			 type == ITEMGET(13,13) )

  03f13	81 7d f8 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  03f1a	74 36		 je	 SHORT $LN1@AttackEven@2
  03f1c	81 7d f8 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  03f23	74 2d		 je	 SHORT $LN1@AttackEven@2
  03f25	81 7d f8 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  03f2c	74 24		 je	 SHORT $LN1@AttackEven@2
  03f2e	81 7d f8 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  03f35	74 1b		 je	 SHORT $LN1@AttackEven@2
  03f37	81 7d f8 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  03f3e	74 12		 je	 SHORT $LN1@AttackEven@2
  03f40	81 7d f8 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  03f47	74 09		 je	 SHORT $LN1@AttackEven@2
  03f49	81 7d f8 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  03f50	75 07		 jne	 SHORT $LN2@AttackEven@2
$LN1@AttackEven@2:

; 1729 : 		{
; 1730 : 			level = 0;

  03f52	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@AttackEven@2:

; 1731 : 		}
; 1732 : 
; 1733 : 		int iMaxHitIndex = gObjMonsterTopHitDamageUser(lpObj);

  03f59	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03f5c	50		 push	 eax
  03f5d	e8 00 00 00 00	 call	 ?gObjMonsterTopHitDamageUser@@YAHPAUOBJECTSTRUCT@@@Z ; gObjMonsterTopHitDamageUser
  03f62	83 c4 04	 add	 esp, 4
  03f65	89 45 d0	 mov	 DWORD PTR _iMaxHitIndex$233873[ebp], eax

; 1734 : 
; 1735 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1736 : 			(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, iMaxHitIndex, 0, 0);

  03f68	6a 00		 push	 0
  03f6a	6a 00		 push	 0
  03f6c	8b 45 d0	 mov	 eax, DWORD PTR _iMaxHitIndex$233873[ebp]
  03f6f	50		 push	 eax
  03f70	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option3$[ebp]
  03f74	51		 push	 ecx
  03f75	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option2$[ebp]
  03f79	52		 push	 edx
  03f7a	0f b6 45 e8	 movzx	 eax, BYTE PTR _Option1$[ebp]
  03f7e	50		 push	 eax
  03f7f	d9 45 fc	 fld	 DWORD PTR _dur$[ebp]
  03f82	d9 7d 8e	 fnstcw	 WORD PTR tv277[ebp]
  03f85	0f b7 45 8e	 movzx	 eax, WORD PTR tv277[ebp]
  03f89	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  03f8e	89 45 88	 mov	 DWORD PTR tv280[ebp], eax
  03f91	d9 6d 88	 fldcw	 WORD PTR tv280[ebp]
  03f94	db 5d 84	 fistp	 DWORD PTR tv282[ebp]
  03f97	d9 6d 8e	 fldcw	 WORD PTR tv277[ebp]
  03f9a	0f b6 4d 84	 movzx	 ecx, BYTE PTR tv282[ebp]
  03f9e	51		 push	 ecx
  03f9f	0f b6 55 f4	 movzx	 edx, BYTE PTR _level$[ebp]
  03fa3	52		 push	 edx
  03fa4	8b 45 f8	 mov	 eax, DWORD PTR _type$[ebp]
  03fa7	50		 push	 eax
  03fa8	0f b6 4d ec	 movzx	 ecx, BYTE PTR _y$[ebp]
  03fac	51		 push	 ecx
  03fad	0f b6 55 f0	 movzx	 edx, BYTE PTR _x$[ebp]
  03fb1	52		 push	 edx
  03fb2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  03fb5	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  03fbc	51		 push	 ecx
  03fbd	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  03fc0	8b 02		 mov	 eax, DWORD PTR [edx]
  03fc2	50		 push	 eax
  03fc3	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  03fc8	83 c4 34	 add	 esp, 52			; 00000034H

; 1737 : 
; 1738 : 		LogAdd("Event ItemDrop(55) : Item:%d Level:%d op1:%d op2:%d op3:%d",
; 1739 : 			type, level, Option1, Option2, Option3);

  03fcb	8b 45 e0	 mov	 eax, DWORD PTR _Option3$[ebp]
  03fce	50		 push	 eax
  03fcf	8b 4d e4	 mov	 ecx, DWORD PTR _Option2$[ebp]
  03fd2	51		 push	 ecx
  03fd3	8b 55 e8	 mov	 edx, DWORD PTR _Option1$[ebp]
  03fd6	52		 push	 edx
  03fd7	8b 45 f4	 mov	 eax, DWORD PTR _level$[ebp]
  03fda	50		 push	 eax
  03fdb	8b 4d f8	 mov	 ecx, DWORD PTR _type$[ebp]
  03fde	51		 push	 ecx
  03fdf	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@
  03fe4	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  03fea	83 c4 18	 add	 esp, 24			; 00000018H

; 1740 : 
; 1741 : 		return TRUE;

  03fed	b8 01 00 00 00	 mov	 eax, 1
  03ff2	eb 02		 jmp	 SHORT $LN19@AttackEven@2
$LN17@AttackEven@2:

; 1742 : 	}
; 1743 : 
; 1744 : 	return FALSE;

  03ff4	33 c0		 xor	 eax, eax
$LN19@AttackEven@2:

; 1745 : }

  03ff6	5f		 pop	 edi
  03ff7	5e		 pop	 esi
  03ff8	5b		 pop	 ebx
  03ff9	8b e5		 mov	 esp, ebp
  03ffb	5d		 pop	 ebp
  03ffc	c3		 ret	 0
?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z ENDP	; AttackEvent55BagOpen
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_eventchipeventinfo$ = -24				; size = 16
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z PROC ; EGRecvEventChipInfo

; 1749 : {

  04000	55		 push	 ebp
  04001	8b ec		 mov	 ebp, esp
  04003	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  04009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0400e	33 c5		 xor	 eax, ebp
  04010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04013	53		 push	 ebx
  04014	56		 push	 esi
  04015	57		 push	 edi

; 1750 : 	LPOBJ lpObj = &gObj[aRecv->iINDEX];

  04016	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04019	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0401c	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04022	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04028	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1751 : 
; 1752 : 	PMSG_EVENTCHIPINFO eventchipeventinfo;
; 1753 : 	char msg[255];
; 1754 : 
; 1755 : 	PHeadSetB((LPBYTE)&eventchipeventinfo, 0x94, sizeof(eventchipeventinfo));

  0402b	6a 10		 push	 16			; 00000010H
  0402d	68 94 00 00 00	 push	 148			; 00000094H
  04032	8d 45 e8	 lea	 eax, DWORD PTR _eventchipeventinfo$[ebp]
  04035	50		 push	 eax
  04036	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0403b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1756 : 	eventchipeventinfo.Type = 0;

  0403e	c6 45 eb 00	 mov	 BYTE PTR _eventchipeventinfo$[ebp+3], 0

; 1757 : 	eventchipeventinfo.ChipCount = aRecv->nEVENT_CHIPS;

  04042	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04045	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  04048	89 4d ec	 mov	 DWORD PTR _eventchipeventinfo$[ebp+4], ecx

; 1758 : 	lpObj->EventChipCount = aRecv->nEVENT_CHIPS;

  0404b	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0404e	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04051	66 8b 51 14	 mov	 dx, WORD PTR [ecx+20]
  04055	66 89 90 48 10
	00 00		 mov	 WORD PTR [eax+4168], dx

; 1759 : 	lpObj->MutoNumber = aRecv->iMUTO_NUM;

  0405c	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0405f	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04062	8b 51 18	 mov	 edx, DWORD PTR [ecx+24]
  04065	89 90 4c 10 00
	00		 mov	 DWORD PTR [eax+4172], edx

; 1760 : 
; 1761 : 	DataSend(lpObj->m_Index, (LPBYTE)&eventchipeventinfo, eventchipeventinfo.h.size);

  0406b	0f b6 45 e9	 movzx	 eax, BYTE PTR _eventchipeventinfo$[ebp+1]
  0406f	50		 push	 eax
  04070	8d 4d e8	 lea	 ecx, DWORD PTR _eventchipeventinfo$[ebp]
  04073	51		 push	 ecx
  04074	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  04077	8b 02		 mov	 eax, DWORD PTR [edx]
  04079	50		 push	 eax
  0407a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0407f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1762 : 
; 1763 : 	lpObj->UseEventServer = FALSE;

  04082	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04085	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0

; 1764 : }

  0408f	5f		 pop	 edi
  04090	5e		 pop	 esi
  04091	5b		 pop	 ebx
  04092	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  04095	33 cd		 xor	 ecx, ebp
  04097	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0409c	8b e5		 mov	 esp, ebp
  0409e	5d		 pop	 ebp
  0409f	c3		 ret	 0
?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z ENDP ; EGRecvEventChipInfo
_TEXT	ENDS
PUBLIC	??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@ ; `string'
PUBLIC	??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@ ; `string'
EXTRN	?GCInventoryItemDeleteSend@@YAXHEE@Z:PROC	; GCInventoryItemDeleteSend
EXTRN	?gObjInventoryDeleteItem@@YAEHH@Z:PROC		; gObjInventoryDeleteItem
;	COMDAT ??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@
CONST	SEGMENT
??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@ DB '['
	DB	'EventChip] [%s][%s] Delete EventChip (%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@
CONST	SEGMENT
??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@ DB '['
	DB	'EventChip] [%s][%s] RegEventServer Fail (RegEventchip) %d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_aIndex$ = -16						; size = 4
_lpObj$ = -12						; size = 4
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z PROC ; EGResultRegEventChip

; 1768 : {

  040a0	55		 push	 ebp
  040a1	8b ec		 mov	 ebp, esp
  040a3	83 ec 50	 sub	 esp, 80			; 00000050H
  040a6	53		 push	 ebx
  040a7	56		 push	 esi
  040a8	57		 push	 edi

; 1769 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1770 : 	LPOBJ lpObj;
; 1771 : 	int aIndex;
; 1772 : 
; 1773 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  040a9	6a 08		 push	 8
  040ab	68 95 00 00 00	 push	 149			; 00000095H
  040b0	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  040b3	50		 push	 eax
  040b4	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  040b9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1774 : 	lpObj = &gObj[aRecv->iINDEX];

  040bc	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  040bf	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  040c2	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  040c8	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  040ce	89 4d f4	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1775 : 	aIndex = aRecv->iINDEX;

  040d1	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  040d4	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  040d7	89 4d f0	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 1776 : 
; 1777 : 	if ( aRecv->bSUCCESS == FALSE )

  040da	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  040dd	0f be 48 14	 movsx	 ecx, BYTE PTR [eax+20]
  040e1	85 c9		 test	 ecx, ecx
  040e3	75 2d		 jne	 SHORT $LN2@EGResultRe

; 1778 : 	{
; 1779 : 		Result.ChipCount = -1;

  040e5	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR _Result$[ebp+4], -1

; 1780 : 		LogAddTD("[EventChip] [%s][%s] RegEventServer Fail (RegEventchip) %d",
; 1781 : 			lpObj->AccountID, lpObj->Name, aRecv->Pos);

  040ec	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  040ef	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  040f3	51		 push	 ecx
  040f4	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  040f7	83 c2 77	 add	 edx, 119		; 00000077H
  040fa	52		 push	 edx
  040fb	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  040fe	83 c0 6c	 add	 eax, 108		; 0000006cH
  04101	50		 push	 eax
  04102	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@
  04107	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0410d	83 c4 10	 add	 esp, 16			; 00000010H

; 1782 : 
; 1783 : 	}
; 1784 : 	else

  04110	eb 57		 jmp	 SHORT $LN1@EGResultRe
$LN2@EGResultRe:

; 1785 : 	{
; 1786 : 		Result.ChipCount = aRecv->nEVENT_CHIPS;

  04112	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04115	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  04118	89 4d fc	 mov	 DWORD PTR _Result$[ebp+4], ecx

; 1787 : 		gObjInventoryDeleteItem(aIndex, aRecv->Pos);

  0411b	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0411e	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  04122	51		 push	 ecx
  04123	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  04126	52		 push	 edx
  04127	e8 00 00 00 00	 call	 ?gObjInventoryDeleteItem@@YAEHH@Z ; gObjInventoryDeleteItem
  0412c	83 c4 08	 add	 esp, 8

; 1788 : 		GCInventoryItemDeleteSend(aIndex, aRecv->Pos, 1);

  0412f	6a 01		 push	 1
  04131	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04134	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  04138	51		 push	 ecx
  04139	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  0413c	52		 push	 edx
  0413d	e8 00 00 00 00	 call	 ?GCInventoryItemDeleteSend@@YAXHEE@Z ; GCInventoryItemDeleteSend
  04142	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1789 : 
; 1790 : 		LogAddTD("[EventChip] [%s][%s] Delete EventChip (%d)",
; 1791 : 			lpObj->AccountID, lpObj->Name, aRecv->Pos);

  04145	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04148	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  0414c	51		 push	 ecx
  0414d	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  04150	83 c2 77	 add	 edx, 119		; 00000077H
  04153	52		 push	 edx
  04154	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04157	83 c0 6c	 add	 eax, 108		; 0000006cH
  0415a	50		 push	 eax
  0415b	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@
  04160	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04166	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@EGResultRe:

; 1792 : 	}
; 1793 : 
; 1794 : 	Result.Type = 0;

  04169	c6 45 fb 00	 mov	 BYTE PTR _Result$[ebp+3], 0

; 1795 : 
; 1796 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  0416d	0f b6 45 f9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  04171	50		 push	 eax
  04172	8d 4d f8	 lea	 ecx, DWORD PTR _Result$[ebp]
  04175	51		 push	 ecx
  04176	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  04179	52		 push	 edx
  0417a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0417f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1797 : 
; 1798 : 	lpObj->UseEventServer = FALSE;

  04182	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04185	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0

; 1799 : }

  0418f	5f		 pop	 edi
  04190	5e		 pop	 esi
  04191	5b		 pop	 ebx
  04192	8b e5		 mov	 esp, ebp
  04194	5d		 pop	 ebp
  04195	c3		 ret	 0
?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z ENDP ; EGResultRegEventChip
_TEXT	ENDS
PUBLIC	??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	?gObjDelete10EventChip@@YAHH@Z:PROC		; gObjDelete10EventChip
EXTRN	?gObjFind10EventChip@@YAHH@Z:PROC		; gObjFind10EventChip
;	COMDAT ??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@
CONST	SEGMENT
??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@ DB '['
	DB	'EventChip] [%s][%s] Make MutoNumber %d,%d,%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_Result$ = -24						; size = 10
_aIndex$ = -12						; size = 4
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z PROC ; EGRecvRegMutoNum

; 1802 : {

  041a0	55		 push	 ebp
  041a1	8b ec		 mov	 ebp, esp
  041a3	83 ec 58	 sub	 esp, 88			; 00000058H
  041a6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  041ab	33 c5		 xor	 eax, ebp
  041ad	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  041b0	53		 push	 ebx
  041b1	56		 push	 esi
  041b2	57		 push	 edi

; 1803 : 	LPOBJ lpObj;
; 1804 : 	int aIndex;
; 1805 : 	
; 1806 : 
; 1807 : 	lpObj = &gObj[aRecv->iINDEX];

  041b3	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  041b6	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  041b9	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  041bf	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  041c5	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1808 : 	aIndex = aRecv->iINDEX;

  041c8	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  041cb	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  041ce	89 4d f4	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 1809 : 
; 1810 : 	PMSG_GETMUTONUMBER_RESULT Result;
; 1811 : 
; 1812 : 	PHeadSetB((LPBYTE)&Result, 0x96, sizeof(Result));

  041d1	6a 0a		 push	 10			; 0000000aH
  041d3	68 96 00 00 00	 push	 150			; 00000096H
  041d8	8d 45 e8	 lea	 eax, DWORD PTR _Result$[ebp]
  041db	50		 push	 eax
  041dc	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  041e1	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1813 : 	
; 1814 : 	if ( gObjFind10EventChip(aIndex) == FALSE )

  041e4	8b 45 f4	 mov	 eax, DWORD PTR _aIndex$[ebp]
  041e7	50		 push	 eax
  041e8	e8 00 00 00 00	 call	 ?gObjFind10EventChip@@YAHH@Z ; gObjFind10EventChip
  041ed	83 c4 04	 add	 esp, 4
  041f0	85 c0		 test	 eax, eax
  041f2	75 3a		 jne	 SHORT $LN1@EGRecvRegM

; 1815 : 	{
; 1816 : 		Result.MutoNum[0] = -1;

  041f4	83 c8 ff	 or	 eax, -1
  041f7	66 89 45 ec	 mov	 WORD PTR _Result$[ebp+4], ax

; 1817 : 		Result.MutoNum[1] = 0;

  041fb	33 c0		 xor	 eax, eax
  041fd	66 89 45 ee	 mov	 WORD PTR _Result$[ebp+6], ax

; 1818 : 		Result.MutoNum[2] = 0;

  04201	33 c0		 xor	 eax, eax
  04203	66 89 45 f0	 mov	 WORD PTR _Result$[ebp+8], ax

; 1819 : 
; 1820 : 		DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  04207	0f b6 45 e9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  0420b	50		 push	 eax
  0420c	8d 4d e8	 lea	 ecx, DWORD PTR _Result$[ebp]
  0420f	51		 push	 ecx
  04210	8b 55 f4	 mov	 edx, DWORD PTR _aIndex$[ebp]
  04213	52		 push	 edx
  04214	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  04219	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1821 : 
; 1822 : 		lpObj->UseEventServer = FALSE;

  0421c	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0421f	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0

; 1823 : 
; 1824 : 		return;

  04229	e9 b6 00 00 00	 jmp	 $LN2@EGRecvRegM
$LN1@EGRecvRegM:

; 1825 : 	}
; 1826 : 
; 1827 : 	gObjDelete10EventChip(aIndex);

  0422e	8b 45 f4	 mov	 eax, DWORD PTR _aIndex$[ebp]
  04231	50		 push	 eax
  04232	e8 00 00 00 00	 call	 ?gObjDelete10EventChip@@YAHH@Z ; gObjDelete10EventChip
  04237	83 c4 04	 add	 esp, 4

; 1828 : 	Result.MutoNum[0] = aRecv->iMUTO_NUM / 1000000;

  0423a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0423d	8b 40 14	 mov	 eax, DWORD PTR [eax+20]
  04240	99		 cdq
  04241	b9 40 42 0f 00	 mov	 ecx, 1000000		; 000f4240H
  04246	f7 f9		 idiv	 ecx
  04248	66 89 45 ec	 mov	 WORD PTR _Result$[ebp+4], ax

; 1829 : 	Result.MutoNum[1] = aRecv->iMUTO_NUM / 1000 - aRecv->iMUTO_NUM / 1000000 * 1000;

  0424c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0424f	8b 40 14	 mov	 eax, DWORD PTR [eax+20]
  04252	99		 cdq
  04253	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
  04258	f7 f9		 idiv	 ecx
  0425a	8b c8		 mov	 ecx, eax
  0425c	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  0425f	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  04262	99		 cdq
  04263	be 40 42 0f 00	 mov	 esi, 1000000		; 000f4240H
  04268	f7 fe		 idiv	 esi
  0426a	69 c0 e8 03 00
	00		 imul	 eax, 1000		; 000003e8H
  04270	2b c8		 sub	 ecx, eax
  04272	66 89 4d ee	 mov	 WORD PTR _Result$[ebp+6], cx

; 1830 : 	Result.MutoNum[2] = aRecv->iMUTO_NUM % 1000;

  04276	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04279	8b 40 14	 mov	 eax, DWORD PTR [eax+20]
  0427c	99		 cdq
  0427d	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
  04282	f7 f9		 idiv	 ecx
  04284	66 89 55 f0	 mov	 WORD PTR _Result$[ebp+8], dx

; 1831 : 	lpObj->MutoNumber = aRecv->iMUTO_NUM;

  04288	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0428b	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  0428e	8b 51 14	 mov	 edx, DWORD PTR [ecx+20]
  04291	89 90 4c 10 00
	00		 mov	 DWORD PTR [eax+4172], edx

; 1832 : 	
; 1833 : 	LogAddTD("[EventChip] [%s][%s] Make MutoNumber %d,%d,%d",
; 1834 : 		lpObj->AccountID, lpObj->Name, 
; 1835 : 		Result.MutoNum[0], Result.MutoNum[1], Result.MutoNum[2]);

  04297	0f bf 45 f0	 movsx	 eax, WORD PTR _Result$[ebp+8]
  0429b	50		 push	 eax
  0429c	0f bf 4d ee	 movsx	 ecx, WORD PTR _Result$[ebp+6]
  042a0	51		 push	 ecx
  042a1	0f bf 55 ec	 movsx	 edx, WORD PTR _Result$[ebp+4]
  042a5	52		 push	 edx
  042a6	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  042a9	83 c0 77	 add	 eax, 119		; 00000077H
  042ac	50		 push	 eax
  042ad	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  042b0	83 c1 6c	 add	 ecx, 108		; 0000006cH
  042b3	51		 push	 ecx
  042b4	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@
  042b9	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  042bf	83 c4 18	 add	 esp, 24			; 00000018H

; 1836 : 
; 1837 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  042c2	0f b6 45 e9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  042c6	50		 push	 eax
  042c7	8d 4d e8	 lea	 ecx, DWORD PTR _Result$[ebp]
  042ca	51		 push	 ecx
  042cb	8b 55 f4	 mov	 edx, DWORD PTR _aIndex$[ebp]
  042ce	52		 push	 edx
  042cf	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  042d4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1838 : 	lpObj->UseEventServer = FALSE;

  042d7	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  042da	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0
$LN2@EGRecvRegM:

; 1839 : }

  042e4	5f		 pop	 edi
  042e5	5e		 pop	 esi
  042e6	5b		 pop	 ebx
  042e7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  042ea	33 cd		 xor	 ecx, ebp
  042ec	e8 00 00 00 00	 call	 @__security_check_cookie@4
  042f1	8b e5		 mov	 esp, ebp
  042f3	5d		 pop	 ebp
  042f4	c3		 ret	 0
?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z ENDP ; EGRecvRegMutoNum
_TEXT	ENDS
PUBLIC	??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ ; `string'
PUBLIC	??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ ; `string'
EXTRN	?GCMoneySend@@YAXHK@Z:PROC			; GCMoneySend
;	COMDAT ??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
CONST	SEGMENT
??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ DB '['
	DB	'EventChip] [%s][%s] ChangeRena Fail', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
CONST	SEGMENT
??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ DB '['
	DB	'EventChip] [%s][%s] ChangeRena AddMoney(%d)', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_aIndex$ = -16						; size = 4
_lpObj$ = -12						; size = 4
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z PROC ; EGRecvChangeRena

; 1844 : {

  04300	55		 push	 ebp
  04301	8b ec		 mov	 ebp, esp
  04303	83 ec 50	 sub	 esp, 80			; 00000050H
  04306	53		 push	 ebx
  04307	56		 push	 esi
  04308	57		 push	 edi

; 1845 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1846 : 	LPOBJ lpObj;
; 1847 : 	int aIndex;
; 1848 : 
; 1849 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  04309	6a 08		 push	 8
  0430b	68 95 00 00 00	 push	 149			; 00000095H
  04310	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  04313	50		 push	 eax
  04314	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  04319	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1850 : 	lpObj = &gObj[aRecv->iINDEX];

  0431c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0431f	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04322	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04328	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0432e	89 4d f4	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1851 : 	aIndex = aRecv->iINDEX;

  04331	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04334	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04337	89 4d f0	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 1852 : 
; 1853 : 	if ( aRecv->bSUCCESS != FALSE )

  0433a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0433d	0f be 48 13	 movsx	 ecx, BYTE PTR [eax+19]
  04341	85 c9		 test	 ecx, ecx
  04343	74 67		 je	 SHORT $LN2@EGRecvChan

; 1854 : 	{
; 1855 : 		lpObj->Money += lpObj->EventChipCount * 3000;

  04345	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04348	0f bf 88 48 10
	00 00		 movsx	 ecx, WORD PTR [eax+4168]
  0434f	69 c9 b8 0b 00
	00		 imul	 ecx, 3000		; 00000bb8H
  04355	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  04358	03 8a f0 00 00
	00		 add	 ecx, DWORD PTR [edx+240]
  0435e	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04361	89 88 f0 00 00
	00		 mov	 DWORD PTR [eax+240], ecx

; 1856 : 		GCMoneySend(aIndex, lpObj->Money);

  04367	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0436a	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  04370	51		 push	 ecx
  04371	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  04374	52		 push	 edx
  04375	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  0437a	83 c4 08	 add	 esp, 8

; 1857 : 
; 1858 : 		LogAddTD("[EventChip] [%s][%s] ChangeRena AddMoney(%d)",
; 1859 : 			lpObj->AccountID, lpObj->Name, lpObj->EventChipCount * 3000);

  0437d	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04380	0f bf 88 48 10
	00 00		 movsx	 ecx, WORD PTR [eax+4168]
  04387	69 c9 b8 0b 00
	00		 imul	 ecx, 3000		; 00000bb8H
  0438d	51		 push	 ecx
  0438e	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  04391	83 c2 77	 add	 edx, 119		; 00000077H
  04394	52		 push	 edx
  04395	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04398	83 c0 6c	 add	 eax, 108		; 0000006cH
  0439b	50		 push	 eax
  0439c	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
  043a1	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  043a7	83 c4 10	 add	 esp, 16			; 00000010H

; 1860 : 	}
; 1861 : 	else

  043aa	eb 1c		 jmp	 SHORT $LN1@EGRecvChan
$LN2@EGRecvChan:

; 1862 : 	{
; 1863 : 		LogAddTD("[EventChip] [%s][%s] ChangeRena Fail",
; 1864 : 			lpObj->AccountID, lpObj->Name);

  043ac	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  043af	83 c0 77	 add	 eax, 119		; 00000077H
  043b2	50		 push	 eax
  043b3	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  043b6	83 c1 6c	 add	 ecx, 108		; 0000006cH
  043b9	51		 push	 ecx
  043ba	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
  043bf	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  043c5	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@EGRecvChan:

; 1865 : 	}
; 1866 : 
; 1867 : 	Result.ChipCount = 0;

  043c8	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Result$[ebp+4], 0

; 1868 : 	lpObj->EventChipCount = 0;

  043cf	33 c0		 xor	 eax, eax
  043d1	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  043d4	66 89 81 48 10
	00 00		 mov	 WORD PTR [ecx+4168], ax

; 1869 : 
; 1870 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  043db	0f b6 45 f9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  043df	50		 push	 eax
  043e0	8d 4d f8	 lea	 ecx, DWORD PTR _Result$[ebp]
  043e3	51		 push	 ecx
  043e4	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  043e7	52		 push	 edx
  043e8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  043ed	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1871 : 
; 1872 : 	lpObj->UseEventServer = FALSE;

  043f0	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  043f3	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0

; 1873 : }

  043fd	5f		 pop	 edi
  043fe	5e		 pop	 esi
  043ff	5b		 pop	 ebx
  04400	8b e5		 mov	 esp, ebp
  04402	5d		 pop	 ebp
  04403	c3		 ret	 0
?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ENDP ; EGRecvChangeRena
_TEXT	ENDS
PUBLIC	__$ArrayPad$
EXTRN	?ChatTargetSend@@YAXPAUOBJECTSTRUCT@@PADH@Z:PROC ; ChatTargetSend
EXTRN	__imp__wsprintfA:PROC
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_msg$ = -152						; size = 128
_Result$ = -24						; size = 16
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z PROC	; EGRecvStoneInfo

; 1880 : {

  04410	55		 push	 ebp
  04411	8b ec		 mov	 ebp, esp
  04413	81 ec d8 00 00
	00		 sub	 esp, 216		; 000000d8H
  04419	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0441e	33 c5		 xor	 eax, ebp
  04420	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04423	53		 push	 ebx
  04424	56		 push	 esi
  04425	57		 push	 edi

; 1881 : 	LPOBJ lpObj = &gObj[aRecv->iINDEX];

  04426	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04429	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0442c	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04432	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04438	89 4d f8	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1882 : 
; 1883 : 	PMSG_EVENTCHIPINFO Result;
; 1884 : 	
; 1885 : 	PHeadSetB((LPBYTE)&Result, 0x94, sizeof(Result));

  0443b	6a 10		 push	 16			; 00000010H
  0443d	68 94 00 00 00	 push	 148			; 00000094H
  04442	8d 45 e8	 lea	 eax, DWORD PTR _Result$[ebp]
  04445	50		 push	 eax
  04446	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0444b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1886 : 
; 1887 : 	if ( aRecv->bSUCCESS )

  0444e	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04451	0f be 48 13	 movsx	 ecx, BYTE PTR [eax+19]
  04455	85 c9		 test	 ecx, ecx
  04457	74 11		 je	 SHORT $LN2@EGRecvSton

; 1888 : 		lpObj->iStoneCount = aRecv->iStoneCount;

  04459	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0445c	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  0445f	8b 51 14	 mov	 edx, DWORD PTR [ecx+20]
  04462	89 90 58 10 00
	00		 mov	 DWORD PTR [eax+4184], edx

; 1889 : 	else

  04468	eb 0d		 jmp	 SHORT $LN1@EGRecvSton
$LN2@EGRecvSton:

; 1890 : 		lpObj->iStoneCount = 0;

  0446a	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0446d	c7 80 58 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4184], 0
$LN1@EGRecvSton:

; 1891 : 
; 1892 : 	lpObj->MutoNumber = 0;

  04477	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0447a	c7 80 4c 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4172], 0

; 1893 : 	Result.Type = 3;

  04484	c6 45 eb 03	 mov	 BYTE PTR _Result$[ebp+3], 3

; 1894 : 	Result.ChipCount = aRecv->iStoneCount;

  04488	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0448b	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  0448e	89 4d ec	 mov	 DWORD PTR _Result$[ebp+4], ecx

; 1895 : 
; 1896 : 	DataSend(lpObj->m_Index, (LPBYTE)&Result, Result.h.size);

  04491	0f b6 45 e9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  04495	50		 push	 eax
  04496	8d 4d e8	 lea	 ecx, DWORD PTR _Result$[ebp]
  04499	51		 push	 ecx
  0449a	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0449d	8b 02		 mov	 eax, DWORD PTR [edx]
  0449f	50		 push	 eax
  044a0	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  044a5	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1897 : 
; 1898 : 	char msg[128];
; 1899 : 	wsprintf(msg, lMsg.Get(MSGGET(4, 153)), Result.ChipCount);

  044a8	8b 45 ec	 mov	 eax, DWORD PTR _Result$[ebp+4]
  044ab	50		 push	 eax
  044ac	68 99 04 00 00	 push	 1177			; 00000499H
  044b1	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  044b6	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  044bb	50		 push	 eax
  044bc	8d 8d 68 ff ff
	ff		 lea	 ecx, DWORD PTR _msg$[ebp]
  044c2	51		 push	 ecx
  044c3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  044c9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1900 : 	ChatTargetSend(pEventObj, msg, lpObj->m_Index);

  044cc	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  044cf	8b 08		 mov	 ecx, DWORD PTR [eax]
  044d1	51		 push	 ecx
  044d2	8d 95 68 ff ff
	ff		 lea	 edx, DWORD PTR _msg$[ebp]
  044d8	52		 push	 edx
  044d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pEventObj@@3PAUOBJECTSTRUCT@@A ; pEventObj
  044de	50		 push	 eax
  044df	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAUOBJECTSTRUCT@@PADH@Z ; ChatTargetSend
  044e4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1901 : }

  044e7	5f		 pop	 edi
  044e8	5e		 pop	 esi
  044e9	5b		 pop	 ebx
  044ea	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  044ed	33 cd		 xor	 ecx, ebp
  044ef	e8 00 00 00 00	 call	 @__security_check_cookie@4
  044f4	8b e5		 mov	 esp, ebp
  044f6	5d		 pop	 ebp
  044f7	c3		 ret	 0
?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z ENDP	; EGRecvStoneInfo
_TEXT	ENDS
PUBLIC	??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@ ; `string'
PUBLIC	??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@ ; `string'
;	COMDAT ??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@
CONST	SEGMENT
??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@ DB '['
	DB	'Stone] [%s][%s] RegEventServer Fail (Stones : %d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@
CONST	SEGMENT
??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@ DB '['
	DB	'Stone] [%s][%s] Delete Stones', 00H		; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_aIndex$ = -16						; size = 4
_lpObj$ = -12						; size = 4
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z PROC ; EGRecvRegStone

; 1906 : {

  04500	55		 push	 ebp
  04501	8b ec		 mov	 ebp, esp
  04503	83 ec 50	 sub	 esp, 80			; 00000050H
  04506	53		 push	 ebx
  04507	56		 push	 esi
  04508	57		 push	 edi

; 1907 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1908 : 	LPOBJ lpObj;
; 1909 : 	int aIndex;
; 1910 : 	
; 1911 : 
; 1912 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  04509	6a 08		 push	 8
  0450b	68 95 00 00 00	 push	 149			; 00000095H
  04510	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  04513	50		 push	 eax
  04514	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  04519	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1913 : 	lpObj = &gObj[aRecv->iINDEX];

  0451c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0451f	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04522	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04528	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0452e	89 4d f4	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1914 : 	aIndex = aRecv->iINDEX;

  04531	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04534	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04537	89 4d f0	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 1915 : 
; 1916 : 	if ( aRecv->bSUCCESS != FALSE )

  0453a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0453d	0f be 48 14	 movsx	 ecx, BYTE PTR [eax+20]
  04541	85 c9		 test	 ecx, ecx
  04543	74 51		 je	 SHORT $LN2@EGRecvRegS

; 1917 : 	{
; 1918 : 		Result.ChipCount = aRecv->iStoneCount;

  04545	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04548	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  0454b	89 4d fc	 mov	 DWORD PTR _Result$[ebp+4], ecx

; 1919 : 		gObjInventoryDeleteItem(aIndex, aRecv->iPosition);

  0454e	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04551	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  04555	51		 push	 ecx
  04556	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  04559	52		 push	 edx
  0455a	e8 00 00 00 00	 call	 ?gObjInventoryDeleteItem@@YAEHH@Z ; gObjInventoryDeleteItem
  0455f	83 c4 08	 add	 esp, 8

; 1920 : 		GCInventoryItemDeleteSend(aIndex, aRecv->iPosition, 1);

  04562	6a 01		 push	 1
  04564	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04567	0f b6 48 08	 movzx	 ecx, BYTE PTR [eax+8]
  0456b	51		 push	 ecx
  0456c	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  0456f	52		 push	 edx
  04570	e8 00 00 00 00	 call	 ?GCInventoryItemDeleteSend@@YAXHEE@Z ; GCInventoryItemDeleteSend
  04575	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1921 : 
; 1922 : 		LogAddTD("[Stone] [%s][%s] Delete Stones",
; 1923 : 			lpObj->AccountID, lpObj->Name);

  04578	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0457b	83 c0 77	 add	 eax, 119		; 00000077H
  0457e	50		 push	 eax
  0457f	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  04582	83 c1 6c	 add	 ecx, 108		; 0000006cH
  04585	51		 push	 ecx
  04586	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@
  0458b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04591	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1924 : 	}
; 1925 : 	else

  04594	eb 2a		 jmp	 SHORT $LN1@EGRecvRegS
$LN2@EGRecvRegS:

; 1926 : 	{
; 1927 : 		Result.ChipCount = -1;

  04596	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR _Result$[ebp+4], -1

; 1928 : 		
; 1929 : 		LogAddTD("[Stone] [%s][%s] RegEventServer Fail (Stones : %d)",
; 1930 : 			lpObj->AccountID, lpObj->Name, aRecv->iStoneCount);

  0459d	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  045a0	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  045a3	51		 push	 ecx
  045a4	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  045a7	83 c2 77	 add	 edx, 119		; 00000077H
  045aa	52		 push	 edx
  045ab	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  045ae	83 c0 6c	 add	 eax, 108		; 0000006cH
  045b1	50		 push	 eax
  045b2	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@
  045b7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  045bd	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@EGRecvRegS:

; 1931 : 	}
; 1932 : 
; 1933 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  045c0	0f b6 45 f9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  045c4	50		 push	 eax
  045c5	8d 4d f8	 lea	 ecx, DWORD PTR _Result$[ebp]
  045c8	51		 push	 ecx
  045c9	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  045cc	52		 push	 edx
  045cd	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  045d2	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1934 : 
; 1935 : 	lpObj->UseEventServer = FALSE;

  045d5	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  045d8	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0

; 1936 : }

  045e2	5f		 pop	 edi
  045e3	5e		 pop	 esi
  045e4	5b		 pop	 ebx
  045e5	8b e5		 mov	 esp, ebp
  045e7	5d		 pop	 ebp
  045e8	c3		 ret	 0
?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z ENDP ; EGRecvRegStone
; Function compile flags: /Odtp /ZI
_aRecv$ = 8						; size = 4
?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z PROC ; EGRecvDeleteStone

; 1941 : {

  045f0	55		 push	 ebp
  045f1	8b ec		 mov	 ebp, esp
  045f3	83 ec 40	 sub	 esp, 64			; 00000040H
  045f6	53		 push	 ebx
  045f7	56		 push	 esi
  045f8	57		 push	 edi

; 1942 : 	return;
; 1943 : }

  045f9	5f		 pop	 edi
  045fa	5e		 pop	 esi
  045fb	5b		 pop	 ebx
  045fc	8b e5		 mov	 esp, ebp
  045fe	5d		 pop	 ebp
  045ff	c3		 ret	 0
?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z ENDP ; EGRecvDeleteStone
_TEXT	ENDS
PUBLIC	??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@ ; `string'
PUBLIC	??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@ ; `string'
;	COMDAT ??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@
CONST	SEGMENT
??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@ DB '['
	DB	'Stones] [%s][%s] ChangeRena Fail', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@
CONST	SEGMENT
??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@ DB '['
	DB	'Stones] [%s][%s] ChangeRena AddMoney(%d)', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_aIndex$ = -16						; size = 4
_lpObj$ = -12						; size = 4
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z PROC ; EGRecvChangeStones

; 1948 : {

  04600	55		 push	 ebp
  04601	8b ec		 mov	 ebp, esp
  04603	83 ec 50	 sub	 esp, 80			; 00000050H
  04606	53		 push	 ebx
  04607	56		 push	 esi
  04608	57		 push	 edi

; 1949 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1950 : 	LPOBJ lpObj;
; 1951 : 	int aIndex;
; 1952 : 	
; 1953 : 
; 1954 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  04609	6a 08		 push	 8
  0460b	68 95 00 00 00	 push	 149			; 00000095H
  04610	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  04613	50		 push	 eax
  04614	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  04619	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1955 : 	lpObj = &gObj[aRecv->iINDEX];

  0461c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0461f	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04622	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04628	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0462e	89 4d f4	 mov	 DWORD PTR _lpObj$[ebp], ecx

; 1956 : 	aIndex = aRecv->iINDEX;

  04631	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04634	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04637	89 4d f0	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 1957 : 
; 1958 : 	if ( aRecv->bSUCCESS != FALSE )

  0463a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0463d	0f be 48 13	 movsx	 ecx, BYTE PTR [eax+19]
  04641	85 c9		 test	 ecx, ecx
  04643	74 65		 je	 SHORT $LN2@EGRecvChan@2

; 1959 : 	{
; 1960 : 		lpObj->Money += lpObj->iStoneCount * 3000;

  04645	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04648	8b 88 58 10 00
	00		 mov	 ecx, DWORD PTR [eax+4184]
  0464e	69 c9 b8 0b 00
	00		 imul	 ecx, 3000		; 00000bb8H
  04654	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  04657	03 8a f0 00 00
	00		 add	 ecx, DWORD PTR [edx+240]
  0465d	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04660	89 88 f0 00 00
	00		 mov	 DWORD PTR [eax+240], ecx

; 1961 : 		GCMoneySend(aIndex, lpObj->Money);

  04666	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04669	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  0466f	51		 push	 ecx
  04670	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  04673	52		 push	 edx
  04674	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  04679	83 c4 08	 add	 esp, 8

; 1962 : 
; 1963 : 		LogAddTD("[Stones] [%s][%s] ChangeRena AddMoney(%d)",
; 1964 : 			lpObj->AccountID, lpObj->Name, lpObj->iStoneCount*3000);

  0467c	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0467f	8b 88 58 10 00
	00		 mov	 ecx, DWORD PTR [eax+4184]
  04685	69 c9 b8 0b 00
	00		 imul	 ecx, 3000		; 00000bb8H
  0468b	51		 push	 ecx
  0468c	8b 55 f4	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0468f	83 c2 77	 add	 edx, 119		; 00000077H
  04692	52		 push	 edx
  04693	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  04696	83 c0 6c	 add	 eax, 108		; 0000006cH
  04699	50		 push	 eax
  0469a	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@
  0469f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  046a5	83 c4 10	 add	 esp, 16			; 00000010H

; 1965 : 	}
; 1966 : 	else

  046a8	eb 1c		 jmp	 SHORT $LN1@EGRecvChan@2
$LN2@EGRecvChan@2:

; 1967 : 	{
; 1968 : 		LogAddTD("[Stones] [%s][%s] ChangeRena Fail",
; 1969 : 			lpObj->AccountID, lpObj->Name);

  046aa	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  046ad	83 c0 77	 add	 eax, 119		; 00000077H
  046b0	50		 push	 eax
  046b1	8b 4d f4	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  046b4	83 c1 6c	 add	 ecx, 108		; 0000006cH
  046b7	51		 push	 ecx
  046b8	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@
  046bd	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  046c3	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@EGRecvChan@2:

; 1970 : 	}
; 1971 : 
; 1972 : 	Result.ChipCount = 0;

  046c6	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Result$[ebp+4], 0

; 1973 : 	lpObj->iStoneCount = 0;

  046cd	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  046d0	c7 80 58 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4184], 0

; 1974 : 
; 1975 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  046da	0f b6 45 f9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  046de	50		 push	 eax
  046df	8d 4d f8	 lea	 ecx, DWORD PTR _Result$[ebp]
  046e2	51		 push	 ecx
  046e3	8b 55 f0	 mov	 edx, DWORD PTR _aIndex$[ebp]
  046e6	52		 push	 edx
  046e7	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  046ec	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1976 : 
; 1977 : 	lpObj->UseEventServer = FALSE;

  046ef	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  046f2	c7 80 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+4176], 0

; 1978 : }

  046fc	5f		 pop	 edi
  046fd	5e		 pop	 esi
  046fe	5b		 pop	 ebx
  046ff	8b e5		 mov	 esp, ebp
  04701	5d		 pop	 ebp
  04702	c3		 ret	 0
?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ENDP ; EGRecvChangeStones
_TEXT	ENDS
PUBLIC	??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@ ; `string'
PUBLIC	??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@ ; `string'
PUBLIC	??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@ ; `string'
PUBLIC	??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@ ; `string'
PUBLIC	??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	?SortItem@CEventItemList@@QAEHEPAE0@Z:PROC	; CEventItemList::SortItem
EXTRN	?g_EventItemList@@3VCEventItemList@@A:BYTE	; g_EventItemList
EXTRN	_strcpy:PROC
;	COMDAT ??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@
CONST	SEGMENT
??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@ DB '[Mu_2Anv'
	DB	'_Event] Register Serial Result : %d [%s][%s] GiftNumber: %d I'
	DB	'tem : %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@
CONST	SEGMENT
??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@ DB '[Mu_2'
	DB	'Anv_Event] Error : Result Value is Wrong [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@
CONST	SEGMENT
??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@ DB '[Mu_2A'
	DB	'nv_Event] Error : iGiftNumber is Out of Boud [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@
CONST	SEGMENT
??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@ DB '[Mu_2'
	DB	'Anv_Event] Error : Gift Index is out of bound [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@
CONST	SEGMENT
??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@ DB '[Mu_2'
	DB	'Anv_Event] Error : Index is out of bound [%d]', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv95 = -160						; size = 4
tv72 = -160						; size = 4
_ItemNum$233997 = -92					; size = 4
_dur$233996 = -86					; size = 1
_level$233995 = -85					; size = 1
_ServerCmd$233990 = -84					; size = 7
_Result$ = -76						; size = 68
_loc1$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z PROC ; EGRecv2AnvRegSerial

; 1996 : {

  04710	55		 push	 ebp
  04711	8b ec		 mov	 ebp, esp
  04713	81 ec a0 00 00
	00		 sub	 esp, 160		; 000000a0H
  04719	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0471e	33 c5		 xor	 eax, ebp
  04720	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04723	53		 push	 ebx
  04724	56		 push	 esi
  04725	57		 push	 edi

; 1997 : 	int loc1 = -1;

  04726	c7 45 f8 ff ff
	ff ff		 mov	 DWORD PTR _loc1$[ebp], -1

; 1998 : 
; 1999 : 	PMSG_ANS_2ANV_LOTTO_EVENT Result;
; 2000 : 
; 2001 : 	PHeadSetB((LPBYTE)&Result, 0x9D, sizeof(Result));

  0472d	6a 44		 push	 68			; 00000044H
  0472f	68 9d 00 00 00	 push	 157			; 0000009dH
  04734	8d 45 b4	 lea	 eax, DWORD PTR _Result$[ebp]
  04737	50		 push	 eax
  04738	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0473d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2002 : 
; 2003 : 	if ( !OBJMAX_RANGE(aRecv->iINDEX))

  04740	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04743	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  04747	7d 0c		 jge	 SHORT $LN17@EGRecv2Anv
  04749	c7 85 60 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv72[ebp], 0
  04753	eb 15		 jmp	 SHORT $LN18@EGRecv2Anv
$LN17@EGRecv2Anv:
  04755	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04758	33 d2		 xor	 edx, edx
  0475a	81 79 04 97 3a
	00 00		 cmp	 DWORD PTR [ecx+4], 14999 ; 00003a97H
  04761	0f 9e c2	 setle	 dl
  04764	89 95 60 ff ff
	ff		 mov	 DWORD PTR tv72[ebp], edx
$LN18@EGRecv2Anv:
  0476a	83 bd 60 ff ff
	ff 00		 cmp	 DWORD PTR tv72[ebp], 0
  04771	75 1a		 jne	 SHORT $LN14@EGRecv2Anv

; 2004 : 	{
; 2005 : 		LogAddTD("[Mu_2Anv_Event] Error : Index is out of bound [%d]", aRecv->iINDEX);

  04773	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04776	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04779	51		 push	 ecx
  0477a	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@
  0477f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04785	83 c4 08	 add	 esp, 8

; 2006 : 		return;

  04788	e9 37 03 00 00	 jmp	 $LN15@EGRecv2Anv
$LN14@EGRecv2Anv:

; 2007 : 	}
; 2008 : 
; 2009 : 	if ( gObj[aRecv->iINDEX].Connected <= PLAYER_LOGGED )

  0478d	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04790	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04793	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04799	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0479f	83 7c 0a 04 02	 cmp	 DWORD PTR [edx+ecx+4], 2
  047a4	7f 1a		 jg	 SHORT $LN13@EGRecv2Anv

; 2010 : 	{
; 2011 : 		LogAddTD("[Mu_2Anv_Event] Error : Index is out of bound [%d]", aRecv->iINDEX);

  047a6	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  047a9	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  047ac	51		 push	 ecx
  047ad	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@
  047b2	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  047b8	83 c4 08	 add	 esp, 8

; 2012 : 		return;

  047bb	e9 04 03 00 00	 jmp	 $LN15@EGRecv2Anv
$LN13@EGRecv2Anv:

; 2013 : 	}
; 2014 : 
; 2015 : 	Result.szGIFT_NAME[0] = 0;

  047c0	c6 45 b8 00	 mov	 BYTE PTR _Result$[ebp+4], 0

; 2016 : 
; 2017 : 	if ( aRecv->btIsRegistered == FALSE )

  047c4	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  047c7	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  047cb	85 c9		 test	 ecx, ecx
  047cd	0f 85 0d 02 00
	00		 jne	 $LN12@EGRecv2Anv

; 2018 : 	{
; 2019 : 		Result.btIsRegistered = FALSE;

  047d3	c6 45 b7 00	 mov	 BYTE PTR _Result$[ebp+3], 0

; 2020 : 		
; 2021 : 		if ( !GIFT_2ANV_RANGE(aRecv->iGiftNumber-1) )

  047d7	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  047da	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  047dd	83 e9 01	 sub	 ecx, 1
  047e0	79 0c		 jns	 SHORT $LN19@EGRecv2Anv
  047e2	c7 85 60 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv95[ebp], 0
  047ec	eb 19		 jmp	 SHORT $LN20@EGRecv2Anv
$LN19@EGRecv2Anv:
  047ee	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  047f1	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  047f4	83 e8 01	 sub	 eax, 1
  047f7	33 c9		 xor	 ecx, ecx
  047f9	3d ae 00 00 00	 cmp	 eax, 174		; 000000aeH
  047fe	0f 9e c1	 setle	 cl
  04801	89 8d 60 ff ff
	ff		 mov	 DWORD PTR tv95[ebp], ecx
$LN20@EGRecv2Anv:
  04807	83 bd 60 ff ff
	ff 00		 cmp	 DWORD PTR tv95[ebp], 0
  0480e	75 19		 jne	 SHORT $LN11@EGRecv2Anv

; 2022 : 		{
; 2023 : 			LogAddTD("[Mu_2Anv_Event] Error : Gift Index is out of bound [%d]", aRecv->iGiftNumber);

  04810	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04813	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  04816	51		 push	 ecx
  04817	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@
  0481c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04822	83 c4 08	 add	 esp, 8

; 2024 : 			Result.btIsRegistered = 2;

  04825	c6 45 b7 02	 mov	 BYTE PTR _Result$[ebp+3], 2
$LN11@EGRecv2Anv:

; 2025 : 		}
; 2026 : 
; 2027 : 		if ( gObj[aRecv->iINDEX].Connected > PLAYER_LOGGED )

  04829	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0482c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0482f	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04835	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0483b	83 7c 0a 04 02	 cmp	 DWORD PTR [edx+ecx+4], 2
  04840	0f 8e 87 00 00
	00		 jle	 $LN10@EGRecv2Anv

; 2028 : 		{
; 2029 : 			PMSG_SERVERCMD ServerCmd;
; 2030 : 
; 2031 : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  04846	6a 07		 push	 7
  04848	6a 40		 push	 64			; 00000040H
  0484a	68 f3 00 00 00	 push	 243			; 000000f3H
  0484f	8d 45 ac	 lea	 eax, DWORD PTR _ServerCmd$233990[ebp]
  04852	50		 push	 eax
  04853	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  04858	83 c4 10	 add	 esp, 16			; 00000010H

; 2032 : 			ServerCmd.CmdType = 0;

  0485b	c6 45 b0 00	 mov	 BYTE PTR _ServerCmd$233990[ebp+4], 0

; 2033 : 			ServerCmd.X = gObj[aRecv->iINDEX].X;

  0485f	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04862	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04865	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0486b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04871	8a 84 0a 44 01
	00 00		 mov	 al, BYTE PTR [edx+ecx+324]
  04878	88 45 b1	 mov	 BYTE PTR _ServerCmd$233990[ebp+5], al

; 2034 : 			ServerCmd.Y = gObj[aRecv->iINDEX].Y;

  0487b	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0487e	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04881	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04887	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0488d	8a 84 0a 46 01
	00 00		 mov	 al, BYTE PTR [edx+ecx+326]
  04894	88 45 b2	 mov	 BYTE PTR _ServerCmd$233990[ebp+6], al

; 2035 : 
; 2036 : 			MsgSendV2(&gObj[aRecv->iINDEX], (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  04897	6a 07		 push	 7
  04899	8d 45 ac	 lea	 eax, DWORD PTR _ServerCmd$233990[ebp]
  0489c	50		 push	 eax
  0489d	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  048a0	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  048a3	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  048a9	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  048af	52		 push	 edx
  048b0	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  048b5	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2037 : 			DataSend(aRecv->iINDEX, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  048b8	6a 07		 push	 7
  048ba	8d 45 ac	 lea	 eax, DWORD PTR _ServerCmd$233990[ebp]
  048bd	50		 push	 eax
  048be	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  048c1	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  048c4	52		 push	 edx
  048c5	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  048ca	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN10@EGRecv2Anv:

; 2038 : 		}
; 2039 : 
; 2040 : 		if ( g_bRingEventItemTextLoad )

  048cd	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_bRingEventItemTextLoad@@3HA, 0 ; g_bRingEventItemTextLoad
  048d4	74 1f		 je	 SHORT $LN9@EGRecv2Anv

; 2041 : 		{
; 2042 : 			strcpy(Result.szGIFT_NAME, g_sz2ANV_GIFT_NAME[aRecv->iGiftNumber-1]);

  048d6	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  048d9	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  048dc	83 e9 01	 sub	 ecx, 1
  048df	c1 e1 06	 shl	 ecx, 6
  048e2	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?g_sz2ANV_GIFT_NAME@@3PAY0EA@DA ; g_sz2ANV_GIFT_NAME
  048e8	51		 push	 ecx
  048e9	8d 55 b8	 lea	 edx, DWORD PTR _Result$[ebp+4]
  048ec	52		 push	 edx
  048ed	e8 00 00 00 00	 call	 _strcpy
  048f2	83 c4 08	 add	 esp, 8
$LN9@EGRecv2Anv:

; 2043 : 		}
; 2044 : 		 
; 2045 : 		BYTE level = 0;//loc21

  048f5	c6 45 ab 00	 mov	 BYTE PTR _level$233995[ebp], 0

; 2046 : 		BYTE dur = 0;//loc22

  048f9	c6 45 aa 00	 mov	 BYTE PTR _dur$233996[ebp], 0

; 2047 : 		
; 2048 : 		int ItemNum = g_EventItemList.SortItem(aRecv->iGiftNumber,&level,&dur);//loc23

  048fd	8d 45 aa	 lea	 eax, DWORD PTR _dur$233996[ebp]
  04900	50		 push	 eax
  04901	8d 4d ab	 lea	 ecx, DWORD PTR _level$233995[ebp]
  04904	51		 push	 ecx
  04905	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04908	0f b6 42 14	 movzx	 eax, BYTE PTR [edx+20]
  0490c	50		 push	 eax
  0490d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_EventItemList@@3VCEventItemList@@A ; g_EventItemList
  04912	e8 00 00 00 00	 call	 ?SortItem@CEventItemList@@QAEHEPAE0@Z ; CEventItemList::SortItem
  04917	89 45 a4	 mov	 DWORD PTR _ItemNum$233997[ebp], eax

; 2049 : 		
; 2050 : 		loc1 = ItemNum;

  0491a	8b 45 a4	 mov	 eax, DWORD PTR _ItemNum$233997[ebp]
  0491d	89 45 f8	 mov	 DWORD PTR _loc1$[ebp], eax

; 2051 : 		
; 2052 : 		if ( ItemNum == 0 ||ItemNum == -1 )

  04920	83 7d a4 00	 cmp	 DWORD PTR _ItemNum$233997[ebp], 0
  04924	74 06		 je	 SHORT $LN7@EGRecv2Anv
  04926	83 7d a4 ff	 cmp	 DWORD PTR _ItemNum$233997[ebp], -1
  0492a	75 1a		 jne	 SHORT $LN8@EGRecv2Anv
$LN7@EGRecv2Anv:

; 2053 :         {
; 2054 : 			LogAddTD("[Mu_2Anv_Event] Error : iGiftNumber is Out of Boud [%d]", aRecv->iGiftNumber);

  0492c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0492f	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  04932	51		 push	 ecx
  04933	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@
  04938	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0493e	83 c4 08	 add	 esp, 8

; 2055 : 		}
; 2056 : 		else

  04941	e9 98 00 00 00	 jmp	 $LN6@EGRecv2Anv
$LN8@EGRecv2Anv:

; 2057 : 		{
; 2058 : 			ItemSerialCreateSend(gObj[aRecv->iINDEX].m_Index,235,(BYTE)gObj[aRecv->iINDEX].X,(BYTE)gObj[aRecv->iINDEX].Y,ItemNum,(BYTE)level,(BYTE)dur,0,0,0,aRecv->iINDEX,0,0);

  04946	6a 00		 push	 0
  04948	6a 00		 push	 0
  0494a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0494d	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04950	51		 push	 ecx
  04951	6a 00		 push	 0
  04953	6a 00		 push	 0
  04955	6a 00		 push	 0
  04957	0f b6 55 aa	 movzx	 edx, BYTE PTR _dur$233996[ebp]
  0495b	52		 push	 edx
  0495c	0f b6 45 ab	 movzx	 eax, BYTE PTR _level$233995[ebp]
  04960	50		 push	 eax
  04961	8b 4d a4	 mov	 ecx, DWORD PTR _ItemNum$233997[ebp]
  04964	51		 push	 ecx
  04965	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04968	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  0496b	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04971	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04977	0f b6 94 01 46
	01 00 00	 movzx	 edx, BYTE PTR [ecx+eax+326]
  0497f	52		 push	 edx
  04980	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04983	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04986	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  0498c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04992	0f b6 84 0a 44
	01 00 00	 movzx	 eax, BYTE PTR [edx+ecx+324]
  0499a	50		 push	 eax
  0499b	68 eb 00 00 00	 push	 235			; 000000ebH
  049a0	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  049a3	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  049a6	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  049ac	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  049b1	8b 0c 10	 mov	 ecx, DWORD PTR [eax+edx]
  049b4	51		 push	 ecx
  049b5	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  049ba	83 c4 34	 add	 esp, 52			; 00000034H

; 2059 : 			
; 2060 : 			if ( g_bRingEventItemTextLoad == FALSE)

  049bd	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_bRingEventItemTextLoad@@3HA, 0 ; g_bRingEventItemTextLoad
  049c4	75 18		 jne	 SHORT $LN6@EGRecv2Anv

; 2061 : 			{
; 2062 : 				strcpy(Result.szGIFT_NAME, ItemAttribute[ItemNum].Name);

  049c6	8b 45 a4	 mov	 eax, DWORD PTR _ItemNum$233997[ebp]
  049c9	6b c0 70	 imul	 eax, 112		; 00000070H
  049cc	05 00 00 00 00	 add	 eax, OFFSET ?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A ; ItemAttribute
  049d1	50		 push	 eax
  049d2	8d 4d b8	 lea	 ecx, DWORD PTR _Result$[ebp+4]
  049d5	51		 push	 ecx
  049d6	e8 00 00 00 00	 call	 _strcpy
  049db	83 c4 08	 add	 esp, 8
$LN6@EGRecv2Anv:

; 2063 : 			}
; 2064 : 		}

  049de	eb 61		 jmp	 SHORT $LN4@EGRecv2Anv
$LN12@EGRecv2Anv:

; 2065 : 	}
; 2066 : 	else if ( aRecv->btIsRegistered == 1 ||  aRecv->btIsRegistered == 2 ||  aRecv->btIsRegistered == 3 ||  aRecv->btIsRegistered == 4 ||  aRecv->btIsRegistered == 5 )

  049e0	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  049e3	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  049e7	83 f9 01	 cmp	 ecx, 1
  049ea	74 30		 je	 SHORT $LN2@EGRecv2Anv
  049ec	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  049ef	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  049f3	83 f9 02	 cmp	 ecx, 2
  049f6	74 24		 je	 SHORT $LN2@EGRecv2Anv
  049f8	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  049fb	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  049ff	83 f9 03	 cmp	 ecx, 3
  04a02	74 18		 je	 SHORT $LN2@EGRecv2Anv
  04a04	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04a07	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  04a0b	83 f9 04	 cmp	 ecx, 4
  04a0e	74 0c		 je	 SHORT $LN2@EGRecv2Anv
  04a10	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04a13	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  04a17	83 f9 05	 cmp	 ecx, 5
  04a1a	75 0b		 jne	 SHORT $LN3@EGRecv2Anv
$LN2@EGRecv2Anv:

; 2067 : 	{
; 2068 : 		Result.btIsRegistered = aRecv->btIsRegistered;

  04a1c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04a1f	8a 48 13	 mov	 cl, BYTE PTR [eax+19]
  04a22	88 4d b7	 mov	 BYTE PTR _Result$[ebp+3], cl

; 2069 : 	}
; 2070 : 	else

  04a25	eb 1a		 jmp	 SHORT $LN4@EGRecv2Anv
$LN3@EGRecv2Anv:

; 2071 : 	{
; 2072 : 		Result.btIsRegistered = 4;

  04a27	c6 45 b7 04	 mov	 BYTE PTR _Result$[ebp+3], 4

; 2073 : 		LogAddTD("[Mu_2Anv_Event] Error : Result Value is Wrong [%d]", aRecv->btIsRegistered);

  04a2b	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04a2e	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  04a32	51		 push	 ecx
  04a33	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@
  04a38	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04a3e	83 c4 08	 add	 esp, 8
$LN4@EGRecv2Anv:

; 2074 : 	}
; 2075 : 
; 2076 : 	LogAddTD("[Mu_2Anv_Event] Register Serial Result : %d [%s][%s] GiftNumber: %d Item : %d", aRecv->btIsRegistered, gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name,aRecv->iGiftNumber,loc1);

  04a41	8b 45 f8	 mov	 eax, DWORD PTR _loc1$[ebp]
  04a44	50		 push	 eax
  04a45	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04a48	8b 51 14	 mov	 edx, DWORD PTR [ecx+20]
  04a4b	52		 push	 edx
  04a4c	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04a4f	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04a52	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04a58	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04a5e	8d 44 0a 77	 lea	 eax, DWORD PTR [edx+ecx+119]
  04a62	50		 push	 eax
  04a63	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04a66	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  04a69	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  04a6f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04a74	8d 4c 10 6c	 lea	 ecx, DWORD PTR [eax+edx+108]
  04a78	51		 push	 ecx
  04a79	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04a7c	0f b6 42 13	 movzx	 eax, BYTE PTR [edx+19]
  04a80	50		 push	 eax
  04a81	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@
  04a86	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04a8c	83 c4 18	 add	 esp, 24			; 00000018H

; 2077 : 
; 2078 : 	DataSend(aRecv->iINDEX, (LPBYTE)&Result, Result.h.size);

  04a8f	0f b6 45 b5	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  04a93	50		 push	 eax
  04a94	8d 4d b4	 lea	 ecx, DWORD PTR _Result$[ebp]
  04a97	51		 push	 ecx
  04a98	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04a9b	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  04a9e	50		 push	 eax
  04a9f	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  04aa4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2079 : 
; 2080 : 	gObj[aRecv->iINDEX].UseEventServer = FALSE;

  04aa7	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04aaa	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04aad	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04ab3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04ab9	c7 84 0a 50 10
	00 00 00 00 00
	00		 mov	 DWORD PTR [edx+ecx+4176], 0
$LN15@EGRecv2Anv:

; 2081 : }

  04ac4	5f		 pop	 edi
  04ac5	5e		 pop	 esi
  04ac6	5b		 pop	 ebx
  04ac7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  04aca	33 cd		 xor	 ecx, ebp
  04acc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  04ad1	8b e5		 mov	 esp, ebp
  04ad3	5d		 pop	 ebp
  04ad4	c3		 ret	 0
?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z ENDP ; EGRecv2AnvRegSerial
_TEXT	ENDS
PUBLIC	??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ ; `string'
PUBLIC	??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ ; `string'
PUBLIC	??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@ ; `string'
PUBLIC	??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	?AllSendServerMsg@@YAXPAD@Z:PROC		; AllSendServerMsg
EXTRN	_strcmp:PROC
EXTRN	?gObjIsConnected@@YAHH@Z:PROC			; gObjIsConnected
;	COMDAT ??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
CONST	SEGMENT
??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ DB '['
	DB	'Ring Event] [%s][%s] Register Failed Result : %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
CONST	SEGMENT
??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ DB '['
	DB	'Ring Event] [%s][%s] Register Failed Result:%d, Gift:%d (out '
	DB	'of bound, 1~4)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@
CONST	SEGMENT
??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@ DB '['
	DB	'Ring Event] [%s][%s] Register Succeeded Result:%d, Gift:%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@
CONST	SEGMENT
??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@ DB '%'
	DB	's', 0b4H, 0d4H, ' ', 0b2H, 0b2H, 0bcH, 0adH, ' %s', 0bfH, 0a1H
	DB	' ', 0b4H, 0e7H, 0c3H, 0b7H, 0b5H, 0c7H, 0bcH, 0ccH, 0bdH, 0c0H
	DB	0b4H, 0cfH, 0b4H, 0d9H, '.', 00H		; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv93 = -328						; size = 4
_szTemp$234022 = -260					; size = 256
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z PROC ; EGRecvRegRingGift

; 2088 : {

  04ae0	55		 push	 ebp
  04ae1	8b ec		 mov	 ebp, esp
  04ae3	81 ec 48 01 00
	00		 sub	 esp, 328		; 00000148H
  04ae9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  04aee	33 c5		 xor	 eax, ebp
  04af0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04af3	53		 push	 ebx
  04af4	56		 push	 esi
  04af5	57		 push	 edi

; 2089 : 	gObj[aRecv->iINDEX].UseEventServer = FALSE;

  04af6	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04af9	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04afc	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04b02	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04b08	c7 84 0a 50 10
	00 00 00 00 00
	00		 mov	 DWORD PTR [edx+ecx+4176], 0

; 2090 : 
; 2091 : 	if ( gObjIsConnected(aRecv->iINDEX) == FALSE )

  04b13	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04b16	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04b19	51		 push	 ecx
  04b1a	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  04b1f	83 c4 04	 add	 esp, 4
  04b22	85 c0		 test	 eax, eax
  04b24	75 05		 jne	 SHORT $LN6@EGRecvRegR

; 2092 : 		return;

  04b26	e9 25 02 00 00	 jmp	 $LN7@EGRecvRegR
$LN6@EGRecvRegR:

; 2093 : 
; 2094 : 	if ( strcmp(aRecv->szUID, gObj[aRecv->iINDEX].AccountID))

  04b2b	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04b2e	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04b31	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04b37	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04b3d	8d 44 0a 6c	 lea	 eax, DWORD PTR [edx+ecx+108]
  04b41	50		 push	 eax
  04b42	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04b45	83 c1 08	 add	 ecx, 8
  04b48	51		 push	 ecx
  04b49	e8 00 00 00 00	 call	 _strcmp
  04b4e	83 c4 08	 add	 esp, 8
  04b51	85 c0		 test	 eax, eax
  04b53	74 05		 je	 SHORT $LN5@EGRecvRegR

; 2095 : 		return;

  04b55	e9 f6 01 00 00	 jmp	 $LN7@EGRecvRegR
$LN5@EGRecvRegR:

; 2096 : 
; 2097 : 	if ( aRecv->btIsRegistered == 1 )

  04b5a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04b5d	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  04b61	83 f9 01	 cmp	 ecx, 1
  04b64	0f 85 29 01 00
	00		 jne	 $LN4@EGRecvRegR

; 2098 : 	{
; 2099 : 		if ( CHECK_LIMIT(aRecv->btGiftKind-1, 4) )

  04b6a	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04b6d	0f b6 48 15	 movzx	 ecx, BYTE PTR [eax+21]
  04b71	83 e9 01	 sub	 ecx, 1
  04b74	79 0c		 jns	 SHORT $LN9@EGRecvRegR
  04b76	c7 85 b8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv93[ebp], 0
  04b80	eb 18		 jmp	 SHORT $LN10@EGRecvRegR
$LN9@EGRecvRegR:
  04b82	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04b85	0f b6 42 15	 movzx	 eax, BYTE PTR [edx+21]
  04b89	83 e8 01	 sub	 eax, 1
  04b8c	33 c9		 xor	 ecx, ecx
  04b8e	83 f8 03	 cmp	 eax, 3
  04b91	0f 9e c1	 setle	 cl
  04b94	89 8d b8 fe ff
	ff		 mov	 DWORD PTR tv93[ebp], ecx
$LN10@EGRecvRegR:
  04b9a	83 bd b8 fe ff
	ff 00		 cmp	 DWORD PTR tv93[ebp], 0
  04ba1	0f 84 9c 00 00
	00		 je	 $LN3@EGRecvRegR

; 2100 : 		{
; 2101 : 			char szTemp[256];
; 2102 : 			wsprintf(szTemp, "%s  %s .",
; 2103 : 				gObj[aRecv->iINDEX].Name, g_szRingEventOfflineGift[aRecv->btGiftKind-1]);

  04ba7	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04baa	0f b6 48 15	 movzx	 ecx, BYTE PTR [eax+21]
  04bae	83 e9 01	 sub	 ecx, 1
  04bb1	c1 e1 05	 shl	 ecx, 5
  04bb4	81 c1 00 00 00
	00		 add	 ecx, OFFSET _g_szRingEventOfflineGift
  04bba	51		 push	 ecx
  04bbb	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04bbe	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  04bc1	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04bc7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04bcd	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  04bd1	52		 push	 edx
  04bd2	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@
  04bd7	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$234022[ebp]
  04bdd	50		 push	 eax
  04bde	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  04be4	83 c4 10	 add	 esp, 16			; 00000010H

; 2104 : 
; 2105 : 			AllSendServerMsg(szTemp);

  04be7	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _szTemp$234022[ebp]
  04bed	50		 push	 eax
  04bee	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  04bf3	83 c4 04	 add	 esp, 4

; 2106 : 
; 2107 : 			LogAddTD("[Ring Event] [%s][%s] Register Succeeded Result:%d, Gift:%d", gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name, aRecv->btIsRegistered, aRecv->btGiftKind);

  04bf6	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04bf9	0f b6 48 15	 movzx	 ecx, BYTE PTR [eax+21]
  04bfd	51		 push	 ecx
  04bfe	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04c01	0f b6 42 13	 movzx	 eax, BYTE PTR [edx+19]
  04c05	50		 push	 eax
  04c06	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04c09	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  04c0c	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  04c12	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04c17	8d 4c 10 77	 lea	 ecx, DWORD PTR [eax+edx+119]
  04c1b	51		 push	 ecx
  04c1c	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04c1f	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  04c22	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04c28	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04c2e	8d 54 01 6c	 lea	 edx, DWORD PTR [ecx+eax+108]
  04c32	52		 push	 edx
  04c33	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@
  04c38	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04c3e	83 c4 14	 add	 esp, 20			; 00000014H

; 2108 : 		}
; 2109 : 		else

  04c41	eb 4b		 jmp	 SHORT $LN2@EGRecvRegR
$LN3@EGRecvRegR:

; 2110 : 		{
; 2111 : 			LogAddTD("[Ring Event] [%s][%s] Register Failed Result:%d, Gift:%d (out of bound, 1~4)", gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name, aRecv->btIsRegistered, aRecv->btGiftKind);

  04c43	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04c46	0f b6 48 15	 movzx	 ecx, BYTE PTR [eax+21]
  04c4a	51		 push	 ecx
  04c4b	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04c4e	0f b6 42 13	 movzx	 eax, BYTE PTR [edx+19]
  04c52	50		 push	 eax
  04c53	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04c56	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  04c59	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  04c5f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04c64	8d 4c 10 77	 lea	 ecx, DWORD PTR [eax+edx+119]
  04c68	51		 push	 ecx
  04c69	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04c6c	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  04c6f	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04c75	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04c7b	8d 54 01 6c	 lea	 edx, DWORD PTR [ecx+eax+108]
  04c7f	52		 push	 edx
  04c80	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
  04c85	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04c8b	83 c4 14	 add	 esp, 20			; 00000014H
$LN2@EGRecvRegR:

; 2112 : 		}
; 2113 : 
; 2114 : 		return;

  04c8e	e9 bd 00 00 00	 jmp	 $LN7@EGRecvRegR
$LN4@EGRecvRegR:

; 2115 : 	}
; 2116 : 
; 2117 : 	LogAddTD("[Ring Event] [%s][%s] Register Failed Result : %d", gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name, aRecv->btIsRegistered);

  04c93	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04c96	0f b6 48 13	 movzx	 ecx, BYTE PTR [eax+19]
  04c9a	51		 push	 ecx
  04c9b	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04c9e	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  04ca1	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04ca7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04cad	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  04cb1	52		 push	 edx
  04cb2	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04cb5	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04cb8	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04cbe	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04cc4	8d 44 0a 6c	 lea	 eax, DWORD PTR [edx+ecx+108]
  04cc8	50		 push	 eax
  04cc9	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
  04cce	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04cd4	83 c4 10	 add	 esp, 16			; 00000010H

; 2118 : 
; 2119 : 	if ( gObjIsConnected(aRecv->iINDEX) == TRUE )

  04cd7	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04cda	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04cdd	51		 push	 ecx
  04cde	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  04ce3	83 c4 04	 add	 esp, 4
  04ce6	83 f8 01	 cmp	 eax, 1
  04ce9	75 65		 jne	 SHORT $LN7@EGRecvRegR

; 2120 : 	{
; 2121 : 		MapC[gObj[aRecv->iINDEX].MapNumber].MoneyItemDrop(100000, (BYTE)gObj[aRecv->iINDEX].X, (BYTE)gObj[aRecv->iINDEX].Y);

  04ceb	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  04cee	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  04cf1	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  04cf7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04cfd	0f b6 84 0a 46
	01 00 00	 movzx	 eax, BYTE PTR [edx+ecx+326]
  04d05	50		 push	 eax
  04d06	8b 4d 08	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  04d09	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  04d0c	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  04d12	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04d17	0f b6 8c 10 44
	01 00 00	 movzx	 ecx, BYTE PTR [eax+edx+324]
  04d1f	51		 push	 ecx
  04d20	68 a0 86 01 00	 push	 100000			; 000186a0H
  04d25	8b 55 08	 mov	 edx, DWORD PTR _aRecv$[ebp]
  04d28	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  04d2b	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04d31	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04d37	0f b6 8c 01 49
	01 00 00	 movzx	 ecx, BYTE PTR [ecx+eax+329]
  04d3f	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  04d45	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  04d4b	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN7@EGRecvRegR:

; 2122 : 	}
; 2123 : }

  04d50	5f		 pop	 edi
  04d51	5e		 pop	 esi
  04d52	5b		 pop	 ebx
  04d53	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  04d56	33 cd		 xor	 ecx, ebp
  04d58	e8 00 00 00 00	 call	 @__security_check_cookie@4
  04d5d	8b e5		 mov	 esp, ebp
  04d5f	5d		 pop	 ebp
  04d60	c3		 ret	 0
?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z ENDP ; EGRecvRegRingGift
_TEXT	ENDS
PUBLIC	??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqBloodCastleEnterCount@@YAXH@Z		; EGReqBloodCastleEnterCount
EXTRN	?GMRankingServerConnect@@YAHPADK@Z:PROC		; GMRankingServerConnect
EXTRN	?gDevilSquareEventServerIp@@3PADA:BYTE		; gDevilSquareEventServerIp
EXTRN	?wsRServerCli@@3VwsJoinServerCli@@A:BYTE	; wsRServerCli
EXTRN	?DevilSquareEventConnect@@3HA:DWORD		; DevilSquareEventConnect
EXTRN	?IsDevilSquareEventConnected@@3HA:DWORD		; IsDevilSquareEventConnected
EXTRN	?gGameServerCode@@3FA:WORD			; gGameServerCode
EXTRN	_memcpy:PROC
;	COMDAT ??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@
CONST	SEGMENT
??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@ DB 'Can not co'
	DB	'nnect Ranking Server', 00H			; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_pMsg$ = -36						; size = 32
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqBloodCastleEnterCount@@YAXH@Z PROC		; EGReqBloodCastleEnterCount

; 2135 : {

  04d70	55		 push	 ebp
  04d71	8b ec		 mov	 ebp, esp
  04d73	83 ec 64	 sub	 esp, 100		; 00000064H
  04d76	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  04d7b	33 c5		 xor	 eax, ebp
  04d7d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04d80	53		 push	 ebx
  04d81	56		 push	 esi
  04d82	57		 push	 edi

; 2136 : 	if ( !gObjIsConnected(iIndex) )

  04d83	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  04d86	50		 push	 eax
  04d87	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  04d8c	83 c4 04	 add	 esp, 4
  04d8f	85 c0		 test	 eax, eax
  04d91	75 05		 jne	 SHORT $LN4@EGReqBlood

; 2137 : 		return;

  04d93	e9 f3 00 00 00	 jmp	 $LN5@EGReqBlood
$LN4@EGReqBlood:

; 2138 : 
; 2139 : 	PMSG_REQ_BLOODCASTLE_ENTERCOUNT pMsg;
; 2140 : 
; 2141 : 	pMsg.h.c = 0xC1;

  04d98	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 2142 : 	pMsg.h.headcode = 0x0B;

  04d9c	c6 45 de 0b	 mov	 BYTE PTR _pMsg$[ebp+2], 11 ; 0000000bH

; 2143 : 	pMsg.h.size = sizeof(pMsg);

  04da0	c6 45 dd 20	 mov	 BYTE PTR _pMsg$[ebp+1], 32 ; 00000020H

; 2144 : 	memcpy(pMsg.AccountID, gObj[iIndex].AccountID, 10);

  04da4	6a 0a		 push	 10			; 0000000aH
  04da6	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  04da9	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04daf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04db5	8d 54 01 6c	 lea	 edx, DWORD PTR [ecx+eax+108]
  04db9	52		 push	 edx
  04dba	8d 45 df	 lea	 eax, DWORD PTR _pMsg$[ebp+3]
  04dbd	50		 push	 eax
  04dbe	e8 00 00 00 00	 call	 _memcpy
  04dc3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2145 : 	memcpy(pMsg.GameID, gObj[iIndex].Name, 10);

  04dc6	6a 0a		 push	 10			; 0000000aH
  04dc8	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  04dcb	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04dd1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04dd7	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  04ddb	52		 push	 edx
  04ddc	8d 45 e9	 lea	 eax, DWORD PTR _pMsg$[ebp+13]
  04ddf	50		 push	 eax
  04de0	e8 00 00 00 00	 call	 _memcpy
  04de5	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2146 : 	pMsg.ServerCode = gGameServerCode / 20;

  04de8	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  04def	99		 cdq
  04df0	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  04df5	f7 f9		 idiv	 ecx
  04df7	89 45 f4	 mov	 DWORD PTR _pMsg$[ebp+24], eax

; 2147 : 	pMsg.iObjIndex = iIndex;

  04dfa	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  04dfd	89 45 f8	 mov	 DWORD PTR _pMsg$[ebp+28], eax

; 2148 : 
; 2149 : 	if ( !IsDevilSquareEventConnected && !DevilSquareEventConnect )

  04e00	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?IsDevilSquareEventConnected@@3HA, 0 ; IsDevilSquareEventConnected
  04e07	75 5d		 jne	 SHORT $LN3@EGReqBlood
  04e09	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?DevilSquareEventConnect@@3HA, 0 ; DevilSquareEventConnect
  04e10	75 54		 jne	 SHORT $LN3@EGReqBlood

; 2150 : 	{
; 2151 : 		wsRServerCli.Close();

  04e12	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsRServerCli@@3VwsJoinServerCli@@A+4
  04e17	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close

; 2152 : 		wsRServerCli.CreateSocket(ghWnd);

  04e1c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ghWnd@@3PAUHWND__@@A ; ghWnd
  04e21	50		 push	 eax
  04e22	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsRServerCli@@3VwsJoinServerCli@@A+4
  04e27	e8 00 00 00 00	 call	 ?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z ; MyWinsockBase::CreateSocket

; 2153 : 
; 2154 : 		if ( !GMRankingServerConnect(gDevilSquareEventServerIp, WM_GM_RANKING_CLIENT_MSG_PROC) )

  04e2c	68 0c 04 00 00	 push	 1036			; 0000040cH
  04e31	68 00 00 00 00	 push	 OFFSET ?gDevilSquareEventServerIp@@3PADA ; gDevilSquareEventServerIp
  04e36	e8 00 00 00 00	 call	 ?GMRankingServerConnect@@YAHPADK@Z ; GMRankingServerConnect
  04e3b	83 c4 08	 add	 esp, 8
  04e3e	85 c0		 test	 eax, eax
  04e40	75 1a		 jne	 SHORT $LN2@EGReqBlood

; 2155 : 		{
; 2156 : 			IsDevilSquareEventConnected = 0;

  04e42	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?IsDevilSquareEventConnected@@3HA, 0 ; IsDevilSquareEventConnected

; 2157 : 			LogAddTD("Can not connect Ranking Server");

  04e4c	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@
  04e51	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  04e57	83 c4 04	 add	 esp, 4

; 2158 : 			return;

  04e5a	eb 2f		 jmp	 SHORT $LN5@EGReqBlood
$LN2@EGReqBlood:

; 2159 : 		}
; 2160 : 
; 2161 : 		IsDevilSquareEventConnected = TRUE;

  04e5c	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?IsDevilSquareEventConnected@@3HA, 1 ; IsDevilSquareEventConnected
$LN3@EGReqBlood:

; 2162 : 	}
; 2163 : 
; 2164 : 	if ( !DevilSquareEventConnect && IsDevilSquareEventConnected )

  04e66	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?DevilSquareEventConnect@@3HA, 0 ; DevilSquareEventConnect
  04e6d	75 1c		 jne	 SHORT $LN5@EGReqBlood
  04e6f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?IsDevilSquareEventConnected@@3HA, 0 ; IsDevilSquareEventConnected
  04e76	74 13		 je	 SHORT $LN5@EGReqBlood

; 2165 : 	{
; 2166 : 		wsRServerCli.DataSend((char*)&pMsg, pMsg.h.size);

  04e78	0f b6 45 dd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  04e7c	50		 push	 eax
  04e7d	8d 4d dc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  04e80	51		 push	 ecx
  04e81	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsRServerCli@@3VwsJoinServerCli@@A ; wsRServerCli
  04e86	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN5@EGReqBlood:

; 2167 : 	}
; 2168 : }

  04e8b	5f		 pop	 edi
  04e8c	5e		 pop	 esi
  04e8d	5b		 pop	 ebx
  04e8e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  04e91	33 cd		 xor	 ecx, ebp
  04e93	e8 00 00 00 00	 call	 @__security_check_cookie@4
  04e98	8b e5		 mov	 esp, ebp
  04e9a	5d		 pop	 ebp
  04e9b	c3		 ret	 0
?EGReqBloodCastleEnterCount@@YAXH@Z ENDP		; EGReqBloodCastleEnterCount
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z ; EGAnsBloodCastleEnterCount
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsgSend$ = -36					; size = 5
_szName$ = -28						; size = 11
_szAccountID$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z PROC ; EGAnsBloodCastleEnterCount

; 2171 : {

  04ea0	55		 push	 ebp
  04ea1	8b ec		 mov	 ebp, esp
  04ea3	83 ec 64	 sub	 esp, 100		; 00000064H
  04ea6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  04eab	33 c5		 xor	 eax, ebp
  04ead	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04eb0	53		 push	 ebx
  04eb1	56		 push	 esi
  04eb2	57		 push	 edi

; 2172 : 	if ( !lpMsg)

  04eb3	83 7d 08 00	 cmp	 DWORD PTR _lpMsg$[ebp], 0
  04eb7	75 05		 jne	 SHORT $LN4@EGAnsBlood

; 2173 : 		return;

  04eb9	e9 de 00 00 00	 jmp	 $LN5@EGAnsBlood
$LN4@EGAnsBlood:

; 2174 : 
; 2175 : 	if ( !gObjIsConnected(lpMsg->iObjIndex))

  04ebe	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  04ec1	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  04ec4	51		 push	 ecx
  04ec5	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  04eca	83 c4 04	 add	 esp, 4
  04ecd	85 c0		 test	 eax, eax
  04ecf	75 05		 jne	 SHORT $LN3@EGAnsBlood

; 2176 : 		return;

  04ed1	e9 c6 00 00 00	 jmp	 $LN5@EGAnsBlood
$LN3@EGAnsBlood:

; 2177 : 
; 2178 : 	char szAccountID[11] = {0};

  04ed6	c6 45 f0 00	 mov	 BYTE PTR _szAccountID$[ebp], 0
  04eda	33 c0		 xor	 eax, eax
  04edc	89 45 f1	 mov	 DWORD PTR _szAccountID$[ebp+1], eax
  04edf	89 45 f5	 mov	 DWORD PTR _szAccountID$[ebp+5], eax
  04ee2	66 89 45 f9	 mov	 WORD PTR _szAccountID$[ebp+9], ax

; 2179 : 	char szName[11] = {0};

  04ee6	c6 45 e4 00	 mov	 BYTE PTR _szName$[ebp], 0
  04eea	33 c0		 xor	 eax, eax
  04eec	89 45 e5	 mov	 DWORD PTR _szName$[ebp+1], eax
  04eef	89 45 e9	 mov	 DWORD PTR _szName$[ebp+5], eax
  04ef2	66 89 45 ed	 mov	 WORD PTR _szName$[ebp+9], ax

; 2180 : 	memcpy(szAccountID, lpMsg->AccountID, 10);

  04ef6	6a 0a		 push	 10			; 0000000aH
  04ef8	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  04efb	83 c0 03	 add	 eax, 3
  04efe	50		 push	 eax
  04eff	8d 4d f0	 lea	 ecx, DWORD PTR _szAccountID$[ebp]
  04f02	51		 push	 ecx
  04f03	e8 00 00 00 00	 call	 _memcpy
  04f08	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2181 : 	memcpy(szName, lpMsg->GameID, 10);

  04f0b	6a 0a		 push	 10			; 0000000aH
  04f0d	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  04f10	83 c0 0d	 add	 eax, 13			; 0000000dH
  04f13	50		 push	 eax
  04f14	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  04f17	51		 push	 ecx
  04f18	e8 00 00 00 00	 call	 _memcpy
  04f1d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2182 : 
; 2183 : 	if ( strcmp(gObj[lpMsg->iObjIndex].AccountID, szAccountID) || strcmp(gObj[lpMsg->iObjIndex].Name, szName) )

  04f20	8d 45 f0	 lea	 eax, DWORD PTR _szAccountID$[ebp]
  04f23	50		 push	 eax
  04f24	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  04f27	8b 51 1c	 mov	 edx, DWORD PTR [ecx+28]
  04f2a	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  04f30	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04f35	8d 4c 10 6c	 lea	 ecx, DWORD PTR [eax+edx+108]
  04f39	51		 push	 ecx
  04f3a	e8 00 00 00 00	 call	 _strcmp
  04f3f	83 c4 08	 add	 esp, 8
  04f42	85 c0		 test	 eax, eax
  04f44	75 26		 jne	 SHORT $LN1@EGAnsBlood
  04f46	8d 45 e4	 lea	 eax, DWORD PTR _szName$[ebp]
  04f49	50		 push	 eax
  04f4a	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  04f4d	8b 51 1c	 mov	 edx, DWORD PTR [ecx+28]
  04f50	69 d2 38 2b 00
	00		 imul	 edx, 11064		; 00002b38H
  04f56	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04f5b	8d 4c 10 77	 lea	 ecx, DWORD PTR [eax+edx+119]
  04f5f	51		 push	 ecx
  04f60	e8 00 00 00 00	 call	 _strcmp
  04f65	83 c4 08	 add	 esp, 8
  04f68	85 c0		 test	 eax, eax
  04f6a	74 02		 je	 SHORT $LN2@EGAnsBlood
$LN1@EGAnsBlood:

; 2184 : 		 return;

  04f6c	eb 2e		 jmp	 SHORT $LN5@EGAnsBlood
$LN2@EGAnsBlood:

; 2185 : 
; 2186 : 	PMSG_ANS_CL_ENTERCOUNT pMsgSend;
; 2187 : 
; 2188 : 	pMsgSend.h.c = 0xC1;

  04f6e	c6 45 dc c1	 mov	 BYTE PTR _pMsgSend$[ebp], 193 ; 000000c1H

; 2189 : 	pMsgSend.h.headcode = 0x9F;

  04f72	c6 45 de 9f	 mov	 BYTE PTR _pMsgSend$[ebp+2], 159 ; 0000009fH

; 2190 : 	pMsgSend.h.size = sizeof(pMsgSend);

  04f76	c6 45 dd 05	 mov	 BYTE PTR _pMsgSend$[ebp+1], 5

; 2191 : 	pMsgSend.btEventType = 2;

  04f7a	c6 45 df 02	 mov	 BYTE PTR _pMsgSend$[ebp+3], 2

; 2192 : 	pMsgSend.btLeftEnterCount = lpMsg->iLeftCount;

  04f7e	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  04f81	8a 48 20	 mov	 cl, BYTE PTR [eax+32]
  04f84	88 4d e0	 mov	 BYTE PTR _pMsgSend$[ebp+4], cl

; 2193 : 
; 2194 : 	DataSend(lpMsg->iObjIndex, (LPBYTE)&pMsgSend, sizeof(pMsgSend));

  04f87	6a 05		 push	 5
  04f89	8d 45 dc	 lea	 eax, DWORD PTR _pMsgSend$[ebp]
  04f8c	50		 push	 eax
  04f8d	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  04f90	8b 51 1c	 mov	 edx, DWORD PTR [ecx+28]
  04f93	52		 push	 edx
  04f94	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  04f99	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN5@EGAnsBlood:

; 2195 : }

  04f9c	5f		 pop	 edi
  04f9d	5e		 pop	 esi
  04f9e	5b		 pop	 ebx
  04f9f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  04fa2	33 cd		 xor	 ecx, ebp
  04fa4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  04fa9	8b e5		 mov	 esp, ebp
  04fab	5d		 pop	 ebp
  04fac	c3		 ret	 0
?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z ENDP ; EGAnsBloodCastleEnterCount
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqRegCCOfflineGift@@YAXH@Z			; EGReqRegCCOfflineGift
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -40						; size = 36
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqRegCCOfflineGift@@YAXH@Z PROC			; EGReqRegCCOfflineGift

; 2207 : {

  04fb0	55		 push	 ebp
  04fb1	8b ec		 mov	 ebp, esp
  04fb3	83 ec 68	 sub	 esp, 104		; 00000068H
  04fb6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  04fbb	33 c5		 xor	 eax, ebp
  04fbd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  04fc0	53		 push	 ebx
  04fc1	56		 push	 esi
  04fc2	57		 push	 edi

; 2208 : 	if ( !gObjIsConnected(iIndex) )

  04fc3	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  04fc6	50		 push	 eax
  04fc7	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  04fcc	83 c4 04	 add	 esp, 4
  04fcf	85 c0		 test	 eax, eax
  04fd1	75 02		 jne	 SHORT $LN1@EGReqRegCC

; 2209 : 		return;

  04fd3	eb 7f		 jmp	 SHORT $LN2@EGReqRegCC
$LN1@EGReqRegCC:

; 2210 : 
; 2211 : 	PMSG_REQ_REG_CC_OFFLINE_GIFT pMsg;
; 2212 : 
; 2213 : 	pMsg.h.c = 0xC1;

  04fd5	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 2214 : 	pMsg.h.headcode = 0x15;

  04fd9	c6 45 da 15	 mov	 BYTE PTR _pMsg$[ebp+2], 21 ; 00000015H

; 2215 : 	pMsg.h.size = sizeof(pMsg);

  04fdd	c6 45 d9 24	 mov	 BYTE PTR _pMsg$[ebp+1], 36 ; 00000024H

; 2216 : 	memcpy(pMsg.szUID, gObj[iIndex].AccountID, 11);

  04fe1	6a 0b		 push	 11			; 0000000bH
  04fe3	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  04fe6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  04fec	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  04ff2	8d 54 01 6c	 lea	 edx, DWORD PTR [ecx+eax+108]
  04ff6	52		 push	 edx
  04ff7	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp+8]
  04ffa	50		 push	 eax
  04ffb	e8 00 00 00 00	 call	 _memcpy
  05000	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2217 : 	memcpy(pMsg.szNAME, gObj[iIndex].Name, 11);

  05003	6a 0b		 push	 11			; 0000000bH
  05005	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  05008	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0500e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05014	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  05018	52		 push	 edx
  05019	8d 45 ee	 lea	 eax, DWORD PTR _pMsg$[ebp+22]
  0501c	50		 push	 eax
  0501d	e8 00 00 00 00	 call	 _memcpy
  05022	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2218 : 	pMsg.wServerCode = gGameServerCode / 20;

  05025	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0502c	99		 cdq
  0502d	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  05032	f7 f9		 idiv	 ecx
  05034	66 89 45 ec	 mov	 WORD PTR _pMsg$[ebp+20], ax

; 2219 : 	pMsg.iINDEX = iIndex;

  05038	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  0503b	89 45 dc	 mov	 DWORD PTR _pMsg$[ebp+4], eax

; 2220 : 	pMsg.szUID[10] = 0;

  0503e	c6 45 ea 00	 mov	 BYTE PTR _pMsg$[ebp+18], 0

; 2221 : 	pMsg.szNAME[10] = 0;

  05042	c6 45 f8 00	 mov	 BYTE PTR _pMsg$[ebp+32], 0

; 2222 : 
; 2223 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  05046	6a 24		 push	 36			; 00000024H
  05048	8d 45 d8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0504b	50		 push	 eax
  0504c	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  05051	83 c4 08	 add	 esp, 8
$LN2@EGReqRegCC:

; 2224 : }

  05054	5f		 pop	 edi
  05055	5e		 pop	 esi
  05056	5b		 pop	 ebx
  05057	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0505a	33 cd		 xor	 ecx, ebp
  0505c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  05061	8b e5		 mov	 esp, ebp
  05063	5d		 pop	 ebp
  05064	c3		 ret	 0
?EGReqRegCCOfflineGift@@YAXH@Z ENDP			; EGReqRegCCOfflineGift
_TEXT	ENDS
PUBLIC	??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	_memset:PROC
EXTRN	_memset:PROC
;	COMDAT ??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@
CONST	SEGMENT
??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@ DB '['
	DB	'Chaos Castle] [%s][%s] Success to Register OffLine Gift (GIFT'
	DB	':%s)', 00H					; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_szText$ = -336						; size = 256
_szGIFT_NAME$ = -80					; size = 50
_szName$ = -28						; size = 11
_szAccountID$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z PROC ; EGAnsRegCCOfflineGift

; 2227 : {

  05070	55		 push	 ebp
  05071	8b ec		 mov	 ebp, esp
  05073	81 ec 90 01 00
	00		 sub	 esp, 400		; 00000190H
  05079	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0507e	33 c5		 xor	 eax, ebp
  05080	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  05083	53		 push	 ebx
  05084	56		 push	 esi
  05085	57		 push	 edi

; 2228 : 	if ( !lpMsg)

  05086	83 7d 08 00	 cmp	 DWORD PTR _lpMsg$[ebp], 0
  0508a	75 05		 jne	 SHORT $LN2@EGAnsRegCC

; 2229 : 		return;

  0508c	e9 2b 01 00 00	 jmp	 $LN3@EGAnsRegCC
$LN2@EGAnsRegCC:

; 2230 : 
; 2231 : 	if ( !lpMsg->iResultCode )

  05091	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05094	83 78 24 00	 cmp	 DWORD PTR [eax+36], 0
  05098	75 05		 jne	 SHORT $LN1@EGAnsRegCC

; 2232 : 		return;

  0509a	e9 1d 01 00 00	 jmp	 $LN3@EGAnsRegCC
$LN1@EGAnsRegCC:

; 2233 : 
; 2234 : 	char szAccountID[11] = {0};

  0509f	c6 45 f0 00	 mov	 BYTE PTR _szAccountID$[ebp], 0
  050a3	33 c0		 xor	 eax, eax
  050a5	89 45 f1	 mov	 DWORD PTR _szAccountID$[ebp+1], eax
  050a8	89 45 f5	 mov	 DWORD PTR _szAccountID$[ebp+5], eax
  050ab	66 89 45 f9	 mov	 WORD PTR _szAccountID$[ebp+9], ax

; 2235 : 	char szName[11] = {0};

  050af	c6 45 e4 00	 mov	 BYTE PTR _szName$[ebp], 0
  050b3	33 c0		 xor	 eax, eax
  050b5	89 45 e5	 mov	 DWORD PTR _szName$[ebp+1], eax
  050b8	89 45 e9	 mov	 DWORD PTR _szName$[ebp+5], eax
  050bb	66 89 45 ed	 mov	 WORD PTR _szName$[ebp+9], ax

; 2236 : 	char szGIFT_NAME[50] = {0};

  050bf	c6 45 b0 00	 mov	 BYTE PTR _szGIFT_NAME$[ebp], 0
  050c3	6a 31		 push	 49			; 00000031H
  050c5	6a 00		 push	 0
  050c7	8d 45 b1	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp+1]
  050ca	50		 push	 eax
  050cb	e8 00 00 00 00	 call	 _memset
  050d0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2237 : 	memset(szAccountID, 0, sizeof(szAccountID));

  050d3	6a 0b		 push	 11			; 0000000bH
  050d5	6a 00		 push	 0
  050d7	8d 45 f0	 lea	 eax, DWORD PTR _szAccountID$[ebp]
  050da	50		 push	 eax
  050db	e8 00 00 00 00	 call	 _memset
  050e0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2238 : 	memset(szName, 0, sizeof(szName));

  050e3	6a 0b		 push	 11			; 0000000bH
  050e5	6a 00		 push	 0
  050e7	8d 45 e4	 lea	 eax, DWORD PTR _szName$[ebp]
  050ea	50		 push	 eax
  050eb	e8 00 00 00 00	 call	 _memset
  050f0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2239 : 	memset(szGIFT_NAME, 0, sizeof(szGIFT_NAME));

  050f3	6a 32		 push	 50			; 00000032H
  050f5	6a 00		 push	 0
  050f7	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  050fa	50		 push	 eax
  050fb	e8 00 00 00 00	 call	 _memset
  05100	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2240 : 	memcpy(szAccountID, lpMsg->szUID, sizeof(szAccountID));

  05103	6a 0b		 push	 11			; 0000000bH
  05105	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05108	83 c0 08	 add	 eax, 8
  0510b	50		 push	 eax
  0510c	8d 4d f0	 lea	 ecx, DWORD PTR _szAccountID$[ebp]
  0510f	51		 push	 ecx
  05110	e8 00 00 00 00	 call	 _memcpy
  05115	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2241 : 	memcpy(szName, lpMsg->szNAME, sizeof(szName));

  05118	6a 0b		 push	 11			; 0000000bH
  0511a	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0511d	83 c0 16	 add	 eax, 22			; 00000016H
  05120	50		 push	 eax
  05121	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  05124	51		 push	 ecx
  05125	e8 00 00 00 00	 call	 _memcpy
  0512a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2242 : 	memcpy(szGIFT_NAME, lpMsg->szGIFT_NAME, sizeof(szGIFT_NAME));

  0512d	6a 32		 push	 50			; 00000032H
  0512f	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05132	83 c0 28	 add	 eax, 40			; 00000028H
  05135	50		 push	 eax
  05136	8d 4d b0	 lea	 ecx, DWORD PTR _szGIFT_NAME$[ebp]
  05139	51		 push	 ecx
  0513a	e8 00 00 00 00	 call	 _memcpy
  0513f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2243 : 	szAccountID[10] = 0;

  05142	c6 45 fa 00	 mov	 BYTE PTR _szAccountID$[ebp+10], 0

; 2244 : 	szName[10] = 0;

  05146	c6 45 ee 00	 mov	 BYTE PTR _szName$[ebp+10], 0

; 2245 : 	szGIFT_NAME[49] = 0;

  0514a	c6 45 e1 00	 mov	 BYTE PTR _szGIFT_NAME$[ebp+49], 0

; 2246 : 	char szText[256] = {0};

  0514e	c6 85 b0 fe ff
	ff 00		 mov	 BYTE PTR _szText$[ebp], 0
  05155	68 ff 00 00 00	 push	 255			; 000000ffH
  0515a	6a 00		 push	 0
  0515c	8d 85 b1 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp+1]
  05162	50		 push	 eax
  05163	e8 00 00 00 00	 call	 _memset
  05168	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2247 : 
; 2248 : 	wsprintf(szText, lMsg.Get(MSGGET(6,74)), szName, szGIFT_NAME);

  0516b	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  0516e	50		 push	 eax
  0516f	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  05172	51		 push	 ecx
  05173	68 4a 06 00 00	 push	 1610			; 0000064aH
  05178	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0517d	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  05182	50		 push	 eax
  05183	8d 95 b0 fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp]
  05189	52		 push	 edx
  0518a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  05190	83 c4 10	 add	 esp, 16			; 00000010H

; 2249 : 	AllSendServerMsg(szText);

  05193	8d 85 b0 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp]
  05199	50		 push	 eax
  0519a	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  0519f	83 c4 04	 add	 esp, 4

; 2250 : 
; 2251 : 	LogAddTD("[Chaos Castle] [%s][%s] Success to Register OffLine Gift (GIFT:%s)", szAccountID, szName, szGIFT_NAME);

  051a2	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  051a5	50		 push	 eax
  051a6	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  051a9	51		 push	 ecx
  051aa	8d 55 f0	 lea	 edx, DWORD PTR _szAccountID$[ebp]
  051ad	52		 push	 edx
  051ae	68 00 00 00 00	 push	 OFFSET ??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@
  051b3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  051b9	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@EGAnsRegCC:

; 2252 : }

  051bc	5f		 pop	 edi
  051bd	5e		 pop	 esi
  051be	5b		 pop	 ebx
  051bf	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  051c2	33 cd		 xor	 ecx, ebp
  051c4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  051c9	8b e5		 mov	 esp, ebp
  051cb	5d		 pop	 ebp
  051cc	c3		 ret	 0
?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z ENDP ; EGAnsRegCCOfflineGift
_TEXT	ENDS
PUBLIC	__$ArrayPad$
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -40						; size = 36
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqRegDLOfflineGift@@YAXH@Z PROC			; EGReqRegDLOfflineGift

; 2264 : {

  051d0	55		 push	 ebp
  051d1	8b ec		 mov	 ebp, esp
  051d3	83 ec 68	 sub	 esp, 104		; 00000068H
  051d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  051db	33 c5		 xor	 eax, ebp
  051dd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  051e0	53		 push	 ebx
  051e1	56		 push	 esi
  051e2	57		 push	 edi

; 2265 : 	if ( !gObjIsConnected(iIndex) )

  051e3	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  051e6	50		 push	 eax
  051e7	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  051ec	83 c4 04	 add	 esp, 4
  051ef	85 c0		 test	 eax, eax
  051f1	75 02		 jne	 SHORT $LN1@EGReqRegDL

; 2266 : 		return;

  051f3	eb 7f		 jmp	 SHORT $LN2@EGReqRegDL
$LN1@EGReqRegDL:

; 2267 : 
; 2268 : 	PMSG_REQ_REG_DL_OFFLINE_GIFT pMsg;
; 2269 : 
; 2270 : 	pMsg.h.c = 0xC1;

  051f5	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 2271 : 	pMsg.h.headcode = 0x16;

  051f9	c6 45 da 16	 mov	 BYTE PTR _pMsg$[ebp+2], 22 ; 00000016H

; 2272 : 	pMsg.h.size = sizeof(pMsg);

  051fd	c6 45 d9 24	 mov	 BYTE PTR _pMsg$[ebp+1], 36 ; 00000024H

; 2273 : 	memcpy(pMsg.szUID, gObj[iIndex].AccountID, 11);

  05201	6a 0b		 push	 11			; 0000000bH
  05203	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  05206	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0520c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05212	8d 54 01 6c	 lea	 edx, DWORD PTR [ecx+eax+108]
  05216	52		 push	 edx
  05217	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp+8]
  0521a	50		 push	 eax
  0521b	e8 00 00 00 00	 call	 _memcpy
  05220	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2274 : 	memcpy(pMsg.szNAME, gObj[iIndex].Name, 11);

  05223	6a 0b		 push	 11			; 0000000bH
  05225	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  05228	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0522e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05234	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  05238	52		 push	 edx
  05239	8d 45 ee	 lea	 eax, DWORD PTR _pMsg$[ebp+22]
  0523c	50		 push	 eax
  0523d	e8 00 00 00 00	 call	 _memcpy
  05242	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2275 : 	pMsg.wServerCode = gGameServerCode / 20;

  05245	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0524c	99		 cdq
  0524d	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  05252	f7 f9		 idiv	 ecx
  05254	66 89 45 ec	 mov	 WORD PTR _pMsg$[ebp+20], ax

; 2276 : 	pMsg.iINDEX = iIndex;

  05258	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  0525b	89 45 dc	 mov	 DWORD PTR _pMsg$[ebp+4], eax

; 2277 : 	pMsg.szUID[10] = 0;

  0525e	c6 45 ea 00	 mov	 BYTE PTR _pMsg$[ebp+18], 0

; 2278 : 	pMsg.szNAME[10] = 0;

  05262	c6 45 f8 00	 mov	 BYTE PTR _pMsg$[ebp+32], 0

; 2279 : 
; 2280 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  05266	6a 24		 push	 36			; 00000024H
  05268	8d 45 d8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0526b	50		 push	 eax
  0526c	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  05271	83 c4 08	 add	 esp, 8
$LN2@EGReqRegDL:

; 2281 : }

  05274	5f		 pop	 edi
  05275	5e		 pop	 esi
  05276	5b		 pop	 ebx
  05277	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0527a	33 cd		 xor	 ecx, ebp
  0527c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  05281	8b e5		 mov	 esp, ebp
  05283	5d		 pop	 ebp
  05284	c3		 ret	 0
?EGReqRegDLOfflineGift@@YAXH@Z ENDP			; EGReqRegDLOfflineGift
_TEXT	ENDS
PUBLIC	??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@ ; `string'
PUBLIC	??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@
CONST	SEGMENT
??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@ DB '['
	DB	'DarkLord Heart Event] [%s][%s] Success to Register OffLine Gi'
	DB	'ft (GIFT:%s)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@
CONST	SEGMENT
??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@ DB '['
	DB	0b4H, 0d9H, 0c5H, 0a9H, 0b7H, 0ceH, 0b5H, 0e5H, ' ', 0b1H, 0e2H
	DB	0b3H, 0e4H, ' ', 0c0H, 0ccH, 0baH, 0a5H, 0c6H, 0aeH, '] %s ', 0b4H
	DB	0d4H, 0b2H, 0b2H, 0bcH, 0adH, ' %s ', 0b0H, 0e6H, 0c7H, 0b0H, 0bfH
	DB	0a1H, ' ', 0b4H, 0e7H, 0c3H, 0b7H, 0b5H, 0c7H, 0bcH, 0ccH, 0bdH
	DB	0c0H, 0b4H, 0cfH, 0b4H, 0d9H, '.', 00H	; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_szText$ = -336						; size = 256
_szGIFT_NAME$ = -80					; size = 50
_szName$ = -28						; size = 11
_szAccountID$ = -16					; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z PROC ; EGAnsRegDLOfflineGift

; 2284 : {

  05290	55		 push	 ebp
  05291	8b ec		 mov	 ebp, esp
  05293	81 ec 90 01 00
	00		 sub	 esp, 400		; 00000190H
  05299	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0529e	33 c5		 xor	 eax, ebp
  052a0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  052a3	53		 push	 ebx
  052a4	56		 push	 esi
  052a5	57		 push	 edi

; 2285 : 	if ( !lpMsg)

  052a6	83 7d 08 00	 cmp	 DWORD PTR _lpMsg$[ebp], 0
  052aa	75 05		 jne	 SHORT $LN2@EGAnsRegDL

; 2286 : 		return;

  052ac	e9 20 01 00 00	 jmp	 $LN3@EGAnsRegDL
$LN2@EGAnsRegDL:

; 2287 : 
; 2288 : 	if ( !lpMsg->iResultCode )

  052b1	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  052b4	83 78 24 00	 cmp	 DWORD PTR [eax+36], 0
  052b8	75 05		 jne	 SHORT $LN1@EGAnsRegDL

; 2289 : 		return;

  052ba	e9 12 01 00 00	 jmp	 $LN3@EGAnsRegDL
$LN1@EGAnsRegDL:

; 2290 : 
; 2291 : 	char szAccountID[11] = {0};

  052bf	c6 45 f0 00	 mov	 BYTE PTR _szAccountID$[ebp], 0
  052c3	33 c0		 xor	 eax, eax
  052c5	89 45 f1	 mov	 DWORD PTR _szAccountID$[ebp+1], eax
  052c8	89 45 f5	 mov	 DWORD PTR _szAccountID$[ebp+5], eax
  052cb	66 89 45 f9	 mov	 WORD PTR _szAccountID$[ebp+9], ax

; 2292 : 	char szName[11] = {0};

  052cf	c6 45 e4 00	 mov	 BYTE PTR _szName$[ebp], 0
  052d3	33 c0		 xor	 eax, eax
  052d5	89 45 e5	 mov	 DWORD PTR _szName$[ebp+1], eax
  052d8	89 45 e9	 mov	 DWORD PTR _szName$[ebp+5], eax
  052db	66 89 45 ed	 mov	 WORD PTR _szName$[ebp+9], ax

; 2293 : 	char szGIFT_NAME[50] = {0};

  052df	c6 45 b0 00	 mov	 BYTE PTR _szGIFT_NAME$[ebp], 0
  052e3	6a 31		 push	 49			; 00000031H
  052e5	6a 00		 push	 0
  052e7	8d 45 b1	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp+1]
  052ea	50		 push	 eax
  052eb	e8 00 00 00 00	 call	 _memset
  052f0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2294 : 	memset(szAccountID, 0, sizeof(szAccountID));

  052f3	6a 0b		 push	 11			; 0000000bH
  052f5	6a 00		 push	 0
  052f7	8d 45 f0	 lea	 eax, DWORD PTR _szAccountID$[ebp]
  052fa	50		 push	 eax
  052fb	e8 00 00 00 00	 call	 _memset
  05300	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2295 : 	memset(szName, 0, sizeof(szName));

  05303	6a 0b		 push	 11			; 0000000bH
  05305	6a 00		 push	 0
  05307	8d 45 e4	 lea	 eax, DWORD PTR _szName$[ebp]
  0530a	50		 push	 eax
  0530b	e8 00 00 00 00	 call	 _memset
  05310	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2296 : 	memset(szGIFT_NAME, 0, sizeof(szGIFT_NAME));

  05313	6a 32		 push	 50			; 00000032H
  05315	6a 00		 push	 0
  05317	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  0531a	50		 push	 eax
  0531b	e8 00 00 00 00	 call	 _memset
  05320	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2297 : 	memcpy(szAccountID, lpMsg->szUID, sizeof(szAccountID));

  05323	6a 0b		 push	 11			; 0000000bH
  05325	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05328	83 c0 08	 add	 eax, 8
  0532b	50		 push	 eax
  0532c	8d 4d f0	 lea	 ecx, DWORD PTR _szAccountID$[ebp]
  0532f	51		 push	 ecx
  05330	e8 00 00 00 00	 call	 _memcpy
  05335	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2298 : 	memcpy(szName, lpMsg->szNAME, sizeof(szName));

  05338	6a 0b		 push	 11			; 0000000bH
  0533a	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0533d	83 c0 16	 add	 eax, 22			; 00000016H
  05340	50		 push	 eax
  05341	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  05344	51		 push	 ecx
  05345	e8 00 00 00 00	 call	 _memcpy
  0534a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2299 : 	memcpy(szGIFT_NAME, lpMsg->szGIFT_NAME, sizeof(szGIFT_NAME));

  0534d	6a 32		 push	 50			; 00000032H
  0534f	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05352	83 c0 28	 add	 eax, 40			; 00000028H
  05355	50		 push	 eax
  05356	8d 4d b0	 lea	 ecx, DWORD PTR _szGIFT_NAME$[ebp]
  05359	51		 push	 ecx
  0535a	e8 00 00 00 00	 call	 _memcpy
  0535f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2300 : 	szAccountID[10] = 0;

  05362	c6 45 fa 00	 mov	 BYTE PTR _szAccountID$[ebp+10], 0

; 2301 : 	szName[10] = 0;

  05366	c6 45 ee 00	 mov	 BYTE PTR _szName$[ebp+10], 0

; 2302 : 	szGIFT_NAME[49] = 0;

  0536a	c6 45 e1 00	 mov	 BYTE PTR _szGIFT_NAME$[ebp+49], 0

; 2303 : 	char szText[256] = {0};

  0536e	c6 85 b0 fe ff
	ff 00		 mov	 BYTE PTR _szText$[ebp], 0
  05375	68 ff 00 00 00	 push	 255			; 000000ffH
  0537a	6a 00		 push	 0
  0537c	8d 85 b1 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp+1]
  05382	50		 push	 eax
  05383	e8 00 00 00 00	 call	 _memset
  05388	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2304 : 
; 2305 : 	wsprintf(szText, "[  ] %s  %s  .", szName, szGIFT_NAME);

  0538b	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  0538e	50		 push	 eax
  0538f	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  05392	51		 push	 ecx
  05393	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@
  05398	8d 95 b0 fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp]
  0539e	52		 push	 edx
  0539f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  053a5	83 c4 10	 add	 esp, 16			; 00000010H

; 2306 : 	AllSendServerMsg(szText);

  053a8	8d 85 b0 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp]
  053ae	50		 push	 eax
  053af	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  053b4	83 c4 04	 add	 esp, 4

; 2307 : 
; 2308 : 	LogAddTD("[DarkLord Heart Event] [%s][%s] Success to Register OffLine Gift (GIFT:%s)", szAccountID, szName, szGIFT_NAME);

  053b7	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  053ba	50		 push	 eax
  053bb	8d 4d e4	 lea	 ecx, DWORD PTR _szName$[ebp]
  053be	51		 push	 ecx
  053bf	8d 55 f0	 lea	 edx, DWORD PTR _szAccountID$[ebp]
  053c2	52		 push	 edx
  053c3	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@
  053c8	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  053ce	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@EGAnsRegDL:

; 2309 : }

  053d1	5f		 pop	 edi
  053d2	5e		 pop	 esi
  053d3	5b		 pop	 ebx
  053d4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  053d7	33 cd		 xor	 ecx, ebp
  053d9	e8 00 00 00 00	 call	 @__security_check_cookie@4
  053de	8b e5		 mov	 esp, ebp
  053e0	5d		 pop	 ebp
  053e1	c3		 ret	 0
?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z ENDP ; EGAnsRegDLOfflineGift
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqRegHTOfflineGift@@YAXH@Z			; EGReqRegHTOfflineGift
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -40						; size = 36
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqRegHTOfflineGift@@YAXH@Z PROC			; EGReqRegHTOfflineGift

; 2321 : {

  053f0	55		 push	 ebp
  053f1	8b ec		 mov	 ebp, esp
  053f3	83 ec 68	 sub	 esp, 104		; 00000068H
  053f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  053fb	33 c5		 xor	 eax, ebp
  053fd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  05400	53		 push	 ebx
  05401	56		 push	 esi
  05402	57		 push	 edi

; 2322 : 	if ( !gObjIsConnected(iIndex) )

  05403	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  05406	50		 push	 eax
  05407	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0540c	83 c4 04	 add	 esp, 4
  0540f	85 c0		 test	 eax, eax
  05411	75 02		 jne	 SHORT $LN1@EGReqRegHT

; 2323 : 		return;

  05413	eb 7f		 jmp	 SHORT $LN2@EGReqRegHT
$LN1@EGReqRegHT:

; 2324 : 
; 2325 : 	PMSG_REQ_REG_HT_OFFLINE_GIFT pMsg;
; 2326 : 
; 2327 : 	pMsg.h.c = 0xC1;

  05415	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 2328 : 	pMsg.h.headcode = 0x17;

  05419	c6 45 da 17	 mov	 BYTE PTR _pMsg$[ebp+2], 23 ; 00000017H

; 2329 : 	pMsg.h.size = sizeof(pMsg);

  0541d	c6 45 d9 24	 mov	 BYTE PTR _pMsg$[ebp+1], 36 ; 00000024H

; 2330 : 	memcpy(pMsg.szUID, gObj[iIndex].AccountID, 11);

  05421	6a 0b		 push	 11			; 0000000bH
  05423	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  05426	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0542c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05432	8d 54 01 6c	 lea	 edx, DWORD PTR [ecx+eax+108]
  05436	52		 push	 edx
  05437	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp+8]
  0543a	50		 push	 eax
  0543b	e8 00 00 00 00	 call	 _memcpy
  05440	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2331 : 	memcpy(pMsg.szNAME, gObj[iIndex].Name, 11);

  05443	6a 0b		 push	 11			; 0000000bH
  05445	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  05448	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0544e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05454	8d 54 01 77	 lea	 edx, DWORD PTR [ecx+eax+119]
  05458	52		 push	 edx
  05459	8d 45 ee	 lea	 eax, DWORD PTR _pMsg$[ebp+22]
  0545c	50		 push	 eax
  0545d	e8 00 00 00 00	 call	 _memcpy
  05462	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2332 : 	pMsg.wServerCode = gGameServerCode / 20;

  05465	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0546c	99		 cdq
  0546d	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  05472	f7 f9		 idiv	 ecx
  05474	66 89 45 ec	 mov	 WORD PTR _pMsg$[ebp+20], ax

; 2333 : 	pMsg.iINDEX = iIndex;

  05478	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  0547b	89 45 dc	 mov	 DWORD PTR _pMsg$[ebp+4], eax

; 2334 : 	pMsg.szUID[10] = 0;

  0547e	c6 45 ea 00	 mov	 BYTE PTR _pMsg$[ebp+18], 0

; 2335 : 	pMsg.szNAME[10] = 0;

  05482	c6 45 f8 00	 mov	 BYTE PTR _pMsg$[ebp+32], 0

; 2336 : 
; 2337 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  05486	6a 24		 push	 36			; 00000024H
  05488	8d 45 d8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0548b	50		 push	 eax
  0548c	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  05491	83 c4 08	 add	 esp, 8
$LN2@EGReqRegHT:

; 2338 : }

  05494	5f		 pop	 edi
  05495	5e		 pop	 esi
  05496	5b		 pop	 ebx
  05497	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0549a	33 cd		 xor	 ecx, ebp
  0549c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  054a1	8b e5		 mov	 esp, ebp
  054a3	5d		 pop	 ebp
  054a4	c3		 ret	 0
?EGReqRegHTOfflineGift@@YAXH@Z ENDP			; EGReqRegHTOfflineGift
_TEXT	ENDS
PUBLIC	??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@ ; `string'
PUBLIC	__$ArrayPad$
;	COMDAT ??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Success to Register OffLin'
	DB	'e Gift (GIFT:%s)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@
CONST	SEGMENT
??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@ DB '['
	DB	0bcH, 0fbH, 0b0H, 0dcH, 0c1H, 0f8H, ' ', 0baH, 0b8H, 0b9H, 0b0H
	DB	0bbH, 0f3H, 0c0H, 0daH, ' ', 0c0H, 0ccH, 0baH, 0a5H, 0c6H, 0aeH
	DB	'] %s ', 0b4H, 0d4H, 0b2H, 0b2H, 0bcH, 0adH, ' %s ', 0b0H, 0e6H
	DB	0c7H, 0b0H, 0bfH, 0a1H, ' ', 0b4H, 0e7H, 0c3H, 0b7H, 0b5H, 0c7H
	DB	0bcH, 0ccH, 0bdH, 0c0H, 0b4H, 0cfH, 0b4H, 0d9H, '.', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
_szText$ = -340						; size = 256
_szGIFT_NAME$ = -84					; size = 50
_szName$ = -32						; size = 11
_szAccountID$ = -20					; size = 11
_lpObj$234145 = -8					; size = 4
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z PROC ; EGAnsRegHTOfflineGift

; 2341 : {

  054b0	55		 push	 ebp
  054b1	8b ec		 mov	 ebp, esp
  054b3	81 ec 94 01 00
	00		 sub	 esp, 404		; 00000194H
  054b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  054be	33 c5		 xor	 eax, ebp
  054c0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  054c3	53		 push	 ebx
  054c4	56		 push	 esi
  054c5	57		 push	 edi

; 2342 : 	if ( !lpMsg)

  054c6	83 7d 08 00	 cmp	 DWORD PTR _lpMsg$[ebp], 0
  054ca	75 05		 jne	 SHORT $LN3@EGAnsRegHT

; 2343 : 		return;

  054cc	e9 7e 01 00 00	 jmp	 $LN4@EGAnsRegHT
$LN3@EGAnsRegHT:

; 2344 : 
; 2345 : 	if ( !lpMsg->iResultCode )

  054d1	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  054d4	83 78 24 00	 cmp	 DWORD PTR [eax+36], 0
  054d8	75 63		 jne	 SHORT $LN2@EGAnsRegHT

; 2346 : 	{
; 2347 : 		if ( gObjIsConnected(lpMsg->iINDEX))

  054da	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  054dd	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  054e0	51		 push	 ecx
  054e1	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  054e6	83 c4 04	 add	 esp, 4
  054e9	85 c0		 test	 eax, eax
  054eb	74 4b		 je	 SHORT $LN1@EGAnsRegHT

; 2348 : 		{
; 2349 : 			LPOBJ lpObj = &gObj[lpMsg->iINDEX];

  054ed	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  054f0	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  054f3	69 c9 38 2b 00
	00		 imul	 ecx, 11064		; 00002b38H
  054f9	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  054ff	89 4d f8	 mov	 DWORD PTR _lpObj$234145[ebp], ecx

; 2350 : 
; 2351 : 			MapC[lpObj->MapNumber].MoneyItemDrop(1000000, lpObj->X, lpObj->Y);

  05502	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$234145[ebp]
  05505	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  0550c	51		 push	 ecx
  0550d	8b 55 f8	 mov	 edx, DWORD PTR _lpObj$234145[ebp]
  05510	0f bf 82 44 01
	00 00		 movsx	 eax, WORD PTR [edx+324]
  05517	50		 push	 eax
  05518	68 40 42 0f 00	 push	 1000000			; 000f4240H
  0551d	8b 4d f8	 mov	 ecx, DWORD PTR _lpObj$234145[ebp]
  05520	0f b6 89 49 01
	00 00		 movzx	 ecx, BYTE PTR [ecx+329]
  05527	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  0552d	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  05533	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN1@EGAnsRegHT:

; 2352 : 		}
; 2353 : 		return;

  05538	e9 12 01 00 00	 jmp	 $LN4@EGAnsRegHT
$LN2@EGAnsRegHT:

; 2354 : 	}
; 2355 : 
; 2356 : 	char szAccountID[11] = {0};

  0553d	c6 45 ec 00	 mov	 BYTE PTR _szAccountID$[ebp], 0
  05541	33 c0		 xor	 eax, eax
  05543	89 45 ed	 mov	 DWORD PTR _szAccountID$[ebp+1], eax
  05546	89 45 f1	 mov	 DWORD PTR _szAccountID$[ebp+5], eax
  05549	66 89 45 f5	 mov	 WORD PTR _szAccountID$[ebp+9], ax

; 2357 : 	char szName[11] = {0};

  0554d	c6 45 e0 00	 mov	 BYTE PTR _szName$[ebp], 0
  05551	33 c0		 xor	 eax, eax
  05553	89 45 e1	 mov	 DWORD PTR _szName$[ebp+1], eax
  05556	89 45 e5	 mov	 DWORD PTR _szName$[ebp+5], eax
  05559	66 89 45 e9	 mov	 WORD PTR _szName$[ebp+9], ax

; 2358 : 	char szGIFT_NAME[50] = {0};

  0555d	c6 45 ac 00	 mov	 BYTE PTR _szGIFT_NAME$[ebp], 0
  05561	6a 31		 push	 49			; 00000031H
  05563	6a 00		 push	 0
  05565	8d 45 ad	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp+1]
  05568	50		 push	 eax
  05569	e8 00 00 00 00	 call	 _memset
  0556e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2359 : 	memset(szAccountID, 0, sizeof(szAccountID));

  05571	6a 0b		 push	 11			; 0000000bH
  05573	6a 00		 push	 0
  05575	8d 45 ec	 lea	 eax, DWORD PTR _szAccountID$[ebp]
  05578	50		 push	 eax
  05579	e8 00 00 00 00	 call	 _memset
  0557e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2360 : 	memset(szName, 0, sizeof(szName));

  05581	6a 0b		 push	 11			; 0000000bH
  05583	6a 00		 push	 0
  05585	8d 45 e0	 lea	 eax, DWORD PTR _szName$[ebp]
  05588	50		 push	 eax
  05589	e8 00 00 00 00	 call	 _memset
  0558e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2361 : 	memset(szGIFT_NAME, 0, sizeof(szGIFT_NAME));

  05591	6a 32		 push	 50			; 00000032H
  05593	6a 00		 push	 0
  05595	8d 45 ac	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  05598	50		 push	 eax
  05599	e8 00 00 00 00	 call	 _memset
  0559e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2362 : 	memcpy(szAccountID, lpMsg->szUID, sizeof(szAccountID));

  055a1	6a 0b		 push	 11			; 0000000bH
  055a3	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  055a6	83 c0 08	 add	 eax, 8
  055a9	50		 push	 eax
  055aa	8d 4d ec	 lea	 ecx, DWORD PTR _szAccountID$[ebp]
  055ad	51		 push	 ecx
  055ae	e8 00 00 00 00	 call	 _memcpy
  055b3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2363 : 	memcpy(szName, lpMsg->szNAME, sizeof(szName));

  055b6	6a 0b		 push	 11			; 0000000bH
  055b8	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  055bb	83 c0 16	 add	 eax, 22			; 00000016H
  055be	50		 push	 eax
  055bf	8d 4d e0	 lea	 ecx, DWORD PTR _szName$[ebp]
  055c2	51		 push	 ecx
  055c3	e8 00 00 00 00	 call	 _memcpy
  055c8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2364 : 	memcpy(szGIFT_NAME, lpMsg->szGIFT_NAME, sizeof(szGIFT_NAME));

  055cb	6a 32		 push	 50			; 00000032H
  055cd	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  055d0	83 c0 28	 add	 eax, 40			; 00000028H
  055d3	50		 push	 eax
  055d4	8d 4d ac	 lea	 ecx, DWORD PTR _szGIFT_NAME$[ebp]
  055d7	51		 push	 ecx
  055d8	e8 00 00 00 00	 call	 _memcpy
  055dd	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2365 : 	szAccountID[10] = 0;

  055e0	c6 45 f6 00	 mov	 BYTE PTR _szAccountID$[ebp+10], 0

; 2366 : 	szName[10] = 0;

  055e4	c6 45 ea 00	 mov	 BYTE PTR _szName$[ebp+10], 0

; 2367 : 	szGIFT_NAME[49] = 0;

  055e8	c6 45 dd 00	 mov	 BYTE PTR _szGIFT_NAME$[ebp+49], 0

; 2368 : 	char szText[256] = {0};

  055ec	c6 85 ac fe ff
	ff 00		 mov	 BYTE PTR _szText$[ebp], 0
  055f3	68 ff 00 00 00	 push	 255			; 000000ffH
  055f8	6a 00		 push	 0
  055fa	8d 85 ad fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp+1]
  05600	50		 push	 eax
  05601	e8 00 00 00 00	 call	 _memset
  05606	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2369 : 
; 2370 : 	wsprintf(szText, "[  ] %s  %s  .", szName, szGIFT_NAME);

  05609	8d 45 ac	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  0560c	50		 push	 eax
  0560d	8d 4d e0	 lea	 ecx, DWORD PTR _szName$[ebp]
  05610	51		 push	 ecx
  05611	68 00 00 00 00	 push	 OFFSET ??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@
  05616	8d 95 ac fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp]
  0561c	52		 push	 edx
  0561d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  05623	83 c4 10	 add	 esp, 16			; 00000010H

; 2371 : 	AllSendServerMsg(szText);

  05626	8d 85 ac fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp]
  0562c	50		 push	 eax
  0562d	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  05632	83 c4 04	 add	 esp, 4

; 2372 : 
; 2373 : 	LogAddTD("[Hidden TreasureBox Event] [%s][%s] Success to Register OffLine Gift (GIFT:%s)", szAccountID, szName, szGIFT_NAME);

  05635	8d 45 ac	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  05638	50		 push	 eax
  05639	8d 4d e0	 lea	 ecx, DWORD PTR _szName$[ebp]
  0563c	51		 push	 ecx
  0563d	8d 55 ec	 lea	 edx, DWORD PTR _szAccountID$[ebp]
  05640	52		 push	 edx
  05641	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  05646	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0564c	83 c4 10	 add	 esp, 16			; 00000010H
$LN4@EGAnsRegHT:

; 2374 : }

  0564f	5f		 pop	 edi
  05650	5e		 pop	 esi
  05651	5b		 pop	 ebx
  05652	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  05655	33 cd		 xor	 ecx, ebp
  05657	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0565c	8b e5		 mov	 esp, ebp
  0565e	5d		 pop	 ebp
  0565f	c3		 ret	 0
?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z ENDP ; EGAnsRegHTOfflineGift
_TEXT	ENDS
PUBLIC	?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z	; Japan1StAnivBoxOpen
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv73 = -80						; size = 4
_Japan1StAnivBox$ = -12					; size = 4
_ServerCmd$ = -8					; size = 7
_lpObj$ = 8						; size = 4
_iBoxLevel$ = 12					; size = 4
?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z PROC	; Japan1StAnivBoxOpen

; 2378 : {

  05660	55		 push	 ebp
  05661	8b ec		 mov	 ebp, esp
  05663	83 ec 50	 sub	 esp, 80			; 00000050H
  05666	53		 push	 ebx
  05667	56		 push	 esi
  05668	57		 push	 edi

; 2379 : 	PMSG_SERVERCMD ServerCmd;
; 2380 : 
; 2381 : 	PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  05669	6a 07		 push	 7
  0566b	6a 40		 push	 64			; 00000040H
  0566d	68 f3 00 00 00	 push	 243			; 000000f3H
  05672	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  05675	50		 push	 eax
  05676	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  0567b	83 c4 10	 add	 esp, 16			; 00000010H

; 2382 : 	ServerCmd.CmdType = 0;

  0567e	c6 45 fc 00	 mov	 BYTE PTR _ServerCmd$[ebp+4], 0

; 2383 : 	ServerCmd.X = lpObj->X;

  05682	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05685	8a 88 44 01 00
	00		 mov	 cl, BYTE PTR [eax+324]
  0568b	88 4d fd	 mov	 BYTE PTR _ServerCmd$[ebp+5], cl

; 2384 : 	ServerCmd.Y = lpObj->Y;

  0568e	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05691	8a 88 46 01 00
	00		 mov	 cl, BYTE PTR [eax+326]
  05697	88 4d fe	 mov	 BYTE PTR _ServerCmd$[ebp+6], cl

; 2385 : 
; 2386 : 	MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0569a	6a 07		 push	 7
  0569c	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0569f	50		 push	 eax
  056a0	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  056a3	51		 push	 ecx
  056a4	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2
  056a9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2387 : 	DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  056ac	6a 07		 push	 7
  056ae	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  056b1	50		 push	 eax
  056b2	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  056b5	8b 11		 mov	 edx, DWORD PTR [ecx]
  056b7	52		 push	 edx
  056b8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  056bd	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2388 : 
; 2389 : 	CProbabilityItemBag * Japan1StAnivBox = NULL;

  056c0	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _Japan1StAnivBox$[ebp], 0

; 2390 : 
; 2391 : 	switch ( iBoxLevel )

  056c7	8b 45 0c	 mov	 eax, DWORD PTR _iBoxLevel$[ebp]
  056ca	89 45 b0	 mov	 DWORD PTR tv73[ebp], eax
  056cd	8b 4d b0	 mov	 ecx, DWORD PTR tv73[ebp]
  056d0	83 e9 01	 sub	 ecx, 1
  056d3	89 4d b0	 mov	 DWORD PTR tv73[ebp], ecx
  056d6	83 7d b0 04	 cmp	 DWORD PTR tv73[ebp], 4
  056da	77 3a		 ja	 SHORT $LN6@Japan1StAn
  056dc	8b 55 b0	 mov	 edx, DWORD PTR tv73[ebp]
  056df	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN10@Japan1StAn[edx*4]
$LN5@Japan1StAn:

; 2392 : 	{
; 2393 : 		case 1:	Japan1StAnivBox = GoldGoblenItemBag;		break;

  056e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GoldGoblenItemBag@@3PAVCProbabilityItemBag@@A ; GoldGoblenItemBag
  056eb	89 45 f4	 mov	 DWORD PTR _Japan1StAnivBox$[ebp], eax
  056ee	eb 26		 jmp	 SHORT $LN6@Japan1StAn
$LN4@Japan1StAn:

; 2394 : 		case 2:	Japan1StAnivBox = TitanItemBag;				break;

  056f0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?TitanItemBag@@3PAVCProbabilityItemBag@@A ; TitanItemBag
  056f5	89 45 f4	 mov	 DWORD PTR _Japan1StAnivBox$[ebp], eax
  056f8	eb 1c		 jmp	 SHORT $LN6@Japan1StAn
$LN3@Japan1StAn:

; 2395 : 		case 3:	Japan1StAnivBox = GoldDerconItemBag;		break;

  056fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GoldDerconItemBag@@3PAVCProbabilityItemBag@@A ; GoldDerconItemBag
  056ff	89 45 f4	 mov	 DWORD PTR _Japan1StAnivBox$[ebp], eax
  05702	eb 12		 jmp	 SHORT $LN6@Japan1StAn
$LN2@Japan1StAn:

; 2396 : 		case 4:	Japan1StAnivBox = DevilLizardKingItemBag;	break;

  05704	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DevilLizardKingItemBag@@3PAVCProbabilityItemBag@@A ; DevilLizardKingItemBag
  05709	89 45 f4	 mov	 DWORD PTR _Japan1StAnivBox$[ebp], eax
  0570c	eb 08		 jmp	 SHORT $LN6@Japan1StAn
$LN1@Japan1StAn:

; 2397 : 		case 5:	Japan1StAnivBox = KanturItemBag;			break;

  0570e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?KanturItemBag@@3PAVCProbabilityItemBag@@A ; KanturItemBag
  05713	89 45 f4	 mov	 DWORD PTR _Japan1StAnivBox$[ebp], eax
$LN6@Japan1StAn:

; 2398 : 	}
; 2399 : 	
; 2400 : 	Japan1StAnivBox->DropItem(lpObj->m_Index,lpObj->MapNumber,lpObj->X, lpObj->Y);

  05716	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05719	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  05720	51		 push	 ecx
  05721	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  05724	0f b6 82 44 01
	00 00		 movzx	 eax, BYTE PTR [edx+324]
  0572b	50		 push	 eax
  0572c	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  0572f	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  05736	52		 push	 edx
  05737	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0573a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0573c	51		 push	 ecx
  0573d	8b 4d f4	 mov	 ecx, DWORD PTR _Japan1StAnivBox$[ebp]
  05740	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 2401 : }

  05745	5f		 pop	 edi
  05746	5e		 pop	 esi
  05747	5b		 pop	 ebx
  05748	8b e5		 mov	 esp, ebp
  0574a	5d		 pop	 ebp
  0574b	c3		 ret	 0
$LN10@Japan1StAn:
  0574c	00 00 00 00	 DD	 $LN5@Japan1StAn
  05750	00 00 00 00	 DD	 $LN4@Japan1StAn
  05754	00 00 00 00	 DD	 $LN3@Japan1StAn
  05758	00 00 00 00	 DD	 $LN2@Japan1StAn
  0575c	00 00 00 00	 DD	 $LN1@Japan1StAn
?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z ENDP	; Japan1StAnivBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RingOfHeroBoxOpen
EXTRN	?RingOfHeroBoxItemBag@@3PAVCItemBag@@A:DWORD	; RingOfHeroBoxItemBag
;	COMDAT ??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@
CONST	SEGMENT
??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@ DB '['
	DB	'%s][%s][RingOfHero Event](%d,%d,%d) ItemDrop : Item:%s %d Lev'
	DB	'el:%d op1:%d op2:%d op3:%d', 00H		; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv309 = -328						; size = 4
tv307 = -324						; size = 4
tv304 = -318						; size = 2
_NewItem$234199 = -252					; size = 212
_DropItemNum$ = -40					; size = 4
_Option3$ = -36						; size = 4
_Option2$ = -32						; size = 4
_Option1$ = -28						; size = 4
_y$ = -24						; size = 4
_x$ = -20						; size = 4
_level$ = -16						; size = 4
_type$ = -12						; size = 4
_dur$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC		; RingOfHeroBoxOpen

; 2405 : {

  05760	55		 push	 ebp
  05761	8b ec		 mov	 ebp, esp
  05763	81 ec 48 01 00
	00		 sub	 esp, 328		; 00000148H
  05769	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0576e	33 c5		 xor	 eax, ebp
  05770	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  05773	53		 push	 ebx
  05774	56		 push	 esi
  05775	57		 push	 edi

; 2406 : 	float dur; //loc1
; 2407 : 	int type; //loc2
; 2408 : 	int level; //loc3
; 2409 : 	int x; //loc4
; 2410 : 	int y; //loc5
; 2411 : 	int Option1 = 0; //loc6

  05776	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 2412 : 	int Option2 = 0; //loc7

  0577d	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 2413 : 	int Option3 = 0; //loc8

  05784	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 2414 : 	int DropItemNum; //loc9
; 2415 : 
; 2416 : 	if ( RingOfHeroBoxItemBag->GetBagCount() > 0 && (rand()%10) < 9)

  0578b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  05791	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  05796	85 c0		 test	 eax, eax
  05798	0f 8e cc 03 00
	00		 jle	 $LN10@RingOfHero
  0579e	e8 00 00 00 00	 call	 _rand
  057a3	99		 cdq
  057a4	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  057a9	f7 f9		 idiv	 ecx
  057ab	83 fa 09	 cmp	 edx, 9
  057ae	0f 8d b6 03 00
	00		 jge	 $LN10@RingOfHero

; 2417 : 	{
; 2418 : 		DropItemNum = rand()%RingOfHeroBoxItemBag->GetBagCount();

  057b4	e8 00 00 00 00	 call	 _rand
  057b9	8b f0		 mov	 esi, eax
  057bb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  057c1	e8 00 00 00 00	 call	 ?GetBagCount@CItemBag@@QAEHXZ ; CItemBag::GetBagCount
  057c6	8b c8		 mov	 ecx, eax
  057c8	8b c6		 mov	 eax, esi
  057ca	99		 cdq
  057cb	f7 f9		 idiv	 ecx
  057cd	89 55 d8	 mov	 DWORD PTR _DropItemNum$[ebp], edx

; 2419 : 		dur=0;

  057d0	d9 ee		 fldz
  057d2	d9 5d f8	 fstp	 DWORD PTR _dur$[ebp]

; 2420 : 		x = lpObj->X;

  057d5	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  057d8	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  057df	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 2421 : 		y = lpObj->Y;

  057e2	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  057e5	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  057ec	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 2422 : 
; 2423 : 		level = RingOfHeroBoxItemBag->GetLevel(DropItemNum) + rand()%3;

  057ef	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  057f2	50		 push	 eax
  057f3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  057f9	8b 11		 mov	 edx, DWORD PTR [ecx]
  057fb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  05801	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  05804	ff d0		 call	 eax
  05806	0f b6 f0	 movzx	 esi, al
  05809	e8 00 00 00 00	 call	 _rand
  0580e	99		 cdq
  0580f	b9 03 00 00 00	 mov	 ecx, 3
  05814	f7 f9		 idiv	 ecx
  05816	03 f2		 add	 esi, edx
  05818	89 75 f0	 mov	 DWORD PTR _level$[ebp], esi

; 2424 : 		type = ItemGetNumberMake(RingOfHeroBoxItemBag->GetType(DropItemNum), RingOfHeroBoxItemBag->GetIndex(DropItemNum));

  0581b	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  0581e	50		 push	 eax
  0581f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  05825	8b 11		 mov	 edx, DWORD PTR [ecx]
  05827	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  0582d	8b 42 10	 mov	 eax, DWORD PTR [edx+16]
  05830	ff d0		 call	 eax
  05832	0f b6 c8	 movzx	 ecx, al
  05835	51		 push	 ecx
  05836	8b 55 d8	 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  05839	52		 push	 edx
  0583a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  0583f	8b 10		 mov	 edx, DWORD PTR [eax]
  05841	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  05847	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  0584a	ff d0		 call	 eax
  0584c	0f b6 c8	 movzx	 ecx, al
  0584f	51		 push	 ecx
  05850	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  05855	83 c4 08	 add	 esp, 8
  05858	89 45 f4	 mov	 DWORD PTR _type$[ebp], eax

; 2425 : 
; 2426 : 		Option1 = 1;

  0585b	c7 45 e4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1

; 2427 : 
; 2428 : 		Option2 = rand() % 2;

  05862	e8 00 00 00 00	 call	 _rand
  05867	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0586c	79 05		 jns	 SHORT $LN13@RingOfHero
  0586e	48		 dec	 eax
  0586f	83 c8 fe	 or	 eax, -2			; fffffffeH
  05872	40		 inc	 eax
$LN13@RingOfHero:
  05873	89 45 e0	 mov	 DWORD PTR _Option2$[ebp], eax

; 2429 : 
; 2430 : 		if ( (rand() % 5 ) < 1 )

  05876	e8 00 00 00 00	 call	 _rand
  0587b	99		 cdq
  0587c	b9 05 00 00 00	 mov	 ecx, 5
  05881	f7 f9		 idiv	 ecx
  05883	83 fa 01	 cmp	 edx, 1
  05886	7d 09		 jge	 SHORT $LN9@RingOfHero

; 2431 : 		{
; 2432 : 			Option3 = 3;

  05888	c7 45 dc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3

; 2433 : 		}
; 2434 : 		else

  0588f	eb 10		 jmp	 SHORT $LN8@RingOfHero
$LN9@RingOfHero:

; 2435 : 		{
; 2436 : 			Option3 = rand() % 3;

  05891	e8 00 00 00 00	 call	 _rand
  05896	99		 cdq
  05897	b9 03 00 00 00	 mov	 ecx, 3
  0589c	f7 f9		 idiv	 ecx
  0589e	89 55 dc	 mov	 DWORD PTR _Option3$[ebp], edx
$LN8@RingOfHero:

; 2437 : 		}
; 2438 : 		
; 2439 : 		if ( type == ITEMGET(12,15) ||
; 2440 : 				type == ITEMGET(14,13) ||
; 2441 : 				type == ITEMGET(14,14) ||
; 2442 : 				type == ITEMGET(14,14) ||
; 2443 : 				type == ITEMGET(14,16)	||
; 2444 : 				type == ITEMGET(14,22)	||
; 2445 : 				type == ITEMGET(14,31)	||
; 2446 : 				type == ITEMGET(14,41)	||
; 2447 : 				type == ITEMGET(14,42)	||
; 2448 : 				type == ITEMGET(14,180)||
; 2449 : 				type == ITEMGET(14,181)||
; 2450 : 				type == ITEMGET(14,182)||
; 2451 : 				type == ITEMGET(14,183)||
; 2452 : 				type == ITEMGET(14,184)||
; 2453 : 				type == ITEMGET(14,185)||
; 2454 : 				type == ITEMGET(14,186)||
; 2455 : 				type == ITEMGET(14,187)||
; 2456 : 				type == ITEMGET(14,190)||
; 2457 : 				type == ITEMGET(14,43) ||
; 2458 : 				type == ITEMGET(14,44) )

  058a1	81 7d f4 0f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6159 ; 0000180fH
  058a8	0f 84 bb 00 00
	00		 je	 $LN6@RingOfHero
  058ae	81 7d f4 0d 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7181 ; 00001c0dH
  058b5	0f 84 ae 00 00
	00		 je	 $LN6@RingOfHero
  058bb	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  058c2	0f 84 a1 00 00
	00		 je	 $LN6@RingOfHero
  058c8	81 7d f4 0e 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7182 ; 00001c0eH
  058cf	0f 84 94 00 00
	00		 je	 $LN6@RingOfHero
  058d5	81 7d f4 10 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7184 ; 00001c10H
  058dc	0f 84 87 00 00
	00		 je	 $LN6@RingOfHero
  058e2	81 7d f4 16 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7190 ; 00001c16H
  058e9	74 7e		 je	 SHORT $LN6@RingOfHero
  058eb	81 7d f4 1f 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7199 ; 00001c1fH
  058f2	74 75		 je	 SHORT $LN6@RingOfHero
  058f4	81 7d f4 29 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7209 ; 00001c29H
  058fb	74 6c		 je	 SHORT $LN6@RingOfHero
  058fd	81 7d f4 2a 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7210 ; 00001c2aH
  05904	74 63		 je	 SHORT $LN6@RingOfHero
  05906	81 7d f4 b4 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7348 ; 00001cb4H
  0590d	74 5a		 je	 SHORT $LN6@RingOfHero
  0590f	81 7d f4 b5 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7349 ; 00001cb5H
  05916	74 51		 je	 SHORT $LN6@RingOfHero
  05918	81 7d f4 b6 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7350 ; 00001cb6H
  0591f	74 48		 je	 SHORT $LN6@RingOfHero
  05921	81 7d f4 b7 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7351 ; 00001cb7H
  05928	74 3f		 je	 SHORT $LN6@RingOfHero
  0592a	81 7d f4 b8 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7352 ; 00001cb8H
  05931	74 36		 je	 SHORT $LN6@RingOfHero
  05933	81 7d f4 b9 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7353 ; 00001cb9H
  0593a	74 2d		 je	 SHORT $LN6@RingOfHero
  0593c	81 7d f4 ba 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7354 ; 00001cbaH
  05943	74 24		 je	 SHORT $LN6@RingOfHero
  05945	81 7d f4 bb 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7355 ; 00001cbbH
  0594c	74 1b		 je	 SHORT $LN6@RingOfHero
  0594e	81 7d f4 be 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7358 ; 00001cbeH
  05955	74 12		 je	 SHORT $LN6@RingOfHero
  05957	81 7d f4 2b 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7211 ; 00001c2bH
  0595e	74 09		 je	 SHORT $LN6@RingOfHero
  05960	81 7d f4 2c 1c
	00 00		 cmp	 DWORD PTR _type$[ebp], 7212 ; 00001c2cH
  05967	75 1c		 jne	 SHORT $LN7@RingOfHero
$LN6@RingOfHero:

; 2459 : 		{
; 2460 : 			Option1 = 0;

  05969	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 2461 : 			Option2 = 0;

  05970	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 2462 : 			Option3 = 0;

  05977	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 2463 : 			level = 0;

  0597e	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN7@RingOfHero:

; 2464 : 		}
; 2465 : 
; 2466 : 		if ( type == ITEMGET(12,30)	||
; 2467 : 				type == ITEMGET(12,31)	||
; 2468 : 				type == ITEMGET(12,136)||
; 2469 : 				type == ITEMGET(12,137)||
; 2470 : 				type == ITEMGET(12,138)||
; 2471 : 				type == ITEMGET(12,139)||
; 2472 : 				type == ITEMGET(12,140)||
; 2473 : 				type == ITEMGET(12,141)||
; 2474 : 				type == ITEMGET(12,142)||
; 2475 : 				type == ITEMGET(12,143))

  05985	81 7d f4 1e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6174 ; 0000181eH
  0598c	74 51		 je	 SHORT $LN4@RingOfHero
  0598e	81 7d f4 1f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6175 ; 0000181fH
  05995	74 48		 je	 SHORT $LN4@RingOfHero
  05997	81 7d f4 88 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6280 ; 00001888H
  0599e	74 3f		 je	 SHORT $LN4@RingOfHero
  059a0	81 7d f4 89 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6281 ; 00001889H
  059a7	74 36		 je	 SHORT $LN4@RingOfHero
  059a9	81 7d f4 8a 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6282 ; 0000188aH
  059b0	74 2d		 je	 SHORT $LN4@RingOfHero
  059b2	81 7d f4 8b 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6283 ; 0000188bH
  059b9	74 24		 je	 SHORT $LN4@RingOfHero
  059bb	81 7d f4 8c 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6284 ; 0000188cH
  059c2	74 1b		 je	 SHORT $LN4@RingOfHero
  059c4	81 7d f4 8d 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6285 ; 0000188dH
  059cb	74 12		 je	 SHORT $LN4@RingOfHero
  059cd	81 7d f4 8e 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6286 ; 0000188eH
  059d4	74 09		 je	 SHORT $LN4@RingOfHero
  059d6	81 7d f4 8f 18
	00 00		 cmp	 DWORD PTR _type$[ebp], 6287 ; 0000188fH
  059dd	75 32		 jne	 SHORT $LN5@RingOfHero
$LN4@RingOfHero:

; 2476 : 		{
; 2477 : 			Option1 = 0;

  059df	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 0

; 2478 : 			Option2 = 0;

  059e6	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 0

; 2479 : 			Option3 = 0;

  059ed	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 0

; 2480 : 			level = RingOfHeroBoxItemBag->GetLevel(DropItemNum);

  059f4	8b 45 d8	 mov	 eax, DWORD PTR _DropItemNum$[ebp]
  059f7	50		 push	 eax
  059f8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  059fe	8b 11		 mov	 edx, DWORD PTR [ecx]
  05a00	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  05a06	8b 42 14	 mov	 eax, DWORD PTR [edx+20]
  05a09	ff d0		 call	 eax
  05a0b	0f b6 c8	 movzx	 ecx, al
  05a0e	89 4d f0	 mov	 DWORD PTR _level$[ebp], ecx
$LN5@RingOfHero:

; 2481 : 		}
; 2482 : 
; 2483 : 		if ( type == ITEMGET(13,0) ||
; 2484 : 			 type == ITEMGET(13,1) ||
; 2485 : 			 type == ITEMGET(13,2) ||
; 2486 : 			 type == ITEMGET(13,8) ||
; 2487 : 			 type == ITEMGET(13,9) ||
; 2488 : 			 type == ITEMGET(13,12) ||
; 2489 : 			 type == ITEMGET(13,13) )

  05a11	81 7d f4 00 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6656 ; 00001a00H
  05a18	74 36		 je	 SHORT $LN2@RingOfHero
  05a1a	81 7d f4 01 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6657 ; 00001a01H
  05a21	74 2d		 je	 SHORT $LN2@RingOfHero
  05a23	81 7d f4 02 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6658 ; 00001a02H
  05a2a	74 24		 je	 SHORT $LN2@RingOfHero
  05a2c	81 7d f4 08 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6664 ; 00001a08H
  05a33	74 1b		 je	 SHORT $LN2@RingOfHero
  05a35	81 7d f4 09 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6665 ; 00001a09H
  05a3c	74 12		 je	 SHORT $LN2@RingOfHero
  05a3e	81 7d f4 0c 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6668 ; 00001a0cH
  05a45	74 09		 je	 SHORT $LN2@RingOfHero
  05a47	81 7d f4 0d 1a
	00 00		 cmp	 DWORD PTR _type$[ebp], 6669 ; 00001a0dH
  05a4e	75 07		 jne	 SHORT $LN3@RingOfHero
$LN2@RingOfHero:

; 2490 : 		{
; 2491 : 			level = 0;

  05a50	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN3@RingOfHero:

; 2492 : 		}
; 2493 : 
; 2494 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  05a57	6a 00		 push	 0
  05a59	6a 00		 push	 0
  05a5b	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05a5e	8b 08		 mov	 ecx, DWORD PTR [eax]
  05a60	51		 push	 ecx
  05a61	0f b6 55 dc	 movzx	 edx, BYTE PTR _Option3$[ebp]
  05a65	52		 push	 edx
  05a66	0f b6 45 e0	 movzx	 eax, BYTE PTR _Option2$[ebp]
  05a6a	50		 push	 eax
  05a6b	0f b6 4d e4	 movzx	 ecx, BYTE PTR _Option1$[ebp]
  05a6f	51		 push	 ecx
  05a70	d9 45 f8	 fld	 DWORD PTR _dur$[ebp]
  05a73	d9 bd c2 fe ff
	ff		 fnstcw	 WORD PTR tv304[ebp]
  05a79	0f b7 85 c2 fe
	ff ff		 movzx	 eax, WORD PTR tv304[ebp]
  05a80	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  05a85	89 85 bc fe ff
	ff		 mov	 DWORD PTR tv307[ebp], eax
  05a8b	d9 ad bc fe ff
	ff		 fldcw	 WORD PTR tv307[ebp]
  05a91	db 9d b8 fe ff
	ff		 fistp	 DWORD PTR tv309[ebp]
  05a97	d9 ad c2 fe ff
	ff		 fldcw	 WORD PTR tv304[ebp]
  05a9d	0f b6 95 b8 fe
	ff ff		 movzx	 edx, BYTE PTR tv309[ebp]
  05aa4	52		 push	 edx
  05aa5	0f b6 45 f0	 movzx	 eax, BYTE PTR _level$[ebp]
  05aa9	50		 push	 eax
  05aaa	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  05aad	51		 push	 ecx
  05aae	0f b6 55 e8	 movzx	 edx, BYTE PTR _y$[ebp]
  05ab2	52		 push	 edx
  05ab3	0f b6 45 ec	 movzx	 eax, BYTE PTR _x$[ebp]
  05ab7	50		 push	 eax
  05ab8	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  05abb	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  05ac2	52		 push	 edx
  05ac3	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05ac6	8b 08		 mov	 ecx, DWORD PTR [eax]
  05ac8	51		 push	 ecx
  05ac9	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  05ace	83 c4 34	 add	 esp, 52			; 00000034H

; 2495 : 
; 2496 : 		CItem NewItem;

  05ad1	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$234199[ebp]
  05ad7	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 2497 : 		NewItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, CURRENT_DB_VERSION);

  05adc	6a 03		 push	 3
  05ade	6a 00		 push	 0
  05ae0	68 ff 00 00 00	 push	 255			; 000000ffH
  05ae5	6a 00		 push	 0
  05ae7	6a 00		 push	 0
  05ae9	6a 01		 push	 1
  05aeb	6a 00		 push	 0
  05aed	0f b6 45 dc	 movzx	 eax, BYTE PTR _Option3$[ebp]
  05af1	50		 push	 eax
  05af2	0f b6 4d e0	 movzx	 ecx, BYTE PTR _Option2$[ebp]
  05af6	51		 push	 ecx
  05af7	0f b6 55 e4	 movzx	 edx, BYTE PTR _Option1$[ebp]
  05afb	52		 push	 edx
  05afc	8b 45 f4	 mov	 eax, DWORD PTR _type$[ebp]
  05aff	50		 push	 eax
  05b00	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$234199[ebp]
  05b06	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 2498 : 
; 2499 : 		LogAddTD("[%s][%s][RingOfHero Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d op1:%d op2:%d op3:%d", lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, NewItem.GetName(), type, level, Option1, Option2, Option3);

  05b0b	8b 45 dc	 mov	 eax, DWORD PTR _Option3$[ebp]
  05b0e	50		 push	 eax
  05b0f	8b 4d e0	 mov	 ecx, DWORD PTR _Option2$[ebp]
  05b12	51		 push	 ecx
  05b13	8b 55 e4	 mov	 edx, DWORD PTR _Option1$[ebp]
  05b16	52		 push	 edx
  05b17	8b 45 f0	 mov	 eax, DWORD PTR _level$[ebp]
  05b1a	50		 push	 eax
  05b1b	8b 4d f4	 mov	 ecx, DWORD PTR _type$[ebp]
  05b1e	51		 push	 ecx
  05b1f	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$234199[ebp]
  05b25	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  05b2a	50		 push	 eax
  05b2b	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  05b2e	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  05b35	50		 push	 eax
  05b36	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  05b39	0f bf 91 44 01
	00 00		 movsx	 edx, WORD PTR [ecx+324]
  05b40	52		 push	 edx
  05b41	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05b44	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  05b4b	51		 push	 ecx
  05b4c	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  05b4f	83 c2 77	 add	 edx, 119		; 00000077H
  05b52	52		 push	 edx
  05b53	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05b56	83 c0 6c	 add	 eax, 108		; 0000006cH
  05b59	50		 push	 eax
  05b5a	68 00 00 00 00	 push	 OFFSET ??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@
  05b5f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  05b65	83 c4 30	 add	 esp, 48			; 00000030H

; 2500 : 	}
; 2501 : 	else

  05b68	eb 42		 jmp	 SHORT $LN1@RingOfHero
$LN10@RingOfHero:

; 2502 : 	{
; 2503 : 		x = lpObj->X;

  05b6a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05b6d	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  05b74	89 4d ec	 mov	 DWORD PTR _x$[ebp], ecx

; 2504 : 		y = lpObj->Y;

  05b77	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05b7a	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  05b81	89 4d e8	 mov	 DWORD PTR _y$[ebp], ecx

; 2505 : 		MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  05b84	8b 45 e8	 mov	 eax, DWORD PTR _y$[ebp]
  05b87	50		 push	 eax
  05b88	8b 4d ec	 mov	 ecx, DWORD PTR _x$[ebp]
  05b8b	51		 push	 ecx
  05b8c	68 a0 86 01 00	 push	 100000			; 000186a0H
  05b91	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  05b94	0f b6 8a 49 01
	00 00		 movzx	 ecx, BYTE PTR [edx+329]
  05b9b	69 c9 b8 3d 05
	00		 imul	 ecx, 343480		; 00053db8H
  05ba1	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  05ba7	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN1@RingOfHero:

; 2506 : 	}
; 2507 : }

  05bac	5f		 pop	 edi
  05bad	5e		 pop	 esi
  05bae	5b		 pop	 ebx
  05baf	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  05bb2	33 cd		 xor	 ecx, ebp
  05bb4	e8 00 00 00 00	 call	 @__security_check_cookie@4
  05bb9	8b e5		 mov	 esp, ebp
  05bbb	5d		 pop	 ebp
  05bbc	c3		 ret	 0
?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; RingOfHeroBoxOpen
_TEXT	ENDS
PUBLIC	?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; NewYearLuckMonsterItemBagOpen
EXTRN	?DropNewYearLuckMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropNewYearLuckMonsterReward
EXTRN	?NewYearLuckyPouchItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; NewYearLuckyPouchItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; NewYearLuckMonsterItemBagOpen

; 2510 : {

  05bc0	55		 push	 ebp
  05bc1	8b ec		 mov	 ebp, esp
  05bc3	83 ec 40	 sub	 esp, 64			; 00000040H
  05bc6	53		 push	 ebx
  05bc7	56		 push	 esi
  05bc8	57		 push	 edi

; 2511 : 	NewYearLuckyPouchItemBag->DropNewYearLuckMonsterReward(lpObj->m_Index, btMapNumber, cX, cY);

  05bc9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  05bcd	50		 push	 eax
  05bce	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  05bd2	51		 push	 ecx
  05bd3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  05bd7	52		 push	 edx
  05bd8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05bdb	8b 08		 mov	 ecx, DWORD PTR [eax]
  05bdd	51		 push	 ecx
  05bde	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?NewYearLuckyPouchItemBag@@3PAVCProbabilityItemBag@@A ; NewYearLuckyPouchItemBag
  05be4	e8 00 00 00 00	 call	 ?DropNewYearLuckMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropNewYearLuckMonsterReward

; 2512 : }

  05be9	5f		 pop	 edi
  05bea	5e		 pop	 esi
  05beb	5b		 pop	 ebx
  05bec	8b e5		 mov	 esp, ebp
  05bee	5d		 pop	 ebp
  05bef	c3		 ret	 0
?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; NewYearLuckMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z ; GMPresentBoxItemBagOpen
EXTRN	?DropGMPresentBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropGMPresentBoxReward
EXTRN	?GMPresentBoxItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GMPresentBoxItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; GMPresentBoxItemBagOpen

; 2515 : {

  05bf0	55		 push	 ebp
  05bf1	8b ec		 mov	 ebp, esp
  05bf3	83 ec 40	 sub	 esp, 64			; 00000040H
  05bf6	53		 push	 ebx
  05bf7	56		 push	 esi
  05bf8	57		 push	 edi

; 2516 : 	GMPresentBoxItemBag->DropGMPresentBoxReward(lpObj->m_Index, lpObj->MapNumber, 0, 0);

  05bf9	6a 00		 push	 0
  05bfb	6a 00		 push	 0
  05bfd	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05c00	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  05c07	51		 push	 ecx
  05c08	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  05c0b	8b 02		 mov	 eax, DWORD PTR [edx]
  05c0d	50		 push	 eax
  05c0e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GMPresentBoxItemBag@@3PAVCProbabilityItemBag@@A ; GMPresentBoxItemBag
  05c14	e8 00 00 00 00	 call	 ?DropGMPresentBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropGMPresentBoxReward

; 2517 : }

  05c19	5f		 pop	 edi
  05c1a	5e		 pop	 esi
  05c1b	5b		 pop	 ebx
  05c1c	8b e5		 mov	 esp, ebp
  05c1e	5d		 pop	 ebp
  05c1f	c3		 ret	 0
?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; GMPresentBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; PCBangGreenChaosBoxItemBagOpen
EXTRN	?DropPCBangGreenChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropPCBangGreenChaosBoxReward
EXTRN	?PCBangGageGreenBox@@3PAVCProbabilityItemBag@@A:DWORD ; PCBangGageGreenBox
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; PCBangGreenChaosBoxItemBagOpen

; 2521 : {

  05c20	55		 push	 ebp
  05c21	8b ec		 mov	 ebp, esp
  05c23	83 ec 40	 sub	 esp, 64			; 00000040H
  05c26	53		 push	 ebx
  05c27	56		 push	 esi
  05c28	57		 push	 edi

; 2522 : 	PCBangGageGreenBox->DropPCBangGreenChaosBoxReward(lpObj->m_Index, btMapNumber, cX, cY);

  05c29	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  05c2d	50		 push	 eax
  05c2e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  05c32	51		 push	 ecx
  05c33	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  05c37	52		 push	 edx
  05c38	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05c3b	8b 08		 mov	 ecx, DWORD PTR [eax]
  05c3d	51		 push	 ecx
  05c3e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PCBangGageGreenBox@@3PAVCProbabilityItemBag@@A ; PCBangGageGreenBox
  05c44	e8 00 00 00 00	 call	 ?DropPCBangGreenChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropPCBangGreenChaosBoxReward

; 2523 : }

  05c49	5f		 pop	 edi
  05c4a	5e		 pop	 esi
  05c4b	5b		 pop	 ebx
  05c4c	8b e5		 mov	 esp, ebp
  05c4e	5d		 pop	 ebp
  05c4f	c3		 ret	 0
?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; PCBangGreenChaosBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; PCBangRedChaosBoxItemBagOpen
EXTRN	?DropPCBangRedChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropPCBangRedChaosBoxReward
EXTRN	?PCBangGageRedBox@@3PAVCProbabilityItemBag@@A:DWORD ; PCBangGageRedBox
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; PCBangRedChaosBoxItemBagOpen

; 2526 : {

  05c50	55		 push	 ebp
  05c51	8b ec		 mov	 ebp, esp
  05c53	83 ec 40	 sub	 esp, 64			; 00000040H
  05c56	53		 push	 ebx
  05c57	56		 push	 esi
  05c58	57		 push	 edi

; 2527 : 	PCBangGageRedBox->DropPCBangRedChaosBoxReward(lpObj->m_Index, btMapNumber, cX, cY);

  05c59	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  05c5d	50		 push	 eax
  05c5e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  05c62	51		 push	 ecx
  05c63	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  05c67	52		 push	 edx
  05c68	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05c6b	8b 08		 mov	 ecx, DWORD PTR [eax]
  05c6d	51		 push	 ecx
  05c6e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PCBangGageRedBox@@3PAVCProbabilityItemBag@@A ; PCBangGageRedBox
  05c74	e8 00 00 00 00	 call	 ?DropPCBangRedChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropPCBangRedChaosBoxReward

; 2528 : }

  05c79	5f		 pop	 edi
  05c7a	5e		 pop	 esi
  05c7b	5b		 pop	 ebx
  05c7c	8b e5		 mov	 esp, ebp
  05c7e	5d		 pop	 ebp
  05c7f	c3		 ret	 0
?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; PCBangRedChaosBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; PCBangPurpleChaosBoxItemBagOpen
EXTRN	?DropPCBangPurpleChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropPCBangPurpleChaosBoxReward
EXTRN	?PCBangGagePurpleBox@@3PAVCProbabilityItemBag@@A:DWORD ; PCBangGagePurpleBox
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; PCBangPurpleChaosBoxItemBagOpen

; 2531 : {

  05c80	55		 push	 ebp
  05c81	8b ec		 mov	 ebp, esp
  05c83	83 ec 40	 sub	 esp, 64			; 00000040H
  05c86	53		 push	 ebx
  05c87	56		 push	 esi
  05c88	57		 push	 edi

; 2532 : 	PCBangGagePurpleBox->DropPCBangPurpleChaosBoxReward(lpObj->m_Index, btMapNumber, cX, cY);

  05c89	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  05c8d	50		 push	 eax
  05c8e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  05c92	51		 push	 ecx
  05c93	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  05c97	52		 push	 edx
  05c98	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05c9b	8b 08		 mov	 ecx, DWORD PTR [eax]
  05c9d	51		 push	 ecx
  05c9e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PCBangGagePurpleBox@@3PAVCProbabilityItemBag@@A ; PCBangGagePurpleBox
  05ca4	e8 00 00 00 00	 call	 ?DropPCBangPurpleChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropPCBangPurpleChaosBoxReward

; 2533 : }

  05ca9	5f		 pop	 edi
  05caa	5e		 pop	 esi
  05cab	5b		 pop	 ebx
  05cac	8b e5		 mov	 esp, ebp
  05cae	5d		 pop	 ebp
  05caf	c3		 ret	 0
?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; PCBangPurpleChaosBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; GenericBoxItemBagOpen
EXTRN	?MoonHarvestItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; MoonHarvestItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; GenericBoxItemBagOpen

; 2537 : {

  05cb0	55		 push	 ebp
  05cb1	8b ec		 mov	 ebp, esp
  05cb3	83 ec 40	 sub	 esp, 64			; 00000040H
  05cb6	53		 push	 ebx
  05cb7	56		 push	 esi
  05cb8	57		 push	 edi

; 2538 : 	MoonHarvestItemBag->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  05cb9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  05cbd	50		 push	 eax
  05cbe	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  05cc2	51		 push	 ecx
  05cc3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  05cc7	52		 push	 edx
  05cc8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05ccb	8b 08		 mov	 ecx, DWORD PTR [eax]
  05ccd	51		 push	 ecx
  05cce	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?MoonHarvestItemBag@@3PAVCProbabilityItemBag@@A ; MoonHarvestItemBag
  05cd4	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 2539 : }

  05cd9	5f		 pop	 edi
  05cda	5e		 pop	 esi
  05cdb	5b		 pop	 ebx
  05cdc	8b e5		 mov	 esp, ebp
  05cde	5d		 pop	 ebp
  05cdf	c3		 ret	 0
?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; GenericBoxItemBagOpen
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegXMasGetPayItem@@YAXHH@Z		; EGAnsRegXMasGetPayItem
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -32						; size = 22
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Result$ = 12						; size = 4
?EGAnsRegXMasGetPayItem@@YAXHH@Z PROC			; EGAnsRegXMasGetPayItem

; 2555 : {

  05ce0	55		 push	 ebp
  05ce1	8b ec		 mov	 ebp, esp
  05ce3	83 ec 60	 sub	 esp, 96			; 00000060H
  05ce6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  05ceb	33 c5		 xor	 eax, ebp
  05ced	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  05cf0	53		 push	 ebx
  05cf1	56		 push	 esi
  05cf2	57		 push	 edi

; 2556 : 	if(gObjIsConnected(aIndex) == FALSE)

  05cf3	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05cf6	50		 push	 eax
  05cf7	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  05cfc	83 c4 04	 add	 esp, 4
  05cff	85 c0		 test	 eax, eax
  05d01	75 05		 jne	 SHORT $LN1@EGAnsRegXM

; 2557 : 	{
; 2558 : 		return;

  05d03	e9 86 00 00 00	 jmp	 $LN2@EGAnsRegXM
$LN1@EGAnsRegXM:

; 2559 : 	}
; 2560 : 
; 2561 : 	LPOBJ lpObj = &gObj[aIndex];

  05d08	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05d0b	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  05d11	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05d17	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2562 : 
; 2563 : 	PMSG_XMAS_PAY_ITEM pMsg = {0};

  05d1a	c6 45 e0 00	 mov	 BYTE PTR _pMsg$[ebp], 0
  05d1e	33 c0		 xor	 eax, eax
  05d20	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  05d23	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  05d26	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  05d29	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  05d2c	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  05d2f	88 45 f5	 mov	 BYTE PTR _pMsg$[ebp+21], al

; 2564 : 
; 2565 : 	PHeadSubSetB((LPBYTE)&pMsg, 0x31, 0x00, sizeof(pMsg));

  05d32	6a 16		 push	 22			; 00000016H
  05d34	6a 00		 push	 0
  05d36	6a 31		 push	 49			; 00000031H
  05d38	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  05d3b	50		 push	 eax
  05d3c	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  05d41	83 c4 10	 add	 esp, 16			; 00000010H

; 2566 : 
; 2567 : 	memcpy(pMsg.szUID, lpObj->AccountID, sizeof(pMsg.szUID));

  05d44	6a 0b		 push	 11			; 0000000bH
  05d46	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05d49	83 c0 6c	 add	 eax, 108		; 0000006cH
  05d4c	50		 push	 eax
  05d4d	8d 4d e6	 lea	 ecx, DWORD PTR _pMsg$[ebp+6]
  05d50	51		 push	 ecx
  05d51	e8 00 00 00 00	 call	 _memcpy
  05d56	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2568 : 	pMsg.wServerCode = gGameServerCode / 20;

  05d59	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  05d60	99		 cdq
  05d61	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  05d66	f7 f9		 idiv	 ecx
  05d68	66 89 45 f2	 mov	 WORD PTR _pMsg$[ebp+18], ax

; 2569 : 	pMsg.iINDEX = aIndex;

  05d6c	66 8b 45 08	 mov	 ax, WORD PTR _aIndex$[ebp]
  05d70	66 89 45 e4	 mov	 WORD PTR _pMsg$[ebp+4], ax

; 2570 : 	pMsg.szUID[10] = '\0';

  05d74	c6 45 f0 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0

; 2571 : 	pMsg.wResult = Result;

  05d78	66 8b 45 0c	 mov	 ax, WORD PTR _Result$[ebp]
  05d7c	66 89 45 f4	 mov	 WORD PTR _pMsg$[ebp+20], ax

; 2572 : 
; 2573 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  05d80	6a 16		 push	 22			; 00000016H
  05d82	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  05d85	50		 push	 eax
  05d86	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  05d8b	83 c4 08	 add	 esp, 8
$LN2@EGAnsRegXM:

; 2574 : }

  05d8e	5f		 pop	 edi
  05d8f	5e		 pop	 esi
  05d90	5b		 pop	 ebx
  05d91	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  05d94	33 cd		 xor	 ecx, ebp
  05d96	e8 00 00 00 00	 call	 @__security_check_cookie@4
  05d9b	8b e5		 mov	 esp, ebp
  05d9d	5d		 pop	 ebp
  05d9e	c3		 ret	 0
?EGAnsRegXMasGetPayItem@@YAXHH@Z ENDP			; EGAnsRegXMasGetPayItem
_TEXT	ENDS
EXTRN	?GCServerCmd@@YAXHEEE@Z:PROC			; GCServerCmd
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv75 = -76						; size = 4
tv69 = -76						; size = 4
_lpObj$ = -8						; size = 4
_aIndex$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z PROC ; EGAnsRegXMasGetPayItemResult

; 2578 : {

  05da0	55		 push	 ebp
  05da1	8b ec		 mov	 ebp, esp
  05da3	83 ec 4c	 sub	 esp, 76			; 0000004cH
  05da6	53		 push	 ebx
  05da7	56		 push	 esi
  05da8	57		 push	 edi

; 2579 : 	int aIndex = lpMsg->iIndex;

  05da9	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05dac	0f bf 48 04	 movsx	 ecx, WORD PTR [eax+4]
  05db0	89 4d fc	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 2580 : 	LPOBJ lpObj;
; 2581 : 
; 2582 : 	if(!OBJMAX_RANGE(aIndex))

  05db3	83 7d fc 00	 cmp	 DWORD PTR _aIndex$[ebp], 0
  05db7	7d 09		 jge	 SHORT $LN14@EGAnsRegXM@2
  05db9	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv69[ebp], 0
  05dc0	eb 0f		 jmp	 SHORT $LN15@EGAnsRegXM@2
$LN14@EGAnsRegXM@2:
  05dc2	33 c0		 xor	 eax, eax
  05dc4	81 7d fc 97 3a
	00 00		 cmp	 DWORD PTR _aIndex$[ebp], 14999 ; 00003a97H
  05dcb	0f 9e c0	 setle	 al
  05dce	89 45 b4	 mov	 DWORD PTR tv69[ebp], eax
$LN15@EGAnsRegXM@2:
  05dd1	83 7d b4 00	 cmp	 DWORD PTR tv69[ebp], 0
  05dd5	75 05		 jne	 SHORT $LN11@EGAnsRegXM@2

; 2583 : 	{
; 2584 : 		return;

  05dd7	e9 b5 00 00 00	 jmp	 $LN12@EGAnsRegXM@2
$LN11@EGAnsRegXM@2:

; 2585 : 	}
; 2586 : 	
; 2587 : 	lpObj = &gObj[aIndex];

  05ddc	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05ddf	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  05de5	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05deb	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2588 : 
; 2589 : 	switch(lpMsg->bt_17)

  05dee	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05df1	0f b6 48 17	 movzx	 ecx, BYTE PTR [eax+23]
  05df5	89 4d b4	 mov	 DWORD PTR tv75[ebp], ecx
  05df8	83 7d b4 03	 cmp	 DWORD PTR tv75[ebp], 3
  05dfc	0f 87 8f 00 00
	00		 ja	 $LN12@EGAnsRegXM@2
  05e02	8b 55 b4	 mov	 edx, DWORD PTR tv75[ebp]
  05e05	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN16@EGAnsRegXM@2[edx*4]
$LN8@EGAnsRegXM@2:

; 2590 : 	{
; 2591 : 	case 0:
; 2592 : 		{
; 2593 : 			if(lpMsg->w_14 == 1)

  05e0c	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05e0f	0f bf 48 14	 movsx	 ecx, WORD PTR [eax+20]
  05e13	83 f9 01	 cmp	 ecx, 1
  05e16	75 35		 jne	 SHORT $LN7@EGAnsRegXM@2

; 2594 : 			{
; 2595 : 				if(lpMsg->bt_16 != 0) //first time

  05e18	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05e1b	0f b6 48 16	 movzx	 ecx, BYTE PTR [eax+22]
  05e1f	85 c9		 test	 ecx, ecx
  05e21	74 16		 je	 SHORT $LN6@EGAnsRegXM@2

; 2596 : 				{
; 2597 : 					GCServerCmd(lpObj->m_Index,16,0,0);

  05e23	6a 00		 push	 0
  05e25	6a 00		 push	 0
  05e27	6a 10		 push	 16			; 00000010H
  05e29	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05e2c	8b 08		 mov	 ecx, DWORD PTR [eax]
  05e2e	51		 push	 ecx
  05e2f	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  05e34	83 c4 10	 add	 esp, 16			; 00000010H

; 2598 : 				}
; 2599 : 				else

  05e37	eb 14		 jmp	 SHORT $LN7@EGAnsRegXM@2
$LN6@EGAnsRegXM@2:

; 2600 : 				{
; 2601 : 					GCServerCmd(lpObj->m_Index,16,1,0);

  05e39	6a 00		 push	 0
  05e3b	6a 01		 push	 1
  05e3d	6a 10		 push	 16			; 00000010H
  05e3f	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05e42	8b 08		 mov	 ecx, DWORD PTR [eax]
  05e44	51		 push	 ecx
  05e45	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  05e4a	83 c4 10	 add	 esp, 16			; 00000010H
$LN7@EGAnsRegXM@2:

; 2602 : 				}
; 2603 : 			}
; 2604 : 		}
; 2605 : 		break;

  05e4d	eb 42		 jmp	 SHORT $LN12@EGAnsRegXM@2
$LN4@EGAnsRegXM@2:

; 2606 : 	case 1:
; 2607 : 	case 2:
; 2608 : 		if(lpMsg->w_14 == 1)

  05e4f	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05e52	0f bf 48 14	 movsx	 ecx, WORD PTR [eax+20]
  05e56	83 f9 01	 cmp	 ecx, 1
  05e59	75 14		 jne	 SHORT $LN3@EGAnsRegXM@2

; 2609 : 		{
; 2610 : 			GCServerCmd(lpObj->m_Index,16,2,0);

  05e5b	6a 00		 push	 0
  05e5d	6a 02		 push	 2
  05e5f	6a 10		 push	 16			; 00000010H
  05e61	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05e64	8b 08		 mov	 ecx, DWORD PTR [eax]
  05e66	51		 push	 ecx
  05e67	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  05e6c	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@EGAnsRegXM@2:

; 2611 : 		}
; 2612 : 		break;

  05e6f	eb 20		 jmp	 SHORT $LN12@EGAnsRegXM@2
$LN2@EGAnsRegXM@2:

; 2613 : 	case 3:
; 2614 : 		if(lpMsg->w_14 == 1)

  05e71	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05e74	0f bf 48 14	 movsx	 ecx, WORD PTR [eax+20]
  05e78	83 f9 01	 cmp	 ecx, 1
  05e7b	75 14		 jne	 SHORT $LN12@EGAnsRegXM@2

; 2615 : 		{
; 2616 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  05e7d	6a 00		 push	 0
  05e7f	6a 03		 push	 3
  05e81	6a 10		 push	 16			; 00000010H
  05e83	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05e86	8b 08		 mov	 ecx, DWORD PTR [eax]
  05e88	51		 push	 ecx
  05e89	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  05e8e	83 c4 10	 add	 esp, 16			; 00000010H
$LN12@EGAnsRegXM@2:

; 2617 : 		}
; 2618 : 		break;
; 2619 : 	}
; 2620 : }

  05e91	5f		 pop	 edi
  05e92	5e		 pop	 esi
  05e93	5b		 pop	 ebx
  05e94	8b e5		 mov	 esp, ebp
  05e96	5d		 pop	 ebp
  05e97	c3		 ret	 0
$LN16@EGAnsRegXM@2:
  05e98	00 00 00 00	 DD	 $LN8@EGAnsRegXM@2
  05e9c	00 00 00 00	 DD	 $LN4@EGAnsRegXM@2
  05ea0	00 00 00 00	 DD	 $LN4@EGAnsRegXM@2
  05ea4	00 00 00 00	 DD	 $LN2@EGAnsRegXM@2
?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ENDP ; EGAnsRegXMasGetPayItemResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegXMasSetPayItem@@YAXHH@Z		; EGAnsRegXMasSetPayItem
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -32						; size = 22
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Result$ = 12						; size = 4
?EGAnsRegXMasSetPayItem@@YAXHH@Z PROC			; EGAnsRegXMasSetPayItem

; 2623 : {

  05eb0	55		 push	 ebp
  05eb1	8b ec		 mov	 ebp, esp
  05eb3	83 ec 60	 sub	 esp, 96			; 00000060H
  05eb6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  05ebb	33 c5		 xor	 eax, ebp
  05ebd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  05ec0	53		 push	 ebx
  05ec1	56		 push	 esi
  05ec2	57		 push	 edi

; 2624 : 	if(gObjIsConnected(aIndex) == FALSE)

  05ec3	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05ec6	50		 push	 eax
  05ec7	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  05ecc	83 c4 04	 add	 esp, 4
  05ecf	85 c0		 test	 eax, eax
  05ed1	75 05		 jne	 SHORT $LN1@EGAnsRegXM@3

; 2625 : 	{
; 2626 : 		return;

  05ed3	e9 86 00 00 00	 jmp	 $LN2@EGAnsRegXM@3
$LN1@EGAnsRegXM@3:

; 2627 : 	}
; 2628 : 
; 2629 : 	LPOBJ lpObj = &gObj[aIndex];

  05ed8	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05edb	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  05ee1	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05ee7	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2630 : 
; 2631 : 	PMSG_XMAS_PAY_ITEM pMsg = {0};

  05eea	c6 45 e0 00	 mov	 BYTE PTR _pMsg$[ebp], 0
  05eee	33 c0		 xor	 eax, eax
  05ef0	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  05ef3	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  05ef6	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  05ef9	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  05efc	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  05eff	88 45 f5	 mov	 BYTE PTR _pMsg$[ebp+21], al

; 2632 : 
; 2633 : 	PHeadSubSetB((LPBYTE)&pMsg, 0x32, 0x00, sizeof(pMsg));

  05f02	6a 16		 push	 22			; 00000016H
  05f04	6a 00		 push	 0
  05f06	6a 32		 push	 50			; 00000032H
  05f08	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  05f0b	50		 push	 eax
  05f0c	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  05f11	83 c4 10	 add	 esp, 16			; 00000010H

; 2634 : 
; 2635 : 	memcpy(pMsg.szUID, lpObj->AccountID, sizeof(pMsg.szUID));

  05f14	6a 0b		 push	 11			; 0000000bH
  05f16	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  05f19	83 c0 6c	 add	 eax, 108		; 0000006cH
  05f1c	50		 push	 eax
  05f1d	8d 4d e6	 lea	 ecx, DWORD PTR _pMsg$[ebp+6]
  05f20	51		 push	 ecx
  05f21	e8 00 00 00 00	 call	 _memcpy
  05f26	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2636 : 	pMsg.wServerCode = gGameServerCode / 20;

  05f29	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  05f30	99		 cdq
  05f31	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  05f36	f7 f9		 idiv	 ecx
  05f38	66 89 45 f2	 mov	 WORD PTR _pMsg$[ebp+18], ax

; 2637 : 	pMsg.iINDEX = aIndex;

  05f3c	66 8b 45 08	 mov	 ax, WORD PTR _aIndex$[ebp]
  05f40	66 89 45 e4	 mov	 WORD PTR _pMsg$[ebp+4], ax

; 2638 : 	pMsg.szUID[10] = '\0';

  05f44	c6 45 f0 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0

; 2639 : 	pMsg.wResult = Result;

  05f48	66 8b 45 0c	 mov	 ax, WORD PTR _Result$[ebp]
  05f4c	66 89 45 f4	 mov	 WORD PTR _pMsg$[ebp+20], ax

; 2640 : 
; 2641 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  05f50	6a 16		 push	 22			; 00000016H
  05f52	8d 45 e0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  05f55	50		 push	 eax
  05f56	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  05f5b	83 c4 08	 add	 esp, 8
$LN2@EGAnsRegXM@3:

; 2642 : }

  05f5e	5f		 pop	 edi
  05f5f	5e		 pop	 esi
  05f60	5b		 pop	 ebx
  05f61	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  05f64	33 cd		 xor	 ecx, ebp
  05f66	e8 00 00 00 00	 call	 @__security_check_cookie@4
  05f6b	8b e5		 mov	 esp, ebp
  05f6d	5d		 pop	 ebp
  05f6e	c3		 ret	 0
?EGAnsRegXMasSetPayItem@@YAXHH@Z ENDP			; EGAnsRegXMasSetPayItem
_TEXT	ENDS
PUBLIC	??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@ ; `string'
PUBLIC	__$ArrayPad$
EXTRN	?XMasEventA@@3PAVCProbabilityItemBag@@A:DWORD	; XMasEventA
EXTRN	?gNewServer@@3HA:DWORD				; gNewServer
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?XMasEventB@@3PAVCProbabilityItemBag@@A:DWORD	; XMasEventB
EXTRN	?XMasEventC@@3PAVCProbabilityItemBag@@A:DWORD	; XMasEventC
EXTRN	?g_iXMasEvent_LuckNumber2nd@@3HA:DWORD		; g_iXMasEvent_LuckNumber2nd
EXTRN	?g_iXMasEvent_LuckNumber1st@@3HA:DWORD		; g_iXMasEvent_LuckNumber1st
EXTRN	?g_iXMasVisitCount@@3HA:DWORD			; g_iXMasVisitCount
;	COMDAT ??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@
CONST	SEGMENT
??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@ DB '['
	DB	'X-MAX Event] [AccountID]: %s , [VISITCOUNT]:%d', 00H ; `string'
; Function compile flags: /Odtp /ZI
CONST	ENDS
_TEXT	SEGMENT
tv73 = -340						; size = 4
_szText$234296 = -272					; size = 256
_lpObj$ = -16						; size = 4
_loc2$ = -12						; size = 4
_aIndex$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z PROC ; EGAnsRegXMasSetPayItemResult

; 2646 : {

  05f70	55		 push	 ebp
  05f71	8b ec		 mov	 ebp, esp
  05f73	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  05f79	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  05f7e	33 c5		 xor	 eax, ebp
  05f80	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  05f83	53		 push	 ebx
  05f84	56		 push	 esi
  05f85	57		 push	 edi

; 2647 : 	int aIndex = lpMsg->iIndex;

  05f86	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05f89	0f bf 48 04	 movsx	 ecx, WORD PTR [eax+4]
  05f8d	89 4d f8	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 2648 : 
; 2649 : 	int loc2 = 0;//ebp-8

  05f90	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _loc2$[ebp], 0

; 2650 : 
; 2651 : 	LPOBJ lpObj = &gObj[aIndex];

  05f97	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05f9a	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  05fa0	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  05fa6	89 45 f0	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2652 : 
; 2653 : 	if(!gObjIsConnected(aIndex))

  05fa9	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  05fac	50		 push	 eax
  05fad	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  05fb2	83 c4 04	 add	 esp, 4
  05fb5	85 c0		 test	 eax, eax
  05fb7	75 05		 jne	 SHORT $LN13@EGAnsRegXM@4

; 2654 : 	{
; 2655 : 		return;

  05fb9	e9 cd 01 00 00	 jmp	 $LN14@EGAnsRegXM@4
$LN13@EGAnsRegXM@4:

; 2656 : 	}
; 2657 : 	
; 2658 : 	switch(lpMsg->bt_17)

  05fbe	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05fc1	0f b6 48 17	 movzx	 ecx, BYTE PTR [eax+23]
  05fc5	89 8d ac fe ff
	ff		 mov	 DWORD PTR tv73[ebp], ecx
  05fcb	83 bd ac fe ff
	ff 03		 cmp	 DWORD PTR tv73[ebp], 3
  05fd2	0f 87 b3 01 00
	00		 ja	 $LN14@EGAnsRegXM@4
  05fd8	8b 95 ac fe ff
	ff		 mov	 edx, DWORD PTR tv73[ebp]
  05fde	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN16@EGAnsRegXM@4[edx*4]
$LN10@EGAnsRegXM@4:

; 2659 : 	{
; 2660 : 	case 0:
; 2661 : 		{
; 2662 : 			if(lpMsg->w_14 == 1)

  05fe5	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  05fe8	0f bf 48 14	 movsx	 ecx, WORD PTR [eax+20]
  05fec	83 f9 01	 cmp	 ecx, 1
  05fef	0f 85 52 01 00
	00		 jne	 $LN9@EGAnsRegXM@4

; 2663 : 			{
; 2664 : 				char szText[256] = { 0 };

  05ff5	c6 85 f0 fe ff
	ff 00		 mov	 BYTE PTR _szText$234296[ebp], 0
  05ffc	68 ff 00 00 00	 push	 255			; 000000ffH
  06001	6a 00		 push	 0
  06003	8d 85 f1 fe ff
	ff		 lea	 eax, DWORD PTR _szText$234296[ebp+1]
  06009	50		 push	 eax
  0600a	e8 00 00 00 00	 call	 _memset
  0600f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2665 : 
; 2666 : 				g_iXMasVisitCount++;

  06012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  06017	83 c0 01	 add	 eax, 1
  0601a	a3 00 00 00 00	 mov	 DWORD PTR ?g_iXMasVisitCount@@3HA, eax ; g_iXMasVisitCount

; 2667 : 				wsprintf(szText,lMsg.Get(MSGGET(10,24)),g_iXMasVisitCount);

  0601f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  06024	50		 push	 eax
  06025	68 18 0a 00 00	 push	 2584			; 00000a18H
  0602a	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0602f	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  06034	50		 push	 eax
  06035	8d 8d f0 fe ff
	ff		 lea	 ecx, DWORD PTR _szText$234296[ebp]
  0603b	51		 push	 ecx
  0603c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  06042	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2668 : 				
; 2669 : 				if ( (g_iXMasVisitCount % g_iXMasEvent_LuckNumber1st) == FALSE )

  06045	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  0604a	99		 cdq
  0604b	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?g_iXMasEvent_LuckNumber1st@@3HA ; g_iXMasEvent_LuckNumber1st
  06051	85 d2		 test	 edx, edx
  06053	0f 85 89 00 00
	00		 jne	 $LN8@EGAnsRegXM@4

; 2670 : 				{
; 2671 : 					if ( (g_iXMasVisitCount % g_iXMasEvent_LuckNumber2nd) == FALSE )

  06059	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  0605e	99		 cdq
  0605f	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?g_iXMasEvent_LuckNumber2nd@@3HA ; g_iXMasEvent_LuckNumber2nd
  06065	85 d2		 test	 edx, edx
  06067	75 32		 jne	 SHORT $LN7@EGAnsRegXM@4

; 2672 : 					{
; 2673 : 						XMasEventC->DropItem(aIndex,lpObj->MapNumber,lpObj->X, lpObj->Y);

  06069	8b 45 f0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0606c	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  06073	51		 push	 ecx
  06074	8b 55 f0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  06077	0f b6 82 44 01
	00 00		 movzx	 eax, BYTE PTR [edx+324]
  0607e	50		 push	 eax
  0607f	8b 4d f0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  06082	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  06089	52		 push	 edx
  0608a	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0608d	50		 push	 eax
  0608e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?XMasEventC@@3PAVCProbabilityItemBag@@A ; XMasEventC
  06094	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 2674 : 					}
; 2675 : 					else

  06099	eb 30		 jmp	 SHORT $LN6@EGAnsRegXM@4
$LN7@EGAnsRegXM@4:

; 2676 : 					{
; 2677 : 						XMasEventB->DropItem(aIndex,lpObj->MapNumber,lpObj->X, lpObj->Y);

  0609b	8b 45 f0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0609e	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  060a5	51		 push	 ecx
  060a6	8b 55 f0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  060a9	0f b6 82 44 01
	00 00		 movzx	 eax, BYTE PTR [edx+324]
  060b0	50		 push	 eax
  060b1	8b 4d f0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  060b4	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  060bb	52		 push	 edx
  060bc	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  060bf	50		 push	 eax
  060c0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?XMasEventB@@3PAVCProbabilityItemBag@@A ; XMasEventB
  060c6	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem
$LN6@EGAnsRegXM@4:

; 2678 : 					}
; 2679 : 
; 2680 : 					GCServerMsgStringSend(szText, lpObj->m_Index, 0);

  060cb	6a 00		 push	 0
  060cd	8b 45 f0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  060d0	8b 08		 mov	 ecx, DWORD PTR [eax]
  060d2	51		 push	 ecx
  060d3	8d 95 f0 fe ff
	ff		 lea	 edx, DWORD PTR _szText$234296[ebp]
  060d9	52		 push	 edx
  060da	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  060df	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN8@EGAnsRegXM@4:

; 2681 : 				}
; 2682 : 
; 2683 : 				if((g_iXMasVisitCount % 100) != 0 && gNewServer != 1)

  060e2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  060e7	99		 cdq
  060e8	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  060ed	f7 f9		 idiv	 ecx
  060ef	85 d2		 test	 edx, edx
  060f1	74 39		 je	 SHORT $LN5@EGAnsRegXM@4
  060f3	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?gNewServer@@3HA, 1 ; gNewServer
  060fa	74 30		 je	 SHORT $LN5@EGAnsRegXM@4

; 2684 : 				{
; 2685 : 					XMasEventA->DropItem(aIndex,lpObj->MapNumber,lpObj->X, lpObj->Y);

  060fc	8b 45 f0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  060ff	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  06106	51		 push	 ecx
  06107	8b 55 f0	 mov	 edx, DWORD PTR _lpObj$[ebp]
  0610a	0f b6 82 44 01
	00 00		 movzx	 eax, BYTE PTR [edx+324]
  06111	50		 push	 eax
  06112	8b 4d f0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  06115	0f b6 91 49 01
	00 00		 movzx	 edx, BYTE PTR [ecx+329]
  0611c	52		 push	 edx
  0611d	8b 45 f8	 mov	 eax, DWORD PTR _aIndex$[ebp]
  06120	50		 push	 eax
  06121	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?XMasEventA@@3PAVCProbabilityItemBag@@A ; XMasEventA
  06127	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem
$LN5@EGAnsRegXM@4:

; 2686 : 				}
; 2687 : 				
; 2688 : 				LogAddTD("[X-MAX Event] [AccountID]: %s , [VISITCOUNT]:%d",lpObj->AccountID,g_iXMasVisitCount);

  0612c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  06131	50		 push	 eax
  06132	8b 4d f0	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  06135	83 c1 6c	 add	 ecx, 108		; 0000006cH
  06138	51		 push	 ecx
  06139	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@
  0613e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  06144	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN9@EGAnsRegXM@4:

; 2689 : 
; 2690 : 			}
; 2691 : 		}
; 2692 : 		break;

  06147	eb 42		 jmp	 SHORT $LN14@EGAnsRegXM@4
$LN4@EGAnsRegXM@4:

; 2693 : 	case 1:
; 2694 : 	case 2:
; 2695 : 		if(lpMsg->w_14 == 1)

  06149	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0614c	0f bf 48 14	 movsx	 ecx, WORD PTR [eax+20]
  06150	83 f9 01	 cmp	 ecx, 1
  06153	75 14		 jne	 SHORT $LN3@EGAnsRegXM@4

; 2696 : 		{
; 2697 : 			GCServerCmd(lpObj->m_Index,16,2,0);

  06155	6a 00		 push	 0
  06157	6a 02		 push	 2
  06159	6a 10		 push	 16			; 00000010H
  0615b	8b 45 f0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0615e	8b 08		 mov	 ecx, DWORD PTR [eax]
  06160	51		 push	 ecx
  06161	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  06166	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@EGAnsRegXM@4:

; 2698 : 		}
; 2699 : 		break;

  06169	eb 20		 jmp	 SHORT $LN14@EGAnsRegXM@4
$LN2@EGAnsRegXM@4:

; 2700 : 	case 3:
; 2701 : 		if(lpMsg->w_14 == 1)

  0616b	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0616e	0f bf 48 14	 movsx	 ecx, WORD PTR [eax+20]
  06172	83 f9 01	 cmp	 ecx, 1
  06175	75 14		 jne	 SHORT $LN14@EGAnsRegXM@4

; 2702 : 		{
; 2703 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  06177	6a 00		 push	 0
  06179	6a 03		 push	 3
  0617b	6a 10		 push	 16			; 00000010H
  0617d	8b 45 f0	 mov	 eax, DWORD PTR _lpObj$[ebp]
  06180	8b 08		 mov	 ecx, DWORD PTR [eax]
  06182	51		 push	 ecx
  06183	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  06188	83 c4 10	 add	 esp, 16			; 00000010H
$LN14@EGAnsRegXM@4:

; 2704 : 		}
; 2705 : 		break;
; 2706 : 	}
; 2707 : }

  0618b	5f		 pop	 edi
  0618c	5e		 pop	 esi
  0618d	5b		 pop	 ebx
  0618e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  06191	33 cd		 xor	 ecx, ebp
  06193	e8 00 00 00 00	 call	 @__security_check_cookie@4
  06198	8b e5		 mov	 esp, ebp
  0619a	5d		 pop	 ebp
  0619b	c3		 ret	 0
$LN16@EGAnsRegXM@4:
  0619c	00 00 00 00	 DD	 $LN10@EGAnsRegXM@4
  061a0	00 00 00 00	 DD	 $LN4@EGAnsRegXM@4
  061a4	00 00 00 00	 DD	 $LN4@EGAnsRegXM@4
  061a8	00 00 00 00	 DD	 $LN2@EGAnsRegXM@4
?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ENDP ; EGAnsRegXMasSetPayItemResult
_TEXT	ENDS
PUBLIC	?ReqNPCXMasMapMoveOpen@@YAXH@Z			; ReqNPCXMasMapMoveOpen
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = -4						; size = 4
_aIndex$ = 8						; size = 4
?ReqNPCXMasMapMoveOpen@@YAXH@Z PROC			; ReqNPCXMasMapMoveOpen

; 2711 : {

  061b0	55		 push	 ebp
  061b1	8b ec		 mov	 ebp, esp
  061b3	83 ec 44	 sub	 esp, 68			; 00000044H
  061b6	53		 push	 ebx
  061b7	56		 push	 esi
  061b8	57		 push	 edi

; 2712 : 	LPOBJ lpObj = &gObj[aIndex];

  061b9	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  061bc	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  061c2	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  061c8	89 45 fc	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2713 : 
; 2714 : 	if(gObjIsConnected(aIndex) == FALSE)

  061cb	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  061ce	50		 push	 eax
  061cf	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  061d4	83 c4 04	 add	 esp, 4
  061d7	85 c0		 test	 eax, eax
  061d9	75 02		 jne	 SHORT $LN1@ReqNPCXMas

; 2715 : 	{
; 2716 : 		return;

  061db	eb 14		 jmp	 SHORT $LN2@ReqNPCXMas
$LN1@ReqNPCXMas:

; 2717 : 	}
; 2718 : 	
; 2719 : 	GCServerCmd(lpObj->m_Index,17,1,0);

  061dd	6a 00		 push	 0
  061df	6a 01		 push	 1
  061e1	6a 11		 push	 17			; 00000011H
  061e3	8b 45 fc	 mov	 eax, DWORD PTR _lpObj$[ebp]
  061e6	8b 08		 mov	 ecx, DWORD PTR [eax]
  061e8	51		 push	 ecx
  061e9	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  061ee	83 c4 10	 add	 esp, 16			; 00000010H
$LN2@ReqNPCXMas:

; 2720 : }

  061f1	5f		 pop	 edi
  061f2	5e		 pop	 esi
  061f3	5b		 pop	 ebx
  061f4	8b e5		 mov	 esp, ebp
  061f6	5d		 pop	 ebp
  061f7	c3		 ret	 0
?ReqNPCXMasMapMoveOpen@@YAXH@Z ENDP			; ReqNPCXMasMapMoveOpen
_TEXT	ENDS
PUBLIC	?ReqNPCXMasMapMoveDevias@@YAXH@Z		; ReqNPCXMasMapMoveDevias
EXTRN	?gObjMoveGate@@YAHHH@Z:PROC			; gObjMoveGate
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = -4						; size = 4
_iIndex$ = 8						; size = 4
?ReqNPCXMasMapMoveDevias@@YAXH@Z PROC			; ReqNPCXMasMapMoveDevias

; 2723 : {

  06200	55		 push	 ebp
  06201	8b ec		 mov	 ebp, esp
  06203	83 ec 44	 sub	 esp, 68			; 00000044H
  06206	53		 push	 ebx
  06207	56		 push	 esi
  06208	57		 push	 edi

; 2724 : 	LPOBJ lpObj = &gObj[iIndex];

  06209	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  0620c	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  06212	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  06218	89 45 fc	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2725 : 
; 2726 : 	if(gObjIsConnected(iIndex) == FALSE)

  0621b	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  0621e	50		 push	 eax
  0621f	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  06224	83 c4 04	 add	 esp, 4
  06227	85 c0		 test	 eax, eax
  06229	75 02		 jne	 SHORT $LN1@ReqNPCXMas@2

; 2727 : 	{
; 2728 : 		return;

  0622b	eb 10		 jmp	 SHORT $LN2@ReqNPCXMas@2
$LN1@ReqNPCXMas@2:

; 2729 : 	}
; 2730 : 
; 2731 : 	gObjMoveGate(lpObj->m_Index, 22); //Devias :)

  0622d	6a 16		 push	 22			; 00000016H
  0622f	8b 45 fc	 mov	 eax, DWORD PTR _lpObj$[ebp]
  06232	8b 08		 mov	 ecx, DWORD PTR [eax]
  06234	51		 push	 ecx
  06235	e8 00 00 00 00	 call	 ?gObjMoveGate@@YAHHH@Z	; gObjMoveGate
  0623a	83 c4 08	 add	 esp, 8
$LN2@ReqNPCXMas@2:

; 2732 : }

  0623d	5f		 pop	 edi
  0623e	5e		 pop	 esi
  0623f	5b		 pop	 ebx
  06240	8b e5		 mov	 esp, ebp
  06242	5d		 pop	 ebp
  06243	c3		 ret	 0
?ReqNPCXMasMapMoveDevias@@YAXH@Z ENDP			; ReqNPCXMasMapMoveDevias
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegLuckyCoinItem@@YAXH@Z			; EGAnsRegLuckyCoinItem
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -40						; size = 30
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGAnsRegLuckyCoinItem@@YAXH@Z PROC			; EGAnsRegLuckyCoinItem

; 2747 : {

  06250	55		 push	 ebp
  06251	8b ec		 mov	 ebp, esp
  06253	83 ec 68	 sub	 esp, 104		; 00000068H
  06256	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0625b	33 c5		 xor	 eax, ebp
  0625d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  06260	53		 push	 ebx
  06261	56		 push	 esi
  06262	57		 push	 edi

; 2748 : 	LPOBJ lpObj = &gObj[iIndex];

  06263	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  06266	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0626c	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  06272	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2749 : 
; 2750 : 	if(gObjIsConnected(iIndex) == FALSE)

  06275	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  06278	50		 push	 eax
  06279	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0627e	83 c4 04	 add	 esp, 4
  06281	85 c0		 test	 eax, eax
  06283	75 05		 jne	 SHORT $LN1@EGAnsRegLu

; 2751 : 	{
; 2752 : 		return;

  06285	e9 87 00 00 00	 jmp	 $LN2@EGAnsRegLu
$LN1@EGAnsRegLu:

; 2753 : 	}
; 2754 : 
; 2755 : 	PMSG_ANS_LUCKYCOIN_REGCOUNT pMsg = { 0 };

  0628a	c6 45 d8 00	 mov	 BYTE PTR _pMsg$[ebp], 0
  0628e	33 c0		 xor	 eax, eax
  06290	89 45 d9	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  06293	89 45 dd	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  06296	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  06299	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  0629c	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  0629f	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  062a2	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+25], eax
  062a5	88 45 f5	 mov	 BYTE PTR _pMsg$[ebp+29], al

; 2756 : 	
; 2757 : 	pMsg.h.c = 0xC1;

  062a8	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 2758 : 	pMsg.h.headcode = 0x33;

  062ac	c6 45 da 33	 mov	 BYTE PTR _pMsg$[ebp+2], 51 ; 00000033H

; 2759 : 	pMsg.h.size = sizeof(pMsg); //0x1E

  062b0	c6 45 d9 1e	 mov	 BYTE PTR _pMsg$[ebp+1], 30 ; 0000001eH

; 2760 : 	
; 2761 : 	pMsg.iIndex = lpObj->m_Index;

  062b4	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  062b7	66 8b 08	 mov	 cx, WORD PTR [eax]
  062ba	66 89 4d dc	 mov	 WORD PTR _pMsg$[ebp+4], cx

; 2762 : 	pMsg.ServerCode = gGameServerCode / 20;

  062be	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  062c5	99		 cdq
  062c6	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  062cb	f7 f9		 idiv	 ecx
  062cd	66 89 45 f4	 mov	 WORD PTR _pMsg$[ebp+28], ax

; 2763 : 	memcpy(pMsg.AccountID, lpObj->AccountID, 0xA);

  062d1	6a 0a		 push	 10			; 0000000aH
  062d3	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  062d6	83 c0 6c	 add	 eax, 108		; 0000006cH
  062d9	50		 push	 eax
  062da	8d 4d de	 lea	 ecx, DWORD PTR _pMsg$[ebp+6]
  062dd	51		 push	 ecx
  062de	e8 00 00 00 00	 call	 _memcpy
  062e3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2764 : 	pMsg.btResult = 0;

  062e6	c6 45 e8 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0

; 2765 : 	memcpy(pMsg.Name, lpObj->Name, 0xA);

  062ea	6a 0a		 push	 10			; 0000000aH
  062ec	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  062ef	83 c0 77	 add	 eax, 119		; 00000077H
  062f2	50		 push	 eax
  062f3	8d 4d e9	 lea	 ecx, DWORD PTR _pMsg$[ebp+17]
  062f6	51		 push	 ecx
  062f7	e8 00 00 00 00	 call	 _memcpy
  062fc	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2766 : 	pMsg.btResult2 = 0;

  062ff	c6 45 f3 00	 mov	 BYTE PTR _pMsg$[ebp+27], 0

; 2767 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  06303	6a 1e		 push	 30			; 0000001eH
  06305	8d 45 d8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  06308	50		 push	 eax
  06309	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  0630e	83 c4 08	 add	 esp, 8
$LN2@EGAnsRegLu:

; 2768 : }

  06311	5f		 pop	 edi
  06312	5e		 pop	 esi
  06313	5b		 pop	 ebx
  06314	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  06317	33 cd		 xor	 ecx, ebp
  06319	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0631e	8b e5		 mov	 esp, ebp
  06320	5d		 pop	 ebp
  06321	c3		 ret	 0
?EGAnsRegLuckyCoinItem@@YAXH@Z ENDP			; EGAnsRegLuckyCoinItem
_TEXT	ENDS
EXTRN	?GCSendLuckyCoinCount@@YAXHH@Z:PROC		; GCSendLuckyCoinCount
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = -12						; size = 4
_loc2$ = -8						; size = 4
_aIndex$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z PROC ; EGAnsRegLuckyCoinItemResult

; 2771 : {

  06330	55		 push	 ebp
  06331	8b ec		 mov	 ebp, esp
  06333	83 ec 4c	 sub	 esp, 76			; 0000004cH
  06336	53		 push	 ebx
  06337	56		 push	 esi
  06338	57		 push	 edi

; 2772 : 	int aIndex = lpMsg->iIndex;

  06339	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0633c	0f bf 48 04	 movsx	 ecx, WORD PTR [eax+4]
  06340	89 4d fc	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 2773 : 	int loc2 = 0;

  06343	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _loc2$[ebp], 0

; 2774 : 
; 2775 : 	LPOBJ lpObj = &gObj[aIndex];

  0634a	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0634d	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  06353	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  06359	89 45 f4	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2776 : 
; 2777 : 	if(gObjIsConnected(aIndex) == FALSE)

  0635c	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0635f	50		 push	 eax
  06360	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  06365	83 c4 04	 add	 esp, 4
  06368	85 c0		 test	 eax, eax
  0636a	75 02		 jne	 SHORT $LN2@EGAnsRegLu@2

; 2778 : 	{
; 2779 : 		return;

  0636c	eb 2f		 jmp	 SHORT $LN3@EGAnsRegLu@2
$LN2@EGAnsRegLu@2:

; 2780 : 	}
; 2781 : 	
; 2782 : 	if(strcmp(lpMsg->szNAME,lpObj->Name))

  0636e	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  06371	83 c0 77	 add	 eax, 119		; 00000077H
  06374	50		 push	 eax
  06375	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  06378	83 c1 11	 add	 ecx, 17			; 00000011H
  0637b	51		 push	 ecx
  0637c	e8 00 00 00 00	 call	 _strcmp
  06381	83 c4 08	 add	 esp, 8
  06384	85 c0		 test	 eax, eax
  06386	74 02		 je	 SHORT $LN1@EGAnsRegLu@2

; 2783 : 	{
; 2784 : 		return;

  06388	eb 13		 jmp	 SHORT $LN3@EGAnsRegLu@2
$LN1@EGAnsRegLu@2:

; 2785 : 	}
; 2786 : 	
; 2787 : 	GCSendLuckyCoinCount(aIndex,lpMsg->iCoinCount);

  0638a	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0638d	8b 48 20	 mov	 ecx, DWORD PTR [eax+32]
  06390	51		 push	 ecx
  06391	8b 55 fc	 mov	 edx, DWORD PTR _aIndex$[ebp]
  06394	52		 push	 edx
  06395	e8 00 00 00 00	 call	 ?GCSendLuckyCoinCount@@YAXHH@Z ; GCSendLuckyCoinCount
  0639a	83 c4 08	 add	 esp, 8
$LN3@EGAnsRegLu@2:

; 2788 : }

  0639d	5f		 pop	 edi
  0639e	5e		 pop	 esi
  0639f	5b		 pop	 ebx
  063a0	8b e5		 mov	 esp, ebp
  063a2	5d		 pop	 ebp
  063a3	c3		 ret	 0
?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ENDP ; EGAnsRegLuckyCoinItemResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z		; EGAnsRegLuckyCoinItemPosition
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pMsg$ = -40						; size = 32
_lpObj$ = -8						; size = 4
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
_Ipos$ = 12						; size = 4
?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z PROC		; EGAnsRegLuckyCoinItemPosition

; 2804 : {

  063b0	55		 push	 ebp
  063b1	8b ec		 mov	 ebp, esp
  063b3	83 ec 68	 sub	 esp, 104		; 00000068H
  063b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  063bb	33 c5		 xor	 eax, ebp
  063bd	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  063c0	53		 push	 ebx
  063c1	56		 push	 esi
  063c2	57		 push	 edi

; 2805 : 	LPOBJ lpObj = &gObj[iIndex];

  063c3	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  063c6	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  063cc	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  063d2	89 45 f8	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2806 : 
; 2807 : 	if(gObjIsConnected(iIndex) == FALSE)

  063d5	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  063d8	50		 push	 eax
  063d9	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  063de	83 c4 04	 add	 esp, 4
  063e1	85 c0		 test	 eax, eax
  063e3	75 05		 jne	 SHORT $LN1@EGAnsRegLu@3

; 2808 : 	{
; 2809 : 		return;

  063e5	e9 91 00 00 00	 jmp	 $LN2@EGAnsRegLu@3
$LN1@EGAnsRegLu@3:

; 2810 : 	}
; 2811 : 
; 2812 : 	PMSG_ANS_LUCKYCOIN_ITEM_POSITION pMsg = { 0 };

  063ea	c6 45 d8 00	 mov	 BYTE PTR _pMsg$[ebp], 0
  063ee	33 c0		 xor	 eax, eax
  063f0	89 45 d9	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  063f3	89 45 dd	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  063f6	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  063f9	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  063fc	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  063ff	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  06402	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+25], eax
  06405	66 89 45 f5	 mov	 WORD PTR _pMsg$[ebp+29], ax
  06409	88 45 f7	 mov	 BYTE PTR _pMsg$[ebp+31], al

; 2813 : 	
; 2814 : 	pMsg.h.c = 0xC1;

  0640c	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 2815 : 	pMsg.h.headcode = 0x34;

  06410	c6 45 da 34	 mov	 BYTE PTR _pMsg$[ebp+2], 52 ; 00000034H

; 2816 : 	pMsg.h.size = sizeof(pMsg); //0x20

  06414	c6 45 d9 20	 mov	 BYTE PTR _pMsg$[ebp+1], 32 ; 00000020H

; 2817 : 	
; 2818 : 	pMsg.iIndex = lpObj->m_Index;

  06418	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0641b	66 8b 08	 mov	 cx, WORD PTR [eax]
  0641e	66 89 4d dc	 mov	 WORD PTR _pMsg$[ebp+4], cx

; 2819 : 	pMsg.ServerCode = gGameServerCode / 20;

  06422	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  06429	99		 cdq
  0642a	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  0642f	f7 f9		 idiv	 ecx
  06431	66 89 45 f4	 mov	 WORD PTR _pMsg$[ebp+28], ax

; 2820 : 	memcpy(pMsg.AccountID, lpObj->AccountID, 0xA);

  06435	6a 0a		 push	 10			; 0000000aH
  06437	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0643a	83 c0 6c	 add	 eax, 108		; 0000006cH
  0643d	50		 push	 eax
  0643e	8d 4d de	 lea	 ecx, DWORD PTR _pMsg$[ebp+6]
  06441	51		 push	 ecx
  06442	e8 00 00 00 00	 call	 _memcpy
  06447	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2821 : 	pMsg.btResult = 0;

  0644a	c6 45 e8 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0

; 2822 : 	memcpy(pMsg.Name, lpObj->Name, 0xA);

  0644e	6a 0a		 push	 10			; 0000000aH
  06450	8b 45 f8	 mov	 eax, DWORD PTR _lpObj$[ebp]
  06453	83 c0 77	 add	 eax, 119		; 00000077H
  06456	50		 push	 eax
  06457	8d 4d e9	 lea	 ecx, DWORD PTR _pMsg$[ebp+17]
  0645a	51		 push	 ecx
  0645b	e8 00 00 00 00	 call	 _memcpy
  06460	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2823 : 	pMsg.btResult2 = 0;

  06463	c6 45 f3 00	 mov	 BYTE PTR _pMsg$[ebp+27], 0

; 2824 : 	pMsg.pos = Ipos;

  06467	8a 45 0c	 mov	 al, BYTE PTR _Ipos$[ebp]
  0646a	88 45 f6	 mov	 BYTE PTR _pMsg$[ebp+30], al

; 2825 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  0646d	6a 20		 push	 32			; 00000020H
  0646f	8d 45 d8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  06472	50		 push	 eax
  06473	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  06478	83 c4 08	 add	 esp, 8
$LN2@EGAnsRegLu@3:

; 2826 : }

  0647b	5f		 pop	 edi
  0647c	5e		 pop	 esi
  0647d	5b		 pop	 ebx
  0647e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  06481	33 cd		 xor	 ecx, ebp
  06483	e8 00 00 00 00	 call	 @__security_check_cookie@4
  06488	8b e5		 mov	 esp, ebp
  0648a	5d		 pop	 ebp
  0648b	c3		 ret	 0
?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z ENDP		; EGAnsRegLuckyCoinItemPosition
_TEXT	ENDS
EXTRN	?CGReqLuckyCoinRegister@@YAXHEHE@Z:PROC		; CGReqLuckyCoinRegister
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = -12						; size = 4
_loc2$ = -8						; size = 4
_aIndex$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z PROC ; EGAnsRegLuckyCoinItemPositionResult

; 2829 : {

  06490	55		 push	 ebp
  06491	8b ec		 mov	 ebp, esp
  06493	83 ec 4c	 sub	 esp, 76			; 0000004cH
  06496	53		 push	 ebx
  06497	56		 push	 esi
  06498	57		 push	 edi

; 2830 : 	int aIndex = lpMsg->iIndex;

  06499	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  0649c	0f bf 48 04	 movsx	 ecx, WORD PTR [eax+4]
  064a0	89 4d fc	 mov	 DWORD PTR _aIndex$[ebp], ecx

; 2831 : 	int loc2 = 0;

  064a3	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _loc2$[ebp], 0

; 2832 : 
; 2833 : 	LPOBJ lpObj = &gObj[aIndex];

  064aa	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  064ad	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  064b3	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  064b9	89 45 f4	 mov	 DWORD PTR _lpObj$[ebp], eax

; 2834 : 
; 2835 : 	if(gObjIsConnected(aIndex) == FALSE)

  064bc	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  064bf	50		 push	 eax
  064c0	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  064c5	83 c4 04	 add	 esp, 4
  064c8	85 c0		 test	 eax, eax
  064ca	75 02		 jne	 SHORT $LN2@EGAnsRegLu@4

; 2836 : 	{
; 2837 : 		return;

  064cc	eb 3f		 jmp	 SHORT $LN3@EGAnsRegLu@4
$LN2@EGAnsRegLu@4:

; 2838 : 	}
; 2839 : 	
; 2840 : 	if(strcmp(lpMsg->szNAME,lpObj->Name))

  064ce	8b 45 f4	 mov	 eax, DWORD PTR _lpObj$[ebp]
  064d1	83 c0 77	 add	 eax, 119		; 00000077H
  064d4	50		 push	 eax
  064d5	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  064d8	83 c1 11	 add	 ecx, 17			; 00000011H
  064db	51		 push	 ecx
  064dc	e8 00 00 00 00	 call	 _strcmp
  064e1	83 c4 08	 add	 esp, 8
  064e4	85 c0		 test	 eax, eax
  064e6	74 02		 je	 SHORT $LN1@EGAnsRegLu@4

; 2841 : 	{
; 2842 : 		return;

  064e8	eb 23		 jmp	 SHORT $LN3@EGAnsRegLu@4
$LN1@EGAnsRegLu@4:

; 2843 : 	}
; 2844 : 
; 2845 : 	CGReqLuckyCoinRegister(aIndex,lpMsg->btResult,lpMsg->iCoinCount,lpMsg->pos);

  064ea	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  064ed	0f b6 48 24	 movzx	 ecx, BYTE PTR [eax+36]
  064f1	51		 push	 ecx
  064f2	8b 55 08	 mov	 edx, DWORD PTR _lpMsg$[ebp]
  064f5	8b 42 20	 mov	 eax, DWORD PTR [edx+32]
  064f8	50		 push	 eax
  064f9	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  064fc	0f b6 51 1e	 movzx	 edx, BYTE PTR [ecx+30]
  06500	52		 push	 edx
  06501	8b 45 fc	 mov	 eax, DWORD PTR _aIndex$[ebp]
  06504	50		 push	 eax
  06505	e8 00 00 00 00	 call	 ?CGReqLuckyCoinRegister@@YAXHEHE@Z ; CGReqLuckyCoinRegister
  0650a	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@EGAnsRegLu@4:

; 2846 : }

  0650d	5f		 pop	 edi
  0650e	5e		 pop	 esi
  0650f	5b		 pop	 ebx
  06510	8b e5		 mov	 esp, ebp
  06512	5d		 pop	 ebp
  06513	c3		 ret	 0
?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ENDP ; EGAnsRegLuckyCoinItemPositionResult
_TEXT	ENDS
PUBLIC	?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; GoldenBoxItemBagOpen
EXTRN	?DropGoldenBoxItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropGoldenBoxItem
EXTRN	?GoldenBoxItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GoldenBoxItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; GoldenBoxItemBagOpen

; 2867 : {

  06520	55		 push	 ebp
  06521	8b ec		 mov	 ebp, esp
  06523	83 ec 40	 sub	 esp, 64			; 00000040H
  06526	53		 push	 ebx
  06527	56		 push	 esi
  06528	57		 push	 edi

; 2868 : 	GoldenBoxItemBag->DropGoldenBoxItem(lpObj->m_Index, btMapNumber, cX, cY);

  06529	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0652d	50		 push	 eax
  0652e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  06532	51		 push	 ecx
  06533	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  06537	52		 push	 edx
  06538	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0653b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0653d	51		 push	 ecx
  0653e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldenBoxItemBag@@3PAVCProbabilityItemBag@@A ; GoldenBoxItemBag
  06544	e8 00 00 00 00	 call	 ?DropGoldenBoxItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropGoldenBoxItem

; 2869 : }

  06549	5f		 pop	 edi
  0654a	5e		 pop	 esi
  0654b	5b		 pop	 ebx
  0654c	8b e5		 mov	 esp, ebp
  0654e	5d		 pop	 ebp
  0654f	c3		 ret	 0
?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; GoldenBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; SilverBoxItemBagOpen
EXTRN	?DropSilverBoxItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropSilverBoxItem
EXTRN	?SilverBoxItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; SilverBoxItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; SilverBoxItemBagOpen

; 2874 : {

  06550	55		 push	 ebp
  06551	8b ec		 mov	 ebp, esp
  06553	83 ec 40	 sub	 esp, 64			; 00000040H
  06556	53		 push	 ebx
  06557	56		 push	 esi
  06558	57		 push	 edi

; 2875 : 	SilverBoxItemBag->DropSilverBoxItem(lpObj->m_Index, btMapNumber, cX, cY);

  06559	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0655d	50		 push	 eax
  0655e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  06562	51		 push	 ecx
  06563	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  06567	52		 push	 edx
  06568	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0656b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0656d	51		 push	 ecx
  0656e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverBoxItemBag@@3PAVCProbabilityItemBag@@A ; SilverBoxItemBag
  06574	e8 00 00 00 00	 call	 ?DropSilverBoxItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropSilverBoxItem

; 2876 : }

  06579	5f		 pop	 edi
  0657a	5e		 pop	 esi
  0657b	5b		 pop	 ebx
  0657c	8b e5		 mov	 esp, ebp
  0657e	5d		 pop	 ebp
  0657f	c3		 ret	 0
?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; SilverBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; ShineJewelleryCaseItemBagOpen
EXTRN	?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropJewelleryCaseItem
EXTRN	?ShineJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; ShineJewelleryCaseItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; ShineJewelleryCaseItemBagOpen

; 2881 : {

  06580	55		 push	 ebp
  06581	8b ec		 mov	 ebp, esp
  06583	83 ec 40	 sub	 esp, 64			; 00000040H
  06586	53		 push	 ebx
  06587	56		 push	 esi
  06588	57		 push	 edi

; 2882 : 	ShineJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  06589	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0658d	50		 push	 eax
  0658e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  06592	51		 push	 ecx
  06593	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  06597	52		 push	 edx
  06598	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0659b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0659d	51		 push	 ecx
  0659e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ShineJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; ShineJewelleryCaseItemBag
  065a4	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2883 : }

  065a9	5f		 pop	 edi
  065aa	5e		 pop	 esi
  065ab	5b		 pop	 ebx
  065ac	8b e5		 mov	 esp, ebp
  065ae	5d		 pop	 ebp
  065af	c3		 ret	 0
?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; ShineJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; RefinedJewelleryCaseItemBagOpen
EXTRN	?RefinedJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; RefinedJewelleryCaseItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; RefinedJewelleryCaseItemBagOpen

; 2888 : {

  065b0	55		 push	 ebp
  065b1	8b ec		 mov	 ebp, esp
  065b3	83 ec 40	 sub	 esp, 64			; 00000040H
  065b6	53		 push	 ebx
  065b7	56		 push	 esi
  065b8	57		 push	 edi

; 2889 : 	RefinedJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  065b9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  065bd	50		 push	 eax
  065be	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  065c2	51		 push	 ecx
  065c3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  065c7	52		 push	 edx
  065c8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  065cb	8b 08		 mov	 ecx, DWORD PTR [eax]
  065cd	51		 push	 ecx
  065ce	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RefinedJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; RefinedJewelleryCaseItemBag
  065d4	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2890 : }

  065d9	5f		 pop	 edi
  065da	5e		 pop	 esi
  065db	5b		 pop	 ebx
  065dc	8b e5		 mov	 esp, ebp
  065de	5d		 pop	 ebp
  065df	c3		 ret	 0
?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; RefinedJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; IronJewelleryCaseItemBagOpen
EXTRN	?IronJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; IronJewelleryCaseItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; IronJewelleryCaseItemBagOpen

; 2895 : {

  065e0	55		 push	 ebp
  065e1	8b ec		 mov	 ebp, esp
  065e3	83 ec 40	 sub	 esp, 64			; 00000040H
  065e6	53		 push	 ebx
  065e7	56		 push	 esi
  065e8	57		 push	 edi

; 2896 : 	IronJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  065e9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  065ed	50		 push	 eax
  065ee	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  065f2	51		 push	 ecx
  065f3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  065f7	52		 push	 edx
  065f8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  065fb	8b 08		 mov	 ecx, DWORD PTR [eax]
  065fd	51		 push	 ecx
  065fe	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?IronJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; IronJewelleryCaseItemBag
  06604	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2897 : }

  06609	5f		 pop	 edi
  0660a	5e		 pop	 esi
  0660b	5b		 pop	 ebx
  0660c	8b e5		 mov	 esp, ebp
  0660e	5d		 pop	 ebp
  0660f	c3		 ret	 0
?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; IronJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; OldJewelleryCaseItemBagOpen
EXTRN	?OldJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; OldJewelleryCaseItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; OldJewelleryCaseItemBagOpen

; 2902 : {

  06610	55		 push	 ebp
  06611	8b ec		 mov	 ebp, esp
  06613	83 ec 40	 sub	 esp, 64			; 00000040H
  06616	53		 push	 ebx
  06617	56		 push	 esi
  06618	57		 push	 edi

; 2903 : 	OldJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  06619	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0661d	50		 push	 eax
  0661e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  06622	51		 push	 ecx
  06623	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  06627	52		 push	 edx
  06628	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0662b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0662d	51		 push	 ecx
  0662e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?OldJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; OldJewelleryCaseItemBag
  06634	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2904 : }

  06639	5f		 pop	 edi
  0663a	5e		 pop	 esi
  0663b	5b		 pop	 ebx
  0663c	8b e5		 mov	 esp, ebp
  0663e	5d		 pop	 ebp
  0663f	c3		 ret	 0
?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; OldJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z ; NewMonsterItemBagOpen
EXTRN	?DropNewMonsterItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropNewMonsterItem
EXTRN	?NewMonsterItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; NewMonsterItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
tv64 = -68						; size = 4
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_nBagNumber$ = 24					; size = 4
?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z PROC	; NewMonsterItemBagOpen

; 2909 : {

  06640	55		 push	 ebp
  06641	8b ec		 mov	 ebp, esp
  06643	83 ec 44	 sub	 esp, 68			; 00000044H
  06646	53		 push	 ebx
  06647	56		 push	 esi
  06648	57		 push	 edi

; 2910 : 	switch(nBagNumber)

  06649	8b 45 18	 mov	 eax, DWORD PTR _nBagNumber$[ebp]
  0664c	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  0664f	83 7d bc 47	 cmp	 DWORD PTR tv64[ebp], 71	; 00000047H
  06653	7c 28		 jl	 SHORT $LN4@NewMonster
  06655	83 7d bc 4b	 cmp	 DWORD PTR tv64[ebp], 75	; 0000004bH
  06659	7e 02		 jle	 SHORT $LN1@NewMonster
  0665b	eb 20		 jmp	 SHORT $LN4@NewMonster
$LN1@NewMonster:

; 2911 : 	{
; 2912 : 	case 71:
; 2913 : 	case 72:
; 2914 : 	case 73:
; 2915 : 	case 74:
; 2916 : 	case 75:
; 2917 : 		NewMonsterItemBag->DropNewMonsterItem(lpObj->m_Index, btMapNumber, cX, cY);

  0665d	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  06661	50		 push	 eax
  06662	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  06666	51		 push	 ecx
  06667	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  0666b	52		 push	 edx
  0666c	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0666f	8b 08		 mov	 ecx, DWORD PTR [eax]
  06671	51		 push	 ecx
  06672	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?NewMonsterItemBag@@3PAVCProbabilityItemBag@@A ; NewMonsterItemBag
  06678	e8 00 00 00 00	 call	 ?DropNewMonsterItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropNewMonsterItem
$LN4@NewMonster:

; 2918 : 		break;
; 2919 : 	}
; 2920 : }

  0667d	5f		 pop	 edi
  0667e	5e		 pop	 esi
  0667f	5b		 pop	 ebx
  06680	8b e5		 mov	 esp, ebp
  06682	5d		 pop	 ebp
  06683	c3		 ret	 0
?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z ENDP	; NewMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; BoxOfGreenColorItemBagOpen
EXTRN	?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropBoxOfGRPColorItem
EXTRN	?BoxOfGreenColorItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; BoxOfGreenColorItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; BoxOfGreenColorItemBagOpen

; 2925 : {

  06690	55		 push	 ebp
  06691	8b ec		 mov	 ebp, esp
  06693	83 ec 40	 sub	 esp, 64			; 00000040H
  06696	53		 push	 ebx
  06697	56		 push	 esi
  06698	57		 push	 edi

; 2926 : 	BoxOfGreenColorItemBag->DropBoxOfGRPColorItem(lpObj->m_Index, btMapNumber, cX, cY);

  06699	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  0669d	50		 push	 eax
  0669e	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  066a2	51		 push	 ecx
  066a3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  066a7	52		 push	 edx
  066a8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  066ab	8b 08		 mov	 ecx, DWORD PTR [eax]
  066ad	51		 push	 ecx
  066ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BoxOfGreenColorItemBag@@3PAVCProbabilityItemBag@@A ; BoxOfGreenColorItemBag
  066b4	e8 00 00 00 00	 call	 ?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropBoxOfGRPColorItem

; 2927 : }

  066b9	5f		 pop	 edi
  066ba	5e		 pop	 esi
  066bb	5b		 pop	 ebx
  066bc	8b e5		 mov	 esp, ebp
  066be	5d		 pop	 ebp
  066bf	c3		 ret	 0
?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; BoxOfGreenColorItemBagOpen
_TEXT	ENDS
PUBLIC	?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; BoxOfRedColorItemBagOpen
EXTRN	?BoxOfRedColorItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; BoxOfRedColorItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; BoxOfRedColorItemBagOpen

; 2932 : {

  066c0	55		 push	 ebp
  066c1	8b ec		 mov	 ebp, esp
  066c3	83 ec 40	 sub	 esp, 64			; 00000040H
  066c6	53		 push	 ebx
  066c7	56		 push	 esi
  066c8	57		 push	 edi

; 2933 : 	BoxOfRedColorItemBag->DropBoxOfGRPColorItem(lpObj->m_Index, btMapNumber, cX, cY);

  066c9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  066cd	50		 push	 eax
  066ce	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  066d2	51		 push	 ecx
  066d3	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  066d7	52		 push	 edx
  066d8	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  066db	8b 08		 mov	 ecx, DWORD PTR [eax]
  066dd	51		 push	 ecx
  066de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BoxOfRedColorItemBag@@3PAVCProbabilityItemBag@@A ; BoxOfRedColorItemBag
  066e4	e8 00 00 00 00	 call	 ?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropBoxOfGRPColorItem

; 2934 : }

  066e9	5f		 pop	 edi
  066ea	5e		 pop	 esi
  066eb	5b		 pop	 ebx
  066ec	8b e5		 mov	 esp, ebp
  066ee	5d		 pop	 ebp
  066ef	c3		 ret	 0
?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; BoxOfRedColorItemBagOpen
_TEXT	ENDS
PUBLIC	?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; BoxOfPurpleColorItemBagOpen
EXTRN	?BoxOfPurpleColorItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; BoxOfPurpleColorItemBag
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; BoxOfPurpleColorItemBagOpen

; 2939 : {

  066f0	55		 push	 ebp
  066f1	8b ec		 mov	 ebp, esp
  066f3	83 ec 40	 sub	 esp, 64			; 00000040H
  066f6	53		 push	 ebx
  066f7	56		 push	 esi
  066f8	57		 push	 edi

; 2940 : 	BoxOfPurpleColorItemBag->DropBoxOfGRPColorItem(lpObj->m_Index, btMapNumber, cX, cY);

  066f9	0f b6 45 14	 movzx	 eax, BYTE PTR _cY$[ebp]
  066fd	50		 push	 eax
  066fe	0f b6 4d 10	 movzx	 ecx, BYTE PTR _cX$[ebp]
  06702	51		 push	 ecx
  06703	0f b6 55 0c	 movzx	 edx, BYTE PTR _btMapNumber$[ebp]
  06707	52		 push	 edx
  06708	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0670b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0670d	51		 push	 ecx
  0670e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BoxOfPurpleColorItemBag@@3PAVCProbabilityItemBag@@A ; BoxOfPurpleColorItemBag
  06714	e8 00 00 00 00	 call	 ?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropBoxOfGRPColorItem

; 2941 : }

  06719	5f		 pop	 edi
  0671a	5e		 pop	 esi
  0671b	5b		 pop	 ebx
  0671c	8b e5		 mov	 esp, ebp
  0671e	5d		 pop	 ebp
  0671f	c3		 ret	 0
?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; BoxOfPurpleColorItemBagOpen
_TEXT	ENDS
END
