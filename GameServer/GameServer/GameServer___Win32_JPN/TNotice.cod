; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	D:\Projects\ExTeam6.3\Source\GameServer\GameServer\TNotice.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Odtp /ZI
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
$LN2@vector:
  00009	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000c	83 e8 01	 sub	 eax, 1
  0000f	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00012	78 11		 js	 SHORT $LN3@vector
  00014	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  00017	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001a	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  0001d	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00020	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00023	eb e4		 jmp	 SHORT $LN2@vector
$LN3@vector:
  00025	5f		 pop	 edi
  00026	5e		 pop	 esi
  00027	5b		 pop	 ebx
  00028	8b e5		 mov	 esp, ebp
  0002a	5d		 pop	 ebp
  0002b	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z		; TNotice::MakeNoticeMsg
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
EXTRN	_strlen:PROC
EXTRN	__imp__wsprintfA:PROC
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\tnotice.cpp
_TEXT	SEGMENT
_pNotice$ = -4						; size = 4
_lpNotice$ = 8						; size = 4
_btType$ = 12						; size = 1
_szNoticeMsg$ = 16					; size = 4
?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z PROC		; TNotice::MakeNoticeMsg

; 9    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 10   : 	PMSG_NOTICE * pNotice = (PMSG_NOTICE *)lpNotice;

  00009	8b 45 08	 mov	 eax, DWORD PTR _lpNotice$[ebp]
  0000c	89 45 fc	 mov	 DWORD PTR _pNotice$[ebp], eax

; 11   : 	pNotice->type  = btType;

  0000f	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  00012	8a 4d 0c	 mov	 cl, BYTE PTR _btType$[ebp]
  00015	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 12   : 
; 13   : 	wsprintf(pNotice->Notice, szNoticeMsg);

  00018	8b 45 10	 mov	 eax, DWORD PTR _szNoticeMsg$[ebp]
  0001b	50		 push	 eax
  0001c	8b 4d fc	 mov	 ecx, DWORD PTR _pNotice$[ebp]
  0001f	83 c1 0d	 add	 ecx, 13			; 0000000dH
  00022	51		 push	 ecx
  00023	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA
  00029	83 c4 08	 add	 esp, 8

; 14   : 	PHeadSetB((LPBYTE)pNotice, 0x0D, strlen(pNotice->Notice) + sizeof(PMSG_NOTICE) - sizeof(pNotice->Notice) + 1 );

  0002c	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  0002f	83 c0 0d	 add	 eax, 13			; 0000000dH
  00032	50		 push	 eax
  00033	e8 00 00 00 00	 call	 _strlen
  00038	83 c4 04	 add	 esp, 4
  0003b	83 c0 11	 add	 eax, 17			; 00000011H
  0003e	50		 push	 eax
  0003f	6a 0d		 push	 13			; 0000000dH
  00041	8b 4d fc	 mov	 ecx, DWORD PTR _pNotice$[ebp]
  00044	51		 push	 ecx
  00045	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0004a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 15   : }

  0004d	5f		 pop	 edi
  0004e	5e		 pop	 esi
  0004f	5b		 pop	 ebx
  00050	8b e5		 mov	 esp, ebp
  00052	5d		 pop	 ebp
  00053	c3		 ret	 0
?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ENDP		; TNotice::MakeNoticeMsg
_TEXT	ENDS
PUBLIC	?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ		; TNotice::MakeNoticeMsgEx
EXTRN	_vsprintf:PROC
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pArguments$ = -8					; size = 4
_pNotice$ = -4						; size = 4
_lpNotice$ = 8						; size = 4
_btType$ = 12						; size = 1
_szNoticeMsg$ = 16					; size = 4
?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ PROC		; TNotice::MakeNoticeMsgEx

; 18   : {

  00060	55		 push	 ebp
  00061	8b ec		 mov	 ebp, esp
  00063	83 ec 48	 sub	 esp, 72			; 00000048H
  00066	53		 push	 ebx
  00067	56		 push	 esi
  00068	57		 push	 edi

; 19   : 	PMSG_NOTICE * pNotice = (PMSG_NOTICE *)lpNotice;

  00069	8b 45 08	 mov	 eax, DWORD PTR _lpNotice$[ebp]
  0006c	89 45 fc	 mov	 DWORD PTR _pNotice$[ebp], eax

; 20   : 	pNotice->type = btType;

  0006f	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  00072	8a 4d 0c	 mov	 cl, BYTE PTR _btType$[ebp]
  00075	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 21   : 
; 22   : 	va_list pArguments;
; 23   : 	va_start(pArguments, szNoticeMsg);

  00078	8d 45 14	 lea	 eax, DWORD PTR _szNoticeMsg$[ebp+4]
  0007b	89 45 f8	 mov	 DWORD PTR _pArguments$[ebp], eax

; 24   : 	vsprintf((char*)pNotice->Notice, (char*)szNoticeMsg, pArguments);

  0007e	8b 45 f8	 mov	 eax, DWORD PTR _pArguments$[ebp]
  00081	50		 push	 eax
  00082	8b 4d 10	 mov	 ecx, DWORD PTR _szNoticeMsg$[ebp]
  00085	51		 push	 ecx
  00086	8b 55 fc	 mov	 edx, DWORD PTR _pNotice$[ebp]
  00089	83 c2 0d	 add	 edx, 13			; 0000000dH
  0008c	52		 push	 edx
  0008d	e8 00 00 00 00	 call	 _vsprintf
  00092	83 c4 0c	 add	 esp, 12			; 0000000cH

; 25   : 	va_end(pArguments);

  00095	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _pArguments$[ebp], 0

; 26   : 
; 27   : 	PHeadSetB((LPBYTE)pNotice, 0x0D, strlen(pNotice->Notice)  + sizeof(PMSG_NOTICE) - sizeof(pNotice->Notice) + 1);

  0009c	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  0009f	83 c0 0d	 add	 eax, 13			; 0000000dH
  000a2	50		 push	 eax
  000a3	e8 00 00 00 00	 call	 _strlen
  000a8	83 c4 04	 add	 esp, 4
  000ab	83 c0 11	 add	 eax, 17			; 00000011H
  000ae	50		 push	 eax
  000af	6a 0d		 push	 13			; 0000000dH
  000b1	8b 4d fc	 mov	 ecx, DWORD PTR _pNotice$[ebp]
  000b4	51		 push	 ecx
  000b5	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  000ba	83 c4 0c	 add	 esp, 12			; 0000000cH

; 28   : }

  000bd	5f		 pop	 edi
  000be	5e		 pop	 esi
  000bf	5b		 pop	 ebx
  000c0	8b e5		 mov	 esp, ebp
  000c2	5d		 pop	 ebp
  000c3	c3		 ret	 0
?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ENDP		; TNotice::MakeNoticeMsgEx
_TEXT	ENDS
PUBLIC	?SetNoticeProperty@TNotice@@SAXPAXEKEGE@Z	; TNotice::SetNoticeProperty
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pNotice$ = -4						; size = 4
_lpNotice$ = 8						; size = 4
_btType$ = 12						; size = 1
_dwColor$ = 16						; size = 4
_btCount$ = 20						; size = 1
_wDelay$ = 24						; size = 2
_btSpeed$ = 28						; size = 1
?SetNoticeProperty@TNotice@@SAXPAXEKEGE@Z PROC		; TNotice::SetNoticeProperty

; 31   : {

  000d0	55		 push	 ebp
  000d1	8b ec		 mov	 ebp, esp
  000d3	83 ec 44	 sub	 esp, 68			; 00000044H
  000d6	53		 push	 ebx
  000d7	56		 push	 esi
  000d8	57		 push	 edi

; 32   : 	PMSG_NOTICE * pNotice =(PMSG_NOTICE *) lpNotice;

  000d9	8b 45 08	 mov	 eax, DWORD PTR _lpNotice$[ebp]
  000dc	89 45 fc	 mov	 DWORD PTR _pNotice$[ebp], eax

; 33   : 
; 34   : 	pNotice->type = btType;

  000df	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  000e2	8a 4d 0c	 mov	 cl, BYTE PTR _btType$[ebp]
  000e5	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 35   : 	pNotice->dwColor = dwColor;

  000e8	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  000eb	8b 4d 10	 mov	 ecx, DWORD PTR _dwColor$[ebp]
  000ee	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 36   : 	pNotice->btCount = btCount;

  000f1	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  000f4	8a 4d 14	 mov	 cl, BYTE PTR _btCount$[ebp]
  000f7	88 48 04	 mov	 BYTE PTR [eax+4], cl

; 37   : 	pNotice->wDelay = wDelay;

  000fa	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  000fd	66 8b 4d 18	 mov	 cx, WORD PTR _wDelay$[ebp]
  00101	66 89 48 06	 mov	 WORD PTR [eax+6], cx

; 38   : 	pNotice->btSpeed = btSpeed;

  00105	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  00108	8a 4d 1c	 mov	 cl, BYTE PTR _btSpeed$[ebp]
  0010b	88 48 0c	 mov	 BYTE PTR [eax+12], cl

; 39   : }

  0010e	5f		 pop	 edi
  0010f	5e		 pop	 esi
  00110	5b		 pop	 ebx
  00111	8b e5		 mov	 esp, ebp
  00113	5d		 pop	 ebp
  00114	c3		 ret	 0
?SetNoticeProperty@TNotice@@SAXPAXEKEGE@Z ENDP		; TNotice::SetNoticeProperty
_TEXT	ENDS
PUBLIC	?SendNoticeToAllUser@TNotice@@SAXPAX@Z		; TNotice::SendNoticeToAllUser
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_n$219019 = -8						; size = 4
_pNotice$ = -4						; size = 4
_lpNotice$ = 8						; size = 4
?SendNoticeToAllUser@TNotice@@SAXPAX@Z PROC		; TNotice::SendNoticeToAllUser

; 42   : {

  00120	55		 push	 ebp
  00121	8b ec		 mov	 ebp, esp
  00123	83 ec 48	 sub	 esp, 72			; 00000048H
  00126	53		 push	 ebx
  00127	56		 push	 esi
  00128	57		 push	 edi

; 43   : 	PMSG_NOTICE * pNotice = (PMSG_NOTICE *)lpNotice;

  00129	8b 45 08	 mov	 eax, DWORD PTR _lpNotice$[ebp]
  0012c	89 45 fc	 mov	 DWORD PTR _pNotice$[ebp], eax

; 44   : 
; 45   : 	for ( int n = OBJ_STARTUSERINDEX ; n < OBJMAX ; n++)

  0012f	c7 45 f8 b0 36
	00 00		 mov	 DWORD PTR _n$219019[ebp], 14000 ; 000036b0H
  00136	eb 09		 jmp	 SHORT $LN5@SendNotice
$LN4@SendNotice:
  00138	8b 45 f8	 mov	 eax, DWORD PTR _n$219019[ebp]
  0013b	83 c0 01	 add	 eax, 1
  0013e	89 45 f8	 mov	 DWORD PTR _n$219019[ebp], eax
$LN5@SendNotice:
  00141	81 7d f8 98 3a
	00 00		 cmp	 DWORD PTR _n$219019[ebp], 15000 ; 00003a98H
  00148	7d 49		 jge	 SHORT $LN6@SendNotice

; 46   : 	{
; 47   : 		if ( gObj[n].Connected == PLAYER_PLAYING )

  0014a	8b 45 f8	 mov	 eax, DWORD PTR _n$219019[ebp]
  0014d	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00153	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00159	83 7c 01 04 03	 cmp	 DWORD PTR [ecx+eax+4], 3
  0015e	75 31		 jne	 SHORT $LN2@SendNotice

; 48   : 		{
; 49   : 			if ( gObj[n].Type  == OBJ_USER )

  00160	8b 45 f8	 mov	 eax, DWORD PTR _n$219019[ebp]
  00163	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00169	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0016f	0f b7 54 01 68	 movzx	 edx, WORD PTR [ecx+eax+104]
  00174	83 fa 01	 cmp	 edx, 1
  00177	75 18		 jne	 SHORT $LN2@SendNotice

; 50   : 			{
; 51   : 				DataSend(n, (LPBYTE)pNotice  , pNotice->h.size  );

  00179	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  0017c	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  00180	51		 push	 ecx
  00181	8b 55 fc	 mov	 edx, DWORD PTR _pNotice$[ebp]
  00184	52		 push	 edx
  00185	8b 45 f8	 mov	 eax, DWORD PTR _n$219019[ebp]
  00188	50		 push	 eax
  00189	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0018e	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@SendNotice:

; 52   : 			}
; 53   : 		}
; 54   : 	}

  00191	eb a5		 jmp	 SHORT $LN4@SendNotice
$LN6@SendNotice:

; 55   : }

  00193	5f		 pop	 edi
  00194	5e		 pop	 esi
  00195	5b		 pop	 ebx
  00196	8b e5		 mov	 esp, ebp
  00198	5d		 pop	 ebp
  00199	c3		 ret	 0
?SendNoticeToAllUser@TNotice@@SAXPAX@Z ENDP		; TNotice::SendNoticeToAllUser
_TEXT	ENDS
PUBLIC	?SendNoticeToUser@TNotice@@SAXHPAX@Z		; TNotice::SendNoticeToUser
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pNotice$ = -4						; size = 4
_aIndex$ = 8						; size = 4
_lpNotice$ = 12						; size = 4
?SendNoticeToUser@TNotice@@SAXHPAX@Z PROC		; TNotice::SendNoticeToUser

; 58   : {

  001a0	55		 push	 ebp
  001a1	8b ec		 mov	 ebp, esp
  001a3	83 ec 44	 sub	 esp, 68			; 00000044H
  001a6	53		 push	 ebx
  001a7	56		 push	 esi
  001a8	57		 push	 edi

; 59   : 	PMSG_NOTICE * pNotice = (PMSG_NOTICE *)lpNotice;

  001a9	8b 45 0c	 mov	 eax, DWORD PTR _lpNotice$[ebp]
  001ac	89 45 fc	 mov	 DWORD PTR _pNotice$[ebp], eax

; 60   : 	DataSend(aIndex, (LPBYTE)pNotice, pNotice->h.size  );

  001af	8b 45 fc	 mov	 eax, DWORD PTR _pNotice$[ebp]
  001b2	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  001b6	51		 push	 ecx
  001b7	8b 55 fc	 mov	 edx, DWORD PTR _pNotice$[ebp]
  001ba	52		 push	 edx
  001bb	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  001be	50		 push	 eax
  001bf	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  001c4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 61   : }

  001c7	5f		 pop	 edi
  001c8	5e		 pop	 esi
  001c9	5b		 pop	 ebx
  001ca	8b e5		 mov	 esp, ebp
  001cc	5d		 pop	 ebp
  001cd	c3		 ret	 0
?SendNoticeToUser@TNotice@@SAXHPAX@Z ENDP		; TNotice::SendNoticeToUser
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?AllSendServerMsg@TNotice@@SAXPAD@Z		; TNotice::AllSendServerMsg
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_n$219038 = -280					; size = 4
_pNotice$ = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_chatmsg$ = 8						; size = 4
?AllSendServerMsg@TNotice@@SAXPAD@Z PROC		; TNotice::AllSendServerMsg

; 64   : {

  001d0	55		 push	 ebp
  001d1	8b ec		 mov	 ebp, esp
  001d3	81 ec 58 01 00
	00		 sub	 esp, 344		; 00000158H
  001d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  001de	33 c5		 xor	 eax, ebp
  001e0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  001e3	53		 push	 ebx
  001e4	56		 push	 esi
  001e5	57		 push	 edi

; 65   : 	PMSG_NOTICE pNotice;
; 66   : 	
; 67   : 	MakeNoticeMsg((TNotice *)&pNotice, 0,  chatmsg);

  001e6	8b 45 08	 mov	 eax, DWORD PTR _chatmsg$[ebp]
  001e9	50		 push	 eax
  001ea	6a 00		 push	 0
  001ec	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  001f2	51		 push	 ecx
  001f3	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  001f8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 68   : 
; 69   : 	for ( int n = OBJ_STARTUSERINDEX ; n < OBJMAX ; n++)

  001fb	c7 85 e8 fe ff
	ff b0 36 00 00	 mov	 DWORD PTR _n$219038[ebp], 14000 ; 000036b0H
  00205	eb 0f		 jmp	 SHORT $LN5@AllSendSer
$LN4@AllSendSer:
  00207	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$219038[ebp]
  0020d	83 c0 01	 add	 eax, 1
  00210	89 85 e8 fe ff
	ff		 mov	 DWORD PTR _n$219038[ebp], eax
$LN5@AllSendSer:
  00216	81 bd e8 fe ff
	ff 98 3a 00 00	 cmp	 DWORD PTR _n$219038[ebp], 15000 ; 00003a98H
  00220	7d 55		 jge	 SHORT $LN6@AllSendSer

; 70   : 	{
; 71   : 		if ( gObj[n].Connected == PLAYER_PLAYING )

  00222	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$219038[ebp]
  00228	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  0022e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00234	83 7c 01 04 03	 cmp	 DWORD PTR [ecx+eax+4], 3
  00239	75 3a		 jne	 SHORT $LN2@AllSendSer

; 72   : 		{
; 73   : 			if ( gObj[n].Type  == OBJ_USER )

  0023b	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$219038[ebp]
  00241	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  00247	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0024d	0f b7 54 01 68	 movzx	 edx, WORD PTR [ecx+eax+104]
  00252	83 fa 01	 cmp	 edx, 1
  00255	75 1e		 jne	 SHORT $LN2@AllSendSer

; 74   : 			{
; 75   : 				DataSend(n, (LPBYTE)&pNotice , pNotice.h.size );

  00257	0f b6 85 ed fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  0025e	50		 push	 eax
  0025f	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  00265	51		 push	 ecx
  00266	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR _n$219038[ebp]
  0026c	52		 push	 edx
  0026d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00272	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@AllSendSer:

; 76   : 			}
; 77   : 		}
; 78   : 	}

  00275	eb 90		 jmp	 SHORT $LN4@AllSendSer
$LN6@AllSendSer:

; 79   : }

  00277	5f		 pop	 edi
  00278	5e		 pop	 esi
  00279	5b		 pop	 ebx
  0027a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0027d	33 cd		 xor	 ecx, ebp
  0027f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00284	8b e5		 mov	 esp, ebp
  00286	5d		 pop	 ebp
  00287	c3		 ret	 0
?AllSendServerMsg@TNotice@@SAXPAD@Z ENDP		; TNotice::AllSendServerMsg
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GCServerMsgStringSend@TNotice@@SAXPADHE@Z	; TNotice::GCServerMsgStringSend
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pNotice$ = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
_szMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
_type$ = 16						; size = 1
?GCServerMsgStringSend@TNotice@@SAXPADHE@Z PROC		; TNotice::GCServerMsgStringSend

; 82   : {

  00290	55		 push	 ebp
  00291	8b ec		 mov	 ebp, esp
  00293	81 ec 54 01 00
	00		 sub	 esp, 340		; 00000154H
  00299	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0029e	33 c5		 xor	 eax, ebp
  002a0	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  002a3	53		 push	 ebx
  002a4	56		 push	 esi
  002a5	57		 push	 edi

; 83   : 	PMSG_NOTICE pNotice;
; 84   : 	
; 85   : 	MakeNoticeMsg(&pNotice, type, szMsg);

  002a6	8b 45 08	 mov	 eax, DWORD PTR _szMsg$[ebp]
  002a9	50		 push	 eax
  002aa	0f b6 4d 10	 movzx	 ecx, BYTE PTR _type$[ebp]
  002ae	51		 push	 ecx
  002af	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$[ebp]
  002b5	52		 push	 edx
  002b6	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg
  002bb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 86   : 	DataSend(aIndex, (LPBYTE)&pNotice, pNotice.h.size);

  002be	0f b6 85 ed fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  002c5	50		 push	 eax
  002c6	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  002cc	51		 push	 ecx
  002cd	8b 55 0c	 mov	 edx, DWORD PTR _aIndex$[ebp]
  002d0	52		 push	 edx
  002d1	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  002d6	83 c4 0c	 add	 esp, 12			; 0000000cH

; 87   : }

  002d9	5f		 pop	 edi
  002da	5e		 pop	 esi
  002db	5b		 pop	 ebx
  002dc	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002df	33 cd		 xor	 ecx, ebp
  002e1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002e6	8b e5		 mov	 esp, ebp
  002e8	5d		 pop	 ebp
  002e9	c3		 ret	 0
?GCServerMsgStringSend@TNotice@@SAXPADHE@Z ENDP		; TNotice::GCServerMsgStringSend
_TEXT	ENDS
PUBLIC	?_ARGB@@YAKEEEE@Z				; _ARGB
PUBLIC	??0TNotice@@QAE@E@Z				; TNotice::TNotice
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_this$ = -4						; size = 4
_btType$ = 8						; size = 1
??0TNotice@@QAE@E@Z PROC				; TNotice::TNotice
; _this$ = ecx

; 90   : {

  002f0	55		 push	 ebp
  002f1	8b ec		 mov	 ebp, esp
  002f3	83 ec 44	 sub	 esp, 68			; 00000044H
  002f6	53		 push	 ebx
  002f7	56		 push	 esi
  002f8	57		 push	 edi
  002f9	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 91   : 	this->m_Notice.btCount = 1;

  002fc	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  002ff	c6 40 04 01	 mov	 BYTE PTR [eax+4], 1

; 92   : 	this->m_Notice.btSpeed = 20;

  00303	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00306	c6 40 0c 14	 mov	 BYTE PTR [eax+12], 20	; 00000014H

; 93   : 	this->m_Notice.dwColor = _ARGB(255, 255, 200, 80 );

  0030a	6a 50		 push	 80			; 00000050H
  0030c	68 c8 00 00 00	 push	 200			; 000000c8H
  00311	68 ff 00 00 00	 push	 255			; 000000ffH
  00316	68 ff 00 00 00	 push	 255			; 000000ffH
  0031b	e8 00 00 00 00	 call	 ?_ARGB@@YAKEEEE@Z	; _ARGB
  00320	83 c4 10	 add	 esp, 16			; 00000010H
  00323	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00326	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 94   : 	this->m_Notice.wDelay = 0;

  00329	33 c0		 xor	 eax, eax
  0032b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0032e	66 89 41 06	 mov	 WORD PTR [ecx+6], ax

; 95   : 	this->m_Notice.type = btType;

  00332	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00335	8a 4d 08	 mov	 cl, BYTE PTR _btType$[ebp]
  00338	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 96   : }

  0033b	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0033e	5f		 pop	 edi
  0033f	5e		 pop	 esi
  00340	5b		 pop	 ebx
  00341	8b e5		 mov	 esp, ebp
  00343	5d		 pop	 ebp
  00344	c2 04 00	 ret	 4
??0TNotice@@QAE@E@Z ENDP				; TNotice::TNotice
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\tnotice.h
_TEXT	ENDS
;	COMDAT ?_ARGB@@YAKEEEE@Z
_TEXT	SEGMENT
_a$ = 8							; size = 1
_r$ = 12						; size = 1
_g$ = 16						; size = 1
_b$ = 20						; size = 1
?_ARGB@@YAKEEEE@Z PROC					; _ARGB, COMDAT

; 9    : __inline DWORD _ARGB(BYTE a, BYTE r, BYTE g, BYTE b){ return a*16777216 + b*65536 + g*256 + r;}; // in tnotice.h : line 8

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	0f b6 45 08	 movzx	 eax, BYTE PTR _a$[ebp]
  0000d	c1 e0 18	 shl	 eax, 24			; 00000018H
  00010	0f b6 4d 14	 movzx	 ecx, BYTE PTR _b$[ebp]
  00014	c1 e1 10	 shl	 ecx, 16			; 00000010H
  00017	03 c1		 add	 eax, ecx
  00019	0f b6 55 10	 movzx	 edx, BYTE PTR _g$[ebp]
  0001d	c1 e2 08	 shl	 edx, 8
  00020	03 c2		 add	 eax, edx
  00022	0f b6 4d 0c	 movzx	 ecx, BYTE PTR _r$[ebp]
  00026	03 c1		 add	 eax, ecx
  00028	5f		 pop	 edi
  00029	5e		 pop	 esi
  0002a	5b		 pop	 ebx
  0002b	8b e5		 mov	 esp, ebp
  0002d	5d		 pop	 ebp
  0002e	c3		 ret	 0
?_ARGB@@YAKEEEE@Z ENDP					; _ARGB
_TEXT	ENDS
PUBLIC	?SendToAllUser@TNotice@@QAAXPADZZ		; TNotice::SendToAllUser
; Function compile flags: /Odtp /ZI
; File d:\projects\exteam6.3\source\gameserver\gameserver\tnotice.cpp
_TEXT	SEGMENT
_n$219070 = -8						; size = 4
_pArguments$ = -4					; size = 4
_this$ = 8						; size = 4
_szMsg$ = 12						; size = 4
?SendToAllUser@TNotice@@QAAXPADZZ PROC			; TNotice::SendToAllUser

; 99   : {

  00350	55		 push	 ebp
  00351	8b ec		 mov	 ebp, esp
  00353	83 ec 48	 sub	 esp, 72			; 00000048H
  00356	53		 push	 ebx
  00357	56		 push	 esi
  00358	57		 push	 edi

; 100  : 	va_list pArguments;
; 101  : 	va_start(pArguments, szMsg);

  00359	8d 45 10	 lea	 eax, DWORD PTR _szMsg$[ebp+4]
  0035c	89 45 fc	 mov	 DWORD PTR _pArguments$[ebp], eax

; 102  : 	vsprintf(this->m_Notice.Notice, (char*)szMsg, pArguments);

  0035f	8b 45 fc	 mov	 eax, DWORD PTR _pArguments$[ebp]
  00362	50		 push	 eax
  00363	8b 4d 0c	 mov	 ecx, DWORD PTR _szMsg$[ebp]
  00366	51		 push	 ecx
  00367	8b 55 08	 mov	 edx, DWORD PTR _this$[ebp]
  0036a	83 c2 0d	 add	 edx, 13			; 0000000dH
  0036d	52		 push	 edx
  0036e	e8 00 00 00 00	 call	 _vsprintf
  00373	83 c4 0c	 add	 esp, 12			; 0000000cH

; 103  : 	va_end(pArguments);

  00376	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _pArguments$[ebp], 0

; 104  : 
; 105  : 	PHeadSetB((LPBYTE)&this->m_Notice, 0x0D, strlen(this->m_Notice.Notice)  + sizeof(PMSG_NOTICE) - sizeof(this->m_Notice.Notice) + 1);

  0037d	8b 45 08	 mov	 eax, DWORD PTR _this$[ebp]
  00380	83 c0 0d	 add	 eax, 13			; 0000000dH
  00383	50		 push	 eax
  00384	e8 00 00 00 00	 call	 _strlen
  00389	83 c4 04	 add	 esp, 4
  0038c	83 c0 11	 add	 eax, 17			; 00000011H
  0038f	50		 push	 eax
  00390	6a 0d		 push	 13			; 0000000dH
  00392	8b 4d 08	 mov	 ecx, DWORD PTR _this$[ebp]
  00395	51		 push	 ecx
  00396	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0039b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 106  : 
; 107  : 	for ( int n = OBJ_STARTUSERINDEX ; n < OBJMAX ; n++)

  0039e	c7 45 f8 b0 36
	00 00		 mov	 DWORD PTR _n$219070[ebp], 14000 ; 000036b0H
  003a5	eb 09		 jmp	 SHORT $LN5@SendToAllU
$LN4@SendToAllU:
  003a7	8b 45 f8	 mov	 eax, DWORD PTR _n$219070[ebp]
  003aa	83 c0 01	 add	 eax, 1
  003ad	89 45 f8	 mov	 DWORD PTR _n$219070[ebp], eax
$LN5@SendToAllU:
  003b0	81 7d f8 98 3a
	00 00		 cmp	 DWORD PTR _n$219070[ebp], 15000 ; 00003a98H
  003b7	7d 49		 jge	 SHORT $LN6@SendToAllU

; 108  : 	{
; 109  : 		if ( gObj[n].Connected == PLAYER_PLAYING )

  003b9	8b 45 f8	 mov	 eax, DWORD PTR _n$219070[ebp]
  003bc	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  003c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003c8	83 7c 01 04 03	 cmp	 DWORD PTR [ecx+eax+4], 3
  003cd	75 31		 jne	 SHORT $LN2@SendToAllU

; 110  : 		{
; 111  : 			if ( gObj[n].Type  == OBJ_USER )

  003cf	8b 45 f8	 mov	 eax, DWORD PTR _n$219070[ebp]
  003d2	69 c0 38 2b 00
	00		 imul	 eax, 11064		; 00002b38H
  003d8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003de	0f b7 54 01 68	 movzx	 edx, WORD PTR [ecx+eax+104]
  003e3	83 fa 01	 cmp	 edx, 1
  003e6	75 18		 jne	 SHORT $LN2@SendToAllU

; 112  : 			{
; 113  : 				DataSend(n, (LPBYTE)&this->m_Notice , this->m_Notice.h.size );

  003e8	8b 45 08	 mov	 eax, DWORD PTR _this$[ebp]
  003eb	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  003ef	51		 push	 ecx
  003f0	8b 55 08	 mov	 edx, DWORD PTR _this$[ebp]
  003f3	52		 push	 edx
  003f4	8b 45 f8	 mov	 eax, DWORD PTR _n$219070[ebp]
  003f7	50		 push	 eax
  003f8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  003fd	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@SendToAllU:

; 114  : 			}
; 115  : 		}
; 116  : 	}

  00400	eb a5		 jmp	 SHORT $LN4@SendToAllU
$LN6@SendToAllU:

; 117  : }

  00402	5f		 pop	 edi
  00403	5e		 pop	 esi
  00404	5b		 pop	 ebx
  00405	8b e5		 mov	 esp, ebp
  00407	5d		 pop	 ebp
  00408	c3		 ret	 0
?SendToAllUser@TNotice@@QAAXPADZZ ENDP			; TNotice::SendToAllUser
_TEXT	ENDS
PUBLIC	?SendToUser@TNotice@@QAAXHPADZZ			; TNotice::SendToUser
; Function compile flags: /Odtp /ZI
_TEXT	SEGMENT
_pArguments$ = -4					; size = 4
_this$ = 8						; size = 4
_aIndex$ = 12						; size = 4
_szMsg$ = 16						; size = 4
?SendToUser@TNotice@@QAAXHPADZZ PROC			; TNotice::SendToUser

; 120  : {

  00410	55		 push	 ebp
  00411	8b ec		 mov	 ebp, esp
  00413	83 ec 44	 sub	 esp, 68			; 00000044H
  00416	53		 push	 ebx
  00417	56		 push	 esi
  00418	57		 push	 edi

; 121  : 	va_list pArguments;
; 122  : 	va_start(pArguments, szMsg);

  00419	8d 45 14	 lea	 eax, DWORD PTR _szMsg$[ebp+4]
  0041c	89 45 fc	 mov	 DWORD PTR _pArguments$[ebp], eax

; 123  : 
; 124  : 	vsprintf(this->m_Notice.Notice, (char*)szMsg, pArguments);

  0041f	8b 45 fc	 mov	 eax, DWORD PTR _pArguments$[ebp]
  00422	50		 push	 eax
  00423	8b 4d 10	 mov	 ecx, DWORD PTR _szMsg$[ebp]
  00426	51		 push	 ecx
  00427	8b 55 08	 mov	 edx, DWORD PTR _this$[ebp]
  0042a	83 c2 0d	 add	 edx, 13			; 0000000dH
  0042d	52		 push	 edx
  0042e	e8 00 00 00 00	 call	 _vsprintf
  00433	83 c4 0c	 add	 esp, 12			; 0000000cH

; 125  : 	va_end(pArguments);

  00436	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _pArguments$[ebp], 0

; 126  : 
; 127  : 	PHeadSetB((LPBYTE)&this->m_Notice, 0x0D, strlen(this->m_Notice.Notice)  + sizeof(PMSG_NOTICE) - sizeof(this->m_Notice.Notice) + 1);

  0043d	8b 45 08	 mov	 eax, DWORD PTR _this$[ebp]
  00440	83 c0 0d	 add	 eax, 13			; 0000000dH
  00443	50		 push	 eax
  00444	e8 00 00 00 00	 call	 _strlen
  00449	83 c4 04	 add	 esp, 4
  0044c	83 c0 11	 add	 eax, 17			; 00000011H
  0044f	50		 push	 eax
  00450	6a 0d		 push	 13			; 0000000dH
  00452	8b 4d 08	 mov	 ecx, DWORD PTR _this$[ebp]
  00455	51		 push	 ecx
  00456	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB
  0045b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 128  : 	DataSend(aIndex, (LPBYTE)&this->m_Notice , this->m_Notice.h.size );

  0045e	8b 45 08	 mov	 eax, DWORD PTR _this$[ebp]
  00461	0f b6 48 01	 movzx	 ecx, BYTE PTR [eax+1]
  00465	51		 push	 ecx
  00466	8b 55 08	 mov	 edx, DWORD PTR _this$[ebp]
  00469	52		 push	 edx
  0046a	8b 45 0c	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0046d	50		 push	 eax
  0046e	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00473	83 c4 0c	 add	 esp, 12			; 0000000cH

; 129  : 
; 130  : }

  00476	5f		 pop	 edi
  00477	5e		 pop	 esi
  00478	5b		 pop	 ebx
  00479	8b e5		 mov	 esp, ebp
  0047b	5d		 pop	 ebp
  0047c	c3		 ret	 0
?SendToUser@TNotice@@QAAXHPADZZ ENDP			; TNotice::SendToUser
_TEXT	ENDS
END
